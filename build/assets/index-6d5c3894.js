function Bv(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Hv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Am={exports:{}},ul={},Tm={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var no=Symbol.for("react.element"),$v=Symbol.for("react.portal"),zv=Symbol.for("react.fragment"),Vv=Symbol.for("react.strict_mode"),Yv=Symbol.for("react.profiler"),qv=Symbol.for("react.provider"),Qv=Symbol.for("react.context"),Xv=Symbol.for("react.forward_ref"),Jv=Symbol.for("react.suspense"),Zv=Symbol.for("react.memo"),e0=Symbol.for("react.lazy"),eh=Symbol.iterator;function t0(t){return t===null||typeof t!="object"?null:(t=eh&&t[eh]||t["@@iterator"],typeof t=="function"?t:null)}var Nm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xm=Object.assign,km={};function Ms(t,e,n){this.props=t,this.context=e,this.refs=km,this.updater=n||Nm}Ms.prototype.isReactComponent={};Ms.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ms.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Lm(){}Lm.prototype=Ms.prototype;function sd(t,e,n){this.props=t,this.context=e,this.refs=km,this.updater=n||Nm}var id=sd.prototype=new Lm;id.constructor=sd;xm(id,Ms.prototype);id.isPureReactComponent=!0;var th=Array.isArray,Pm=Object.prototype.hasOwnProperty,od={current:null},Om={key:!0,ref:!0,__self:!0,__source:!0};function Dm(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Pm.call(e,r)&&!Om.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:no,type:t,key:i,ref:o,props:s,_owner:od.current}}function n0(t,e){return{$$typeof:no,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ad(t){return typeof t=="object"&&t!==null&&t.$$typeof===no}function r0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var nh=/\/+/g;function Ql(t,e){return typeof t=="object"&&t!==null&&t.key!=null?r0(""+t.key):e.toString(36)}function qo(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case no:case $v:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Ql(o,0):r,th(s)?(n="",t!=null&&(n=t.replace(nh,"$&/")+"/"),qo(s,e,n,"",function(u){return u})):s!=null&&(ad(s)&&(s=n0(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(nh,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",th(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Ql(i,a);o+=qo(i,e,n,l,s)}else if(l=t0(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Ql(i,a++),o+=qo(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function So(t,e,n){if(t==null)return t;var r=[],s=0;return qo(t,r,"","",function(i){return e.call(n,i,s++)}),r}function s0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _t={current:null},Qo={transition:null},i0={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:Qo,ReactCurrentOwner:od};oe.Children={map:So,forEach:function(t,e,n){So(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return So(t,function(){e++}),e},toArray:function(t){return So(t,function(e){return e})||[]},only:function(t){if(!ad(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Component=Ms;oe.Fragment=zv;oe.Profiler=Yv;oe.PureComponent=sd;oe.StrictMode=Vv;oe.Suspense=Jv;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=i0;oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=xm({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=od.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Pm.call(e,l)&&!Om.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:no,type:t.type,key:s,ref:i,props:r,_owner:o}};oe.createContext=function(t){return t={$$typeof:Qv,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:qv,_context:t},t.Consumer=t};oe.createElement=Dm;oe.createFactory=function(t){var e=Dm.bind(null,t);return e.type=t,e};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:Xv,render:t}};oe.isValidElement=ad;oe.lazy=function(t){return{$$typeof:e0,_payload:{_status:-1,_result:t},_init:s0}};oe.memo=function(t,e){return{$$typeof:Zv,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=Qo.transition;Qo.transition={};try{t()}finally{Qo.transition=e}};oe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};oe.useCallback=function(t,e){return _t.current.useCallback(t,e)};oe.useContext=function(t){return _t.current.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t){return _t.current.useDeferredValue(t)};oe.useEffect=function(t,e){return _t.current.useEffect(t,e)};oe.useId=function(){return _t.current.useId()};oe.useImperativeHandle=function(t,e,n){return _t.current.useImperativeHandle(t,e,n)};oe.useInsertionEffect=function(t,e){return _t.current.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return _t.current.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return _t.current.useMemo(t,e)};oe.useReducer=function(t,e,n){return _t.current.useReducer(t,e,n)};oe.useRef=function(t){return _t.current.useRef(t)};oe.useState=function(t){return _t.current.useState(t)};oe.useSyncExternalStore=function(t,e,n){return _t.current.useSyncExternalStore(t,e,n)};oe.useTransition=function(){return _t.current.useTransition()};oe.version="18.2.0";Tm.exports=oe;var P=Tm.exports;const bm=Hv(P),o0=Bv({__proto__:null,default:bm},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a0=P,l0=Symbol.for("react.element"),u0=Symbol.for("react.fragment"),c0=Object.prototype.hasOwnProperty,d0=a0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f0={key:!0,ref:!0,__self:!0,__source:!0};function Mm(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)c0.call(e,r)&&!f0.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:l0,type:t,key:i,ref:o,props:s,_owner:d0.current}}ul.Fragment=u0;ul.jsx=Mm;ul.jsxs=Mm;Am.exports=ul;var m=Am.exports,Ku={},jm={exports:{}},Pt={},Um={exports:{}},Fm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,q){var z=G.length;G.push(q);e:for(;0<z;){var fe=z-1>>>1,Te=G[fe];if(0<s(Te,q))G[fe]=q,G[z]=Te,z=fe;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var q=G[0],z=G.pop();if(z!==q){G[0]=z;e:for(var fe=0,Te=G.length,w=Te>>>1;fe<w;){var L=2*(fe+1)-1,D=G[L],M=L+1,j=G[M];if(0>s(D,z))M<Te&&0>s(j,D)?(G[fe]=j,G[M]=z,fe=M):(G[fe]=D,G[L]=z,fe=L);else if(M<Te&&0>s(j,z))G[fe]=j,G[M]=z,fe=M;else break e}}return q}function s(G,q){var z=G.sortIndex-q.sortIndex;return z!==0?z:G.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,d=null,c=3,_=!1,C=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(G){for(var q=n(u);q!==null;){if(q.callback===null)r(u);else if(q.startTime<=G)r(u),q.sortIndex=q.expirationTime,e(l,q);else break;q=n(u)}}function T(G){if(v=!1,g(G),!C)if(n(l)!==null)C=!0,tt(S);else{var q=n(u);q!==null&&Ce(T,q.startTime-G)}}function S(G,q){C=!1,v&&(v=!1,f(N),N=-1),_=!0;var z=c;try{for(g(q),d=n(l);d!==null&&(!(d.expirationTime>q)||G&&!Y());){var fe=d.callback;if(typeof fe=="function"){d.callback=null,c=d.priorityLevel;var Te=fe(d.expirationTime<=q);q=t.unstable_now(),typeof Te=="function"?d.callback=Te:d===n(l)&&r(l),g(q)}else r(l);d=n(l)}if(d!==null)var w=!0;else{var L=n(u);L!==null&&Ce(T,L.startTime-q),w=!1}return w}finally{d=null,c=z,_=!1}}var O=!1,k=null,N=-1,F=5,W=-1;function Y(){return!(t.unstable_now()-W<F)}function Ae(){if(k!==null){var G=t.unstable_now();W=G;var q=!0;try{q=k(!0,G)}finally{q?Ue():(O=!1,k=null)}}else O=!1}var Ue;if(typeof p=="function")Ue=function(){p(Ae)};else if(typeof MessageChannel<"u"){var it=new MessageChannel,Tt=it.port2;it.port1.onmessage=Ae,Ue=function(){Tt.postMessage(null)}}else Ue=function(){x(Ae,0)};function tt(G){k=G,O||(O=!0,Ue())}function Ce(G,q){N=x(function(){G(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){C||_||(C=!0,tt(S))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return c},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(G){switch(c){case 1:case 2:case 3:var q=3;break;default:q=c}var z=c;c=q;try{return G()}finally{c=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,q){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var z=c;c=G;try{return q()}finally{c=z}},t.unstable_scheduleCallback=function(G,q,z){var fe=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?fe+z:fe):z=fe,G){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=z+Te,G={id:h++,callback:q,priorityLevel:G,startTime:z,expirationTime:Te,sortIndex:-1},z>fe?(G.sortIndex=z,e(u,G),n(l)===null&&G===n(u)&&(v?(f(N),N=-1):v=!0,Ce(T,z-fe))):(G.sortIndex=Te,e(l,G),C||_||(C=!0,tt(S))),G},t.unstable_shouldYield=Y,t.unstable_wrapCallback=function(G){var q=c;return function(){var z=c;c=q;try{return G.apply(this,arguments)}finally{c=z}}}})(Fm);Um.exports=Fm;var h0=Um.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wm=P,Lt=h0;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Km=new Set,Ai={};function $r(t,e){Rs(t,e),Rs(t+"Capture",e)}function Rs(t,e){for(Ai[t]=e,t=0;t<e.length;t++)Km.add(e[t])}var Sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gu=Object.prototype.hasOwnProperty,p0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rh={},sh={};function m0(t){return Gu.call(sh,t)?!0:Gu.call(rh,t)?!1:p0.test(t)?sh[t]=!0:(rh[t]=!0,!1)}function _0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function g0(t,e,n,r){if(e===null||typeof e>"u"||_0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){st[t]=new gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];st[e]=new gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){st[t]=new gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){st[t]=new gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){st[t]=new gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){st[t]=new gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){st[t]=new gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){st[t]=new gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){st[t]=new gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var ld=/[\-:]([a-z])/g;function ud(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ld,ud);st[e]=new gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ld,ud);st[e]=new gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ld,ud);st[e]=new gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){st[t]=new gt(t,1,!1,t.toLowerCase(),null,!1,!1)});st.xlinkHref=new gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){st[t]=new gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function cd(t,e,n,r){var s=st.hasOwnProperty(e)?st[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(g0(e,n,s,r)&&(n=null),r||s===null?m0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ln=Wm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Io=Symbol.for("react.element"),Jr=Symbol.for("react.portal"),Zr=Symbol.for("react.fragment"),dd=Symbol.for("react.strict_mode"),Bu=Symbol.for("react.profiler"),Gm=Symbol.for("react.provider"),Bm=Symbol.for("react.context"),fd=Symbol.for("react.forward_ref"),Hu=Symbol.for("react.suspense"),$u=Symbol.for("react.suspense_list"),hd=Symbol.for("react.memo"),jn=Symbol.for("react.lazy"),Hm=Symbol.for("react.offscreen"),ih=Symbol.iterator;function Qs(t){return t===null||typeof t!="object"?null:(t=ih&&t[ih]||t["@@iterator"],typeof t=="function"?t:null)}var be=Object.assign,Xl;function li(t){if(Xl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Xl=e&&e[1]||""}return`
`+Xl+t}var Jl=!1;function Zl(t,e){if(!t||Jl)return"";Jl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Jl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?li(t):""}function y0(t){switch(t.tag){case 5:return li(t.type);case 16:return li("Lazy");case 13:return li("Suspense");case 19:return li("SuspenseList");case 0:case 2:case 15:return t=Zl(t.type,!1),t;case 11:return t=Zl(t.type.render,!1),t;case 1:return t=Zl(t.type,!0),t;default:return""}}function zu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Zr:return"Fragment";case Jr:return"Portal";case Bu:return"Profiler";case dd:return"StrictMode";case Hu:return"Suspense";case $u:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Bm:return(t.displayName||"Context")+".Consumer";case Gm:return(t._context.displayName||"Context")+".Provider";case fd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case hd:return e=t.displayName||null,e!==null?e:zu(t.type)||"Memo";case jn:e=t._payload,t=t._init;try{return zu(t(e))}catch{}}return null}function E0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zu(e);case 8:return e===dd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ur(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function $m(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function v0(t){var e=$m(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ao(t){t._valueTracker||(t._valueTracker=v0(t))}function zm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=$m(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function fa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Vu(t,e){var n=e.checked;return be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function oh(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ur(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Vm(t,e){e=e.checked,e!=null&&cd(t,"checked",e,!1)}function Yu(t,e){Vm(t,e);var n=ur(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?qu(t,e.type,n):e.hasOwnProperty("defaultValue")&&qu(t,e.type,ur(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ah(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function qu(t,e,n){(e!=="number"||fa(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ui=Array.isArray;function fs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ur(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Qu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function lh(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(ui(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ur(n)}}function Ym(t,e){var n=ur(e.value),r=ur(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function uh(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function qm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?qm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var To,Qm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(To=To||document.createElement("div"),To.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=To.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ti(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var fi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},C0=["Webkit","ms","Moz","O"];Object.keys(fi).forEach(function(t){C0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),fi[e]=fi[t]})});function Xm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||fi.hasOwnProperty(t)&&fi[t]?(""+e).trim():e+"px"}function Jm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Xm(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var w0=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ju(t,e){if(e){if(w0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Zu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ec=null;function pd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var tc=null,hs=null,ps=null;function ch(t){if(t=io(t)){if(typeof tc!="function")throw Error(U(280));var e=t.stateNode;e&&(e=pl(e),tc(t.stateNode,t.type,e))}}function Zm(t){hs?ps?ps.push(t):ps=[t]:hs=t}function e_(){if(hs){var t=hs,e=ps;if(ps=hs=null,ch(t),e)for(t=0;t<e.length;t++)ch(e[t])}}function t_(t,e){return t(e)}function n_(){}var eu=!1;function r_(t,e,n){if(eu)return t(e,n);eu=!0;try{return t_(t,e,n)}finally{eu=!1,(hs!==null||ps!==null)&&(n_(),e_())}}function Ni(t,e){var n=t.stateNode;if(n===null)return null;var r=pl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var nc=!1;if(Sn)try{var Xs={};Object.defineProperty(Xs,"passive",{get:function(){nc=!0}}),window.addEventListener("test",Xs,Xs),window.removeEventListener("test",Xs,Xs)}catch{nc=!1}function R0(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var hi=!1,ha=null,pa=!1,rc=null,S0={onError:function(t){hi=!0,ha=t}};function I0(t,e,n,r,s,i,o,a,l){hi=!1,ha=null,R0.apply(S0,arguments)}function A0(t,e,n,r,s,i,o,a,l){if(I0.apply(this,arguments),hi){if(hi){var u=ha;hi=!1,ha=null}else throw Error(U(198));pa||(pa=!0,rc=u)}}function zr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function s_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function dh(t){if(zr(t)!==t)throw Error(U(188))}function T0(t){var e=t.alternate;if(!e){if(e=zr(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return dh(s),t;if(i===r)return dh(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function i_(t){return t=T0(t),t!==null?o_(t):null}function o_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=o_(t);if(e!==null)return e;t=t.sibling}return null}var a_=Lt.unstable_scheduleCallback,fh=Lt.unstable_cancelCallback,N0=Lt.unstable_shouldYield,x0=Lt.unstable_requestPaint,Fe=Lt.unstable_now,k0=Lt.unstable_getCurrentPriorityLevel,md=Lt.unstable_ImmediatePriority,l_=Lt.unstable_UserBlockingPriority,ma=Lt.unstable_NormalPriority,L0=Lt.unstable_LowPriority,u_=Lt.unstable_IdlePriority,cl=null,rn=null;function P0(t){if(rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(cl,t,void 0,(t.current.flags&128)===128)}catch{}}var Yt=Math.clz32?Math.clz32:b0,O0=Math.log,D0=Math.LN2;function b0(t){return t>>>=0,t===0?32:31-(O0(t)/D0|0)|0}var No=64,xo=4194304;function ci(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function _a(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=ci(a):(i&=o,i!==0&&(r=ci(i)))}else o=n&~s,o!==0?r=ci(o):i!==0&&(r=ci(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Yt(e),s=1<<n,r|=t[n],e&=~s;return r}function M0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function j0(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Yt(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=M0(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function sc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function c_(){var t=No;return No<<=1,!(No&4194240)&&(No=64),t}function tu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ro(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Yt(e),t[e]=n}function U0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Yt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function _d(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Yt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var _e=0;function d_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var f_,gd,h_,p_,m_,ic=!1,ko=[],qn=null,Qn=null,Xn=null,xi=new Map,ki=new Map,Fn=[],F0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hh(t,e){switch(t){case"focusin":case"focusout":qn=null;break;case"dragenter":case"dragleave":Qn=null;break;case"mouseover":case"mouseout":Xn=null;break;case"pointerover":case"pointerout":xi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ki.delete(e.pointerId)}}function Js(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=io(e),e!==null&&gd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function W0(t,e,n,r,s){switch(e){case"focusin":return qn=Js(qn,t,e,n,r,s),!0;case"dragenter":return Qn=Js(Qn,t,e,n,r,s),!0;case"mouseover":return Xn=Js(Xn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return xi.set(i,Js(xi.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ki.set(i,Js(ki.get(i)||null,t,e,n,r,s)),!0}return!1}function __(t){var e=Rr(t.target);if(e!==null){var n=zr(e);if(n!==null){if(e=n.tag,e===13){if(e=s_(n),e!==null){t.blockedOn=e,m_(t.priority,function(){h_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=oc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ec=r,n.target.dispatchEvent(r),ec=null}else return e=io(n),e!==null&&gd(e),t.blockedOn=n,!1;e.shift()}return!0}function ph(t,e,n){Xo(t)&&n.delete(e)}function K0(){ic=!1,qn!==null&&Xo(qn)&&(qn=null),Qn!==null&&Xo(Qn)&&(Qn=null),Xn!==null&&Xo(Xn)&&(Xn=null),xi.forEach(ph),ki.forEach(ph)}function Zs(t,e){t.blockedOn===e&&(t.blockedOn=null,ic||(ic=!0,Lt.unstable_scheduleCallback(Lt.unstable_NormalPriority,K0)))}function Li(t){function e(s){return Zs(s,t)}if(0<ko.length){Zs(ko[0],t);for(var n=1;n<ko.length;n++){var r=ko[n];r.blockedOn===t&&(r.blockedOn=null)}}for(qn!==null&&Zs(qn,t),Qn!==null&&Zs(Qn,t),Xn!==null&&Zs(Xn,t),xi.forEach(e),ki.forEach(e),n=0;n<Fn.length;n++)r=Fn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Fn.length&&(n=Fn[0],n.blockedOn===null);)__(n),n.blockedOn===null&&Fn.shift()}var ms=Ln.ReactCurrentBatchConfig,ga=!0;function G0(t,e,n,r){var s=_e,i=ms.transition;ms.transition=null;try{_e=1,yd(t,e,n,r)}finally{_e=s,ms.transition=i}}function B0(t,e,n,r){var s=_e,i=ms.transition;ms.transition=null;try{_e=4,yd(t,e,n,r)}finally{_e=s,ms.transition=i}}function yd(t,e,n,r){if(ga){var s=oc(t,e,n,r);if(s===null)du(t,e,r,ya,n),hh(t,r);else if(W0(s,t,e,n,r))r.stopPropagation();else if(hh(t,r),e&4&&-1<F0.indexOf(t)){for(;s!==null;){var i=io(s);if(i!==null&&f_(i),i=oc(t,e,n,r),i===null&&du(t,e,r,ya,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else du(t,e,r,null,n)}}var ya=null;function oc(t,e,n,r){if(ya=null,t=pd(r),t=Rr(t),t!==null)if(e=zr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=s_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ya=t,null}function g_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(k0()){case md:return 1;case l_:return 4;case ma:case L0:return 16;case u_:return 536870912;default:return 16}default:return 16}}var zn=null,Ed=null,Jo=null;function y_(){if(Jo)return Jo;var t,e=Ed,n=e.length,r,s="value"in zn?zn.value:zn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Jo=s.slice(t,1<r?1-r:void 0)}function Zo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Lo(){return!0}function mh(){return!1}function Ot(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Lo:mh,this.isPropagationStopped=mh,this}return be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Lo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Lo)},persist:function(){},isPersistent:Lo}),e}var js={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vd=Ot(js),so=be({},js,{view:0,detail:0}),H0=Ot(so),nu,ru,ei,dl=be({},so,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ei&&(ei&&t.type==="mousemove"?(nu=t.screenX-ei.screenX,ru=t.screenY-ei.screenY):ru=nu=0,ei=t),nu)},movementY:function(t){return"movementY"in t?t.movementY:ru}}),_h=Ot(dl),$0=be({},dl,{dataTransfer:0}),z0=Ot($0),V0=be({},so,{relatedTarget:0}),su=Ot(V0),Y0=be({},js,{animationName:0,elapsedTime:0,pseudoElement:0}),q0=Ot(Y0),Q0=be({},js,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),X0=Ot(Q0),J0=be({},js,{data:0}),gh=Ot(J0),Z0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=tC[t])?!!e[t]:!1}function Cd(){return nC}var rC=be({},so,{key:function(t){if(t.key){var e=Z0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Zo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?eC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cd,charCode:function(t){return t.type==="keypress"?Zo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sC=Ot(rC),iC=be({},dl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yh=Ot(iC),oC=be({},so,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cd}),aC=Ot(oC),lC=be({},js,{propertyName:0,elapsedTime:0,pseudoElement:0}),uC=Ot(lC),cC=be({},dl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),dC=Ot(cC),fC=[9,13,27,32],wd=Sn&&"CompositionEvent"in window,pi=null;Sn&&"documentMode"in document&&(pi=document.documentMode);var hC=Sn&&"TextEvent"in window&&!pi,E_=Sn&&(!wd||pi&&8<pi&&11>=pi),Eh=String.fromCharCode(32),vh=!1;function v_(t,e){switch(t){case"keyup":return fC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function C_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var es=!1;function pC(t,e){switch(t){case"compositionend":return C_(e);case"keypress":return e.which!==32?null:(vh=!0,Eh);case"textInput":return t=e.data,t===Eh&&vh?null:t;default:return null}}function mC(t,e){if(es)return t==="compositionend"||!wd&&v_(t,e)?(t=y_(),Jo=Ed=zn=null,es=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return E_&&e.locale!=="ko"?null:e.data;default:return null}}var _C={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ch(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_C[t.type]:e==="textarea"}function w_(t,e,n,r){Zm(r),e=Ea(e,"onChange"),0<e.length&&(n=new vd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var mi=null,Pi=null;function gC(t){O_(t,0)}function fl(t){var e=rs(t);if(zm(e))return t}function yC(t,e){if(t==="change")return e}var R_=!1;if(Sn){var iu;if(Sn){var ou="oninput"in document;if(!ou){var wh=document.createElement("div");wh.setAttribute("oninput","return;"),ou=typeof wh.oninput=="function"}iu=ou}else iu=!1;R_=iu&&(!document.documentMode||9<document.documentMode)}function Rh(){mi&&(mi.detachEvent("onpropertychange",S_),Pi=mi=null)}function S_(t){if(t.propertyName==="value"&&fl(Pi)){var e=[];w_(e,Pi,t,pd(t)),r_(gC,e)}}function EC(t,e,n){t==="focusin"?(Rh(),mi=e,Pi=n,mi.attachEvent("onpropertychange",S_)):t==="focusout"&&Rh()}function vC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return fl(Pi)}function CC(t,e){if(t==="click")return fl(e)}function wC(t,e){if(t==="input"||t==="change")return fl(e)}function RC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jt=typeof Object.is=="function"?Object.is:RC;function Oi(t,e){if(Jt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Gu.call(e,s)||!Jt(t[s],e[s]))return!1}return!0}function Sh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ih(t,e){var n=Sh(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Sh(n)}}function I_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?I_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function A_(){for(var t=window,e=fa();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=fa(t.document)}return e}function Rd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function SC(t){var e=A_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&I_(n.ownerDocument.documentElement,n)){if(r!==null&&Rd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Ih(n,i);var o=Ih(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var IC=Sn&&"documentMode"in document&&11>=document.documentMode,ts=null,ac=null,_i=null,lc=!1;function Ah(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;lc||ts==null||ts!==fa(r)||(r=ts,"selectionStart"in r&&Rd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_i&&Oi(_i,r)||(_i=r,r=Ea(ac,"onSelect"),0<r.length&&(e=new vd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ts)))}function Po(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ns={animationend:Po("Animation","AnimationEnd"),animationiteration:Po("Animation","AnimationIteration"),animationstart:Po("Animation","AnimationStart"),transitionend:Po("Transition","TransitionEnd")},au={},T_={};Sn&&(T_=document.createElement("div").style,"AnimationEvent"in window||(delete ns.animationend.animation,delete ns.animationiteration.animation,delete ns.animationstart.animation),"TransitionEvent"in window||delete ns.transitionend.transition);function hl(t){if(au[t])return au[t];if(!ns[t])return t;var e=ns[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in T_)return au[t]=e[n];return t}var N_=hl("animationend"),x_=hl("animationiteration"),k_=hl("animationstart"),L_=hl("transitionend"),P_=new Map,Th="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mr(t,e){P_.set(t,e),$r(e,[t])}for(var lu=0;lu<Th.length;lu++){var uu=Th[lu],AC=uu.toLowerCase(),TC=uu[0].toUpperCase()+uu.slice(1);mr(AC,"on"+TC)}mr(N_,"onAnimationEnd");mr(x_,"onAnimationIteration");mr(k_,"onAnimationStart");mr("dblclick","onDoubleClick");mr("focusin","onFocus");mr("focusout","onBlur");mr(L_,"onTransitionEnd");Rs("onMouseEnter",["mouseout","mouseover"]);Rs("onMouseLeave",["mouseout","mouseover"]);Rs("onPointerEnter",["pointerout","pointerover"]);Rs("onPointerLeave",["pointerout","pointerover"]);$r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$r("onBeforeInput",["compositionend","keypress","textInput","paste"]);$r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var di="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NC=new Set("cancel close invalid load scroll toggle".split(" ").concat(di));function Nh(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,A0(r,e,void 0,t),t.currentTarget=null}function O_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Nh(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Nh(s,a,u),i=l}}}if(pa)throw t=rc,pa=!1,rc=null,t}function Ne(t,e){var n=e[hc];n===void 0&&(n=e[hc]=new Set);var r=t+"__bubble";n.has(r)||(D_(e,t,2,!1),n.add(r))}function cu(t,e,n){var r=0;e&&(r|=4),D_(n,t,r,e)}var Oo="_reactListening"+Math.random().toString(36).slice(2);function Di(t){if(!t[Oo]){t[Oo]=!0,Km.forEach(function(n){n!=="selectionchange"&&(NC.has(n)||cu(n,!1,t),cu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Oo]||(e[Oo]=!0,cu("selectionchange",!1,e))}}function D_(t,e,n,r){switch(g_(e)){case 1:var s=G0;break;case 4:s=B0;break;default:s=yd}n=s.bind(null,e,n,t),s=void 0,!nc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function du(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Rr(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}r_(function(){var u=i,h=pd(n),d=[];e:{var c=P_.get(t);if(c!==void 0){var _=vd,C=t;switch(t){case"keypress":if(Zo(n)===0)break e;case"keydown":case"keyup":_=sC;break;case"focusin":C="focus",_=su;break;case"focusout":C="blur",_=su;break;case"beforeblur":case"afterblur":_=su;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=_h;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=z0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=aC;break;case N_:case x_:case k_:_=q0;break;case L_:_=uC;break;case"scroll":_=H0;break;case"wheel":_=dC;break;case"copy":case"cut":case"paste":_=X0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=yh}var v=(e&4)!==0,x=!v&&t==="scroll",f=v?c!==null?c+"Capture":null:c;v=[];for(var p=u,g;p!==null;){g=p;var T=g.stateNode;if(g.tag===5&&T!==null&&(g=T,f!==null&&(T=Ni(p,f),T!=null&&v.push(bi(p,T,g)))),x)break;p=p.return}0<v.length&&(c=new _(c,C,null,n,h),d.push({event:c,listeners:v}))}}if(!(e&7)){e:{if(c=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",c&&n!==ec&&(C=n.relatedTarget||n.fromElement)&&(Rr(C)||C[In]))break e;if((_||c)&&(c=h.window===h?h:(c=h.ownerDocument)?c.defaultView||c.parentWindow:window,_?(C=n.relatedTarget||n.toElement,_=u,C=C?Rr(C):null,C!==null&&(x=zr(C),C!==x||C.tag!==5&&C.tag!==6)&&(C=null)):(_=null,C=u),_!==C)){if(v=_h,T="onMouseLeave",f="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(v=yh,T="onPointerLeave",f="onPointerEnter",p="pointer"),x=_==null?c:rs(_),g=C==null?c:rs(C),c=new v(T,p+"leave",_,n,h),c.target=x,c.relatedTarget=g,T=null,Rr(h)===u&&(v=new v(f,p+"enter",C,n,h),v.target=g,v.relatedTarget=x,T=v),x=T,_&&C)t:{for(v=_,f=C,p=0,g=v;g;g=Qr(g))p++;for(g=0,T=f;T;T=Qr(T))g++;for(;0<p-g;)v=Qr(v),p--;for(;0<g-p;)f=Qr(f),g--;for(;p--;){if(v===f||f!==null&&v===f.alternate)break t;v=Qr(v),f=Qr(f)}v=null}else v=null;_!==null&&xh(d,c,_,v,!1),C!==null&&x!==null&&xh(d,x,C,v,!0)}}e:{if(c=u?rs(u):window,_=c.nodeName&&c.nodeName.toLowerCase(),_==="select"||_==="input"&&c.type==="file")var S=yC;else if(Ch(c))if(R_)S=wC;else{S=vC;var O=EC}else(_=c.nodeName)&&_.toLowerCase()==="input"&&(c.type==="checkbox"||c.type==="radio")&&(S=CC);if(S&&(S=S(t,u))){w_(d,S,n,h);break e}O&&O(t,c,u),t==="focusout"&&(O=c._wrapperState)&&O.controlled&&c.type==="number"&&qu(c,"number",c.value)}switch(O=u?rs(u):window,t){case"focusin":(Ch(O)||O.contentEditable==="true")&&(ts=O,ac=u,_i=null);break;case"focusout":_i=ac=ts=null;break;case"mousedown":lc=!0;break;case"contextmenu":case"mouseup":case"dragend":lc=!1,Ah(d,n,h);break;case"selectionchange":if(IC)break;case"keydown":case"keyup":Ah(d,n,h)}var k;if(wd)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else es?v_(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(E_&&n.locale!=="ko"&&(es||N!=="onCompositionStart"?N==="onCompositionEnd"&&es&&(k=y_()):(zn=h,Ed="value"in zn?zn.value:zn.textContent,es=!0)),O=Ea(u,N),0<O.length&&(N=new gh(N,t,null,n,h),d.push({event:N,listeners:O}),k?N.data=k:(k=C_(n),k!==null&&(N.data=k)))),(k=hC?pC(t,n):mC(t,n))&&(u=Ea(u,"onBeforeInput"),0<u.length&&(h=new gh("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=k))}O_(d,e)})}function bi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ea(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ni(t,n),i!=null&&r.unshift(bi(t,i,s)),i=Ni(t,e),i!=null&&r.push(bi(t,i,s))),t=t.return}return r}function Qr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xh(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=Ni(n,i),l!=null&&o.unshift(bi(n,l,a))):s||(l=Ni(n,i),l!=null&&o.push(bi(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var xC=/\r\n?/g,kC=/\u0000|\uFFFD/g;function kh(t){return(typeof t=="string"?t:""+t).replace(xC,`
`).replace(kC,"")}function Do(t,e,n){if(e=kh(e),kh(t)!==e&&n)throw Error(U(425))}function va(){}var uc=null,cc=null;function dc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var fc=typeof setTimeout=="function"?setTimeout:void 0,LC=typeof clearTimeout=="function"?clearTimeout:void 0,Lh=typeof Promise=="function"?Promise:void 0,PC=typeof queueMicrotask=="function"?queueMicrotask:typeof Lh<"u"?function(t){return Lh.resolve(null).then(t).catch(OC)}:fc;function OC(t){setTimeout(function(){throw t})}function fu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Li(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Li(e)}function Jn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ph(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Us=Math.random().toString(36).slice(2),nn="__reactFiber$"+Us,Mi="__reactProps$"+Us,In="__reactContainer$"+Us,hc="__reactEvents$"+Us,DC="__reactListeners$"+Us,bC="__reactHandles$"+Us;function Rr(t){var e=t[nn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[In]||n[nn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ph(t);t!==null;){if(n=t[nn])return n;t=Ph(t)}return e}t=n,n=t.parentNode}return null}function io(t){return t=t[nn]||t[In],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function rs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function pl(t){return t[Mi]||null}var pc=[],ss=-1;function _r(t){return{current:t}}function ke(t){0>ss||(t.current=pc[ss],pc[ss]=null,ss--)}function Ie(t,e){ss++,pc[ss]=t.current,t.current=e}var cr={},ct=_r(cr),Ct=_r(!1),Or=cr;function Ss(t,e){var n=t.type.contextTypes;if(!n)return cr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function wt(t){return t=t.childContextTypes,t!=null}function Ca(){ke(Ct),ke(ct)}function Oh(t,e,n){if(ct.current!==cr)throw Error(U(168));Ie(ct,e),Ie(Ct,n)}function b_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,E0(t)||"Unknown",s));return be({},n,r)}function wa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||cr,Or=ct.current,Ie(ct,t),Ie(Ct,Ct.current),!0}function Dh(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=b_(t,e,Or),r.__reactInternalMemoizedMergedChildContext=t,ke(Ct),ke(ct),Ie(ct,t)):ke(Ct),Ie(Ct,n)}var mn=null,ml=!1,hu=!1;function M_(t){mn===null?mn=[t]:mn.push(t)}function MC(t){ml=!0,M_(t)}function gr(){if(!hu&&mn!==null){hu=!0;var t=0,e=_e;try{var n=mn;for(_e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}mn=null,ml=!1}catch(s){throw mn!==null&&(mn=mn.slice(t+1)),a_(md,gr),s}finally{_e=e,hu=!1}}return null}var is=[],os=0,Ra=null,Sa=0,Dt=[],bt=0,Dr=null,gn=1,yn="";function Er(t,e){is[os++]=Sa,is[os++]=Ra,Ra=t,Sa=e}function j_(t,e,n){Dt[bt++]=gn,Dt[bt++]=yn,Dt[bt++]=Dr,Dr=t;var r=gn;t=yn;var s=32-Yt(r)-1;r&=~(1<<s),n+=1;var i=32-Yt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,gn=1<<32-Yt(e)+s|n<<s|r,yn=i+t}else gn=1<<i|n<<s|r,yn=t}function Sd(t){t.return!==null&&(Er(t,1),j_(t,1,0))}function Id(t){for(;t===Ra;)Ra=is[--os],is[os]=null,Sa=is[--os],is[os]=null;for(;t===Dr;)Dr=Dt[--bt],Dt[bt]=null,yn=Dt[--bt],Dt[bt]=null,gn=Dt[--bt],Dt[bt]=null}var kt=null,xt=null,Pe=!1,Bt=null;function U_(t,e){var n=Mt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function bh(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,kt=t,xt=Jn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,kt=t,xt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Dr!==null?{id:gn,overflow:yn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Mt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,kt=t,xt=null,!0):!1;default:return!1}}function mc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function _c(t){if(Pe){var e=xt;if(e){var n=e;if(!bh(t,e)){if(mc(t))throw Error(U(418));e=Jn(n.nextSibling);var r=kt;e&&bh(t,e)?U_(r,n):(t.flags=t.flags&-4097|2,Pe=!1,kt=t)}}else{if(mc(t))throw Error(U(418));t.flags=t.flags&-4097|2,Pe=!1,kt=t}}}function Mh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;kt=t}function bo(t){if(t!==kt)return!1;if(!Pe)return Mh(t),Pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!dc(t.type,t.memoizedProps)),e&&(e=xt)){if(mc(t))throw F_(),Error(U(418));for(;e;)U_(t,e),e=Jn(e.nextSibling)}if(Mh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){xt=Jn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}xt=null}}else xt=kt?Jn(t.stateNode.nextSibling):null;return!0}function F_(){for(var t=xt;t;)t=Jn(t.nextSibling)}function Is(){xt=kt=null,Pe=!1}function Ad(t){Bt===null?Bt=[t]:Bt.push(t)}var jC=Ln.ReactCurrentBatchConfig;function Kt(t,e){if(t&&t.defaultProps){e=be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Ia=_r(null),Aa=null,as=null,Td=null;function Nd(){Td=as=Aa=null}function xd(t){var e=Ia.current;ke(Ia),t._currentValue=e}function gc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function _s(t,e){Aa=t,Td=as=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Et=!0),t.firstContext=null)}function Ut(t){var e=t._currentValue;if(Td!==t)if(t={context:t,memoizedValue:e,next:null},as===null){if(Aa===null)throw Error(U(308));as=t,Aa.dependencies={lanes:0,firstContext:t}}else as=as.next=t;return e}var Sr=null;function kd(t){Sr===null?Sr=[t]:Sr.push(t)}function W_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,kd(e)):(n.next=s.next,s.next=n),e.interleaved=n,An(t,r)}function An(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Un=!1;function Ld(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function K_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Zn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ce&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,An(t,n)}return s=r.interleaved,s===null?(e.next=e,kd(r)):(e.next=s.next,s.next=e),r.interleaved=e,An(t,n)}function ea(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_d(t,n)}}function jh(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ta(t,e,n,r){var s=t.updateQueue;Un=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,h=u=l=null,a=i;do{var c=a.lane,_=a.eventTime;if((r&c)===c){h!==null&&(h=h.next={eventTime:_,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var C=t,v=a;switch(c=e,_=n,v.tag){case 1:if(C=v.payload,typeof C=="function"){d=C.call(_,d,c);break e}d=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=v.payload,c=typeof C=="function"?C.call(_,d,c):C,c==null)break e;d=be({},d,c);break e;case 2:Un=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,c=s.effects,c===null?s.effects=[a]:c.push(a))}else _={eventTime:_,lane:c,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=_,l=d):h=h.next=_,o|=c;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;c=a,a=c.next,c.next=null,s.lastBaseUpdate=c,s.shared.pending=null}}while(1);if(h===null&&(l=d),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Mr|=o,t.lanes=o,t.memoizedState=d}}function Uh(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var G_=new Wm.Component().refs;function yc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _l={isMounted:function(t){return(t=t._reactInternals)?zr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=mt(),s=tr(t),i=wn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Zn(t,i,s),e!==null&&(qt(e,t,s,r),ea(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=mt(),s=tr(t),i=wn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Zn(t,i,s),e!==null&&(qt(e,t,s,r),ea(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=mt(),r=tr(t),s=wn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Zn(t,s,r),e!==null&&(qt(e,t,r,n),ea(e,t,r))}};function Fh(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Oi(n,r)||!Oi(s,i):!0}function B_(t,e,n){var r=!1,s=cr,i=e.contextType;return typeof i=="object"&&i!==null?i=Ut(i):(s=wt(e)?Or:ct.current,r=e.contextTypes,i=(r=r!=null)?Ss(t,s):cr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_l,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Wh(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&_l.enqueueReplaceState(e,e.state,null)}function Ec(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs=G_,Ld(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ut(i):(i=wt(e)?Or:ct.current,s.context=Ss(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(yc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&_l.enqueueReplaceState(s,s.state,null),Ta(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ti(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;a===G_&&(a=s.refs={}),o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Mo(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Kh(t){var e=t._init;return e(t._payload)}function H_(t){function e(f,p){if(t){var g=f.deletions;g===null?(f.deletions=[p],f.flags|=16):g.push(p)}}function n(f,p){if(!t)return null;for(;p!==null;)e(f,p),p=p.sibling;return null}function r(f,p){for(f=new Map;p!==null;)p.key!==null?f.set(p.key,p):f.set(p.index,p),p=p.sibling;return f}function s(f,p){return f=nr(f,p),f.index=0,f.sibling=null,f}function i(f,p,g){return f.index=g,t?(g=f.alternate,g!==null?(g=g.index,g<p?(f.flags|=2,p):g):(f.flags|=2,p)):(f.flags|=1048576,p)}function o(f){return t&&f.alternate===null&&(f.flags|=2),f}function a(f,p,g,T){return p===null||p.tag!==6?(p=vu(g,f.mode,T),p.return=f,p):(p=s(p,g),p.return=f,p)}function l(f,p,g,T){var S=g.type;return S===Zr?h(f,p,g.props.children,T,g.key):p!==null&&(p.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===jn&&Kh(S)===p.type)?(T=s(p,g.props),T.ref=ti(f,p,g),T.return=f,T):(T=oa(g.type,g.key,g.props,null,f.mode,T),T.ref=ti(f,p,g),T.return=f,T)}function u(f,p,g,T){return p===null||p.tag!==4||p.stateNode.containerInfo!==g.containerInfo||p.stateNode.implementation!==g.implementation?(p=Cu(g,f.mode,T),p.return=f,p):(p=s(p,g.children||[]),p.return=f,p)}function h(f,p,g,T,S){return p===null||p.tag!==7?(p=xr(g,f.mode,T,S),p.return=f,p):(p=s(p,g),p.return=f,p)}function d(f,p,g){if(typeof p=="string"&&p!==""||typeof p=="number")return p=vu(""+p,f.mode,g),p.return=f,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Io:return g=oa(p.type,p.key,p.props,null,f.mode,g),g.ref=ti(f,null,p),g.return=f,g;case Jr:return p=Cu(p,f.mode,g),p.return=f,p;case jn:var T=p._init;return d(f,T(p._payload),g)}if(ui(p)||Qs(p))return p=xr(p,f.mode,g,null),p.return=f,p;Mo(f,p)}return null}function c(f,p,g,T){var S=p!==null?p.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return S!==null?null:a(f,p,""+g,T);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Io:return g.key===S?l(f,p,g,T):null;case Jr:return g.key===S?u(f,p,g,T):null;case jn:return S=g._init,c(f,p,S(g._payload),T)}if(ui(g)||Qs(g))return S!==null?null:h(f,p,g,T,null);Mo(f,g)}return null}function _(f,p,g,T,S){if(typeof T=="string"&&T!==""||typeof T=="number")return f=f.get(g)||null,a(p,f,""+T,S);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Io:return f=f.get(T.key===null?g:T.key)||null,l(p,f,T,S);case Jr:return f=f.get(T.key===null?g:T.key)||null,u(p,f,T,S);case jn:var O=T._init;return _(f,p,g,O(T._payload),S)}if(ui(T)||Qs(T))return f=f.get(g)||null,h(p,f,T,S,null);Mo(p,T)}return null}function C(f,p,g,T){for(var S=null,O=null,k=p,N=p=0,F=null;k!==null&&N<g.length;N++){k.index>N?(F=k,k=null):F=k.sibling;var W=c(f,k,g[N],T);if(W===null){k===null&&(k=F);break}t&&k&&W.alternate===null&&e(f,k),p=i(W,p,N),O===null?S=W:O.sibling=W,O=W,k=F}if(N===g.length)return n(f,k),Pe&&Er(f,N),S;if(k===null){for(;N<g.length;N++)k=d(f,g[N],T),k!==null&&(p=i(k,p,N),O===null?S=k:O.sibling=k,O=k);return Pe&&Er(f,N),S}for(k=r(f,k);N<g.length;N++)F=_(k,f,N,g[N],T),F!==null&&(t&&F.alternate!==null&&k.delete(F.key===null?N:F.key),p=i(F,p,N),O===null?S=F:O.sibling=F,O=F);return t&&k.forEach(function(Y){return e(f,Y)}),Pe&&Er(f,N),S}function v(f,p,g,T){var S=Qs(g);if(typeof S!="function")throw Error(U(150));if(g=S.call(g),g==null)throw Error(U(151));for(var O=S=null,k=p,N=p=0,F=null,W=g.next();k!==null&&!W.done;N++,W=g.next()){k.index>N?(F=k,k=null):F=k.sibling;var Y=c(f,k,W.value,T);if(Y===null){k===null&&(k=F);break}t&&k&&Y.alternate===null&&e(f,k),p=i(Y,p,N),O===null?S=Y:O.sibling=Y,O=Y,k=F}if(W.done)return n(f,k),Pe&&Er(f,N),S;if(k===null){for(;!W.done;N++,W=g.next())W=d(f,W.value,T),W!==null&&(p=i(W,p,N),O===null?S=W:O.sibling=W,O=W);return Pe&&Er(f,N),S}for(k=r(f,k);!W.done;N++,W=g.next())W=_(k,f,N,W.value,T),W!==null&&(t&&W.alternate!==null&&k.delete(W.key===null?N:W.key),p=i(W,p,N),O===null?S=W:O.sibling=W,O=W);return t&&k.forEach(function(Ae){return e(f,Ae)}),Pe&&Er(f,N),S}function x(f,p,g,T){if(typeof g=="object"&&g!==null&&g.type===Zr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Io:e:{for(var S=g.key,O=p;O!==null;){if(O.key===S){if(S=g.type,S===Zr){if(O.tag===7){n(f,O.sibling),p=s(O,g.props.children),p.return=f,f=p;break e}}else if(O.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===jn&&Kh(S)===O.type){n(f,O.sibling),p=s(O,g.props),p.ref=ti(f,O,g),p.return=f,f=p;break e}n(f,O);break}else e(f,O);O=O.sibling}g.type===Zr?(p=xr(g.props.children,f.mode,T,g.key),p.return=f,f=p):(T=oa(g.type,g.key,g.props,null,f.mode,T),T.ref=ti(f,p,g),T.return=f,f=T)}return o(f);case Jr:e:{for(O=g.key;p!==null;){if(p.key===O)if(p.tag===4&&p.stateNode.containerInfo===g.containerInfo&&p.stateNode.implementation===g.implementation){n(f,p.sibling),p=s(p,g.children||[]),p.return=f,f=p;break e}else{n(f,p);break}else e(f,p);p=p.sibling}p=Cu(g,f.mode,T),p.return=f,f=p}return o(f);case jn:return O=g._init,x(f,p,O(g._payload),T)}if(ui(g))return C(f,p,g,T);if(Qs(g))return v(f,p,g,T);Mo(f,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,p!==null&&p.tag===6?(n(f,p.sibling),p=s(p,g),p.return=f,f=p):(n(f,p),p=vu(g,f.mode,T),p.return=f,f=p),o(f)):n(f,p)}return x}var As=H_(!0),$_=H_(!1),oo={},sn=_r(oo),ji=_r(oo),Ui=_r(oo);function Ir(t){if(t===oo)throw Error(U(174));return t}function Pd(t,e){switch(Ie(Ui,e),Ie(ji,t),Ie(sn,oo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Xu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Xu(e,t)}ke(sn),Ie(sn,e)}function Ts(){ke(sn),ke(ji),ke(Ui)}function z_(t){Ir(Ui.current);var e=Ir(sn.current),n=Xu(e,t.type);e!==n&&(Ie(ji,t),Ie(sn,n))}function Od(t){ji.current===t&&(ke(sn),ke(ji))}var Oe=_r(0);function Na(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var pu=[];function Dd(){for(var t=0;t<pu.length;t++)pu[t]._workInProgressVersionPrimary=null;pu.length=0}var ta=Ln.ReactCurrentDispatcher,mu=Ln.ReactCurrentBatchConfig,br=0,De=null,He=null,Xe=null,xa=!1,gi=!1,Fi=0,UC=0;function ot(){throw Error(U(321))}function bd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Jt(t[n],e[n]))return!1;return!0}function Md(t,e,n,r,s,i){if(br=i,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ta.current=t===null||t.memoizedState===null?GC:BC,t=n(r,s),gi){i=0;do{if(gi=!1,Fi=0,25<=i)throw Error(U(301));i+=1,Xe=He=null,e.updateQueue=null,ta.current=HC,t=n(r,s)}while(gi)}if(ta.current=ka,e=He!==null&&He.next!==null,br=0,Xe=He=De=null,xa=!1,e)throw Error(U(300));return t}function jd(){var t=Fi!==0;return Fi=0,t}function tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?De.memoizedState=Xe=t:Xe=Xe.next=t,Xe}function Ft(){if(He===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=He.next;var e=Xe===null?De.memoizedState:Xe.next;if(e!==null)Xe=e,He=t;else{if(t===null)throw Error(U(310));He=t,t={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Xe===null?De.memoizedState=Xe=t:Xe=Xe.next=t}return Xe}function Wi(t,e){return typeof e=="function"?e(t):e}function _u(t){var e=Ft(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=He,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var h=u.lane;if((br&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,De.lanes|=h,Mr|=h}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,Jt(r,e.memoizedState)||(Et=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,De.lanes|=i,Mr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function gu(t){var e=Ft(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Jt(i,e.memoizedState)||(Et=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function V_(){}function Y_(t,e){var n=De,r=Ft(),s=e(),i=!Jt(r.memoizedState,s);if(i&&(r.memoizedState=s,Et=!0),r=r.queue,Ud(X_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Xe!==null&&Xe.memoizedState.tag&1){if(n.flags|=2048,Ki(9,Q_.bind(null,n,r,s,e),void 0,null),et===null)throw Error(U(349));br&30||q_(n,e,s)}return s}function q_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Q_(t,e,n,r){e.value=n,e.getSnapshot=r,J_(e)&&Z_(t)}function X_(t,e,n){return n(function(){J_(e)&&Z_(t)})}function J_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Jt(t,n)}catch{return!0}}function Z_(t){var e=An(t,1);e!==null&&qt(e,t,1,-1)}function Gh(t){var e=tn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:t},e.queue=t,t=t.dispatch=KC.bind(null,De,t),[e.memoizedState,t]}function Ki(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function eg(){return Ft().memoizedState}function na(t,e,n,r){var s=tn();De.flags|=t,s.memoizedState=Ki(1|e,n,void 0,r===void 0?null:r)}function gl(t,e,n,r){var s=Ft();r=r===void 0?null:r;var i=void 0;if(He!==null){var o=He.memoizedState;if(i=o.destroy,r!==null&&bd(r,o.deps)){s.memoizedState=Ki(e,n,i,r);return}}De.flags|=t,s.memoizedState=Ki(1|e,n,i,r)}function Bh(t,e){return na(8390656,8,t,e)}function Ud(t,e){return gl(2048,8,t,e)}function tg(t,e){return gl(4,2,t,e)}function ng(t,e){return gl(4,4,t,e)}function rg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function sg(t,e,n){return n=n!=null?n.concat([t]):null,gl(4,4,rg.bind(null,e,t),n)}function Fd(){}function ig(t,e){var n=Ft();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function og(t,e){var n=Ft();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ag(t,e,n){return br&21?(Jt(n,e)||(n=c_(),De.lanes|=n,Mr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Et=!0),t.memoizedState=n)}function FC(t,e){var n=_e;_e=n!==0&&4>n?n:4,t(!0);var r=mu.transition;mu.transition={};try{t(!1),e()}finally{_e=n,mu.transition=r}}function lg(){return Ft().memoizedState}function WC(t,e,n){var r=tr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ug(t))cg(e,n);else if(n=W_(t,e,n,r),n!==null){var s=mt();qt(n,t,r,s),dg(n,e,r)}}function KC(t,e,n){var r=tr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ug(t))cg(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Jt(a,o)){var l=e.interleaved;l===null?(s.next=s,kd(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=W_(t,e,s,r),n!==null&&(s=mt(),qt(n,t,r,s),dg(n,e,r))}}function ug(t){var e=t.alternate;return t===De||e!==null&&e===De}function cg(t,e){gi=xa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function dg(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_d(t,n)}}var ka={readContext:Ut,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},GC={readContext:Ut,useCallback:function(t,e){return tn().memoizedState=[t,e===void 0?null:e],t},useContext:Ut,useEffect:Bh,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,na(4194308,4,rg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return na(4194308,4,t,e)},useInsertionEffect:function(t,e){return na(4,2,t,e)},useMemo:function(t,e){var n=tn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=tn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=WC.bind(null,De,t),[r.memoizedState,t]},useRef:function(t){var e=tn();return t={current:t},e.memoizedState=t},useState:Gh,useDebugValue:Fd,useDeferredValue:function(t){return tn().memoizedState=t},useTransition:function(){var t=Gh(!1),e=t[0];return t=FC.bind(null,t[1]),tn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=De,s=tn();if(Pe){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),et===null)throw Error(U(349));br&30||q_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Bh(X_.bind(null,r,i,t),[t]),r.flags|=2048,Ki(9,Q_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=tn(),e=et.identifierPrefix;if(Pe){var n=yn,r=gn;n=(r&~(1<<32-Yt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Fi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=UC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},BC={readContext:Ut,useCallback:ig,useContext:Ut,useEffect:Ud,useImperativeHandle:sg,useInsertionEffect:tg,useLayoutEffect:ng,useMemo:og,useReducer:_u,useRef:eg,useState:function(){return _u(Wi)},useDebugValue:Fd,useDeferredValue:function(t){var e=Ft();return ag(e,He.memoizedState,t)},useTransition:function(){var t=_u(Wi)[0],e=Ft().memoizedState;return[t,e]},useMutableSource:V_,useSyncExternalStore:Y_,useId:lg,unstable_isNewReconciler:!1},HC={readContext:Ut,useCallback:ig,useContext:Ut,useEffect:Ud,useImperativeHandle:sg,useInsertionEffect:tg,useLayoutEffect:ng,useMemo:og,useReducer:gu,useRef:eg,useState:function(){return gu(Wi)},useDebugValue:Fd,useDeferredValue:function(t){var e=Ft();return He===null?e.memoizedState=t:ag(e,He.memoizedState,t)},useTransition:function(){var t=gu(Wi)[0],e=Ft().memoizedState;return[t,e]},useMutableSource:V_,useSyncExternalStore:Y_,useId:lg,unstable_isNewReconciler:!1};function Ns(t,e){try{var n="",r=e;do n+=y0(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function yu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function vc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var $C=typeof WeakMap=="function"?WeakMap:Map;function fg(t,e,n){n=wn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Pa||(Pa=!0,kc=r),vc(t,e)},n}function hg(t,e,n){n=wn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){vc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){vc(t,e),typeof r!="function"&&(er===null?er=new Set([this]):er.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Hh(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new $C;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=iw.bind(null,t,e,n),e.then(t,t))}function $h(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function zh(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=wn(-1,1),e.tag=2,Zn(n,e,1))),n.lanes|=1),t)}var zC=Ln.ReactCurrentOwner,Et=!1;function ht(t,e,n,r){e.child=t===null?$_(e,null,n,r):As(e,t.child,n,r)}function Vh(t,e,n,r,s){n=n.render;var i=e.ref;return _s(e,s),r=Md(t,e,n,r,i,s),n=jd(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Tn(t,e,s)):(Pe&&n&&Sd(e),e.flags|=1,ht(t,e,r,s),e.child)}function Yh(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Vd(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,pg(t,e,i,r,s)):(t=oa(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Oi,n(o,r)&&t.ref===e.ref)return Tn(t,e,s)}return e.flags|=1,t=nr(i,r),t.ref=e.ref,t.return=e,e.child=t}function pg(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Oi(i,r)&&t.ref===e.ref)if(Et=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Et=!0);else return e.lanes=t.lanes,Tn(t,e,s)}return Cc(t,e,n,r,s)}function mg(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(us,Nt),Nt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ie(us,Nt),Nt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ie(us,Nt),Nt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ie(us,Nt),Nt|=r;return ht(t,e,s,n),e.child}function _g(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Cc(t,e,n,r,s){var i=wt(n)?Or:ct.current;return i=Ss(e,i),_s(e,s),n=Md(t,e,n,r,i,s),r=jd(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Tn(t,e,s)):(Pe&&r&&Sd(e),e.flags|=1,ht(t,e,n,s),e.child)}function qh(t,e,n,r,s){if(wt(n)){var i=!0;wa(e)}else i=!1;if(_s(e,s),e.stateNode===null)ra(t,e),B_(e,n,r),Ec(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ut(u):(u=wt(n)?Or:ct.current,u=Ss(e,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Wh(e,o,r,u),Un=!1;var c=e.memoizedState;o.state=c,Ta(e,r,o,s),l=e.memoizedState,a!==r||c!==l||Ct.current||Un?(typeof h=="function"&&(yc(e,n,h,r),l=e.memoizedState),(a=Un||Fh(e,n,a,r,c,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,K_(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Kt(e.type,a),o.props=u,d=e.pendingProps,c=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ut(l):(l=wt(n)?Or:ct.current,l=Ss(e,l));var _=n.getDerivedStateFromProps;(h=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||c!==l)&&Wh(e,o,r,l),Un=!1,c=e.memoizedState,o.state=c,Ta(e,r,o,s);var C=e.memoizedState;a!==d||c!==C||Ct.current||Un?(typeof _=="function"&&(yc(e,n,_,r),C=e.memoizedState),(u=Un||Fh(e,n,u,r,c,C,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,C,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,C,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&c===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&c===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),o.props=r,o.state=C,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&c===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&c===t.memoizedState||(e.flags|=1024),r=!1)}return wc(t,e,n,r,i,s)}function wc(t,e,n,r,s,i){_g(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Dh(e,n,!1),Tn(t,e,i);r=e.stateNode,zC.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=As(e,t.child,null,i),e.child=As(e,null,a,i)):ht(t,e,a,i),e.memoizedState=r.state,s&&Dh(e,n,!0),e.child}function gg(t){var e=t.stateNode;e.pendingContext?Oh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Oh(t,e.context,!1),Pd(t,e.containerInfo)}function Qh(t,e,n,r,s){return Is(),Ad(s),e.flags|=256,ht(t,e,n,r),e.child}var Rc={dehydrated:null,treeContext:null,retryLane:0};function Sc(t){return{baseLanes:t,cachePool:null,transitions:null}}function yg(t,e,n){var r=e.pendingProps,s=Oe.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ie(Oe,s&1),t===null)return _c(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=vl(o,r,0,null),t=xr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Sc(n),e.memoizedState=Rc,t):Wd(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return VC(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=nr(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=nr(a,i):(i=xr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Sc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Rc,r}return i=t.child,t=i.sibling,r=nr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Wd(t,e){return e=vl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function jo(t,e,n,r){return r!==null&&Ad(r),As(e,t.child,null,n),t=Wd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function VC(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=yu(Error(U(422))),jo(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=vl({mode:"visible",children:r.children},s,0,null),i=xr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&As(e,t.child,null,o),e.child.memoizedState=Sc(o),e.memoizedState=Rc,i);if(!(e.mode&1))return jo(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(U(419)),r=yu(i,r,void 0),jo(t,e,o,r)}if(a=(o&t.childLanes)!==0,Et||a){if(r=et,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,An(t,s),qt(r,t,s,-1))}return zd(),r=yu(Error(U(421))),jo(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=ow.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,xt=Jn(s.nextSibling),kt=e,Pe=!0,Bt=null,t!==null&&(Dt[bt++]=gn,Dt[bt++]=yn,Dt[bt++]=Dr,gn=t.id,yn=t.overflow,Dr=e),e=Wd(e,r.children),e.flags|=4096,e)}function Xh(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),gc(t.return,e,n)}function Eu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Eg(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ht(t,e,r.children,n),r=Oe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Xh(t,n,e);else if(t.tag===19)Xh(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ie(Oe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Na(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Eu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Na(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Eu(e,!0,n,null,i);break;case"together":Eu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ra(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Tn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Mr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=nr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=nr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function YC(t,e,n){switch(e.tag){case 3:gg(e),Is();break;case 5:z_(e);break;case 1:wt(e.type)&&wa(e);break;case 4:Pd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ie(Ia,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ie(Oe,Oe.current&1),e.flags|=128,null):n&e.child.childLanes?yg(t,e,n):(Ie(Oe,Oe.current&1),t=Tn(t,e,n),t!==null?t.sibling:null);Ie(Oe,Oe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Eg(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ie(Oe,Oe.current),r)break;return null;case 22:case 23:return e.lanes=0,mg(t,e,n)}return Tn(t,e,n)}var vg,Ic,Cg,wg;vg=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ic=function(){};Cg=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ir(sn.current);var i=null;switch(n){case"input":s=Vu(t,s),r=Vu(t,r),i=[];break;case"select":s=be({},s,{value:void 0}),r=be({},r,{value:void 0}),i=[];break;case"textarea":s=Qu(t,s),r=Qu(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=va)}Ju(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ai.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ai.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ne("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};wg=function(t,e,n,r){n!==r&&(e.flags|=4)};function ni(t,e){if(!Pe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function at(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function qC(t,e,n){var r=e.pendingProps;switch(Id(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(e),null;case 1:return wt(e.type)&&Ca(),at(e),null;case 3:return r=e.stateNode,Ts(),ke(Ct),ke(ct),Dd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(bo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Bt!==null&&(Oc(Bt),Bt=null))),Ic(t,e),at(e),null;case 5:Od(e);var s=Ir(Ui.current);if(n=e.type,t!==null&&e.stateNode!=null)Cg(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return at(e),null}if(t=Ir(sn.current),bo(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[nn]=e,r[Mi]=i,t=(e.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(s=0;s<di.length;s++)Ne(di[s],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":oh(r,i),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ne("invalid",r);break;case"textarea":lh(r,i),Ne("invalid",r)}Ju(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Do(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Do(r.textContent,a,t),s=["children",""+a]):Ai.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ne("scroll",r)}switch(n){case"input":Ao(r),ah(r,i,!0);break;case"textarea":Ao(r),uh(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=va)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=qm(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[nn]=e,t[Mi]=r,vg(t,e,!1,!1),e.stateNode=t;e:{switch(o=Zu(n,r),n){case"dialog":Ne("cancel",t),Ne("close",t),s=r;break;case"iframe":case"object":case"embed":Ne("load",t),s=r;break;case"video":case"audio":for(s=0;s<di.length;s++)Ne(di[s],t);s=r;break;case"source":Ne("error",t),s=r;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),s=r;break;case"details":Ne("toggle",t),s=r;break;case"input":oh(t,r),s=Vu(t,r),Ne("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=be({},r,{value:void 0}),Ne("invalid",t);break;case"textarea":lh(t,r),s=Qu(t,r),Ne("invalid",t);break;default:s=r}Ju(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Jm(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Qm(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ti(t,l):typeof l=="number"&&Ti(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ai.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ne("scroll",t):l!=null&&cd(t,i,l,o))}switch(n){case"input":Ao(t),ah(t,r,!1);break;case"textarea":Ao(t),uh(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ur(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?fs(t,!!r.multiple,i,!1):r.defaultValue!=null&&fs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=va)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return at(e),null;case 6:if(t&&e.stateNode!=null)wg(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=Ir(Ui.current),Ir(sn.current),bo(e)){if(r=e.stateNode,n=e.memoizedProps,r[nn]=e,(i=r.nodeValue!==n)&&(t=kt,t!==null))switch(t.tag){case 3:Do(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Do(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[nn]=e,e.stateNode=r}return at(e),null;case 13:if(ke(Oe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Pe&&xt!==null&&e.mode&1&&!(e.flags&128))F_(),Is(),e.flags|=98560,i=!1;else if(i=bo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[nn]=e}else Is(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;at(e),i=!1}else Bt!==null&&(Oc(Bt),Bt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Oe.current&1?Ve===0&&(Ve=3):zd())),e.updateQueue!==null&&(e.flags|=4),at(e),null);case 4:return Ts(),Ic(t,e),t===null&&Di(e.stateNode.containerInfo),at(e),null;case 10:return xd(e.type._context),at(e),null;case 17:return wt(e.type)&&Ca(),at(e),null;case 19:if(ke(Oe),i=e.memoizedState,i===null)return at(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ni(i,!1);else{if(Ve!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Na(t),o!==null){for(e.flags|=128,ni(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ie(Oe,Oe.current&1|2),e.child}t=t.sibling}i.tail!==null&&Fe()>xs&&(e.flags|=128,r=!0,ni(i,!1),e.lanes=4194304)}else{if(!r)if(t=Na(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ni(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Pe)return at(e),null}else 2*Fe()-i.renderingStartTime>xs&&n!==1073741824&&(e.flags|=128,r=!0,ni(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Fe(),e.sibling=null,n=Oe.current,Ie(Oe,r?n&1|2:n&1),e):(at(e),null);case 22:case 23:return $d(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Nt&1073741824&&(at(e),e.subtreeFlags&6&&(e.flags|=8192)):at(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function QC(t,e){switch(Id(e),e.tag){case 1:return wt(e.type)&&Ca(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ts(),ke(Ct),ke(ct),Dd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Od(e),null;case 13:if(ke(Oe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Is()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(Oe),null;case 4:return Ts(),null;case 10:return xd(e.type._context),null;case 22:case 23:return $d(),null;case 24:return null;default:return null}}var Uo=!1,lt=!1,XC=typeof WeakSet=="function"?WeakSet:Set,H=null;function ls(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Me(t,e,r)}else n.current=null}function Ac(t,e,n){try{n()}catch(r){Me(t,e,r)}}var Jh=!1;function JC(t,e){if(uc=ga,t=A_(),Rd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,d=t,c=null;t:for(;;){for(var _;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(_=d.firstChild)!==null;)c=d,d=_;for(;;){if(d===t)break t;if(c===n&&++u===s&&(a=o),c===i&&++h===r&&(l=o),(_=d.nextSibling)!==null)break;d=c,c=d.parentNode}d=_}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(cc={focusedElem:t,selectionRange:n},ga=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var v=C.memoizedProps,x=C.memoizedState,f=e.stateNode,p=f.getSnapshotBeforeUpdate(e.elementType===e.type?v:Kt(e.type,v),x);f.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(T){Me(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return C=Jh,Jh=!1,C}function yi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ac(e,n,i)}s=s.next}while(s!==r)}}function yl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Tc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Rg(t){var e=t.alternate;e!==null&&(t.alternate=null,Rg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[nn],delete e[Mi],delete e[hc],delete e[DC],delete e[bC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Sg(t){return t.tag===5||t.tag===3||t.tag===4}function Zh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Sg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Nc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=va));else if(r!==4&&(t=t.child,t!==null))for(Nc(t,e,n),t=t.sibling;t!==null;)Nc(t,e,n),t=t.sibling}function xc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(xc(t,e,n),t=t.sibling;t!==null;)xc(t,e,n),t=t.sibling}var nt=null,Gt=!1;function bn(t,e,n){for(n=n.child;n!==null;)Ig(t,e,n),n=n.sibling}function Ig(t,e,n){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(cl,n)}catch{}switch(n.tag){case 5:lt||ls(n,e);case 6:var r=nt,s=Gt;nt=null,bn(t,e,n),nt=r,Gt=s,nt!==null&&(Gt?(t=nt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):nt.removeChild(n.stateNode));break;case 18:nt!==null&&(Gt?(t=nt,n=n.stateNode,t.nodeType===8?fu(t.parentNode,n):t.nodeType===1&&fu(t,n),Li(t)):fu(nt,n.stateNode));break;case 4:r=nt,s=Gt,nt=n.stateNode.containerInfo,Gt=!0,bn(t,e,n),nt=r,Gt=s;break;case 0:case 11:case 14:case 15:if(!lt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ac(n,e,o),s=s.next}while(s!==r)}bn(t,e,n);break;case 1:if(!lt&&(ls(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Me(n,e,a)}bn(t,e,n);break;case 21:bn(t,e,n);break;case 22:n.mode&1?(lt=(r=lt)||n.memoizedState!==null,bn(t,e,n),lt=r):bn(t,e,n);break;default:bn(t,e,n)}}function ep(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new XC),e.forEach(function(r){var s=aw.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Wt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:nt=a.stateNode,Gt=!1;break e;case 3:nt=a.stateNode.containerInfo,Gt=!0;break e;case 4:nt=a.stateNode.containerInfo,Gt=!0;break e}a=a.return}if(nt===null)throw Error(U(160));Ig(i,o,s),nt=null,Gt=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){Me(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ag(e,t),e=e.sibling}function Ag(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wt(e,t),Zt(t),r&4){try{yi(3,t,t.return),yl(3,t)}catch(v){Me(t,t.return,v)}try{yi(5,t,t.return)}catch(v){Me(t,t.return,v)}}break;case 1:Wt(e,t),Zt(t),r&512&&n!==null&&ls(n,n.return);break;case 5:if(Wt(e,t),Zt(t),r&512&&n!==null&&ls(n,n.return),t.flags&32){var s=t.stateNode;try{Ti(s,"")}catch(v){Me(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Vm(s,i),Zu(a,o);var u=Zu(a,i);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?Jm(s,d):h==="dangerouslySetInnerHTML"?Qm(s,d):h==="children"?Ti(s,d):cd(s,h,d,u)}switch(a){case"input":Yu(s,i);break;case"textarea":Ym(s,i);break;case"select":var c=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var _=i.value;_!=null?fs(s,!!i.multiple,_,!1):c!==!!i.multiple&&(i.defaultValue!=null?fs(s,!!i.multiple,i.defaultValue,!0):fs(s,!!i.multiple,i.multiple?[]:"",!1))}s[Mi]=i}catch(v){Me(t,t.return,v)}}break;case 6:if(Wt(e,t),Zt(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){Me(t,t.return,v)}}break;case 3:if(Wt(e,t),Zt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Li(e.containerInfo)}catch(v){Me(t,t.return,v)}break;case 4:Wt(e,t),Zt(t);break;case 13:Wt(e,t),Zt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Bd=Fe())),r&4&&ep(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(lt=(u=lt)||h,Wt(e,t),lt=u):Wt(e,t),Zt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(H=t,h=t.child;h!==null;){for(d=H=h;H!==null;){switch(c=H,_=c.child,c.tag){case 0:case 11:case 14:case 15:yi(4,c,c.return);break;case 1:ls(c,c.return);var C=c.stateNode;if(typeof C.componentWillUnmount=="function"){r=c,n=c.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(v){Me(r,n,v)}}break;case 5:ls(c,c.return);break;case 22:if(c.memoizedState!==null){np(d);continue}}_!==null?(_.return=c,H=_):np(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Xm("display",o))}catch(v){Me(t,t.return,v)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(v){Me(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Wt(e,t),Zt(t),r&4&&ep(t);break;case 21:break;default:Wt(e,t),Zt(t)}}function Zt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Sg(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ti(s,""),r.flags&=-33);var i=Zh(t);xc(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Zh(t);Nc(t,a,o);break;default:throw Error(U(161))}}catch(l){Me(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ZC(t,e,n){H=t,Tg(t)}function Tg(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Uo;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||lt;a=Uo;var u=lt;if(Uo=o,(lt=l)&&!u)for(H=s;H!==null;)o=H,l=o.child,o.tag===22&&o.memoizedState!==null?rp(s):l!==null?(l.return=o,H=l):rp(s);for(;i!==null;)H=i,Tg(i),i=i.sibling;H=s,Uo=a,lt=u}tp(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):tp(t)}}function tp(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:lt||yl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!lt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Kt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Uh(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Uh(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Li(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}lt||e.flags&512&&Tc(e)}catch(c){Me(e,e.return,c)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function np(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function rp(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{yl(4,e)}catch(l){Me(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Me(e,s,l)}}var i=e.return;try{Tc(e)}catch(l){Me(e,i,l)}break;case 5:var o=e.return;try{Tc(e)}catch(l){Me(e,o,l)}}}catch(l){Me(e,e.return,l)}if(e===t){H=null;break}var a=e.sibling;if(a!==null){a.return=e.return,H=a;break}H=e.return}}var ew=Math.ceil,La=Ln.ReactCurrentDispatcher,Kd=Ln.ReactCurrentOwner,jt=Ln.ReactCurrentBatchConfig,ce=0,et=null,Ke=null,rt=0,Nt=0,us=_r(0),Ve=0,Gi=null,Mr=0,El=0,Gd=0,Ei=null,yt=null,Bd=0,xs=1/0,pn=null,Pa=!1,kc=null,er=null,Fo=!1,Vn=null,Oa=0,vi=0,Lc=null,sa=-1,ia=0;function mt(){return ce&6?Fe():sa!==-1?sa:sa=Fe()}function tr(t){return t.mode&1?ce&2&&rt!==0?rt&-rt:jC.transition!==null?(ia===0&&(ia=c_()),ia):(t=_e,t!==0||(t=window.event,t=t===void 0?16:g_(t.type)),t):1}function qt(t,e,n,r){if(50<vi)throw vi=0,Lc=null,Error(U(185));ro(t,n,r),(!(ce&2)||t!==et)&&(t===et&&(!(ce&2)&&(El|=n),Ve===4&&Wn(t,rt)),Rt(t,r),n===1&&ce===0&&!(e.mode&1)&&(xs=Fe()+500,ml&&gr()))}function Rt(t,e){var n=t.callbackNode;j0(t,e);var r=_a(t,t===et?rt:0);if(r===0)n!==null&&fh(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&fh(n),e===1)t.tag===0?MC(sp.bind(null,t)):M_(sp.bind(null,t)),PC(function(){!(ce&6)&&gr()}),n=null;else{switch(d_(r)){case 1:n=md;break;case 4:n=l_;break;case 16:n=ma;break;case 536870912:n=u_;break;default:n=ma}n=bg(n,Ng.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ng(t,e){if(sa=-1,ia=0,ce&6)throw Error(U(327));var n=t.callbackNode;if(gs()&&t.callbackNode!==n)return null;var r=_a(t,t===et?rt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Da(t,r);else{e=r;var s=ce;ce|=2;var i=kg();(et!==t||rt!==e)&&(pn=null,xs=Fe()+500,Nr(t,e));do try{rw();break}catch(a){xg(t,a)}while(1);Nd(),La.current=i,ce=s,Ke!==null?e=0:(et=null,rt=0,e=Ve)}if(e!==0){if(e===2&&(s=sc(t),s!==0&&(r=s,e=Pc(t,s))),e===1)throw n=Gi,Nr(t,0),Wn(t,r),Rt(t,Fe()),n;if(e===6)Wn(t,r);else{if(s=t.current.alternate,!(r&30)&&!tw(s)&&(e=Da(t,r),e===2&&(i=sc(t),i!==0&&(r=i,e=Pc(t,i))),e===1))throw n=Gi,Nr(t,0),Wn(t,r),Rt(t,Fe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:vr(t,yt,pn);break;case 3:if(Wn(t,r),(r&130023424)===r&&(e=Bd+500-Fe(),10<e)){if(_a(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){mt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=fc(vr.bind(null,t,yt,pn),e);break}vr(t,yt,pn);break;case 4:if(Wn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Yt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ew(r/1960))-r,10<r){t.timeoutHandle=fc(vr.bind(null,t,yt,pn),r);break}vr(t,yt,pn);break;case 5:vr(t,yt,pn);break;default:throw Error(U(329))}}}return Rt(t,Fe()),t.callbackNode===n?Ng.bind(null,t):null}function Pc(t,e){var n=Ei;return t.current.memoizedState.isDehydrated&&(Nr(t,e).flags|=256),t=Da(t,e),t!==2&&(e=yt,yt=n,e!==null&&Oc(e)),t}function Oc(t){yt===null?yt=t:yt.push.apply(yt,t)}function tw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Jt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Wn(t,e){for(e&=~Gd,e&=~El,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Yt(e),r=1<<n;t[n]=-1,e&=~r}}function sp(t){if(ce&6)throw Error(U(327));gs();var e=_a(t,0);if(!(e&1))return Rt(t,Fe()),null;var n=Da(t,e);if(t.tag!==0&&n===2){var r=sc(t);r!==0&&(e=r,n=Pc(t,r))}if(n===1)throw n=Gi,Nr(t,0),Wn(t,e),Rt(t,Fe()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,vr(t,yt,pn),Rt(t,Fe()),null}function Hd(t,e){var n=ce;ce|=1;try{return t(e)}finally{ce=n,ce===0&&(xs=Fe()+500,ml&&gr())}}function jr(t){Vn!==null&&Vn.tag===0&&!(ce&6)&&gs();var e=ce;ce|=1;var n=jt.transition,r=_e;try{if(jt.transition=null,_e=1,t)return t()}finally{_e=r,jt.transition=n,ce=e,!(ce&6)&&gr()}}function $d(){Nt=us.current,ke(us)}function Nr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,LC(n)),Ke!==null)for(n=Ke.return;n!==null;){var r=n;switch(Id(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ca();break;case 3:Ts(),ke(Ct),ke(ct),Dd();break;case 5:Od(r);break;case 4:Ts();break;case 13:ke(Oe);break;case 19:ke(Oe);break;case 10:xd(r.type._context);break;case 22:case 23:$d()}n=n.return}if(et=t,Ke=t=nr(t.current,null),rt=Nt=e,Ve=0,Gi=null,Gd=El=Mr=0,yt=Ei=null,Sr!==null){for(e=0;e<Sr.length;e++)if(n=Sr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Sr=null}return t}function xg(t,e){do{var n=Ke;try{if(Nd(),ta.current=ka,xa){for(var r=De.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}xa=!1}if(br=0,Xe=He=De=null,gi=!1,Fi=0,Kd.current=null,n===null||n.return===null){Ve=1,Gi=e,Ke=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=rt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var c=h.alternate;c?(h.updateQueue=c.updateQueue,h.memoizedState=c.memoizedState,h.lanes=c.lanes):(h.updateQueue=null,h.memoizedState=null)}var _=$h(o);if(_!==null){_.flags&=-257,zh(_,o,a,i,e),_.mode&1&&Hh(i,u,e),e=_,l=u;var C=e.updateQueue;if(C===null){var v=new Set;v.add(l),e.updateQueue=v}else C.add(l);break e}else{if(!(e&1)){Hh(i,u,e),zd();break e}l=Error(U(426))}}else if(Pe&&a.mode&1){var x=$h(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),zh(x,o,a,i,e),Ad(Ns(l,a));break e}}i=l=Ns(l,a),Ve!==4&&(Ve=2),Ei===null?Ei=[i]:Ei.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var f=fg(i,l,e);jh(i,f);break e;case 1:a=l;var p=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(er===null||!er.has(g)))){i.flags|=65536,e&=-e,i.lanes|=e;var T=hg(i,a,e);jh(i,T);break e}}i=i.return}while(i!==null)}Pg(n)}catch(S){e=S,Ke===n&&n!==null&&(Ke=n=n.return);continue}break}while(1)}function kg(){var t=La.current;return La.current=ka,t===null?ka:t}function zd(){(Ve===0||Ve===3||Ve===2)&&(Ve=4),et===null||!(Mr&268435455)&&!(El&268435455)||Wn(et,rt)}function Da(t,e){var n=ce;ce|=2;var r=kg();(et!==t||rt!==e)&&(pn=null,Nr(t,e));do try{nw();break}catch(s){xg(t,s)}while(1);if(Nd(),ce=n,La.current=r,Ke!==null)throw Error(U(261));return et=null,rt=0,Ve}function nw(){for(;Ke!==null;)Lg(Ke)}function rw(){for(;Ke!==null&&!N0();)Lg(Ke)}function Lg(t){var e=Dg(t.alternate,t,Nt);t.memoizedProps=t.pendingProps,e===null?Pg(t):Ke=e,Kd.current=null}function Pg(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=QC(n,e),n!==null){n.flags&=32767,Ke=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ve=6,Ke=null;return}}else if(n=qC(n,e,Nt),n!==null){Ke=n;return}if(e=e.sibling,e!==null){Ke=e;return}Ke=e=t}while(e!==null);Ve===0&&(Ve=5)}function vr(t,e,n){var r=_e,s=jt.transition;try{jt.transition=null,_e=1,sw(t,e,n,r)}finally{jt.transition=s,_e=r}return null}function sw(t,e,n,r){do gs();while(Vn!==null);if(ce&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(U0(t,i),t===et&&(Ke=et=null,rt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fo||(Fo=!0,bg(ma,function(){return gs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=jt.transition,jt.transition=null;var o=_e;_e=1;var a=ce;ce|=4,Kd.current=null,JC(t,n),Ag(n,t),SC(cc),ga=!!uc,cc=uc=null,t.current=n,ZC(n),x0(),ce=a,_e=o,jt.transition=i}else t.current=n;if(Fo&&(Fo=!1,Vn=t,Oa=s),i=t.pendingLanes,i===0&&(er=null),P0(n.stateNode),Rt(t,Fe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Pa)throw Pa=!1,t=kc,kc=null,t;return Oa&1&&t.tag!==0&&gs(),i=t.pendingLanes,i&1?t===Lc?vi++:(vi=0,Lc=t):vi=0,gr(),null}function gs(){if(Vn!==null){var t=d_(Oa),e=jt.transition,n=_e;try{if(jt.transition=null,_e=16>t?16:t,Vn===null)var r=!1;else{if(t=Vn,Vn=null,Oa=0,ce&6)throw Error(U(331));var s=ce;for(ce|=4,H=t.current;H!==null;){var i=H,o=i.child;if(H.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(H=u;H!==null;){var h=H;switch(h.tag){case 0:case 11:case 15:yi(8,h,i)}var d=h.child;if(d!==null)d.return=h,H=d;else for(;H!==null;){h=H;var c=h.sibling,_=h.return;if(Rg(h),h===u){H=null;break}if(c!==null){c.return=_,H=c;break}H=_}}}var C=i.alternate;if(C!==null){var v=C.child;if(v!==null){C.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}H=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,H=o;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:yi(9,i,i.return)}var f=i.sibling;if(f!==null){f.return=i.return,H=f;break e}H=i.return}}var p=t.current;for(H=p;H!==null;){o=H;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,H=g;else e:for(o=p;H!==null;){if(a=H,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:yl(9,a)}}catch(S){Me(a,a.return,S)}if(a===o){H=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,H=T;break e}H=a.return}}if(ce=s,gr(),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(cl,t)}catch{}r=!0}return r}finally{_e=n,jt.transition=e}}return!1}function ip(t,e,n){e=Ns(n,e),e=fg(t,e,1),t=Zn(t,e,1),e=mt(),t!==null&&(ro(t,1,e),Rt(t,e))}function Me(t,e,n){if(t.tag===3)ip(t,t,n);else for(;e!==null;){if(e.tag===3){ip(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(er===null||!er.has(r))){t=Ns(n,t),t=hg(e,t,1),e=Zn(e,t,1),t=mt(),e!==null&&(ro(e,1,t),Rt(e,t));break}}e=e.return}}function iw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=mt(),t.pingedLanes|=t.suspendedLanes&n,et===t&&(rt&n)===n&&(Ve===4||Ve===3&&(rt&130023424)===rt&&500>Fe()-Bd?Nr(t,0):Gd|=n),Rt(t,e)}function Og(t,e){e===0&&(t.mode&1?(e=xo,xo<<=1,!(xo&130023424)&&(xo=4194304)):e=1);var n=mt();t=An(t,e),t!==null&&(ro(t,e,n),Rt(t,n))}function ow(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Og(t,n)}function aw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),Og(t,n)}var Dg;Dg=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ct.current)Et=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Et=!1,YC(t,e,n);Et=!!(t.flags&131072)}else Et=!1,Pe&&e.flags&1048576&&j_(e,Sa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ra(t,e),t=e.pendingProps;var s=Ss(e,ct.current);_s(e,n),s=Md(null,e,r,t,s,n);var i=jd();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,wt(r)?(i=!0,wa(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ld(e),s.updater=_l,e.stateNode=s,s._reactInternals=e,Ec(e,r,t,n),e=wc(null,e,r,!0,i,n)):(e.tag=0,Pe&&i&&Sd(e),ht(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ra(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=uw(r),t=Kt(r,t),s){case 0:e=Cc(null,e,r,t,n);break e;case 1:e=qh(null,e,r,t,n);break e;case 11:e=Vh(null,e,r,t,n);break e;case 14:e=Yh(null,e,r,Kt(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kt(r,s),Cc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kt(r,s),qh(t,e,r,s,n);case 3:e:{if(gg(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,K_(t,e),Ta(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ns(Error(U(423)),e),e=Qh(t,e,r,n,s);break e}else if(r!==s){s=Ns(Error(U(424)),e),e=Qh(t,e,r,n,s);break e}else for(xt=Jn(e.stateNode.containerInfo.firstChild),kt=e,Pe=!0,Bt=null,n=$_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Is(),r===s){e=Tn(t,e,n);break e}ht(t,e,r,n)}e=e.child}return e;case 5:return z_(e),t===null&&_c(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,dc(r,s)?o=null:i!==null&&dc(r,i)&&(e.flags|=32),_g(t,e),ht(t,e,o,n),e.child;case 6:return t===null&&_c(e),null;case 13:return yg(t,e,n);case 4:return Pd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=As(e,null,r,n):ht(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kt(r,s),Vh(t,e,r,s,n);case 7:return ht(t,e,e.pendingProps,n),e.child;case 8:return ht(t,e,e.pendingProps.children,n),e.child;case 12:return ht(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ie(Ia,r._currentValue),r._currentValue=o,i!==null)if(Jt(i.value,o)){if(i.children===s.children&&!Ct.current){e=Tn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=wn(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),gc(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),gc(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ht(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,_s(e,n),s=Ut(s),r=r(s),e.flags|=1,ht(t,e,r,n),e.child;case 14:return r=e.type,s=Kt(r,e.pendingProps),s=Kt(r.type,s),Yh(t,e,r,s,n);case 15:return pg(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kt(r,s),ra(t,e),e.tag=1,wt(r)?(t=!0,wa(e)):t=!1,_s(e,n),B_(e,r,s),Ec(e,r,s,n),wc(null,e,r,!0,t,n);case 19:return Eg(t,e,n);case 22:return mg(t,e,n)}throw Error(U(156,e.tag))};function bg(t,e){return a_(t,e)}function lw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mt(t,e,n,r){return new lw(t,e,n,r)}function Vd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function uw(t){if(typeof t=="function")return Vd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===fd)return 11;if(t===hd)return 14}return 2}function nr(t,e){var n=t.alternate;return n===null?(n=Mt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function oa(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Vd(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Zr:return xr(n.children,s,i,e);case dd:o=8,s|=8;break;case Bu:return t=Mt(12,n,e,s|2),t.elementType=Bu,t.lanes=i,t;case Hu:return t=Mt(13,n,e,s),t.elementType=Hu,t.lanes=i,t;case $u:return t=Mt(19,n,e,s),t.elementType=$u,t.lanes=i,t;case Hm:return vl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Gm:o=10;break e;case Bm:o=9;break e;case fd:o=11;break e;case hd:o=14;break e;case jn:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Mt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function xr(t,e,n,r){return t=Mt(7,t,r,e),t.lanes=n,t}function vl(t,e,n,r){return t=Mt(22,t,r,e),t.elementType=Hm,t.lanes=n,t.stateNode={isHidden:!1},t}function vu(t,e,n){return t=Mt(6,t,null,e),t.lanes=n,t}function Cu(t,e,n){return e=Mt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function cw(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tu(0),this.expirationTimes=tu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Yd(t,e,n,r,s,i,o,a,l){return t=new cw(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Mt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ld(i),t}function dw(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Mg(t){if(!t)return cr;t=t._reactInternals;e:{if(zr(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(wt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(wt(n))return b_(t,n,e)}return e}function jg(t,e,n,r,s,i,o,a,l){return t=Yd(n,r,!0,t,s,i,o,a,l),t.context=Mg(null),n=t.current,r=mt(),s=tr(n),i=wn(r,s),i.callback=e??null,Zn(n,i,s),t.current.lanes=s,ro(t,s,r),Rt(t,r),t}function Cl(t,e,n,r){var s=e.current,i=mt(),o=tr(s);return n=Mg(n),e.context===null?e.context=n:e.pendingContext=n,e=wn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Zn(s,e,o),t!==null&&(qt(t,s,o,i),ea(t,s,o)),o}function ba(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function op(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function qd(t,e){op(t,e),(t=t.alternate)&&op(t,e)}function fw(){return null}var Ug=typeof reportError=="function"?reportError:function(t){console.error(t)};function Qd(t){this._internalRoot=t}wl.prototype.render=Qd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Cl(t,e,null,null)};wl.prototype.unmount=Qd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;jr(function(){Cl(null,t,null,null)}),e[In]=null}};function wl(t){this._internalRoot=t}wl.prototype.unstable_scheduleHydration=function(t){if(t){var e=p_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Fn.length&&e!==0&&e<Fn[n].priority;n++);Fn.splice(n,0,t),n===0&&__(t)}};function Xd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Rl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ap(){}function hw(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=ba(o);i.call(u)}}var o=jg(e,r,t,0,null,!1,!1,"",ap);return t._reactRootContainer=o,t[In]=o.current,Di(t.nodeType===8?t.parentNode:t),jr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=ba(l);a.call(u)}}var l=Yd(t,0,!1,null,null,!1,!1,"",ap);return t._reactRootContainer=l,t[In]=l.current,Di(t.nodeType===8?t.parentNode:t),jr(function(){Cl(e,l,n,r)}),l}function Sl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=ba(o);a.call(l)}}Cl(e,o,t,s)}else o=hw(n,e,t,s,r);return ba(o)}f_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ci(e.pendingLanes);n!==0&&(_d(e,n|1),Rt(e,Fe()),!(ce&6)&&(xs=Fe()+500,gr()))}break;case 13:jr(function(){var r=An(t,1);if(r!==null){var s=mt();qt(r,t,1,s)}}),qd(t,1)}};gd=function(t){if(t.tag===13){var e=An(t,134217728);if(e!==null){var n=mt();qt(e,t,134217728,n)}qd(t,134217728)}};h_=function(t){if(t.tag===13){var e=tr(t),n=An(t,e);if(n!==null){var r=mt();qt(n,t,e,r)}qd(t,e)}};p_=function(){return _e};m_=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}};tc=function(t,e,n){switch(e){case"input":if(Yu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=pl(r);if(!s)throw Error(U(90));zm(r),Yu(r,s)}}}break;case"textarea":Ym(t,n);break;case"select":e=n.value,e!=null&&fs(t,!!n.multiple,e,!1)}};t_=Hd;n_=jr;var pw={usingClientEntryPoint:!1,Events:[io,rs,pl,Zm,e_,Hd]},ri={findFiberByHostInstance:Rr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},mw={bundleType:ri.bundleType,version:ri.version,rendererPackageName:ri.rendererPackageName,rendererConfig:ri.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ln.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=i_(t),t===null?null:t.stateNode},findFiberByHostInstance:ri.findFiberByHostInstance||fw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wo.isDisabled&&Wo.supportsFiber)try{cl=Wo.inject(mw),rn=Wo}catch{}}Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pw;Pt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xd(e))throw Error(U(200));return dw(t,e,null,n)};Pt.createRoot=function(t,e){if(!Xd(t))throw Error(U(299));var n=!1,r="",s=Ug;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Yd(t,1,!1,null,null,n,!1,r,s),t[In]=e.current,Di(t.nodeType===8?t.parentNode:t),new Qd(e)};Pt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=i_(e),t=t===null?null:t.stateNode,t};Pt.flushSync=function(t){return jr(t)};Pt.hydrate=function(t,e,n){if(!Rl(e))throw Error(U(200));return Sl(null,t,e,!0,n)};Pt.hydrateRoot=function(t,e,n){if(!Xd(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Ug;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=jg(e,null,t,1,n??null,s,!1,i,o),t[In]=e.current,Di(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new wl(e)};Pt.render=function(t,e,n){if(!Rl(e))throw Error(U(200));return Sl(null,t,e,!1,n)};Pt.unmountComponentAtNode=function(t){if(!Rl(t))throw Error(U(40));return t._reactRootContainer?(jr(function(){Sl(null,null,t,!1,function(){t._reactRootContainer=null,t[In]=null})}),!0):!1};Pt.unstable_batchedUpdates=Hd;Pt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Rl(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Sl(t,e,n,!1,r)};Pt.version="18.2.0-next-9e3b772b8-20220608";function Fg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Fg)}catch(t){console.error(t)}}Fg(),jm.exports=Pt;var _w=jm.exports,lp=_w;Ku.createRoot=lp.createRoot,Ku.hydrateRoot=lp.hydrateRoot;/**
 * @remix-run/router v1.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bi(){return Bi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bi.apply(this,arguments)}var Yn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Yn||(Yn={}));const up="popstate";function gw(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Dc("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Ma(s)}return Ew(e,n,null,t)}function Ge(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Jd(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yw(){return Math.random().toString(36).substr(2,8)}function cp(t,e){return{usr:t.state,key:t.key,idx:e}}function Dc(t,e,n,r){return n===void 0&&(n=null),Bi({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Fs(e):e,{state:n,key:e&&e.key||r||yw()})}function Ma(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Fs(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Ew(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Yn.Pop,l=null,u=h();u==null&&(u=0,o.replaceState(Bi({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=Yn.Pop;let x=h(),f=x==null?null:x-u;u=x,l&&l({action:a,location:v.location,delta:f})}function c(x,f){a=Yn.Push;let p=Dc(v.location,x,f);n&&n(p,x),u=h()+1;let g=cp(p,u),T=v.createHref(p);try{o.pushState(g,"",T)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(T)}i&&l&&l({action:a,location:v.location,delta:1})}function _(x,f){a=Yn.Replace;let p=Dc(v.location,x,f);n&&n(p,x),u=h();let g=cp(p,u),T=v.createHref(p);o.replaceState(g,"",T),i&&l&&l({action:a,location:v.location,delta:0})}function C(x){let f=s.location.origin!=="null"?s.location.origin:s.location.href,p=typeof x=="string"?x:Ma(x);return Ge(f,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,f)}let v={get action(){return a},get location(){return t(s,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(up,d),l=x,()=>{s.removeEventListener(up,d),l=null}},createHref(x){return e(s,x)},createURL:C,encodeLocation(x){let f=C(x);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:c,replace:_,go(x){return o.go(x)}};return v}var dp;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(dp||(dp={}));function vw(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Fs(e):e,s=Zd(r.pathname||"/",n);if(s==null)return null;let i=Wg(t);Cw(i);let o=null;for(let a=0;o==null&&a<i.length;++a)o=kw(i[a],Ow(s));return o}function Wg(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Ge(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=rr([r,l.relativePath]),h=n.concat(l);i.children&&i.children.length>0&&(Ge(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Wg(i.children,e,h,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:Nw(u,i.index),routesMeta:h})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of Kg(i.path))s(i,o,l)}),e}function Kg(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Kg(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Cw(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:xw(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ww=/^:\w+$/,Rw=3,Sw=2,Iw=1,Aw=10,Tw=-2,fp=t=>t==="*";function Nw(t,e){let n=t.split("/"),r=n.length;return n.some(fp)&&(r+=Tw),e&&(r+=Sw),n.filter(s=>!fp(s)).reduce((s,i)=>s+(ww.test(i)?Rw:i===""?Iw:Aw),r)}function xw(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function kw(t,e){let{routesMeta:n}=t,r={},s="/",i=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,u=s==="/"?e:e.slice(s.length)||"/",h=Lw({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!h)return null;Object.assign(r,h.params);let d=a.route;i.push({params:r,pathname:rr([s,h.pathname]),pathnameBase:jw(rr([s,h.pathnameBase])),route:d}),h.pathnameBase!=="/"&&(s=rr([s,h.pathnameBase]))}return i}function Lw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Pw(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,h,d)=>{if(h==="*"){let c=a[d]||"";o=i.slice(0,i.length-c.length).replace(/(.)\/+$/,"$1")}return u[h]=Dw(a[d]||"",h),u},{}),pathname:i,pathnameBase:o,pattern:t}}function Pw(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Jd(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Ow(t){try{return decodeURI(t)}catch(e){return Jd(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Dw(t,e){try{return decodeURIComponent(t)}catch(n){return Jd(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Zd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function bw(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Fs(t):t;return{pathname:n?n.startsWith("/")?n:Mw(n,e):e,search:Uw(r),hash:Fw(s)}}function Mw(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function wu(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Gg(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Bg(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Fs(t):(s=Bi({},t),Ge(!s.pathname||!s.pathname.includes("?"),wu("?","pathname","search",s)),Ge(!s.pathname||!s.pathname.includes("#"),wu("#","pathname","hash",s)),Ge(!s.search||!s.search.includes("#"),wu("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(r||o==null)a=n;else{let d=e.length-1;if(o.startsWith("..")){let c=o.split("/");for(;c[0]==="..";)c.shift(),d-=1;s.pathname=c.join("/")}a=d>=0?e[d]:"/"}let l=bw(s,a),u=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const rr=t=>t.join("/").replace(/\/\/+/g,"/"),jw=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Uw=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Fw=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Ww(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Hg=["post","put","patch","delete"];new Set(Hg);const Kw=["get",...Hg];new Set(Kw);/**
 * React Router v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ja(){return ja=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ja.apply(this,arguments)}const ef=P.createContext(null),Gw=P.createContext(null),Ws=P.createContext(null),Il=P.createContext(null),Vr=P.createContext({outlet:null,matches:[],isDataRoute:!1}),$g=P.createContext(null);function Bw(t,e){let{relative:n}=e===void 0?{}:e;ao()||Ge(!1);let{basename:r,navigator:s}=P.useContext(Ws),{hash:i,pathname:o,search:a}=Vg(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:rr([r,o])),s.createHref({pathname:l,search:a,hash:i})}function ao(){return P.useContext(Il)!=null}function Al(){return ao()||Ge(!1),P.useContext(Il).location}function zg(t){P.useContext(Ws).static||P.useLayoutEffect(t)}function un(){let{isDataRoute:t}=P.useContext(Vr);return t?nR():Hw()}function Hw(){ao()||Ge(!1);let t=P.useContext(ef),{basename:e,navigator:n}=P.useContext(Ws),{matches:r}=P.useContext(Vr),{pathname:s}=Al(),i=JSON.stringify(Gg(r).map(l=>l.pathnameBase)),o=P.useRef(!1);return zg(()=>{o.current=!0}),P.useCallback(function(l,u){if(u===void 0&&(u={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let h=Bg(l,JSON.parse(i),s,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:rr([e,h.pathname])),(u.replace?n.replace:n.push)(h,u.state,u)},[e,n,i,s,t])}function Vg(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=P.useContext(Vr),{pathname:s}=Al(),i=JSON.stringify(Gg(r).map(o=>o.pathnameBase));return P.useMemo(()=>Bg(t,JSON.parse(i),s,n==="path"),[t,i,s,n])}function $w(t,e){return zw(t,e)}function zw(t,e,n){ao()||Ge(!1);let{navigator:r}=P.useContext(Ws),{matches:s}=P.useContext(Vr),i=s[s.length-1],o=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let l=Al(),u;if(e){var h;let v=typeof e=="string"?Fs(e):e;a==="/"||(h=v.pathname)!=null&&h.startsWith(a)||Ge(!1),u=v}else u=l;let d=u.pathname||"/",c=a==="/"?d:d.slice(a.length)||"/",_=vw(t,{pathname:c}),C=Xw(_&&_.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:rr([a,r.encodeLocation?r.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?a:rr([a,r.encodeLocation?r.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,n);return e&&C?P.createElement(Il.Provider,{value:{location:ja({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Yn.Pop}},C):C}function Vw(){let t=tR(),e=Ww(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:s},n):null,i)}const Yw=P.createElement(Vw,null);class qw extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?P.createElement(Vr.Provider,{value:this.props.routeContext},P.createElement($g.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Qw(t){let{routeContext:e,match:n,children:r}=t,s=P.useContext(ef);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),P.createElement(Vr.Provider,{value:e},r)}function Xw(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let i=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let a=i.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||Ge(!1),i=i.slice(0,Math.min(i.length,a+1))}return i.reduceRight((a,l,u)=>{let h=l.route.id?o==null?void 0:o[l.route.id]:null,d=null;n&&(d=l.route.errorElement||Yw);let c=e.concat(i.slice(0,u+1)),_=()=>{let C;return h?C=d:l.route.Component?C=P.createElement(l.route.Component,null):l.route.element?C=l.route.element:C=a,P.createElement(Qw,{match:l,routeContext:{outlet:a,matches:c,isDataRoute:n!=null},children:C})};return n&&(l.route.ErrorBoundary||l.route.errorElement||u===0)?P.createElement(qw,{location:n.location,revalidation:n.revalidation,component:d,error:h,children:_(),routeContext:{outlet:null,matches:c,isDataRoute:!0}}):_()},null)}var Yg=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Yg||{}),Ua=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Ua||{});function Jw(t){let e=P.useContext(ef);return e||Ge(!1),e}function Zw(t){let e=P.useContext(Gw);return e||Ge(!1),e}function eR(t){let e=P.useContext(Vr);return e||Ge(!1),e}function qg(t){let e=eR(),n=e.matches[e.matches.length-1];return n.route.id||Ge(!1),n.route.id}function tR(){var t;let e=P.useContext($g),n=Zw(Ua.UseRouteError),r=qg(Ua.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function nR(){let{router:t}=Jw(Yg.UseNavigateStable),e=qg(Ua.UseNavigateStable),n=P.useRef(!1);return zg(()=>{n.current=!0}),P.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,ja({fromRouteId:e},i)))},[t,e])}function hn(t){Ge(!1)}function rR(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Yn.Pop,navigator:i,static:o=!1}=t;ao()&&Ge(!1);let a=e.replace(/^\/*/,"/"),l=P.useMemo(()=>({basename:a,navigator:i,static:o}),[a,i,o]);typeof r=="string"&&(r=Fs(r));let{pathname:u="/",search:h="",hash:d="",state:c=null,key:_="default"}=r,C=P.useMemo(()=>{let v=Zd(u,a);return v==null?null:{location:{pathname:v,search:h,hash:d,state:c,key:_},navigationType:s}},[a,u,h,d,c,_,s]);return C==null?null:P.createElement(Ws.Provider,{value:l},P.createElement(Il.Provider,{children:n,value:C}))}function sR(t){let{children:e,location:n}=t;return $w(bc(e),n)}new Promise(()=>{});function bc(t,e){e===void 0&&(e=[]);let n=[];return P.Children.forEach(t,(r,s)=>{if(!P.isValidElement(r))return;let i=[...e,s];if(r.type===P.Fragment){n.push.apply(n,bc(r.props.children,i));return}r.type!==hn&&Ge(!1),!r.props.index||!r.props.children||Ge(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=bc(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mc(){return Mc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mc.apply(this,arguments)}function iR(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function oR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function aR(t,e){return t.button===0&&(!e||e==="_self")&&!oR(t)}const lR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],uR="startTransition",hp=o0[uR];function cR(t){let{basename:e,children:n,future:r,window:s}=t,i=P.useRef();i.current==null&&(i.current=gw({window:s,v5Compat:!0}));let o=i.current,[a,l]=P.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},h=P.useCallback(d=>{u&&hp?hp(()=>l(d)):l(d)},[l,u]);return P.useLayoutEffect(()=>o.listen(h),[o,h]),P.createElement(rR,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o})}const dR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hR=P.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:u,preventScrollReset:h}=e,d=iR(e,lR),{basename:c}=P.useContext(Ws),_,C=!1;if(typeof u=="string"&&fR.test(u)&&(_=u,dR))try{let p=new URL(window.location.href),g=u.startsWith("//")?new URL(p.protocol+u):new URL(u),T=Zd(g.pathname,c);g.origin===p.origin&&T!=null?u=T+g.search+g.hash:C=!0}catch{}let v=Bw(u,{relative:s}),x=pR(u,{replace:o,state:a,target:l,preventScrollReset:h,relative:s});function f(p){r&&r(p),p.defaultPrevented||x(p)}return P.createElement("a",Mc({},d,{href:_||v,onClick:C||i?r:f,ref:n,target:l}))});var pp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(pp||(pp={}));var mp;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(mp||(mp={}));function pR(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o}=e===void 0?{}:e,a=un(),l=Al(),u=Vg(t,{relative:o});return P.useCallback(h=>{if(aR(h,n)){h.preventDefault();let d=r!==void 0?r:Ma(l)===Ma(u);a(t,{replace:d,state:s,preventScrollReset:i,relative:o})}},[l,a,u,r,s,n,t,i,o])}function mR(t,e){let{capture:n}=e||{};P.useEffect(()=>{let r=n!=null?{capture:n}:void 0;return window.addEventListener("beforeunload",t,r),()=>{window.removeEventListener("beforeunload",t,r)}},[t,n])}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qg={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K=function(t,e){if(!t)throw Ks(e)},Ks=function(t){return new Error("Firebase Database ("+Qg.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},_R=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},tf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let c=(a&15)<<2|u>>6,_=u&63;l||(_=64,o||(c=64)),r.push(n[h],n[d],n[c],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Xg(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_R(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||d==null)throw new gR;const c=i<<2|a>>4;if(r.push(c),u!==64){const _=a<<4&240|u>>2;if(r.push(_),d!==64){const C=u<<6&192|d;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class gR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Jg=function(t){const e=Xg(t);return tf.encodeByteArray(e,!0)},Fa=function(t){return Jg(t).replace(/\./g,"")},Wa=function(t){try{return tf.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(t){return Zg(void 0,t)}function Zg(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!ER(n)||(t[n]=Zg(t[n],e[n]));return t}function ER(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=()=>vR().__FIREBASE_DEFAULTS__,wR=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},RR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Wa(t[1]);return e&&JSON.parse(e)},nf=()=>{try{return CR()||wR()||RR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ey=t=>{var e,n;return(n=(e=nf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},SR=t=>{const e=ey(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},ty=()=>{var t;return(t=nf())===null||t===void 0?void 0:t.config},ny=t=>{var e;return(e=nf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Fa(JSON.stringify(n)),Fa(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rf(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dt())}function AR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ry(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function TR(){const t=dt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function sy(){return Qg.NODE_ADMIN===!0}function NR(){try{return typeof indexedDB=="object"}catch{return!1}}function xR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR="FirebaseError";class yr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=kR,Object.setPrototypeOf(this,yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lo.prototype.create)}}class lo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?LR(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new yr(s,a,r)}}function LR(t,e){return t.replace(PR,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const PR=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(t){return JSON.parse(t)}function $e(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=Hi(Wa(i[0])||""),n=Hi(Wa(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},OR=function(t){const e=iy(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},DR=function(t){const e=iy(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ks(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function jc(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ka(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function Ga(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(_p(i)&&_p(o)){if(!Ga(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function _p(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const c=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(c<<1|c>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],u,h;for(let d=0;d<80;d++){d<40?d<20?(u=a^i&(o^a),h=1518500249):(u=i^o^a,h=1859775393):d<60?(u=i&o|a&(i|o),h=2400959708):(u=i^o^a,h=3395469782);const c=(s<<5|s>>>27)+u+l+h+r[d]&4294967295;l=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=c}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function MR(t,e){const n=new jR(t,e);return n.subscribe.bind(n)}class jR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");UR(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Ru),s.error===void 0&&(s.error=Ru),s.complete===void 0&&(s.complete=Ru);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function UR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ru(){}function sf(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,K(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Nl=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(t){return t&&t._delegate?t._delegate:t}class Ur{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Tl;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(GR(e))try{this.getOrInitializeService({instanceIdentifier:Cr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Cr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Cr){return this.instances.has(e)}getOptions(e=Cr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:KR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Cr){return this.component?this.component.multipleInstances?e:Cr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function KR(t){return t===Cr?void 0:t}function GR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new WR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ye||(ye={}));const HR={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},$R=ye.INFO,zR={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},VR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=zR[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class of{constructor(e){this.name=e,this._logLevel=$R,this._logHandler=VR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...e),this._logHandler(this,ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...e),this._logHandler(this,ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...e),this._logHandler(this,ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...e),this._logHandler(this,ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...e),this._logHandler(this,ye.ERROR,...e)}}const YR=(t,e)=>e.some(n=>t instanceof n);let gp,yp;function qR(){return gp||(gp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QR(){return yp||(yp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const oy=new WeakMap,Uc=new WeakMap,ay=new WeakMap,Su=new WeakMap,af=new WeakMap;function XR(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(sr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&oy.set(n,t)}).catch(()=>{}),af.set(e,t),e}function JR(t){if(Uc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Uc.set(t,e)}let Fc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Uc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ay.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return sr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ZR(t){Fc=t(Fc)}function eS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Iu(this),e,...n);return ay.set(r,e.sort?e.sort():[e]),sr(r)}:QR().includes(t)?function(...e){return t.apply(Iu(this),e),sr(oy.get(this))}:function(...e){return sr(t.apply(Iu(this),e))}}function tS(t){return typeof t=="function"?eS(t):(t instanceof IDBTransaction&&JR(t),YR(t,qR())?new Proxy(t,Fc):t)}function sr(t){if(t instanceof IDBRequest)return XR(t);if(Su.has(t))return Su.get(t);const e=tS(t);return e!==t&&(Su.set(t,e),af.set(e,t)),e}const Iu=t=>af.get(t);function nS(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=sr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(sr(o.result),l.oldVersion,l.newVersion,sr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const rS=["get","getKey","getAll","getAllKeys","count"],sS=["put","add","delete","clear"],Au=new Map;function Ep(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Au.get(e))return Au.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=sS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||rS.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return Au.set(e,i),i}ZR(t=>({...t,get:(e,n,r)=>Ep(e,n)||t.get(e,n,r),has:(e,n)=>!!Ep(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(oS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function oS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wc="@firebase/app",vp="0.9.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr=new of("@firebase/app"),aS="@firebase/app-compat",lS="@firebase/analytics-compat",uS="@firebase/analytics",cS="@firebase/app-check-compat",dS="@firebase/app-check",fS="@firebase/auth",hS="@firebase/auth-compat",pS="@firebase/database",mS="@firebase/database-compat",_S="@firebase/functions",gS="@firebase/functions-compat",yS="@firebase/installations",ES="@firebase/installations-compat",vS="@firebase/messaging",CS="@firebase/messaging-compat",wS="@firebase/performance",RS="@firebase/performance-compat",SS="@firebase/remote-config",IS="@firebase/remote-config-compat",AS="@firebase/storage",TS="@firebase/storage-compat",NS="@firebase/firestore",xS="@firebase/firestore-compat",kS="firebase",LS="10.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc="[DEFAULT]",PS={[Wc]:"fire-core",[aS]:"fire-core-compat",[uS]:"fire-analytics",[lS]:"fire-analytics-compat",[dS]:"fire-app-check",[cS]:"fire-app-check-compat",[fS]:"fire-auth",[hS]:"fire-auth-compat",[pS]:"fire-rtdb",[mS]:"fire-rtdb-compat",[_S]:"fire-fn",[gS]:"fire-fn-compat",[yS]:"fire-iid",[ES]:"fire-iid-compat",[vS]:"fire-fcm",[CS]:"fire-fcm-compat",[wS]:"fire-perf",[RS]:"fire-perf-compat",[SS]:"fire-rc",[IS]:"fire-rc-compat",[AS]:"fire-gcs",[TS]:"fire-gcs-compat",[NS]:"fire-fst",[xS]:"fire-fst-compat","fire-js":"fire-js",[kS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba=new Map,Gc=new Map;function OS(t,e){try{t.container.addComponent(e)}catch(n){Fr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ls(t){const e=t.name;if(Gc.has(e))return Fr.debug(`There were multiple attempts to register component ${e}.`),!1;Gc.set(e,t);for(const n of Ba.values())OS(n,t);return!0}function lf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ir=new lo("app","Firebase",DS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ur("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ir.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs=LS;function ly(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Kc,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw ir.create("bad-app-name",{appName:String(s)});if(n||(n=ty()),!n)throw ir.create("no-options");const i=Ba.get(s);if(i){if(Ga(n,i.options)&&Ga(r,i.config))return i;throw ir.create("duplicate-app",{appName:s})}const o=new BR(s);for(const l of Gc.values())o.addComponent(l);const a=new bS(n,r,o);return Ba.set(s,a),a}function uy(t=Kc){const e=Ba.get(t);if(!e&&t===Kc&&ty())return ly();if(!e)throw ir.create("no-app",{appName:t});return e}function or(t,e,n){var r;let s=(r=PS[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fr.warn(a.join(" "));return}Ls(new Ur(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="firebase-heartbeat-database",jS=1,$i="firebase-heartbeat-store";let Tu=null;function cy(){return Tu||(Tu=nS(MS,jS,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore($i)}}}).catch(t=>{throw ir.create("idb-open",{originalErrorMessage:t.message})})),Tu}async function US(t){try{return await(await cy()).transaction($i).objectStore($i).get(dy(t))}catch(e){if(e instanceof yr)Fr.warn(e.message);else{const n=ir.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fr.warn(n.message)}}}async function Cp(t,e){try{const r=(await cy()).transaction($i,"readwrite");await r.objectStore($i).put(e,dy(t)),await r.done}catch(n){if(n instanceof yr)Fr.warn(n.message);else{const r=ir.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Fr.warn(r.message)}}}function dy(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=1024,WS=30*24*60*60*1e3;class KS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new BS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=wp();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=WS}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=wp(),{heartbeatsToSend:n,unsentEntries:r}=GS(this._heartbeatsCache.heartbeats),s=Fa(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function wp(){return new Date().toISOString().substring(0,10)}function GS(t,e=FS){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Rp(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Rp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class BS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return NR()?xR().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await US(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Cp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Cp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Rp(t){return Fa(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(t){Ls(new Ur("platform-logger",e=>new iS(e),"PRIVATE")),Ls(new Ur("heartbeat",e=>new KS(e),"PRIVATE")),or(Wc,vp,t),or(Wc,vp,"esm2017"),or("fire-js","")}HS("");var $S="firebase",zS="10.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */or($S,zS,"app");const Sp="@firebase/database",Ip="1.0.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fy="";function VS(t){fy=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),$e(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Hi(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Pn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new YS(e)}}catch{}return new qS},Ar=hy("localStorage"),Bc=hy("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new of("@firebase/database"),QS=function(){let t=1;return function(){return t++}}(),py=function(t){const e=FR(t),n=new bR;n.update(e);const r=n.digest();return tf.encodeByteArray(r)},uo=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=uo.apply(null,r):typeof r=="object"?e+=$e(r):e+=r,e+=" "}return e};let kr=null,Ap=!0;const XS=function(t,e){K(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(ys.logLevel=ye.VERBOSE,kr=ys.log.bind(ys),e&&Bc.set("logging_enabled",!0)):typeof t=="function"?kr=t:(kr=null,Bc.remove("logging_enabled"))},ut=function(...t){if(Ap===!0&&(Ap=!1,kr===null&&Bc.get("logging_enabled")===!0&&XS(!0)),kr){const e=uo.apply(null,t);kr(e)}},co=function(t){return function(...e){ut(t,...e)}},Hc=function(...t){const e="FIREBASE INTERNAL ERROR: "+uo(...t);ys.error(e)},Nn=function(...t){const e=`FIREBASE FATAL ERROR: ${uo(...t)}`;throw ys.error(e),new Error(e)},St=function(...t){const e="FIREBASE WARNING: "+uo(...t);ys.warn(e)},JS=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&St("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},my=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},ZS=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ps="[MIN_NAME]",Wr="[MAX_NAME]",Hs=function(t,e){if(t===e)return 0;if(t===Ps||e===Wr)return-1;if(e===Ps||t===Wr)return 1;{const n=Tp(t),r=Tp(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},eI=function(t,e){return t===e?0:t<e?-1:1},si=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+$e(e))},uf=function(t){if(typeof t!="object"||t===null)return $e(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=$e(e[r]),n+=":",n+=uf(t[e[r]]);return n+="}",n},_y=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function It(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const gy=function(t){K(!my(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,l;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(l=n;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(s?1:0),u.reverse();const h=u.join("");let d="";for(l=0;l<64;l+=8){let c=parseInt(h.substr(l,8),2).toString(16);c.length===1&&(c="0"+c),d=d+c}return d.toLowerCase()},tI=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},nI=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function rI(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const sI=new RegExp("^-?(0*)\\d{1,10}$"),iI=-2147483648,oI=2147483647,Tp=function(t){if(sI.test(t)){const e=Number(t);if(e>=iI&&e<=oI)return e}return null},$s=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw St("Exception was thrown by user callback.",n),e},Math.floor(0))}},aI=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ci=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){St(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(ut("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',St(e)}}class Es{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Es.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf="5",yy="v",Ey="s",vy="r",Cy="f",wy=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ry="ls",Sy="p",$c="ac",Iy="websocket",Ay="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e,n,r,s,i=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ar.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ar.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function cI(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Ny(t,e,n){K(typeof e=="string","typeof type must == string"),K(typeof n=="object","typeof params must == object");let r;if(e===Iy)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Ay)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);cI(t)&&(n.ns=t.namespace);const s=[];return It(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(){this.counters_={}}incrementCounter(e,n=1){Pn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return yR(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nu={},xu={};function df(t){const e=t.toString();return Nu[e]||(Nu[e]=new dI),Nu[e]}function fI(t,e){const n=t.toString();return xu[n]||(xu[n]=e()),xu[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&$s(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np="start",pI="close",mI="pLPCommand",_I="pRTLPCB",xy="id",ky="pw",Ly="ser",gI="cb",yI="seg",EI="ts",vI="d",CI="dframe",Py=1870,Oy=30,wI=Py-Oy,RI=25e3,SI=3e4;class cs{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=co(e),this.stats_=df(n),this.urlFn=l=>(this.appCheckToken&&(l[$c]=this.appCheckToken),Ny(n,Ay,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new hI(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(SI)),ZS(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ff((...i)=>{const[o,a,l,u,h]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Np)this.id=a,this.password=l;else if(o===pI)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[Np]="t",r[Ly]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[gI]=this.scriptTagHolder.uniqueCallbackIdentifier),r[yy]=cf,this.transportSessionId&&(r[Ey]=this.transportSessionId),this.lastSessionId&&(r[Ry]=this.lastSessionId),this.applicationId&&(r[Sy]=this.applicationId),this.appCheckToken&&(r[$c]=this.appCheckToken),typeof location<"u"&&location.hostname&&wy.test(location.hostname)&&(r[vy]=Cy);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){cs.forceAllow_=!0}static forceDisallow(){cs.forceDisallow_=!0}static isAvailable(){return cs.forceAllow_?!0:!cs.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!tI()&&!nI()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=$e(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Jg(n),s=_y(r,wI);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[CI]="t",r[xy]=e,r[ky]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=$e(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class ff{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=QS(),window[mI+this.uniqueCallbackIdentifier]=e,window[_I+this.uniqueCallbackIdentifier]=n,this.myIFrame=ff.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){ut("frame writing exception"),a.stack&&ut(a.stack),ut(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ut("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[xy]=this.myID,e[ky]=this.myPW,e[Ly]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Oy+r.length<=Py;){const o=this.pendingSegs.shift();r=r+"&"+yI+s+"="+o.seg+"&"+EI+s+"="+o.ts+"&"+vI+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(RI)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{ut("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=16384,AI=45e3;let Ha=null;typeof MozWebSocket<"u"?Ha=MozWebSocket:typeof WebSocket<"u"&&(Ha=WebSocket);class Ht{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=co(this.connId),this.stats_=df(n),this.connURL=Ht.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[yy]=cf,typeof location<"u"&&location.hostname&&wy.test(location.hostname)&&(o[vy]=Cy),n&&(o[Ey]=n),r&&(o[Ry]=r),s&&(o[$c]=s),i&&(o[Sy]=i),Ny(e,Iy,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ar.set("previous_websocket_failure",!0);try{let r;sy(),this.mySock=new Ha(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Ht.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Ha!==null&&!Ht.forceDisallow_}static previouslyFailed(){return Ar.isInMemoryStorage||Ar.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ar.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Hi(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(K(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=$e(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=_y(n,II);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(AI))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ht.responsesRequiredToBeHealthy=2;Ht.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[cs,Ht]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Ht&&Ht.isAvailable();let r=n&&!Ht.previouslyFailed();if(e.webSocketOnly&&(n||St("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Ht];else{const s=this.transports_=[];for(const i of zi.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);zi.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}zi.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI=6e4,NI=5e3,xI=10*1024,kI=100*1024,ku="t",xp="d",LI="s",kp="r",PI="e",Lp="o",Pp="a",Op="n",Dp="p",OI="h";class DI{constructor(e,n,r,s,i,o,a,l,u,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=co("c:"+this.id+":"),this.transportManager_=new zi(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Ci(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>kI?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>xI?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ku in e){const n=e[ku];n===Pp?this.upgradeIfSecondaryHealthy_():n===kp?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Lp&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=si("t",e),r=si("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Dp,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Pp,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Op,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=si("t",e),r=si("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=si(ku,e);if(xp in e){const r=e[xp];if(n===OI){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===Op){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===LI?this.onConnectionShutdown_(r):n===kp?this.onReset_(r):n===PI?Hc("Server Error: "+r):n===Lp?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Hc("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),cf!==r&&St("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ci(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(TI))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ci(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(NI))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Dp,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ar.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e){this.allowedEvents_=e,this.listeners_={},K(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){K(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a extends by{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!rf()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new $a}getInitialEvent(e){return K(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp=32,Mp=768;class ve{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function de(){return new ve("")}function re(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function dr(t){return t.pieces_.length-t.pieceNum_}function Se(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ve(t.pieces_,e)}function My(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function bI(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function jy(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Uy(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ve(e,0)}function ze(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ve)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new ve(n,0)}function ie(t){return t.pieceNum_>=t.pieces_.length}function pt(t,e){const n=re(t),r=re(e);if(n===null)return e;if(n===r)return pt(Se(t),Se(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function hf(t,e){if(dr(t)!==dr(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function zt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(dr(t)>dr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class MI{constructor(e,n){this.errorPrefix_=n,this.parts_=jy(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Nl(this.parts_[r]);Fy(this)}}function jI(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Nl(e),Fy(t)}function UI(t){const e=t.parts_.pop();t.byteLength_-=Nl(e),t.parts_.length>0&&(t.byteLength_-=1)}function Fy(t){if(t.byteLength_>Mp)throw new Error(t.errorPrefix_+"has a key path longer than "+Mp+" bytes ("+t.byteLength_+").");if(t.parts_.length>bp)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+bp+") or object contains a cycle "+wr(t))}function wr(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf extends by{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new pf}getInitialEvent(e){return K(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii=1e3,FI=60*5*1e3,jp=30*1e3,WI=1.3,KI=3e4,GI="server_kill",Up=3;class Rn extends Dy{constructor(e,n,r,s,i,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Rn.nextPersistentConnectionId_++,this.log_=co("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ii,this.maxReconnectDelay_=FI,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!sy())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");pf.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&$a.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_($e(i)),K(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new Tl,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),K(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),K(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const l=a.d,u=a.s;Rn.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(u,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Pn(e,"w")){const r=ks(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();St(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||DR(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=jp)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=OR(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),K(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+$e(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Hc("Unrecognized action received from server: "+$e(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){K(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ii,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ii,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>KI&&(this.reconnectDelay_=ii),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*WI)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Rn.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},u=function(d){K(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:u};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,c]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?ut("getToken() completed but was canceled"):(ut("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=c&&c.token,a=new DI(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,_=>{St(_+" ("+this.repoInfo_.toString()+")"),this.interrupt(GI)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&St(d),l())}}}interrupt(e){ut("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ut("Resuming connection for reason: "+e),delete this.interruptReasons_[e],jc(this.interruptReasons_)&&(this.reconnectDelay_=ii,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>uf(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new ve(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){ut("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Up&&(this.reconnectDelay_=jp,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){ut("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Up&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+fy.replace(/\./g,"-")]=1,rf()?e["framework.cordova"]=1:ry()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=$a.getInstance().currentlyOnline();return jc(this.interruptReasons_)&&e}}Rn.nextPersistentConnectionId_=0;Rn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new se(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new se(Ps,e),s=new se(Ps,n);return this.compare(r,s)!==0}minPost(){return se.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ko;class Wy extends xl{static get __EMPTY_NODE(){return Ko}static set __EMPTY_NODE(e){Ko=e}compare(e,n){return Hs(e.name,n.name)}isDefinedOn(e){throw Ks("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return se.MIN}maxPost(){return new se(Wr,Ko)}makePost(e,n){return K(typeof e=="string","KeyIndex indexValue must always be a string."),new se(e,Ko)}toString(){return".key"}}const vs=new Wy;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Je{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Je.RED,this.left=s??vt.EMPTY_NODE,this.right=i??vt.EMPTY_NODE}copy(e,n,r,s,i){return new Je(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return vt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return vt.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Je.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Je.RED=!0;Je.BLACK=!1;class BI{copy(e,n,r,s,i){return this}insert(e,n,r){return new Je(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class vt{constructor(e,n=vt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new vt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Je.BLACK,null,null))}remove(e){return new vt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Je.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Go(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Go(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Go(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Go(this.root_,null,this.comparator_,!0,e)}}vt.EMPTY_NODE=new BI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(t,e){return Hs(t.name,e.name)}function mf(t,e){return Hs(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zc;function $I(t){zc=t}const Ky=function(t){return typeof t=="number"?"number:"+gy(t):"string:"+t},Gy=function(t){if(t.isLeafNode()){const e=t.val();K(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Pn(e,".sv"),"Priority must be a string or number.")}else K(t===zc||t.isEmpty(),"priority of unexpected type.");K(t===zc||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fp;class Qe{constructor(e,n=Qe.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,K(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Gy(this.priorityNode_)}static set __childrenNodeConstructor(e){Fp=e}static get __childrenNodeConstructor(){return Fp}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Qe(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Qe.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ie(e)?this:re(e)===".priority"?this.priorityNode_:Qe.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Qe.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=re(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(K(r!==".priority"||dr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Qe.__childrenNodeConstructor.EMPTY_NODE.updateChild(Se(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Ky(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=gy(this.value_):e+=this.value_,this.lazyHash_=py(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Qe.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Qe.__childrenNodeConstructor?-1:(K(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=Qe.VALUE_TYPE_ORDER.indexOf(n),i=Qe.VALUE_TYPE_ORDER.indexOf(r);return K(s>=0,"Unknown leaf type: "+n),K(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Qe.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let By,Hy;function zI(t){By=t}function VI(t){Hy=t}class YI extends xl{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?Hs(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return se.MIN}maxPost(){return new se(Wr,new Qe("[PRIORITY-POST]",Hy))}makePost(e,n){const r=By(e);return new se(n,new Qe("[PRIORITY-POST]",r))}toString(){return".priority"}}const je=new YI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI=Math.log(2);class QI{constructor(e){const n=i=>parseInt(Math.log(i)/qI,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const za=function(t,e,n,r){t.sort(e);const s=function(l,u){const h=u-l;let d,c;if(h===0)return null;if(h===1)return d=t[l],c=n?n(d):d,new Je(c,d.node,Je.BLACK,null,null);{const _=parseInt(h/2,10)+l,C=s(l,_),v=s(_+1,u);return d=t[_],c=n?n(d):d,new Je(c,d.node,Je.BLACK,C,v)}},i=function(l){let u=null,h=null,d=t.length;const c=function(C,v){const x=d-C,f=d;d-=C;const p=s(x+1,f),g=t[x],T=n?n(g):g;_(new Je(T,g.node,v,null,p))},_=function(C){u?(u.left=C,u=C):(h=C,u=C)};for(let C=0;C<l.count;++C){const v=l.nextBitIsOne(),x=Math.pow(2,l.count-(C+1));v?c(x,Je.BLACK):(c(x,Je.BLACK),c(x,Je.RED))}return h},o=new QI(t.length),a=i(o);return new vt(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lu;const Xr={};class En{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return K(Xr&&je,"ChildrenNode.ts has not been loaded"),Lu=Lu||new En({".priority":Xr},{".priority":je}),Lu}get(e){const n=ks(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof vt?n:null}hasIndex(e){return Pn(this.indexSet_,e.toString())}addIndex(e,n){K(e!==vs,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(se.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=za(r,e.getCompare()):a=Xr;const l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;const h=Object.assign({},this.indexes_);return h[l]=a,new En(h,u)}addToIndexes(e,n){const r=Ka(this.indexes_,(s,i)=>{const o=ks(this.indexSet_,i);if(K(o,"Missing index implementation for "+i),s===Xr)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(se.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),za(a,o.getCompare())}else return Xr;else{const a=n.get(e.name);let l=s;return a&&(l=l.remove(new se(e.name,a))),l.insert(e,e.node)}});return new En(r,this.indexSet_)}removeFromIndexes(e,n){const r=Ka(this.indexes_,s=>{if(s===Xr)return s;{const i=n.get(e.name);return i?s.remove(new se(e.name,i)):s}});return new En(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oi;class X{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Gy(this.priorityNode_),this.children_.isEmpty()&&K(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return oi||(oi=new X(new vt(mf),null,En.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||oi}updatePriority(e){return this.children_.isEmpty()?this:new X(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?oi:n}}getChild(e){const n=re(e);return n===null?this:this.getImmediateChild(n).getChild(Se(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(K(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new se(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?oi:this.priorityNode_;return new X(s,o,i)}}updateChild(e,n){const r=re(e);if(r===null)return n;{K(re(e)!==".priority"||dr(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Se(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(je,(o,a)=>{n[o]=a.val(e),r++,i&&X.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Ky(this.getPriority().val())+":"),this.forEachChild(je,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":py(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new se(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new se(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new se(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,se.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,se.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===fo?-1:0}withIndex(e){if(e===vs||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new X(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===vs||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(je),s=n.getIterator(je);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===vs?null:this.indexMap_.get(e.toString())}}X.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class XI extends X{constructor(){super(new vt(mf),X.EMPTY_NODE,En.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return X.EMPTY_NODE}isEmpty(){return!1}}const fo=new XI;Object.defineProperties(se,{MIN:{value:new se(Ps,X.EMPTY_NODE)},MAX:{value:new se(Wr,fo)}});Wy.__EMPTY_NODE=X.EMPTY_NODE;Qe.__childrenNodeConstructor=X;$I(fo);VI(fo);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=!0;function Ze(t,e=null){if(t===null)return X.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),K(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Qe(n,Ze(e))}if(!(t instanceof Array)&&JI){const n=[];let r=!1;if(It(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=Ze(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new se(o,l)))}}),n.length===0)return X.EMPTY_NODE;const i=za(n,HI,o=>o.name,mf);if(r){const o=za(n,je.getCompare());return new X(i,Ze(e),new En({".priority":o},{".priority":je}))}else return new X(i,Ze(e),En.Default)}else{let n=X.EMPTY_NODE;return It(t,(r,s)=>{if(Pn(t,r)&&r.substring(0,1)!=="."){const i=Ze(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(Ze(e))}}zI(Ze);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI extends xl{constructor(e){super(),this.indexPath_=e,K(!ie(e)&&re(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?Hs(e.name,n.name):i}makePost(e,n){const r=Ze(e),s=X.EMPTY_NODE.updateChild(this.indexPath_,r);return new se(n,s)}maxPost(){const e=X.EMPTY_NODE.updateChild(this.indexPath_,fo);return new se(Wr,e)}toString(){return jy(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA extends xl{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Hs(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return se.MIN}maxPost(){return se.MAX}makePost(e,n){const r=Ze(e);return new se(n,r)}toString(){return".value"}}const tA=new eA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(t){return{type:"value",snapshotNode:t}}function Os(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Vi(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Yi(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function nA(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){K(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Vi(n,a)):K(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Os(n,r)):o.trackChildChange(Yi(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(je,(s,i)=>{n.hasChild(s)||r.trackChildChange(Vi(s,i))}),n.isLeafNode()||n.forEachChild(je,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(Yi(s,i,o))}else r.trackChildChange(Os(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?X.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this.indexedFilter_=new _f(e.getIndex()),this.index_=e.getIndex(),this.startPost_=qi.getStartPost_(e),this.endPost_=qi.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new se(n,r))||(r=X.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=X.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(X.EMPTY_NODE);const i=this;return n.forEachChild(je,(o,a)=>{i.matches(new se(o,a))||(s=s.updateImmediateChild(o,X.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new qi(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new se(n,r))||(r=X.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=X.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=X.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(X.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,X.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(c,_)=>d(_,c)}else o=this.index_.getCompare();const a=e;K(a.numChildren()===this.limit_,"");const l=new se(n,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(a.hasChild(n)){const d=a.getImmediateChild(n);let c=s.getChildAfterChild(this.index_,u,this.reverse_);for(;c!=null&&(c.name===n||a.hasChild(c.name));)c=s.getChildAfterChild(this.index_,c,this.reverse_);const _=c==null?1:o(c,l);if(h&&!r.isEmpty()&&_>=0)return i!=null&&i.trackChildChange(Yi(n,r,d)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(Vi(n,d));const v=a.updateImmediateChild(n,X.EMPTY_NODE);return c!=null&&this.rangedFilter_.matches(c)?(i!=null&&i.trackChildChange(Os(c.name,c.node)),v.updateImmediateChild(c.name,c.node)):v}}else return r.isEmpty()?e:h&&o(u,l)>=0?(i!=null&&(i.trackChildChange(Vi(u.name,u.node)),i.trackChildChange(Os(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(u.name,X.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=je}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return K(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return K(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ps}hasEnd(){return this.endSet_}getIndexEndValue(){return K(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return K(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Wr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return K(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===je}copy(){const e=new gf;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function sA(t){return t.loadsAllData()?new _f(t.getIndex()):t.hasLimit()?new rA(t):new qi(t)}function Wp(t){const e={};if(t.isDefault())return e;let n;if(t.index_===je?n="$priority":t.index_===tA?n="$value":t.index_===vs?n="$key":(K(t.index_ instanceof ZI,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=$e(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=$e(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+$e(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=$e(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+$e(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Kp(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==je&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va extends Dy{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=co("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(K(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=Va.getListenId_(e,r),a={};this.listens_[o]=a;const l=Wp(e._queryParams);this.restRequest_(i+".json",l,(u,h)=>{let d=h;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(i,d,!1,r),ks(this.listens_,o)===a){let c;u?u===401?c="permission_denied":c="rest_error:"+u:c="ok",s(c,null)}})}unlisten(e,n){const r=Va.getListenId_(e,n);delete this.listens_[r]}get(e){const n=Wp(e._queryParams),r=e._path.toString(),s=new Tl;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Gs(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Hi(a.responseText)}catch{St("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&St("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(){this.rootNode_=X.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ya(){return{value:null,children:new Map}}function zy(t,e,n){if(ie(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=re(e);t.children.has(r)||t.children.set(r,Ya());const s=t.children.get(r);e=Se(e),zy(s,e,n)}}function Vc(t,e,n){t.value!==null?n(e,t.value):oA(t,(r,s)=>{const i=new ve(e.toString()+"/"+r);Vc(s,i,n)})}function oA(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&It(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp=10*1e3,lA=30*1e3,uA=5*60*1e3;class cA{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new aA(e);const r=Gp+(lA-Gp)*Math.random();Ci(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;It(e,(s,i)=>{i>0&&Pn(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),Ci(this.reportStats_.bind(this),Math.floor(Math.random()*2*uA))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Vt||(Vt={}));function Vy(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function yf(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Ef(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Vt.ACK_USER_WRITE,this.source=Vy()}operationForChild(e){if(ie(this.path)){if(this.affectedTree.value!=null)return K(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ve(e));return new qa(de(),n,this.revert)}}else return K(re(this.path)===e,"operationForChild called for unrelated child."),new qa(Se(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,n){this.source=e,this.path=n,this.type=Vt.LISTEN_COMPLETE}operationForChild(e){return ie(this.path)?new Qi(this.source,de()):new Qi(this.source,Se(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Vt.OVERWRITE}operationForChild(e){return ie(this.path)?new Kr(this.source,de(),this.snap.getImmediateChild(e)):new Kr(this.source,Se(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Vt.MERGE}operationForChild(e){if(ie(this.path)){const n=this.children.subtree(new ve(e));return n.isEmpty()?null:n.value?new Kr(this.source,de(),n.value):new Xi(this.source,de(),n)}else return K(re(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Xi(this.source,Se(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ie(e))return this.isFullyInitialized()&&!this.filtered_;const n=re(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function fA(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(nA(o.childName,o.snapshotNode))}),ai(t,s,"child_removed",e,r,n),ai(t,s,"child_added",e,r,n),ai(t,s,"child_moved",i,r,n),ai(t,s,"child_changed",e,r,n),ai(t,s,"value",e,r,n),s}function ai(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,l)=>pA(t,a,l)),o.forEach(a=>{const l=hA(t,a,i);s.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function hA(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function pA(t,e,n){if(e.childName==null||n.childName==null)throw Ks("Should only compare child_ events.");const r=new se(e.childName,e.snapshotNode),s=new se(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(t,e){return{eventCache:t,serverCache:e}}function wi(t,e,n,r){return kl(new fr(e,n,r),t.serverCache)}function Yy(t,e,n,r){return kl(t.eventCache,new fr(e,n,r))}function Qa(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Gr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pu;const mA=()=>(Pu||(Pu=new vt(eI)),Pu);class xe{constructor(e,n=mA()){this.value=e,this.children=n}static fromObject(e){let n=new xe(null);return It(e,(r,s)=>{n=n.set(new ve(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:de(),value:this.value};if(ie(e))return null;{const r=re(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(Se(e),n);return i!=null?{path:ze(new ve(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ie(e))return this;{const n=re(e),r=this.children.get(n);return r!==null?r.subtree(Se(e)):new xe(null)}}set(e,n){if(ie(e))return new xe(n,this.children);{const r=re(e),i=(this.children.get(r)||new xe(null)).set(Se(e),n),o=this.children.insert(r,i);return new xe(this.value,o)}}remove(e){if(ie(e))return this.children.isEmpty()?new xe(null):new xe(null,this.children);{const n=re(e),r=this.children.get(n);if(r){const s=r.remove(Se(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new xe(null):new xe(this.value,i)}else return this}}get(e){if(ie(e))return this.value;{const n=re(e),r=this.children.get(n);return r?r.get(Se(e)):null}}setTree(e,n){if(ie(e))return n;{const r=re(e),i=(this.children.get(r)||new xe(null)).setTree(Se(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new xe(this.value,o)}}fold(e){return this.fold_(de(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(ze(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,de(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(ie(e))return null;{const i=re(e),o=this.children.get(i);return o?o.findOnPath_(Se(e),ze(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,de(),n)}foreachOnPath_(e,n,r){if(ie(e))return this;{this.value&&r(n,this.value);const s=re(e),i=this.children.get(s);return i?i.foreachOnPath_(Se(e),ze(n,s),r):new xe(null)}}foreach(e){this.foreach_(de(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(ze(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.writeTree_=e}static empty(){return new Qt(new xe(null))}}function Ri(t,e,n){if(ie(e))return new Qt(new xe(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=pt(s,e);return i=i.updateChild(o,n),new Qt(t.writeTree_.set(s,i))}else{const s=new xe(n),i=t.writeTree_.setTree(e,s);return new Qt(i)}}}function Bp(t,e,n){let r=t;return It(n,(s,i)=>{r=Ri(r,ze(e,s),i)}),r}function Hp(t,e){if(ie(e))return Qt.empty();{const n=t.writeTree_.setTree(e,new xe(null));return new Qt(n)}}function Yc(t,e){return Yr(t,e)!=null}function Yr(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(pt(n.path,e)):null}function $p(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(je,(r,s)=>{e.push(new se(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new se(r,s.value))}),e}function ar(t,e){if(ie(e))return t;{const n=Yr(t,e);return n!=null?new Qt(new xe(n)):new Qt(t.writeTree_.subtree(e))}}function qc(t){return t.writeTree_.isEmpty()}function Ds(t,e){return qy(de(),t.writeTree_,e)}function qy(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(K(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=qy(ze(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(ze(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(t,e){return Zy(e,t)}function _A(t,e,n,r,s){K(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=Ri(t.visibleWrites,e,n)),t.lastWriteId=r}function gA(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function yA(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);K(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&EA(a,r.path)?s=!1:zt(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return vA(t),!0;if(r.snap)t.visibleWrites=Hp(t.visibleWrites,r.path);else{const a=r.children;It(a,l=>{t.visibleWrites=Hp(t.visibleWrites,ze(r.path,l))})}return!0}else return!1}function EA(t,e){if(t.snap)return zt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&zt(ze(t.path,n),e))return!0;return!1}function vA(t){t.visibleWrites=Qy(t.allWrites,CA,de()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function CA(t){return t.visible}function Qy(t,e,n){let r=Qt.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)zt(n,o)?(a=pt(n,o),r=Ri(r,a,i.snap)):zt(o,n)&&(a=pt(o,n),r=Ri(r,de(),i.snap.getChild(a)));else if(i.children){if(zt(n,o))a=pt(n,o),r=Bp(r,a,i.children);else if(zt(o,n))if(a=pt(o,n),ie(a))r=Bp(r,de(),i.children);else{const l=ks(i.children,re(a));if(l){const u=l.getChild(Se(a));r=Ri(r,de(),u)}}}else throw Ks("WriteRecord should have .snap or .children")}}return r}function Xy(t,e,n,r,s){if(!r&&!s){const i=Yr(t.visibleWrites,e);if(i!=null)return i;{const o=ar(t.visibleWrites,e);if(qc(o))return n;if(n==null&&!Yc(o,de()))return null;{const a=n||X.EMPTY_NODE;return Ds(o,a)}}}else{const i=ar(t.visibleWrites,e);if(!s&&qc(i))return n;if(!s&&n==null&&!Yc(i,de()))return null;{const o=function(u){return(u.visible||s)&&(!r||!~r.indexOf(u.writeId))&&(zt(u.path,e)||zt(e,u.path))},a=Qy(t.allWrites,o,e),l=n||X.EMPTY_NODE;return Ds(a,l)}}}function wA(t,e,n){let r=X.EMPTY_NODE;const s=Yr(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(je,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=ar(t.visibleWrites,e);return n.forEachChild(je,(o,a)=>{const l=Ds(ar(i,new ve(o)),a);r=r.updateImmediateChild(o,l)}),$p(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=ar(t.visibleWrites,e);return $p(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function RA(t,e,n,r,s){K(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=ze(e,n);if(Yc(t.visibleWrites,i))return null;{const o=ar(t.visibleWrites,i);return qc(o)?s.getChild(n):Ds(o,s.getChild(n))}}function SA(t,e,n,r){const s=ze(e,n),i=Yr(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=ar(t.visibleWrites,s);return Ds(o,r.getNode().getImmediateChild(n))}else return null}function IA(t,e){return Yr(t.visibleWrites,e)}function AA(t,e,n,r,s,i,o){let a;const l=ar(t.visibleWrites,e),u=Yr(l,de());if(u!=null)a=u;else if(n!=null)a=Ds(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],d=o.getCompare(),c=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let _=c.getNext();for(;_&&h.length<s;)d(_,r)!==0&&h.push(_),_=c.getNext();return h}else return[]}function TA(){return{visibleWrites:Qt.empty(),allWrites:[],lastWriteId:-1}}function Xa(t,e,n,r){return Xy(t.writeTree,t.treePath,e,n,r)}function vf(t,e){return wA(t.writeTree,t.treePath,e)}function zp(t,e,n,r){return RA(t.writeTree,t.treePath,e,n,r)}function Ja(t,e){return IA(t.writeTree,ze(t.treePath,e))}function NA(t,e,n,r,s,i){return AA(t.writeTree,t.treePath,e,n,r,s,i)}function Cf(t,e,n){return SA(t.writeTree,t.treePath,e,n)}function Jy(t,e){return Zy(ze(t.treePath,e),t.writeTree)}function Zy(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;K(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),K(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,Yi(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,Vi(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,Os(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,Yi(r,e.snapshotNode,s.oldSnap));else throw Ks("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const eE=new kA;class wf{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new fr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Cf(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Gr(this.viewCache_),i=NA(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(t){return{filter:t}}function PA(t,e){K(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),K(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function OA(t,e,n,r,s){const i=new xA;let o,a;if(n.type===Vt.OVERWRITE){const u=n;u.source.fromUser?o=Qc(t,e,u.path,u.snap,r,s,i):(K(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!ie(u.path),o=Za(t,e,u.path,u.snap,r,s,a,i))}else if(n.type===Vt.MERGE){const u=n;u.source.fromUser?o=bA(t,e,u.path,u.children,r,s,i):(K(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=Xc(t,e,u.path,u.children,r,s,a,i))}else if(n.type===Vt.ACK_USER_WRITE){const u=n;u.revert?o=UA(t,e,u.path,r,s,i):o=MA(t,e,u.path,u.affectedTree,r,s,i)}else if(n.type===Vt.LISTEN_COMPLETE)o=jA(t,e,n.path,r,i);else throw Ks("Unknown operation type: "+n.type);const l=i.getChanges();return DA(e,o,l),{viewCache:o,changes:l}}function DA(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=Qa(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push($y(Qa(e)))}}function tE(t,e,n,r,s,i){const o=e.eventCache;if(Ja(r,n)!=null)return e;{let a,l;if(ie(n))if(K(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Gr(e),h=u instanceof X?u:X.EMPTY_NODE,d=vf(r,h);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const u=Xa(r,Gr(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=re(n);if(u===".priority"){K(dr(n)===1,"Can't have a priority with additional path components");const h=o.getNode();l=e.serverCache.getNode();const d=zp(r,n,h,l);d!=null?a=t.filter.updatePriority(h,d):a=o.getNode()}else{const h=Se(n);let d;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const c=zp(r,n,o.getNode(),l);c!=null?d=o.getNode().getImmediateChild(u).updateChild(h,c):d=o.getNode().getImmediateChild(u)}else d=Cf(r,u,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),u,d,h,s,i):a=o.getNode()}}return wi(e,a,o.isFullyInitialized()||ie(n),t.filter.filtersNodes())}}function Za(t,e,n,r,s,i,o,a){const l=e.serverCache;let u;const h=o?t.filter:t.filter.getIndexedFilter();if(ie(n))u=h.updateFullNode(l.getNode(),r,null);else if(h.filtersNodes()&&!l.isFiltered()){const _=l.getNode().updateChild(n,r);u=h.updateFullNode(l.getNode(),_,null)}else{const _=re(n);if(!l.isCompleteForPath(n)&&dr(n)>1)return e;const C=Se(n),x=l.getNode().getImmediateChild(_).updateChild(C,r);_===".priority"?u=h.updatePriority(l.getNode(),x):u=h.updateChild(l.getNode(),_,x,C,eE,null)}const d=Yy(e,u,l.isFullyInitialized()||ie(n),h.filtersNodes()),c=new wf(s,d,i);return tE(t,d,n,s,c,a)}function Qc(t,e,n,r,s,i,o){const a=e.eventCache;let l,u;const h=new wf(s,e,i);if(ie(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=wi(e,u,!0,t.filter.filtersNodes());else{const d=re(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),l=wi(e,u,a.isFullyInitialized(),a.isFiltered());else{const c=Se(n),_=a.getNode().getImmediateChild(d);let C;if(ie(c))C=r;else{const v=h.getCompleteChild(d);v!=null?My(c)===".priority"&&v.getChild(Uy(c)).isEmpty()?C=v:C=v.updateChild(c,r):C=X.EMPTY_NODE}if(_.equals(C))l=e;else{const v=t.filter.updateChild(a.getNode(),d,C,c,h,o);l=wi(e,v,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function Vp(t,e){return t.eventCache.isCompleteForChild(e)}function bA(t,e,n,r,s,i,o){let a=e;return r.foreach((l,u)=>{const h=ze(n,l);Vp(e,re(h))&&(a=Qc(t,a,h,u,s,i,o))}),r.foreach((l,u)=>{const h=ze(n,l);Vp(e,re(h))||(a=Qc(t,a,h,u,s,i,o))}),a}function Yp(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function Xc(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;ie(n)?u=r:u=new xe(null).setTree(n,r);const h=e.serverCache.getNode();return u.children.inorderTraversal((d,c)=>{if(h.hasChild(d)){const _=e.serverCache.getNode().getImmediateChild(d),C=Yp(t,_,c);l=Za(t,l,new ve(d),C,s,i,o,a)}}),u.children.inorderTraversal((d,c)=>{const _=!e.serverCache.isCompleteForChild(d)&&c.value===null;if(!h.hasChild(d)&&!_){const C=e.serverCache.getNode().getImmediateChild(d),v=Yp(t,C,c);l=Za(t,l,new ve(d),v,s,i,o,a)}}),l}function MA(t,e,n,r,s,i,o){if(Ja(s,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(ie(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Za(t,e,n,l.getNode().getChild(n),s,i,a,o);if(ie(n)){let u=new xe(null);return l.getNode().forEachChild(vs,(h,d)=>{u=u.set(new ve(h),d)}),Xc(t,e,n,u,s,i,a,o)}else return e}else{let u=new xe(null);return r.foreach((h,d)=>{const c=ze(n,h);l.isCompleteForPath(c)&&(u=u.set(h,l.getNode().getChild(c)))}),Xc(t,e,n,u,s,i,a,o)}}function jA(t,e,n,r,s){const i=e.serverCache,o=Yy(e,i.getNode(),i.isFullyInitialized()||ie(n),i.isFiltered());return tE(t,o,n,r,eE,s)}function UA(t,e,n,r,s,i){let o;if(Ja(r,n)!=null)return e;{const a=new wf(r,e,s),l=e.eventCache.getNode();let u;if(ie(n)||re(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=Xa(r,Gr(e));else{const d=e.serverCache.getNode();K(d instanceof X,"serverChildren would be complete if leaf node"),h=vf(r,d)}h=h,u=t.filter.updateFullNode(l,h,i)}else{const h=re(n);let d=Cf(r,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=l.getImmediateChild(h)),d!=null?u=t.filter.updateChild(l,h,d,Se(n),a,i):e.eventCache.getNode().hasChild(h)?u=t.filter.updateChild(l,h,X.EMPTY_NODE,Se(n),a,i):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Xa(r,Gr(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,i)))}return o=e.serverCache.isFullyInitialized()||Ja(r,de())!=null,wi(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new _f(r.getIndex()),i=sA(r);this.processor_=LA(i);const o=n.serverCache,a=n.eventCache,l=s.updateFullNode(X.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(X.EMPTY_NODE,a.getNode(),null),h=new fr(l,o.isFullyInitialized(),s.filtersNodes()),d=new fr(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=kl(d,h),this.eventGenerator_=new dA(this.query_)}get query(){return this.query_}}function WA(t){return t.viewCache_.serverCache.getNode()}function KA(t){return Qa(t.viewCache_)}function GA(t,e){const n=Gr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ie(e)&&!n.getImmediateChild(re(e)).isEmpty())?n.getChild(e):null}function qp(t){return t.eventRegistrations_.length===0}function BA(t,e){t.eventRegistrations_.push(e)}function Qp(t,e,n){const r=[];if(n){K(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Xp(t,e,n,r){e.type===Vt.MERGE&&e.source.queryId!==null&&(K(Gr(t.viewCache_),"We should always have a full cache before handling merges"),K(Qa(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=OA(t.processor_,s,e,n,r);return PA(t.processor_,i.viewCache),K(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,nE(t,i.changes,i.viewCache.eventCache.getNode(),null)}function HA(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(je,(i,o)=>{r.push(Os(i,o))}),n.isFullyInitialized()&&r.push($y(n.getNode())),nE(t,r,n.getNode(),e)}function nE(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return fA(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let el;class rE{constructor(){this.views=new Map}}function $A(t){K(!el,"__referenceConstructor has already been defined"),el=t}function zA(){return K(el,"Reference.ts has not been loaded"),el}function VA(t){return t.views.size===0}function Rf(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return K(i!=null,"SyncTree gave us an op for an invalid query."),Xp(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(Xp(o,e,n,r));return i}}function sE(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=Xa(n,s?r:null),l=!1;a?l=!0:r instanceof X?(a=vf(n,r),l=!1):(a=X.EMPTY_NODE,l=!1);const u=kl(new fr(a,l,!1),new fr(r,s,!1));return new FA(e,u)}return o}function YA(t,e,n,r,s,i){const o=sE(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),BA(o,n),HA(o,n)}function qA(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=hr(t);if(s==="default")for(const[l,u]of t.views.entries())o=o.concat(Qp(u,n,r)),qp(u)&&(t.views.delete(l),u.query._queryParams.loadsAllData()||i.push(u.query));else{const l=t.views.get(s);l&&(o=o.concat(Qp(l,n,r)),qp(l)&&(t.views.delete(s),l.query._queryParams.loadsAllData()||i.push(l.query)))}return a&&!hr(t)&&i.push(new(zA())(e._repo,e._path)),{removed:i,events:o}}function iE(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function lr(t,e){let n=null;for(const r of t.views.values())n=n||GA(r,e);return n}function oE(t,e){if(e._queryParams.loadsAllData())return Pl(t);{const r=e._queryIdentifier;return t.views.get(r)}}function aE(t,e){return oE(t,e)!=null}function hr(t){return Pl(t)!=null}function Pl(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tl;function QA(t){K(!tl,"__referenceConstructor has already been defined"),tl=t}function XA(){return K(tl,"Reference.ts has not been loaded"),tl}let JA=1;class Jp{constructor(e){this.listenProvider_=e,this.syncPointTree_=new xe(null),this.pendingWriteTree_=TA(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function lE(t,e,n,r,s){return _A(t.pendingWriteTree_,e,n,r,s),s?po(t,new Kr(Vy(),e,n)):[]}function Tr(t,e,n=!1){const r=gA(t.pendingWriteTree_,e);if(yA(t.pendingWriteTree_,e)){let i=new xe(null);return r.snap!=null?i=i.set(de(),!0):It(r.children,o=>{i=i.set(new ve(o),!0)}),po(t,new qa(r.path,i,n))}else return[]}function ho(t,e,n){return po(t,new Kr(yf(),e,n))}function ZA(t,e,n){const r=xe.fromObject(n);return po(t,new Xi(yf(),e,r))}function e1(t,e){return po(t,new Qi(yf(),e))}function t1(t,e,n){const r=If(t,n);if(r){const s=Af(r),i=s.path,o=s.queryId,a=pt(i,e),l=new Qi(Ef(o),a);return Tf(t,i,l)}else return[]}function nl(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||aE(o,e))){const l=qA(o,e,n,r);VA(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const u=l.removed;if(a=l.events,!s){const h=u.findIndex(c=>c._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(c,_)=>hr(_));if(h&&!d){const c=t.syncPointTree_.subtree(i);if(!c.isEmpty()){const _=s1(c);for(let C=0;C<_.length;++C){const v=_[C],x=v.query,f=fE(t,v);t.listenProvider_.startListening(Si(x),Ji(t,x),f.hashFn,f.onComplete)}}}!d&&u.length>0&&!r&&(h?t.listenProvider_.stopListening(Si(e),null):u.forEach(c=>{const _=t.queryToTagMap.get(Ol(c));t.listenProvider_.stopListening(Si(c),_)}))}i1(t,u)}return a}function uE(t,e,n,r){const s=If(t,r);if(s!=null){const i=Af(s),o=i.path,a=i.queryId,l=pt(o,e),u=new Kr(Ef(a),l,n);return Tf(t,o,u)}else return[]}function n1(t,e,n,r){const s=If(t,r);if(s){const i=Af(s),o=i.path,a=i.queryId,l=pt(o,e),u=xe.fromObject(n),h=new Xi(Ef(a),l,u);return Tf(t,o,h)}else return[]}function Jc(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(c,_)=>{const C=pt(c,s);i=i||lr(_,C),o=o||hr(_)});let a=t.syncPointTree_.get(s);a?(o=o||hr(a),i=i||lr(a,de())):(a=new rE,t.syncPointTree_=t.syncPointTree_.set(s,a));let l;i!=null?l=!0:(l=!1,i=X.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((_,C)=>{const v=lr(C,de());v&&(i=i.updateImmediateChild(_,v))}));const u=aE(a,e);if(!u&&!e._queryParams.loadsAllData()){const c=Ol(e);K(!t.queryToTagMap.has(c),"View does not exist, but we have a tag");const _=o1();t.queryToTagMap.set(c,_),t.tagToQueryMap.set(_,c)}const h=Ll(t.pendingWriteTree_,s);let d=YA(a,e,n,h,i,l);if(!u&&!o&&!r){const c=oE(a,e);d=d.concat(a1(t,e,c))}return d}function Sf(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=pt(o,e),u=lr(a,l);if(u)return u});return Xy(s,e,i,n,!0)}function r1(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,h)=>{const d=pt(u,n);r=r||lr(h,d)});let s=t.syncPointTree_.get(n);s?r=r||lr(s,de()):(s=new rE,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new fr(r,!0,!1):null,a=Ll(t.pendingWriteTree_,e._path),l=sE(s,e,a,i?o.getNode():X.EMPTY_NODE,i);return KA(l)}function po(t,e){return cE(e,t.syncPointTree_,null,Ll(t.pendingWriteTree_,de()))}function cE(t,e,n,r){if(ie(t.path))return dE(t,e,n,r);{const s=e.get(de());n==null&&s!=null&&(n=lr(s,de()));let i=[];const o=re(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const u=n?n.getImmediateChild(o):null,h=Jy(r,o);i=i.concat(cE(a,l,u,h))}return s&&(i=i.concat(Rf(s,t,r,n))),i}}function dE(t,e,n,r){const s=e.get(de());n==null&&s!=null&&(n=lr(s,de()));let i=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,u=Jy(r,o),h=t.operationForChild(o);h&&(i=i.concat(dE(h,a,l,u)))}),s&&(i=i.concat(Rf(s,t,r,n))),i}function fE(t,e){const n=e.query,r=Ji(t,n);return{hashFn:()=>(WA(e)||X.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?t1(t,n._path,r):e1(t,n._path);{const i=rI(s,n);return nl(t,n,null,i)}}}}function Ji(t,e){const n=Ol(e);return t.queryToTagMap.get(n)}function Ol(t){return t._path.toString()+"$"+t._queryIdentifier}function If(t,e){return t.tagToQueryMap.get(e)}function Af(t){const e=t.indexOf("$");return K(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ve(t.substr(0,e))}}function Tf(t,e,n){const r=t.syncPointTree_.get(e);K(r,"Missing sync point for query tag that we're tracking");const s=Ll(t.pendingWriteTree_,e);return Rf(r,n,s,null)}function s1(t){return t.fold((e,n,r)=>{if(n&&hr(n))return[Pl(n)];{let s=[];return n&&(s=iE(n)),It(r,(i,o)=>{s=s.concat(o)}),s}})}function Si(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(XA())(t._repo,t._path):t}function i1(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=Ol(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function o1(){return JA++}function a1(t,e,n){const r=e._path,s=Ji(t,e),i=fE(t,n),o=t.listenProvider_.startListening(Si(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)K(!hr(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((u,h,d)=>{if(!ie(u)&&h&&hr(h))return[Pl(h).query];{let c=[];return h&&(c=c.concat(iE(h).map(_=>_.query))),It(d,(_,C)=>{c=c.concat(C)}),c}});for(let u=0;u<l.length;++u){const h=l[u];t.listenProvider_.stopListening(Si(h),Ji(t,h))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Nf(n)}node(){return this.node_}}class xf{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=ze(this.path_,e);return new xf(this.syncTree_,n)}node(){return Sf(this.syncTree_,this.path_)}}const l1=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Zp=function(t,e,n){if(!t||typeof t!="object")return t;if(K(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return u1(t[".sv"],e,n);if(typeof t[".sv"]=="object")return c1(t[".sv"],e);K(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},u1=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:K(!1,"Unexpected server value: "+t)}},c1=function(t,e,n){t.hasOwnProperty("increment")||K(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&K(!1,"Unexpected increment value: "+r);const s=e.node();if(K(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},d1=function(t,e,n,r){return kf(e,new xf(n,t),r)},hE=function(t,e,n){return kf(t,new Nf(e),n)};function kf(t,e,n){const r=t.getPriority().val(),s=Zp(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=Zp(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new Qe(a,Ze(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new Qe(s))),o.forEachChild(je,(a,l)=>{const u=kf(l,e.getImmediateChild(a),n);u!==l&&(i=i.updateImmediateChild(a,u))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Pf(t,e){let n=e instanceof ve?e:new ve(e),r=t,s=re(n);for(;s!==null;){const i=ks(r.node.children,s)||{children:{},childCount:0};r=new Lf(s,r,i),n=Se(n),s=re(n)}return r}function zs(t){return t.node.value}function pE(t,e){t.node.value=e,Zc(t)}function mE(t){return t.node.childCount>0}function f1(t){return zs(t)===void 0&&!mE(t)}function Dl(t,e){It(t.node.children,(n,r)=>{e(new Lf(n,t,r))})}function _E(t,e,n,r){n&&!r&&e(t),Dl(t,s=>{_E(s,e,!0,r)}),n&&r&&e(t)}function h1(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function mo(t){return new ve(t.parent===null?t.name:mo(t.parent)+"/"+t.name)}function Zc(t){t.parent!==null&&p1(t.parent,t.name,t)}function p1(t,e,n){const r=f1(n),s=Pn(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,Zc(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,Zc(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1=/[\[\].#$\/\u0000-\u001F\u007F]/,_1=/[\[\].#$\u0000-\u001F\u007F]/,Ou=10*1024*1024,gE=function(t){return typeof t=="string"&&t.length!==0&&!m1.test(t)},yE=function(t){return typeof t=="string"&&t.length!==0&&!_1.test(t)},g1=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),yE(t)},y1=function(t,e,n,r){r&&e===void 0||Of(sf(t,"value"),e,n)},Of=function(t,e,n){const r=n instanceof ve?new MI(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+wr(r));if(typeof e=="function")throw new Error(t+"contains a function "+wr(r)+" with contents = "+e.toString());if(my(e))throw new Error(t+"contains "+e.toString()+" "+wr(r));if(typeof e=="string"&&e.length>Ou/3&&Nl(e)>Ou)throw new Error(t+"contains a string greater than "+Ou+" utf8 bytes "+wr(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(It(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!gE(o)))throw new Error(t+" contains an invalid key ("+o+") "+wr(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);jI(r,o),Of(t,a,r),UI(r)}),s&&i)throw new Error(t+' contains ".value" child '+wr(r)+" in addition to actual children.")}},EE=function(t,e,n,r){if(!(r&&n===void 0)&&!yE(n))throw new Error(sf(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},E1=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),EE(t,e,n,r)},vE=function(t,e){if(re(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},v1=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!gE(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!g1(n))throw new Error(sf(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Df(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!hf(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function CE(t,e,n){Df(t,n),wE(t,r=>hf(r,e))}function ln(t,e,n){Df(t,n),wE(t,r=>zt(r,e)||zt(e,r))}function wE(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(w1(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function w1(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();kr&&ut("event: "+n.toString()),$s(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1="repo_interrupt",S1=25;class I1{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new C1,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ya(),this.transactionQueueTree_=new Lf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function A1(t,e,n){if(t.stats_=df(t.repoInfo_),t.forceRestClient_||aI())t.server_=new Va(t.repoInfo_,(r,s,i,o)=>{em(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>tm(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{$e(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Rn(t.repoInfo_,e,(r,s,i,o)=>{em(t,r,s,i,o)},r=>{tm(t,r)},r=>{N1(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=fI(t.repoInfo_,()=>new cA(t.stats_,t.server_)),t.infoData_=new iA,t.infoSyncTree_=new Jp({startListening:(r,s,i,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=ho(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Mf(t,"connected",!1),t.serverSyncTree_=new Jp({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,l)=>{const u=o(a,l);ln(t.eventQueue_,r._path,u)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function T1(t){const n=t.infoData_.getNode(new ve(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function bf(t){return l1({timestamp:T1(t)})}function em(t,e,n,r,s){t.dataUpdateCount++;const i=new ve(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const l=Ka(n,u=>Ze(u));o=n1(t.serverSyncTree_,i,l,s)}else{const l=Ze(n);o=uE(t.serverSyncTree_,i,l,s)}else if(r){const l=Ka(n,u=>Ze(u));o=ZA(t.serverSyncTree_,i,l)}else{const l=Ze(n);o=ho(t.serverSyncTree_,i,l)}let a=i;o.length>0&&(a=Ml(t,i)),ln(t.eventQueue_,a,o)}function tm(t,e){Mf(t,"connected",e),e===!1&&L1(t)}function N1(t,e){It(e,(n,r)=>{Mf(t,n,r)})}function Mf(t,e,n){const r=new ve("/.info/"+e),s=Ze(n);t.infoData_.updateSnapshot(r,s);const i=ho(t.infoSyncTree_,r,s);ln(t.eventQueue_,r,i)}function RE(t){return t.nextWriteId_++}function x1(t,e,n){const r=r1(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=Ze(s).withIndex(e._queryParams.getIndex());Jc(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=ho(t.serverSyncTree_,e._path,i);else{const a=Ji(t.serverSyncTree_,e);o=uE(t.serverSyncTree_,e._path,i,a)}return ln(t.eventQueue_,e._path,o),nl(t.serverSyncTree_,e,n,null,!0),i},s=>(bl(t,"get for query "+$e(e)+" failed: "+s),Promise.reject(new Error(s))))}function k1(t,e,n,r,s){bl(t,"set",{path:e.toString(),value:n,priority:r});const i=bf(t),o=Ze(n,r),a=Sf(t.serverSyncTree_,e),l=hE(o,a,i),u=RE(t),h=lE(t.serverSyncTree_,e,l,u,!0);Df(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(c,_)=>{const C=c==="ok";C||St("set at "+e+" failed: "+c);const v=Tr(t.serverSyncTree_,u,!C);ln(t.eventQueue_,e,v),D1(t,s,c,_)});const d=NE(t,e);Ml(t,d),ln(t.eventQueue_,d,[])}function L1(t){bl(t,"onDisconnectEvents");const e=bf(t),n=Ya();Vc(t.onDisconnect_,de(),(s,i)=>{const o=d1(s,i,t.serverSyncTree_,e);zy(n,s,o)});let r=[];Vc(n,de(),(s,i)=>{r=r.concat(ho(t.serverSyncTree_,s,i));const o=NE(t,s);Ml(t,o)}),t.onDisconnect_=Ya(),ln(t.eventQueue_,de(),r)}function P1(t,e,n){let r;re(e._path)===".info"?r=Jc(t.infoSyncTree_,e,n):r=Jc(t.serverSyncTree_,e,n),CE(t.eventQueue_,e._path,r)}function nm(t,e,n){let r;re(e._path)===".info"?r=nl(t.infoSyncTree_,e,n):r=nl(t.serverSyncTree_,e,n),CE(t.eventQueue_,e._path,r)}function O1(t){t.persistentConnection_&&t.persistentConnection_.interrupt(R1)}function bl(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),ut(n,...e)}function D1(t,e,n,r){e&&$s(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function SE(t,e,n){return Sf(t.serverSyncTree_,e,n)||X.EMPTY_NODE}function jf(t,e=t.transactionQueueTree_){if(e||jl(t,e),zs(e)){const n=AE(t,e);K(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&b1(t,mo(e),n)}else mE(e)&&Dl(e,n=>{jf(t,n)})}function b1(t,e,n){const r=n.map(u=>u.currentWriteId),s=SE(t,e,r);let i=s;const o=s.hash();for(let u=0;u<n.length;u++){const h=n[u];K(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=pt(e,h.path);i=i.updateChild(d,h.currentOutputSnapshotRaw)}const a=i.val(!0),l=e;t.server_.put(l.toString(),a,u=>{bl(t,"transaction put response",{path:l.toString(),status:u});let h=[];if(u==="ok"){const d=[];for(let c=0;c<n.length;c++)n[c].status=2,h=h.concat(Tr(t.serverSyncTree_,n[c].currentWriteId)),n[c].onComplete&&d.push(()=>n[c].onComplete(null,!0,n[c].currentOutputSnapshotResolved)),n[c].unwatcher();jl(t,Pf(t.transactionQueueTree_,e)),jf(t,t.transactionQueueTree_),ln(t.eventQueue_,e,h);for(let c=0;c<d.length;c++)$s(d[c])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{St("transaction at "+l.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}Ml(t,e)}},o)}function Ml(t,e){const n=IE(t,e),r=mo(n),s=AE(t,n);return M1(t,s,r),r}function M1(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],u=pt(n,l.path);let h=!1,d;if(K(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)h=!0,d=l.abortReason,s=s.concat(Tr(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=S1)h=!0,d="maxretry",s=s.concat(Tr(t.serverSyncTree_,l.currentWriteId,!0));else{const c=SE(t,l.path,o);l.currentInputSnapshot=c;const _=e[a].update(c.val());if(_!==void 0){Of("transaction failed: Data returned ",_,l.path);let C=Ze(_);typeof _=="object"&&_!=null&&Pn(_,".priority")||(C=C.updatePriority(c.getPriority()));const x=l.currentWriteId,f=bf(t),p=hE(C,c,f);l.currentOutputSnapshotRaw=C,l.currentOutputSnapshotResolved=p,l.currentWriteId=RE(t),o.splice(o.indexOf(x),1),s=s.concat(lE(t.serverSyncTree_,l.path,p,l.currentWriteId,l.applyLocally)),s=s.concat(Tr(t.serverSyncTree_,x,!0))}else h=!0,d="nodata",s=s.concat(Tr(t.serverSyncTree_,l.currentWriteId,!0))}ln(t.eventQueue_,n,s),s=[],h&&(e[a].status=2,function(c){setTimeout(c,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}jl(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)$s(r[a]);jf(t,t.transactionQueueTree_)}function IE(t,e){let n,r=t.transactionQueueTree_;for(n=re(e);n!==null&&zs(r)===void 0;)r=Pf(r,n),e=Se(e),n=re(e);return r}function AE(t,e){const n=[];return TE(t,e,n),n.sort((r,s)=>r.order-s.order),n}function TE(t,e,n){const r=zs(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Dl(e,s=>{TE(t,s,n)})}function jl(t,e){const n=zs(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,pE(e,n.length>0?n:void 0)}Dl(e,r=>{jl(t,r)})}function NE(t,e){const n=mo(IE(t,e)),r=Pf(t.transactionQueueTree_,e);return h1(r,s=>{Du(t,s)}),Du(t,r),_E(r,s=>{Du(t,s)}),n}function Du(t,e){const n=zs(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(K(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(K(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Tr(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?pE(e,void 0):n.length=i+1,ln(t.eventQueue_,mo(e),s);for(let o=0;o<r.length;o++)$s(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function U1(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):St(`Invalid query segment '${n}' in query '${t}'`)}return e}const rm=function(t,e){const n=F1(t),r=n.namespace;n.domain==="firebase.com"&&Nn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Nn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||JS();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Ty(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new ve(n.pathString)}},F1=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",l=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(s=j1(t.substring(h,d)));const c=U1(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;const _=e.slice(0,u);if(_.toLowerCase()==="localhost")n="localhost";else if(_.split(".").length<=2)n=_;else{const C=e.indexOf(".");r=e.substring(0,C).toLowerCase(),n=e.substring(C+1),i=r}"ns"in c&&(i=c.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+$e(this.snapshot.exportVal())}}class kE{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return K(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return ie(this._path)?null:My(this._path)}get ref(){return new cn(this._repo,this._path)}get _queryIdentifier(){const e=Kp(this._queryParams),n=uf(e);return n==="{}"?"default":n}get _queryObject(){return Kp(this._queryParams)}isEqual(e){if(e=At(e),!(e instanceof Uf))return!1;const n=this._repo===e._repo,r=hf(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+bI(this._path)}}class cn extends Uf{constructor(e,n){super(e,n,new gf,!1)}get parent(){const e=Uy(this._path);return e===null?null:new cn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class bs{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ve(e),r=qe(this.ref,e);return new bs(this._node.getChild(n),r,je)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new bs(s,qe(this.ref,r),je)))}hasChild(e){const n=new ve(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function le(t,e){return t=At(t),t._checkNotDeleted("ref"),e!==void 0?qe(t._root,e):t._root}function qe(t,e){return t=At(t),re(t._path)===null?E1("child","path",e,!1):EE("child","path",e,!1),new cn(t._repo,ze(t._path,e))}function W1(t){return vE("remove",t._path),pe(t,null)}function pe(t,e){t=At(t),vE("set",t._path),y1("set",e,t._path,!1);const n=new Tl;return k1(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Kn(t){t=At(t);const e=new LE(()=>{}),n=new Ul(e);return x1(t._repo,t,n).then(r=>new bs(r,new cn(t._repo,t._path),t._queryParams.getIndex()))}class Ul{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new xE("value",this,new bs(e.snapshotNode,new cn(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new kE(this,e,n):null}matches(e){return e instanceof Ul?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Ff{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new kE(this,e,n):null}createEvent(e,n){K(e.childName!=null,"Child events should have a childName.");const r=qe(new cn(n._repo,n._path),e.childName),s=n._queryParams.getIndex();return new xE(e.type,this,new bs(e.snapshotNode,r,s),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Ff?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function K1(t,e,n,r,s){let i;if(typeof r=="object"&&(i=void 0,s=r),typeof r=="function"&&(i=r),s&&s.onlyOnce){const l=n,u=(h,d)=>{nm(t._repo,t,a),l(h,d)};u.userCallback=n.userCallback,u.context=n.context,n=u}const o=new LE(n,i||void 0),a=e==="value"?new Ul(o):new Ff(e,o);return P1(t._repo,t,a),()=>nm(t._repo,t,a)}function PE(t,e,n,r){return K1(t,"value",e,n,r)}$A(cn);QA(cn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="FIREBASE_DATABASE_EMULATOR_HOST",ed={};let B1=!1;function H1(t,e,n,r){t.repoInfo_=new Ty(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function $1(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||Nn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ut("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=rm(i,s),a=o.repoInfo,l,u;typeof process<"u"&&process.env&&(u=process.env[G1]),u?(l=!0,i=`http://${u}?ns=${a.namespace}`,o=rm(i,s),a=o.repoInfo):l=!o.repoInfo.secure;const h=s&&l?new Es(Es.OWNER):new uI(t.name,t.options,e);v1("Invalid Firebase Database URL",o),ie(o.path)||Nn("Database URL must point to the root of a Firebase Database (not including a child path).");const d=V1(a,t,h,new lI(t.name,n));return new Y1(d,t)}function z1(t,e){const n=ed[e];(!n||n[t.key]!==t)&&Nn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),O1(t),delete n[t.key]}function V1(t,e,n,r){let s=ed[e.name];s||(s={},ed[e.name]=s);let i=s[t.toURLString()];return i&&Nn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new I1(t,B1,n,r),s[t.toURLString()]=i,i}class Y1{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(A1(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new cn(this._repo,de())),this._rootInternal}_delete(){return this._rootInternal!==null&&(z1(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Nn("Cannot call "+e+" on a deleted database.")}}function q1(t=uy(),e){const n=lf(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=SR("database");r&&Q1(n,...r)}return n}function Q1(t,e,n,r={}){t=At(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Nn("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&Nn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new Es(Es.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:IR(r.mockUserToken,t.app.options.projectId);i=new Es(o)}H1(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(t){VS(Bs),Ls(new Ur("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return $1(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),or(Sp,Ip,t),or(Sp,Ip,"esm2017")}Rn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Rn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};X1();function Wf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function OE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const J1=OE,DE=new lo("auth","Firebase",OE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl=new of("@firebase/auth");function Z1(t,...e){rl.logLevel<=ye.WARN&&rl.warn(`Auth (${Bs}): ${t}`,...e)}function aa(t,...e){rl.logLevel<=ye.ERROR&&rl.error(`Auth (${Bs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(t,...e){throw Kf(t,...e)}function on(t,...e){return Kf(t,...e)}function eT(t,e,n){const r=Object.assign(Object.assign({},J1()),{[e]:n});return new lo("auth","Firebase",r).create(e,{appName:t.name})}function Kf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return DE.create(t,...e)}function J(t,e,...n){if(!t)throw Kf(e,...n)}function vn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw aa(e),new Error(e)}function kn(t,e){t||vn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function tT(){return sm()==="http:"||sm()==="https:"}function sm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tT()||AR()||"connection"in navigator)?navigator.onLine:!0}function rT(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n){this.shortDelay=e,this.longDelay=n,kn(n>e,"Short delay should be less than long delay!"),this.isMobile=rf()||ry()}get(){return nT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(t,e){kn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;vn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;vn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;vn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT=new _o(3e4,6e4);function Bf(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function go(t,e,n,r,s={}){return ME(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Gs(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),bE.fetch()(UE(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function ME(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},sT),e);try{const s=new oT(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Bo(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bo(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Bo(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Bo(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw eT(t,h,u);xn(t,h)}}catch(s){if(s instanceof yr)throw s;xn(t,"network-request-failed",{message:String(s)})}}async function jE(t,e,n,r,s={}){const i=await go(t,e,n,r,s);return"mfaPendingCredential"in i&&xn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function UE(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Gf(t.config,s):`${t.config.apiScheme}://${s}`}class oT{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(on(this.auth,"network-request-failed")),iT.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Bo(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=on(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aT(t,e){return go(t,"POST","/v1/accounts:delete",e)}async function lT(t,e){return go(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uT(t,e=!1){const n=At(t),r=await n.getIdToken(e),s=Hf(r);J(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ii(bu(s.auth_time)),issuedAtTime:Ii(bu(s.iat)),expirationTime:Ii(bu(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function bu(t){return Number(t)*1e3}function Hf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return aa("JWT malformed, contained fewer than 3 sections"),null;try{const s=Wa(n);return s?JSON.parse(s):(aa("Failed to decode base64 JWT payload"),null)}catch(s){return aa("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function cT(t){const e=Hf(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof yr&&dT(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function dT({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ii(this.lastLoginAt),this.creationTime=Ii(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sl(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Zi(t,lT(n,{idToken:r}));J(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?mT(i.providerUserInfo):[],a=pT(t.providerData,o),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new FE(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function hT(t){const e=At(t);await sl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pT(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function mT(t){return t.map(e=>{var{providerId:n}=e,r=Wf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _T(t,e){const n=await ME(t,{},async()=>{const r=Gs({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=UE(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",bE.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return J(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await _T(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new eo;return r&&(J(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(J(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(J(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new eo,this.toJSON())}_performRefresh(){return vn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Lr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Wf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new FE(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Zi(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return uT(this,e)}reload(){return hT(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Lr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await sl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Zi(this,aT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,u,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,c=(s=n.email)!==null&&s!==void 0?s:void 0,_=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,C=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,f=(u=n.createdAt)!==null&&u!==void 0?u:void 0,p=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:g,emailVerified:T,isAnonymous:S,providerData:O,stsTokenManager:k}=n;J(g&&k,e,"internal-error");const N=eo.fromJSON(this.name,k);J(typeof g=="string",e,"internal-error"),Mn(d,e.name),Mn(c,e.name),J(typeof T=="boolean",e,"internal-error"),J(typeof S=="boolean",e,"internal-error"),Mn(_,e.name),Mn(C,e.name),Mn(v,e.name),Mn(x,e.name),Mn(f,e.name),Mn(p,e.name);const F=new Lr({uid:g,auth:e,email:c,emailVerified:T,displayName:d,isAnonymous:S,photoURL:C,phoneNumber:_,tenantId:v,stsTokenManager:N,createdAt:f,lastLoginAt:p});return O&&Array.isArray(O)&&(F.providerData=O.map(W=>Object.assign({},W))),x&&(F._redirectEventId=x),F}static async _fromIdTokenResponse(e,n,r=!1){const s=new eo;s.updateFromServerResponse(n);const i=new Lr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await sl(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im=new Map;function Cn(t){kn(t instanceof Function,"Expected a class definition");let e=im.get(t);return e?(kn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,im.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}WE.type="NONE";const om=WE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(t,e,n){return`firebase:${t}:${e}:${n}`}class Cs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=la(this.userKey,s.apiKey,i),this.fullPersistenceKey=la("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Lr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Cs(Cn(om),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Cn(om);const o=la(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){const d=Lr._fromJSON(e,h);u!==i&&(a=d),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Cs(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Cs(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(BE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(KE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($E(e))return"Blackberry";if(zE(e))return"Webos";if($f(e))return"Safari";if((e.includes("chrome/")||GE(e))&&!e.includes("edge/"))return"Chrome";if(HE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function KE(t=dt()){return/firefox\//i.test(t)}function $f(t=dt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GE(t=dt()){return/crios\//i.test(t)}function BE(t=dt()){return/iemobile/i.test(t)}function HE(t=dt()){return/android/i.test(t)}function $E(t=dt()){return/blackberry/i.test(t)}function zE(t=dt()){return/webos/i.test(t)}function Fl(t=dt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function gT(t=dt()){var e;return Fl(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function yT(){return TR()&&document.documentMode===10}function VE(t=dt()){return Fl(t)||HE(t)||zE(t)||$E(t)||/windows phone/i.test(t)||BE(t)}function ET(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(t,e=[]){let n;switch(t){case"Browser":n=am(dt());break;case"Worker":n=`${am(dt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Bs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CT(t,e={}){return go(t,"GET","/v2/passwordPolicy",Bf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT=6;class RT{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:wT,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lm(this),this.idTokenSubscription=new lm(this),this.beforeStateQueue=new vT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Cn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Cs.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await sl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?At(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Cn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await CT(this),n=new RT(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new lo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Cn(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await Cs.create(this,[Cn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=YE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Z1(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Wl(t){return At(t)}class lm{constructor(e){this.auth=e,this.observer=null,this.addObserver=MR(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function AT(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=on("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",IT().appendChild(r)})}function TT(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(t,e){const n=lf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ga(i,e??{}))return s;xn(s,"already-initialized")}return n.initialize({options:e})}function xT(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Cn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function kT(t,e,n){const r=Wl(t);J(r._canInitEmulator,r,"emulator-config-failed"),J(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=qE(e),{host:o,port:a}=LT(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||PT()}function qE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function LT(t){const e=qE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:um(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:um(o)}}}function um(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function PT(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return vn("not implemented")}_getIdTokenResponse(e){return vn("not implemented")}_linkToIdToken(e,n){return vn("not implemented")}_getReauthenticationResolver(e){return vn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ws(t,e){return jE(t,"POST","/v1/accounts:signInWithIdp",Bf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT="http://localhost";class Br extends QE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Br(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):xn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Wf(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Br(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ws(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ws(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ws(e,n)}buildRequest(){const e={requestUri:OT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Gs(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo extends XE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn extends yo{constructor(){super("facebook.com")}static credential(e){return Br._fromParams({providerId:Gn.PROVIDER_ID,signInMethod:Gn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gn.credentialFromTaggedObject(e)}static credentialFromError(e){return Gn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gn.credential(e.oauthAccessToken)}catch{return null}}}Gn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn extends yo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Br._fromParams({providerId:Bn.PROVIDER_ID,signInMethod:Bn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Bn.credentialFromTaggedObject(e)}static credentialFromError(e){return Bn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Bn.credential(n,r)}catch{return null}}}Bn.GOOGLE_SIGN_IN_METHOD="google.com";Bn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn extends yo{constructor(){super("github.com")}static credential(e){return Br._fromParams({providerId:Hn.PROVIDER_ID,signInMethod:Hn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hn.credentialFromTaggedObject(e)}static credentialFromError(e){return Hn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hn.credential(e.oauthAccessToken)}catch{return null}}}Hn.GITHUB_SIGN_IN_METHOD="github.com";Hn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n extends yo{constructor(){super("twitter.com")}static credential(e,n){return Br._fromParams({providerId:$n.PROVIDER_ID,signInMethod:$n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return $n.credentialFromTaggedObject(e)}static credentialFromError(e){return $n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return $n.credential(n,r)}catch{return null}}}$n.TWITTER_SIGN_IN_METHOD="twitter.com";$n.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DT(t,e){return jE(t,"POST","/v1/accounts:signUp",Bf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Lr._fromIdTokenResponse(e,r,s),o=cm(r);return new pr({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=cm(r);return new pr({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function cm(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bT(t){var e;const n=Wl(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new pr({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await DT(n,{returnSecureToken:!0}),s=await pr._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il extends yr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,il.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new il(e,n,r,s)}}function JE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?il._fromErrorAndOperation(t,i,e,r):i})}async function MT(t,e,n=!1){const r=await Zi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return pr._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jT(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await Zi(t,JE(r,s,e,t),n);J(i.idToken,r,"internal-error");const o=Hf(i.idToken);J(o,r,"internal-error");const{sub:a}=o;return J(t.uid===a,r,"user-mismatch"),pr._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&xn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UT(t,e,n=!1){const r="signIn",s=await JE(t,r,e),i=await pr._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function FT(t,e,n,r){return At(t).onIdTokenChanged(e,n,r)}function WT(t,e,n){return At(t).beforeAuthStateChanged(e,n)}function KT(t,e,n,r){return At(t).onAuthStateChanged(e,n,r)}function dm(t){return At(t).signOut()}const ol="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ol,"1"),this.storage.removeItem(ol),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(){const t=dt();return $f(t)||Fl(t)}const BT=1e3,HT=10;class ev extends ZE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=GT()&&ET(),this.fallbackToPolling=VE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);yT()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,HT):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},BT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ev.type="LOCAL";const $T=ev;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv extends ZE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}tv.type="SESSION";const nv=tv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Kl(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await zT(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kl.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=zf("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const c=d;if(c.data.eventId===u)switch(c.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(c.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(){return window}function YT(t){an().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(){return typeof an().WorkerGlobalScope<"u"&&typeof an().importScripts=="function"}async function qT(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function QT(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function XT(){return rv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="firebaseLocalStorageDb",JT=1,al="firebaseLocalStorage",iv="fbase_key";class Eo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Gl(t,e){return t.transaction([al],e?"readwrite":"readonly").objectStore(al)}function ZT(){const t=indexedDB.deleteDatabase(sv);return new Eo(t).toPromise()}function nd(){const t=indexedDB.open(sv,JT);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(al,{keyPath:iv})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(al)?e(r):(r.close(),await ZT(),e(await nd()))})})}async function fm(t,e,n){const r=Gl(t,!0).put({[iv]:e,value:n});return new Eo(r).toPromise()}async function eN(t,e){const n=Gl(t,!1).get(e),r=await new Eo(n).toPromise();return r===void 0?null:r.value}function hm(t,e){const n=Gl(t,!0).delete(e);return new Eo(n).toPromise()}const tN=800,nN=3;class ov{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await nd(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>nN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kl._getInstance(XT()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await qT(),!this.activeServiceWorker)return;this.sender=new VT(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||QT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await nd();return await fm(e,ol,"1"),await hm(e,ol),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>fm(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>eN(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>hm(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Gl(s,!1).getAll();return new Eo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ov.type="LOCAL";const rN=ov;new _o(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(t,e){return e?Cn(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf extends QE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ws(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ws(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ws(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function iN(t){return UT(t.auth,new Vf(t),t.bypassAuthState)}function oN(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),jT(n,new Vf(t),t.bypassAuthState)}async function aN(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),MT(n,new Vf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return iN;case"linkViaPopup":case"linkViaRedirect":return aN;case"reauthViaPopup":case"reauthViaRedirect":return oN;default:xn(this.auth,"internal-error")}}resolve(e){kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN=new _o(2e3,1e4);class ds extends av{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ds.currentPopupAction&&ds.currentPopupAction.cancel(),ds.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return J(e,this.auth,"internal-error"),e}async onExecution(){kn(this.filter.length===1,"Popup operations only handle one event");const e=zf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(on(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(on(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ds.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(on(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,lN.get())};e()}}ds.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN="pendingRedirect",ua=new Map;class cN extends av{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ua.get(this.auth._key());if(!e){try{const r=await dN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ua.set(this.auth._key(),e)}return this.bypassAuthState||ua.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function dN(t,e){const n=pN(e),r=hN(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function fN(t,e){ua.set(t._key(),e)}function hN(t){return Cn(t._redirectPersistence)}function pN(t){return la(uN,t.config.apiKey,t.name)}async function mN(t,e,n=!1){const r=Wl(t),s=sN(r,e),o=await new cN(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=10*60*1e3;class gN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!yN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!lv(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(on(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_N&&this.cachedEventUids.clear(),this.cachedEventUids.has(pm(e))}saveEventToCache(e){this.cachedEventUids.add(pm(e)),this.lastProcessedEventTime=Date.now()}}function pm(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function lv({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function yN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lv(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EN(t,e={}){return go(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CN=/^https?/;async function wN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await EN(t);for(const n of e)try{if(RN(n))return}catch{}xn(t,"unauthorized-domain")}function RN(t){const e=td(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!CN.test(n))return!1;if(vN.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=new _o(3e4,6e4);function mm(){const t=an().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function IN(t){return new Promise((e,n)=>{var r,s,i;function o(){mm(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mm(),n(on(t,"network-request-failed"))},timeout:SN.get()})}if(!((s=(r=an().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=an().gapi)===null||i===void 0)&&i.load)o();else{const a=TT("iframefcb");return an()[a]=()=>{gapi.load?o():n(on(t,"network-request-failed"))},AT(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw ca=null,e})}let ca=null;function AN(t){return ca=ca||IN(t),ca}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=new _o(5e3,15e3),NN="__/auth/iframe",xN="emulator/auth/iframe",kN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PN(t){const e=t.config;J(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Gf(e,xN):`https://${t.config.authDomain}/${NN}`,r={apiKey:e.apiKey,appName:t.name,v:Bs},s=LN.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Gs(r).slice(1)}`}async function ON(t){const e=await AN(t),n=an().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:PN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kN,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=on(t,"network-request-failed"),a=an().setTimeout(()=>{i(o)},TN.get());function l(){an().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bN=500,MN=600,jN="_blank",UN="http://localhost";class _m{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function FN(t,e,n,r=bN,s=MN){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},DN),{width:r.toString(),height:s.toString(),top:i,left:o}),u=dt().toLowerCase();n&&(a=GE(u)?jN:n),KE(u)&&(e=e||UN,l.scrollbars="yes");const h=Object.entries(l).reduce((c,[_,C])=>`${c}${_}=${C},`,"");if(gT(u)&&a!=="_self")return WN(e||"",a),new _m(null);const d=window.open(e||"",a,h);J(d,t,"popup-blocked");try{d.focus()}catch{}return new _m(d)}function WN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN="__/auth/handler",GN="emulator/auth/handler",BN=encodeURIComponent("fac");async function gm(t,e,n,r,s,i){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Bs,eventId:s};if(e instanceof XE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",jc(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries(i||{}))o[h]=d}if(e instanceof yo){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${BN}=${encodeURIComponent(l)}`:"";return`${HN(t)}?${Gs(a).slice(1)}${u}`}function HN({config:t}){return t.emulator?Gf(t,GN):`https://${t.authDomain}/${KN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mu="webStorageSupport";class $N{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nv,this._completeRedirectFn=mN,this._overrideRedirectResult=fN}async _openPopup(e,n,r,s){var i;kn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await gm(e,n,r,td(),s);return FN(e,o,zf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await gm(e,n,r,td(),s);return YT(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(kn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await ON(e),r=new gN(e);return n.register("authEvent",s=>(J(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Mu,{type:Mu},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Mu];o!==void 0&&n(!!o),xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=wN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return VE()||$f()||Fl()}}const zN=$N;var ym="@firebase/auth",Em="1.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function qN(t){Ls(new Ur("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YE(t)},u=new ST(r,s,i,l);return xT(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ls(new Ur("auth-internal",e=>{const n=Wl(e.getProvider("auth").getImmediate());return(r=>new VN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),or(ym,Em,YN(t)),or(ym,Em,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN=5*60,XN=ny("authIdTokenMaxAge")||QN;let vm=null;const JN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>XN)return;const s=n==null?void 0:n.token;vm!==s&&(vm=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function ZN(t=uy()){const e=lf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=NT(t,{popupRedirectResolver:zN,persistence:[rN,$T,nv]}),r=ny("authTokenSyncURL");if(r){const i=JN(r);WT(n,i,()=>i(n.currentUser)),FT(n,o=>i(o))}const s=ey("auth");return s&&kT(n,`http://${s}`),n}qN("Browser");const ex={apiKey:"AIzaSyDe0ZfHtpKXrg0-UOjsBfVYx10YMBkT7pA",authDomain:"flux-bbbdc.firebaseapp.com",projectId:"flux-bbbdc",storageBucket:"flux-bbbdc.appspot.com",messagingSenderId:"322357398073",appId:"1:322357398073:web:ee4403314c949f43be1be8"},tx=1,nx=1,rx=5,sx=2,ix="MISTHALIN",ox=!1,_n={drawAmount:tx,playAmount:nx,handLimit:rx,keeperLimit:sx,location:ix,teleblock:ox};var Ee=(t=>(t[t.DRAW_INCREMENT=0]="DRAW_INCREMENT",t[t.DRAW_DECREMENT=1]="DRAW_DECREMENT",t[t.PLAY_INCREMENT=2]="PLAY_INCREMENT",t[t.PLAY_DECREMENT=3]="PLAY_DECREMENT",t[t.HAND_LIMIT_INCREMENT=4]="HAND_LIMIT_INCREMENT",t[t.HAND_LIMIT_DECREMENT=5]="HAND_LIMIT_DECREMENT",t[t.KEEPER_LIMIT_INCREMENT=6]="KEEPER_LIMIT_INCREMENT",t[t.KEEPER_LIMIT_DECREMENT=7]="KEEPER_LIMIT_DECREMENT",t[t.LOCATION_RIGHT=8]="LOCATION_RIGHT",t[t.LOCATION_LEFT=9]="LOCATION_LEFT",t[t.TELEBLOCK_ON=10]="TELEBLOCK_ON",t[t.TELEBLOCK_OFF=11]="TELEBLOCK_OFF",t[t.RESET=12]="RESET",t))(Ee||{});const ft=P.createContext({}),ax=["KL01","KL02","KL03","KL04","KL05","KL06","KL07","KL08","KL09","KL10","KL11","KL12","KL13","KL14","KR01","KR02","KR03","KR04","KR05","KR06","KR07","KR08","KR09","KE01","KE02","KE03","KE04","KE05","KE06","KE07","K01","K02","CR01","CR02","CR03","G01","G02","G03","G04","G05","G06","G07","G08","G09","G10","G11","G12","G13","G14","G15","G16","G17","G18","G19","G20","G21","G22","G23","G24","G25","G26","G27","G28","G29","G30","G31","G32","G33","G34","G35","G36","G37","G38","G39","G40","RL01","RL02","RL03","RL04","RL05","RL06","RL07","RL08","RL09","RB01","RB02","RB03","RB04","RB05","RB06","RB07","RB08","RB09","RB10","RB11","RB12","RB13","RB14","RB15","A01","A02","A03","A04","A05","A06","A07","A08","A09","A10","A11","A12","A13","A14","A15","A16","A17","A18","CO01","CO02","CO03","CO04","CO05","CO06"],uv={startDeck:ax},Pr=[{id:"KL01",type:"KEEPER",subtype:"LIVING",name:"Ernest",effects:[],text:""},{id:"KL02",type:"KEEPER",subtype:"LIVING",name:"Ghost",effects:["LOCATION_MORYTANIA__CHANGE_BROTHERS"],text:"Reveals its origins when in a specific location."},{id:"KL03",type:"KEEPER",subtype:"LIVING",name:"Duke Horacio",effects:[],text:""},{id:"KL04",type:"KEEPER",subtype:"LIVING",name:"Father Aereck",effects:[],text:""},{id:"KL05",type:"KEEPER",subtype:"LIVING",name:"Cook",effects:[],text:""},{id:"KL06",type:"KEEPER",subtype:"LIVING",name:"Drunken Dwarf",effects:["DESTROY_1"],text:"Once per turn, can destroy wizard mind bomb creeper."},{id:"KL07",type:"KEEPER",subtype:"LIVING",name:"Archmage Sedridor",effects:["DESTROY_1"],text:"Once per turn, choose one rune keeper to destroy."},{id:"KL08",type:"KEEPER",subtype:"LIVING",name:"King Roald",effects:[],text:""},{id:"KL09",type:"KEEPER",subtype:"LIVING",name:"Ava",effects:[],text:""},{id:"KL10",type:"KEEPER",subtype:"LIVING",name:"Feral Vampyre",effects:["STEAL_RUNE_CROSSBOW"],text:"Once per turn, steal the rune crossbow from another player."},{id:"KL11",type:"KEEPER",subtype:"LIVING",name:"Goblin",effects:[],text:""},{id:"KL12",type:"KEEPER",subtype:"LIVING",name:"Imp",effects:[],text:"At the end of a players turn or when discarded teleport to another player."},{id:"KL13",type:"KEEPER",subtype:"LIVING",name:"Aris Maye",effects:[],text:"When using the Scry and Acquire card, don't discard it."},{id:"KL14",type:"KEEPER",subtype:"LIVING",name:"Reldo",effects:[],text:"When using the Historical Records card, don't discard it."},{id:"KL15",type:"KEEPER",subtype:"LIVING",name:"Vampyre Juvinate",effects:[],text:""},{id:"KLM01",type:"KEEPER",subtype:"LIVING",name:"Torag",effects:["STEAL_KEEPER"],text:"Once per turn, steal Dharok or Karil."},{id:"KLM02",type:"KEEPER",subtype:"LIVING",name:"Verac",effects:["STEAL_KEEPER"],text:"Once per turn, steal Guthan or Ahrim"},{id:"KLM03",type:"KEEPER",subtype:"LIVING",name:"Guthan",effects:["STEAL_KEEPER"],text:"Once per turn, steal Torag or Karil"},{id:"KLM04",type:"KEEPER",subtype:"LIVING",name:"Dharok",effects:["STEAL_KEEPER"],text:"Once per turn, steal Verac or Ahrim"},{id:"KLM05",type:"KEEPER",subtype:"LIVING",name:"Karil",effects:["STEAL_KEEPER"],text:"Once per turn, steal Verac or Dharok"},{id:"KLM06",type:"KEEPER",subtype:"LIVING",name:"Ahrim",effects:["STEAL_KEEPER"],text:"Once per turn, steal Torag or Guthan"},{id:"KLAB01",type:"KEEPER",subtype:"LIVING",name:"Abyssal Sire",effects:["DRAW_8_PLAY_5"],text:"Once per turn, can draw another 8 cards and from those play 5."},{id:"KLAB02",type:"KEEPER",subtype:"LIVING",name:"Abyssal Demon",effects:["EXCHANGE"],text:"Once per turn, select a keeper to swap with."},{id:"KLW01",type:"KEEPER",subtype:"LIVING",name:"King Black Dragon",effects:["DESTROY_1"],text:"Once per turn, destroy any keeper of any time in play."},{id:"KLW02",type:"KEEPER",subtype:"LIVING",name:"Chaos Elemental",effects:["TO_HAND_1"],text:"Once per turn, send any keeper in play to that players hand."},{id:"KLW03",type:"KEEPER",subtype:"LIVING",name:"Chaos Fanatic",effects:["TO_HAND_1"],text:"Once per turn, send any keeper in play to that players hand."},{id:"KR01",type:"KEEPER",subtype:"RUNE",name:"Mind Rune",effects:[],text:""},{id:"KR02",type:"KEEPER",subtype:"RUNE",name:"Chaos Rune",effects:["WORMHOLE"],text:"Once per turn, choose to draw 1 and play it."},{id:"KR03",type:"KEEPER",subtype:"RUNE",name:"Air Rune",effects:[],text:""},{id:"KR04",type:"KEEPER",subtype:"RUNE",name:"Water Rune",effects:[],text:""},{id:"KR05",type:"KEEPER",subtype:"RUNE",name:"Earth Rune",effects:[],text:""},{id:"KR06",type:"KEEPER",subtype:"RUNE",name:"Fire Rune",effects:[],text:""},{id:"KR07",type:"KEEPER",subtype:"RUNE",name:"Nature Rune",effects:["DESTROY_1"],text:"Once per turn, choose one equipment keeper to destroy"},{id:"KR08",type:"KEEPER",subtype:"RUNE",name:"Law Rune",effects:["TELEPORT"],text:"Once per turn, teleport to a random location."},{id:"KR09",type:"KEEPER",subtype:"RUNE",name:"Cosmic Rune",effects:["RULE_RANDOM"],text:"Once per turn, randomize one non location rule."},{id:"KE01",type:"KEEPER",subtype:"EQUIPMENT",name:"Ghostspeak Amulet",effects:["SUMMON_GHOST"],text:"Once per turn, choose to summon a ghost."},{id:"KE02",type:"KEEPER",subtype:"EQUIPMENT",name:"Anti Dragonfire Shield",effects:["DESTROY_1"],text:"Once per turn, can destroy elvarg creeper."},{id:"KE03",type:"KEEPER",subtype:"EQUIPMENT",name:"Air Staff",effects:[],text:""},{id:"KE04",type:"KEEPER",subtype:"EQUIPMENT",name:"Rune Crossbow",effects:["DESTROY_1"],text:"Once per turn, choose one living keeper to destroy"},{id:"KE05",type:"KEEPER",subtype:"EQUIPMENT",name:"Avas Attractor",effects:["STEAL_1_FROM_HAND"],text:"Once per turn, attract a card to your hand from an opposing player of your choice."},{id:"KE06",type:"KEEPER",subtype:"EQUIPMENT",name:"Dramen Staff",effects:["TELEPORT"],text:"Once per turn, teleport to Zanaris."},{id:"KE07",type:"KEEPER",subtype:"EQUIPMENT",name:"Rune Scimitar",effects:[],text:""},{id:"KEA01",type:"KEEPER",subtype:"EQUIPMENT",name:"Bronze Defender",effects:["UPGRADE"],text:"After playing a goal upgrade to a Iron Defender and return to hand."},{id:"KEA02",type:"KEEPER",subtype:"EQUIPMENT",name:"Iron Defender",effects:["UPGRADE"],text:"After playing a goal upgrade to a Steel Defender and return to hand."},{id:"KEA03",type:"KEEPER",subtype:"EQUIPMENT",name:"Steel Defender",effects:["UPGRADE"],text:"After playing a goal upgrade to a Black Defender and return to hand."},{id:"KEA04",type:"KEEPER",subtype:"EQUIPMENT",name:"Black Defender",effects:["UPGRADE"],text:"After playing a goal upgrade to a Mithril Defender and return to hand."},{id:"KEA05",type:"KEEPER",subtype:"EQUIPMENT",name:"Mithril Defender",effects:["UPGRADE"],text:"After playing a goal upgrade to an Adamant Defender and return to hand."},{id:"KEA06",type:"KEEPER",subtype:"EQUIPMENT",name:"Adamant Defender",effects:["UPGRADE"],text:"After playing a goal upgrade to an Rune Defender and return to hand."},{id:"KEA07",type:"KEEPER",subtype:"EQUIPMENT",name:"Rune Defender",effects:["UPGRADE"],text:"After playing a goal upgrade to a Dragon Defender and return to hand."},{id:"KEA08",type:"KEEPER",subtype:"EQUIPMENT",name:"Dragon Defender",effects:["CREATE_GOAL"],text:"Once per turn, Create Goal Dragon Defender in hand."},{id:"KEAB01",type:"KEEPER",subtype:"EQUIPMENT",name:"Abyssal Whip",effects:[],text:""},{id:"KEAB02",type:"KEEPER",subtype:"EQUIPMENT",name:"Abyssal Dagger",effects:[],text:""},{id:"KEW01",type:"KEEPER",subtype:"EQUIPMENT",name:"Burning Amulet",effects:["TELEPORT_WILDERNESS"],text:"Once per turn, teleport to wilderness and teleblock."},{id:"K01",type:"KEEPER",subtype:"",name:"Cake",effects:["DRAW_1"],text:"Once per turn, choose to draw 1 card."},{id:"K02",type:"KEEPER",subtype:"",name:"Anti Poison",effects:["DESTROY_1"],text:"Once per turn, can destroy the poison creeper."},{id:"KAB01",type:"KEEPER",subtype:"",name:"Unsired",effects:["JACKPOT"],text:"Once per turn, draw an item from the font of consumption."},{id:"CR01",type:"CREEPER",subtype:"EQUIPMENT_CREEPER",name:"Elvarg",effects:["LOCATION_CRANDOR"],text:"A creeper that attaches to equipment disabling any use effects and preventing that player from winning."},{id:"CR02",type:"CREEPER",subtype:"LIVING_CREEPER",name:"Poison",effects:[],text:"A creeper that attaches to a living keeper disabling any use effects and preventing that player from winning."},{id:"CR03",type:"CREEPER",subtype:"LIVING_CREEPER",name:"Wizard Mind Bomb",effects:[],text:"Attaches to living keepers disabling, effects and prevents winning."},{id:"G01",type:"GOAL",subtype:"",name:"Your First Spell",effects:[],text:"To cast your first spell you must acquire the following reagents: |air rune| or |air staff|, |mind rune|."},{id:"G02",type:"GOAL",subtype:"",name:"Restless Ghost",effects:[],text:"In the cemetary of lumbridge you must put the ghost to rest. QUEST REQUIREMENTS: |ghost|, |ghostspeak amulet|, |father aereck|"},{id:"G03",type:"GOAL",subtype:"",name:"Ready To Slay A Dragon",effects:[],text:"Speak to |Duke Horacio| to get your |anti dragonfire shield|, then you can believe you can fight a dragon."},{id:"G04",type:"GOAL",subtype:"",name:"Dragon Slayer",effects:[],text:"Find your way to |crandor|, off the coast of misthalin and fight the dragon known as |Elvarg|. |anti dragonfire shield| is required."},{id:"G05",type:"GOAL",subtype:"",name:"Cook's Assistant",effects:[],text:"For most new adventurers, they end up helping |Cook| get ingredients for his |Cake| for the eternal duke's birthday."},{id:"G06",type:"GOAL",subtype:"",name:"Lumbridge Citizens",effects:[],text:"Collection type: lumbridge residents including the likes of |Duke Horacio|, |Cook| and |Father Aereck|"},{id:"G07",type:"GOAL",subtype:"",name:"Elemental Runes",effects:[],text:"Collection type: any 3 of |Air rune|, |Water rune|, |Earth rune| or |Fire rune|"},{id:"G08",type:"GOAL",subtype:"",name:"Rune Mysteries",effects:[],text:"The path to unlocking runecraft requires the power of Air, QUEST REQUIREMENTS: |Air Rune|, |Archmage Sedridor|, |Duke Horacio|"},{id:"G09",type:"GOAL",subtype:"",name:"How to become a Chaos Dwarf",effects:[],text:"Under the curse of zamorak dwarves that use magic end up becoming corrupt and turning into chaos dwarves, requirements: |Drunken Dwarf|, |Wizard Mind Bomb|"},{id:"G10",type:"GOAL",subtype:"",name:"Drunken Wizard",effects:[],text:"A wizards favourite drinks got to be a |wizard mind bomb| right, so bring one to |Archmage Sedridor| for reasons."},{id:"G11",type:"GOAL",subtype:"",name:"Rock Cake",effects:[],text:"A secret cake baked only by dwarfs, requirements: |Drunken Dwarf|, |Cake|"},{id:"G12",type:"GOAL",subtype:"",name:"Alchemy",effects:[],text:"To cast alchemy spell you must have a |Nature rune| and |Fire Rune|"},{id:"G13",type:"GOAL",subtype:"",name:"Cursed",effects:[],text:"Not the spell, but someone who gains all 3 creepers must have bad luck right well now they can win, |Elvarg|, |Wizard Mind Bomb|, |Poison|"},{id:"G14",type:"GOAL",subtype:"",name:"Regicide",effects:[],text:"Requirements: |King Roald|, |Poison|. Wait this isn't how regicide goes."},{id:"G15",type:"GOAL",subtype:"",name:"Animal Magnetism",effects:[],text:"The quest all aspiring newbie rangers rush to for some QoL ammo reservation, Requirements: |Ava|, |Ghostspeak Amulet|, |Ava's Attractor|"},{id:"G16",type:"GOAL",subtype:"",name:"Ranged Setup",effects:[],text:"The power houses of early game range. Requirements: |Rune Crossbow|, |Ava's Attractor|"},{id:"G17",type:"GOAL",subtype:"",name:"Draynor Manor",effects:[],text:"Collection type: residents of draynor manor |Ernest|, |Ava|, |Ghost|"},{id:"G18",type:"GOAL",subtype:"",name:"Swampmans Nightmares",effects:[],text:"|Rune Crossbow| and |Feral Vamypre|. You get the rest."},{id:"G19",type:"GOAL",subtype:"",name:"Entrana",effects:[],text:"Collection Type: |Law Rune|, |Dramen Staff|"},{id:"G20",type:"GOAL",subtype:"",name:"Smuggler",effects:[],text:"Since equipment isn't allowed on entrana, find a way to get them there. Requirements: |Entrana|, |equipment_subtype| and |equipment_subtype| keepers"},{id:"G21",type:"GOAL",subtype:"",name:"Misthalins Nobility",effects:[],text:"Collection Type: |King Roald|, |Duke Horacio|"},{id:"G22",type:"GOAL",subtype:"",name:"Mind Goblin",effects:[],text:"They exist. |Mind Rune|, |Goblin|"},{id:"G23",type:"GOAL",subtype:"",name:"Zanaris",effects:[],text:"Collection Type: |Cosmic Rune|, |Dramen Staff|"},{id:"G24",type:"GOAL",subtype:"",name:"Catalytic Runes",effects:[],text:"Collection Type: |Mind Rune|, |Chaos Rune|"},{id:"G25",type:"GOAL",subtype:"",name:"Utility Runes",effects:[],text:"Collection Type: |Law Rune|, |Nature Rune|, |Cosmic Rune|"},{id:"G26",type:"GOAL",subtype:"",name:"Misthalins Altars",effects:[],text:"Collection Type: |Water Rune|, |Earth Rune|"},{id:"G27",type:"GOAL",subtype:"",name:"Zamorak",effects:[],text:"Collection Type: |Wilderness|, |Imp|, |Chaos Rune|"},{id:"G28",type:"GOAL",subtype:"",name:"Starter Monsters",effects:[],text:"Collection Type: |Imp|, |Goblin|, |Ernest|(he's a chicken right)"},{id:"G29",type:"GOAL",subtype:"",name:"Vampyres",effects:[],text:"Collection Type: |Feral Vampyre|, |Vampyre Juvinate|"},{id:"G30",type:"GOAL",subtype:"",name:"Port Phasmatys",effects:[],text:"Collection Type: |Ghost|, |Ghost|, |Ghost|"},{id:"G31",type:"GOAL",subtype:"",name:"Chaos",effects:[],text:"Collection Type: |Abyss|, |Chaos Rune|"},{id:"G32",type:"GOAL",subtype:"",name:"Juvinile 'Rare Drop'",effects:[],text:"After defeating a |Vampyre Juvinate|, you have been graced with the staff of utmost versatility the |Air Staff|."},{id:"G33",type:"GOAL",subtype:"",name:"Tribrid",effects:[],text:"Collection Type: |Rune Scimitar|, |Rune Crossbow|, |Air Staff|"},{id:"G34",type:"GOAL",subtype:"",name:"Melee Setup",effects:[],text:"Collection Type: |Rune Scimitar|, |Anti dragonfire shield|"},{id:"G35",type:"GOAL",subtype:"",name:"Chaos Dwarf",effects:[],text:"Collection Type: |Chaos Rune|, |Drunken Dwarf|"},{id:"G36",type:"GOAL",subtype:"",name:"Poison Removal",effects:[],text:"just gotta drink |Anti Poison| to cure |Poison|."},{id:"G37",type:"GOAL",subtype:"",name:"Prevent Toxicity?",effects:[],text:"Does a |Anti Poison| protect from being told to sit in the |Wilderness|."},{id:"G38",type:"GOAL",subtype:"",name:"Varrock",effects:[],text:"Collection type: |Aris Maye|, |Reldo|, |King Roald|"},{id:"G39",type:"GOAL",subtype:"",name:"Recipe for Disaster",effects:[],text:"A long journey begins after speaking to the |Cook|. Freeing the members of the banquet will require help from |Aris Maye|."},{id:"G40",type:"GOAL",subtype:"",name:"Plot Twisting Chicken",effects:[],text:"Didn't you know that |Ernest| the chicken was actually a astral projection from the evil chicken shrine in |Zanaris|."},{id:"GAB01",type:"GOAL",subtype:"",name:"Sire",effects:[],text:"The |Abyssal Sire| brings instant victory."},{id:"GAB02",type:"GOAL",subtype:"",name:"Jackpot",effects:[],text:"Among the loot from the |Unsired| is a chance for an easy win."},{id:"GAB03",type:"GOAL",subtype:"",name:"Abyssal Weapons",effects:[],text:"Collection type: |Abyssal Whip| and |Abyssal Dagger|"},{id:"GAB04",type:"GOAL",subtype:"",name:"Whip Drop",effects:[],text:"The iconic drop of an |Abyssal Demon| is the |Abyssal Whip|."},{id:"GA01",type:"GOAL",subtype:"",name:"Dragon Defender!",effects:[],text:"A long grind at cyclops in the warriors guild yields a |Dragon Defender|."},{id:"GM01",type:"GOAL",subtype:"",name:"Spear and Shield",effects:[],text:"A spear that can pierce anything(|Verac|) and an impenetrable shield(|Torag|)."},{id:"GM02",type:"GOAL",subtype:"",name:"Risk and Safety",effects:[],text:"Stay close to 0 hitpoints(|Dharok|) and Heal up to full(|Guthan|)."},{id:"GM03",type:"GOAL",subtype:"",name:"Plash and Pierce",effects:[],text:"The sound of magic(|Ahrim|) and crossbows(|Karil|) resounds through the crypts."},{id:"GW01",type:"GOAL",subtype:"",name:"Disarm",effects:[],text:"The bosses of the wilderness who remove equipment from the player. |Chaos Elemental| and |Chaos Fanatic|."},{id:"GW02",type:"GOAL",subtype:"",name:"Dragons",effects:[],text:"Collection type: |Elvarg|, |King Black Dragon|."},{id:"GW03",type:"GOAL",subtype:"",name:"Amulets",effects:[],text:"Collection type: |Ghostspeak Amulet|, |Burning Amulet|."},{id:"RL01",type:"RULE",subtype:"LOCATION",name:"Misthalin",effects:["LOCATION","MISTHALIN"],text:"When this card is in play, draw 1 at the end of each turn."},{id:"RL02",type:"RULE",subtype:"LOCATION",name:"Abyss",effects:["LOCATION","ABYSS"],text:"Once per turn, choose whether to draw 1 and play it."},{id:"RL03",type:"RULE",subtype:"LOCATION",name:"Asgarnia",effects:["LOCATION","ASGARNIA"],text:"When this card is in play, there can be 2 different goals in play. Only 1 is required to win."},{id:"RL04",type:"RULE",subtype:"LOCATION",name:"Morytania",effects:["LOCATION","MORYTANIA"],text:"When this card is in play, Ghosts have a 10% chance to spawn at the end of turns."},{id:"RL05",type:"RULE",subtype:"LOCATION",name:"Wilderness",effects:["LOCATION","WILDERNESS"],text:"When this card is in play, once per turn, choose a keeper to challenge and steal."},{id:"RL06",type:"RULE",subtype:"LOCATION",name:"Entrana",effects:["LOCATION","ENTRANA"],text:"When this card is in play, on arrival everyone must discard all equipment keepers in play."},{id:"RL07",type:"RULE",subtype:"LOCATION",name:"Crandor",effects:["LOCATION","CRANDOR"],text:"When this card is in play, at the end of every turn discard one card."},{id:"RL08",type:"RULE",subtype:"LOCATION",name:"Zanaris",effects:["LOCATION","ZANARIS"],text:"When this card is in play, each turn one rule will randomize except location."},{id:"RL09",type:"RULE",subtype:"LOCATION",name:"Deep Wilderness",effects:["LOCATION","WILDERNESS"],text:"Once per turn, choose a keeper to challenge, on entering teleblock."},{id:"RB01",type:"RULE",subtype:"BASIC",name:"Draw 2",effects:["RULE_DRAW","2"],text:"When this card is in play, each player will draw 2 cards per turn."},{id:"RB02",type:"RULE",subtype:"BASIC",name:"Draw 3",effects:["RULE_DRAW","3"],text:"When this card is in play, each player will draw 3 cards per turn."},{id:"RB03",type:"RULE",subtype:"BASIC",name:"Draw 4",effects:["RULE_DRAW","4"],text:"When this card is in play, each player will draw 4 cards per turn."},{id:"RB04",type:"RULE",subtype:"BASIC",name:"Draw 5",effects:["RULE_DRAW","5"],text:"When this card is in play, each player will draw 5 cards per turn."},{id:"RB05",type:"RULE",subtype:"BASIC",name:"Play 2",effects:["RULE_PLAY","2"],text:"When this card is in play, each player will play 2 cards per turn."},{id:"RB06",type:"RULE",subtype:"BASIC",name:"Play 3",effects:["RULE_PLAY","3"],text:"When this card is in play, each player will play 3 cards per turn."},{id:"RB07",type:"RULE",subtype:"BASIC",name:"Play 4",effects:["RULE_PLAY","4"],text:"When this card is in play, each player will play 4 cards per turn."},{id:"RB08",type:"RULE",subtype:"BASIC",name:"Play All",effects:["RULE_PLAY","99"],text:"When this card is in play, each player will play all cards per turn."},{id:"RB09",type:"RULE",subtype:"BASIC",name:"Hand Limit 1",effects:["RULE_HAND_LIMIT","1"],text:"When this card is in play, each player has to discard down to 1 card to end their turn."},{id:"RB10",type:"RULE",subtype:"BASIC",name:"Hand Limit 2",effects:["RULE_HAND_LIMIT","2"],text:"When this card is in play, each player has to discard down to 2 card to end their turn."},{id:"RB11",type:"RULE",subtype:"BASIC",name:"Hand Limit 3",effects:["RULE_HAND_LIMIT","3"],text:"When this card is in play, each player has to discard down to 3 card to end their turn."},{id:"RB12",type:"RULE",subtype:"BASIC",name:"Keeper Limit 3",effects:["RULE_KEEPER_LIMIT","3"],text:"When this card is in play, each player can have 3 keepers in play."},{id:"RB13",type:"RULE",subtype:"BASIC",name:"Keeper Limit 4",effects:["RULE_KEEPER_LIMIT","4"],text:"When this card is in play, each player can have 4 keepers in play."},{id:"RB14",type:"RULE",subtype:"BASIC",name:"Keeper Limit 1",effects:["RULE_KEEPER_LIMIT","1"],text:"When this card is in play, each player can have 1 keepers in play."},{id:"RB16",type:"RULE",subtype:"BASIC",name:"Keeper Unlimited",effects:["RULE_KEEPER_LIMIT","99"],text:"When this card is in play, there is no limit on how many keepers can be in play."},{id:"RB15",type:"RULE",subtype:"BASIC",name:"Teleblock",effects:["TELEBLOCK"],text:"When this card is in play, location can not be changed."},{id:"A01",type:"ACTION",subtype:"",name:"Teleport",effects:["TELEPORT"],text:"teleport to a random location."},{id:"A02",type:"ACTION",subtype:"",name:"Rules Reset",effects:["RULES_RESET"],text:"When played, all rules will be returned to their base values from the start of the game."},{id:"A03",type:"ACTION",subtype:"",name:"Pick up all keepers",effects:["KEEPERS_TO_HAND"],text:"When played, all players must pick up all their keepers in play."},{id:"A04",type:"ACTION",subtype:"",name:"Trade Hands",effects:["TRADE_HANDS"],text:"When played, choose a player to trade hands with."},{id:"A05",type:"ACTION",subtype:"",name:"Reset One Rule",effects:["RULE_RESET_CHOOSE"],text:"When played, choose 1 rule to reset."},{id:"A06",type:"ACTION",subtype:"",name:"Let's Simplify",effects:["RULE_RESET_CHOOSE","HALF","OPTIONAL"],text:"When played, choose up to half the rules to reset."},{id:"A07",type:"ACTION",subtype:"",name:"Draw 3, Play 2",effects:["DRAW_3_PLAY_2"],text:"Draw 3 cards, out of those 3 cards you must choose 2 to play and finally discard the remaining card."},{id:"A08",type:"ACTION",subtype:"",name:"Draw 2, Use'em",effects:["DRAW_2_PLAY_2"],text:"Draw 2 cards and immediately use them."},{id:"A09",type:"ACTION",subtype:"",name:"Draw 5, discard 2",effects:["DRAW_5_PLAY_3"],text:"Draw 5 cards, out of those 5 cards you must choose 3 to play and finally discard the remaining cards."},{id:"A10",type:"ACTION",subtype:"",name:"Everyone draw 1",effects:["DRAW_1","ALL_PLAYERS"],text:"All players draw 1 card."},{id:"A11",type:"ACTION",subtype:"",name:"Steal A Keeper",effects:["KEEPER_STEAL_CHOOSE"],text:"Choose a keeper on field to take into your possession."},{id:"A12",type:"ACTION",subtype:"",name:"Exchange Keepers",effects:["KEEPER_EXCHANGE_CHOOSE"],text:"Choose 2 keepers on the field and swap their locations."},{id:"A13",type:"ACTION",subtype:"",name:"Everyone Discard 1",effects:["DISCARD_1","ALL_PLAYERS"],text:"Each player will immediately discard one card."},{id:"A14",type:"ACTION",subtype:"",name:"Summon Ghost",effects:["SUMMON_GHOST"],text:"Summon a ghost to add to your keepers."},{id:"A15",type:"ACTION",subtype:"",name:"Destroy Keeper",effects:["DESTROY_1"],text:"Choose a keeper/creeper to destroy."},{id:"A16",type:"ACTION",subtype:"",name:"Scry and Acquire",effects:["DRAW_SPECIFIC_PURE"],text:"See into the future and choose a card to acquire."},{id:"A17",type:"ACTION",subtype:"",name:"Historical Research",effects:["DRAW_SPECIFIC_DISCARD"],text:"Look through past records and find the location of a card to acquire."},{id:"A18",type:"ACTION",subtype:"",name:"Direct Teleport",effects:["TELEPORT_SPECIFIC"],text:"Choose any location to teleport to."},{id:"AAB01",type:"ACTION",subtype:"",name:"Draw 8, Play 5",effects:["DRAW_8_PLAY_5"],text:"Draw 8 cards, play 5 of them and discard the rest."},{id:"AF01",type:"ACTION",subtype:"",name:"Attract Card",effects:["STEAL_CARD_RANDOM"],text:"Attracts a card from an opposing players hand."},{id:"AF02",type:"ACTION",subtype:"",name:"STEAL RCB",effects:["STEAL_RUNE_CROSSBOW"],text:"STEAL!, STEAL!, STEAL!"},{id:"AF03",type:"ACTION",subtype:"",name:"RULE FLUX",effects:["RULE_RANDOM"],text:"Randomize a rule."},{id:"AF04",type:"ACTION",subtype:"",name:"Swap",effects:["SWAP"],text:"Swaps places with a selected keeper."},{id:"AF05",type:"ACTION",subtype:"",name:"Self Destruct",effects:["SELF_DESTRUCT"],text:"Any keeper that uses this will be discarded."},{id:"AF06",type:"ACTION",subtype:"",name:"Disarmed",effects:["TO_HAND_1"],text:"Send 1 keeper to owners hand."},{id:"CO01",type:"COUNTER",subtype:"",name:"Telestop",effects:["TELESTOP_OR_LOCATION_MISTHALIN"],text:"Out of turn - Stop a teleport| During turn - Teleport to Misthalin."},{id:"CO02",type:"COUNTER",subtype:"",name:"Cancel Plans",effects:["GOALSTOP_OR_GOALS_NONE"],text:"Out of turn - Stop a goal card| During turn - Discard all goals in play."},{id:"CO03",type:"COUNTER",subtype:"",name:"Belay That",effects:["ACTIONSTOP_OR_DISCARD_1_ALL"],text:"Out of turn - Stop an action card| During turn - Everyone discards one."},{id:"CO04",type:"COUNTER",subtype:"",name:"That's Mine",effects:["KEEPER_STEALSTOP_OR_KEEPER_STEAL"],text:"Out of turn - Steal a keeper being stolen.| During turn - Choose a keeper to steal."},{id:"CO05",type:"COUNTER",subtype:"",name:"Veto",effects:["RULESTOP_OR_RULE_RESET_3"],text:"Out of turn - Stop another player while they are playing a rule card| During turn - Reset up to 3 rules."},{id:"CO06",type:"COUNTER",subtype:"",name:"It's a Trap",effects:["KEEPER_DISCARD_REFLECT_OR_KEEPER_DISCARD"],text:"Out of turn - Reflect a destroy card.| During turn - Choose a keeper to discard."}],da={allCards:Pr},vo=(()=>{const t=(f,p)=>{const g=["MISTHALIN","ABYSS","ASGARNIA","MORYTANIA","WILDERNESS","ENTRANA","CRANDOR","ZANARIS"],T=g.findIndex(S=>S===f.location);switch(p.type){case Ee.DRAW_INCREMENT:return Object.assign({},f,{drawAmount:f.drawAmount>=5?1:f.drawAmount+1});case Ee.DRAW_DECREMENT:return Object.assign({},f,{drawAmount:f.drawAmount<=1?5:f.drawAmount-1});case Ee.PLAY_INCREMENT:return Object.assign({},f,{playAmount:f.playAmount>=5?1:f.playAmount+1});case Ee.PLAY_DECREMENT:return Object.assign({},f,{playAmount:f.playAmount<=1?5:f.playAmount-1});case Ee.HAND_LIMIT_INCREMENT:return Object.assign({},f,{handLimit:f.handLimit>=5?0:f.handLimit+1});case Ee.HAND_LIMIT_DECREMENT:return Object.assign({},f,{handLimit:f.handLimit<=0?5:f.handLimit-1});case Ee.KEEPER_LIMIT_INCREMENT:return Object.assign({},f,{keeperLimit:f.keeperLimit>=5?0:f.keeperLimit+1});case Ee.KEEPER_LIMIT_DECREMENT:return Object.assign({},f,{keeperLimit:f.keeperLimit<=0?5:f.keeperLimit-1});case Ee.LOCATION_RIGHT:return Object.assign({},f,{location:g[T>=g.length-1?0:T+1]});case Ee.LOCATION_LEFT:return Object.assign({},f,{location:g[T<=0?g.length-1:T-1]});case Ee.TELEBLOCK_ON:return Object.assign({},f,{teleblock:!0});case Ee.TELEBLOCK_OFF:return Object.assign({},f,{teleblock:!1});case Ee.RESET:return Object.assign({},f,{..._n})}},e=f=>{Array.isArray(f.deck.discard)&&!f.deck.discard.length&&(f.deck.discard=!1),Array.isArray(f.goal)&&!f.goal.length&&(f.goal=!1);for(const p of f.players)Array.isArray(p.hand)&&!p.hand.length&&(p.hand=!1),Array.isArray(p.keepers)&&!p.keepers.length&&(p.keepers=!1);return f},n=f=>((!Array.isArray(f.hand)||!f.hand.length)&&(f.hand=!1),(!Array.isArray(f.keepers)||!f.keepers.length)&&(f.keepers=!1),f),r=(f,p=!1,g=!1)=>({user:f,hand:p,keepers:g}),s=(f,p,g)=>({uid:f,username:p,isReady:g,goalImages:!0,cardCatalog:{},goalWins:{},stats:{wins:0,played:0,totalRounds:0},icon:""}),i=(f,p)=>{for(let g=0;g<f.length;g++)if(p===f[g].user.uid)return{state:f[g],index:g,error:!1};return{state:f[0],index:0,error:!0}},o=(f,p)=>{for(let g=0;g<f.length;g++)if(p===f[g].uid)return{state:f[g],index:g,error:!1};return{state:f[0],index:0,error:!0}},a=(f,p,g,T,S)=>{const O=le(f,`/games/${p==null?void 0:p.uid}`),k={deck:{pure:[],discard:!1},history:{played:!1,discarded:!1},players:[{user:p??s("00001","hally",!1),hand:!1,keepers:!1}],goal:!1,turn:{player:!1,drawn:0,played:0,temporary:{hand:[],play:0},duel:{cooldown:!1,player1:{id:"",num:0},player2:{id:"",num:0}}},phases:{morytania:0,abyss:0,wilderness:0,asgarnia:0},pending:!1,isWon:!1,round:0};for(const F of uv.startDeck)for(const W of da.allCards)F===W.id&&k.deck.pure.push(W);const N={game:Object.assign({},k,{initRules:_n,rules:_n}),id:(p==null?void 0:p.uid)??"",displayName:(p==null?void 0:p.username)??"",inProgress:!1,users:[p??{uid:"0"}]};pe(O,N),g((p==null?void 0:p.uid)??""),_(f,(p==null?void 0:p.uid)??"",p??{},T,g,S)},l=async(f,p,g)=>{try{const T=le(f,`/games/${p}`);await W1(T),g(()=>"")}catch(T){return console.error(T)}},u=async(f,p,g,T)=>{try{const S=le(f),O=[];await Kn(qe(S,"/games")).then(async k=>{const N=await k.val();for(const F in N)O.push(N[F]),i(N[F].game.players,p).error||T(()=>N[F].id);g(O)})}catch{return"ERROR"}},h=(f,p,g,T,S,O)=>{const k=le(f);Kn(qe(k,`/games/${p}/`)).then(async N=>{const F=await N.val();if(F.game.players.length>=4)return console.error("Full Room");for(const Ue of F.game.players)if(Ue.user.uid===g.uid)return;const W=r(g),Y=[...F.game.players];Y.push(W),await pe(qe(k,`/games/${p}/game/players`),Y);const Ae=[...F.users];Ae.push(g),await pe(qe(k,`/games/${p}/users`),Ae),T(p),_(f,p,g,S,T,O)})},d=(f,p)=>{const g=f.slice(0,p),T=f.slice(p+1);return g.concat(T)},c=async(f,p,g,T)=>{const S=le(f);await Kn(qe(S,`/games/${p}/`)).then(async O=>{const k=await O.val(),N=[...k.game.players],F=N.findIndex(it=>it.user.uid===g.uid),W=d(N,F);await pe(qe(S,`/games/${p}/game/players`),W);const Y=[...k.users],Ae=Y.findIndex(it=>it.uid===g.uid),Ue=d(Y,Ae);await pe(qe(S,`/games/${p}/users`),Ue),T(()=>"")})},_=(f,p,g,T,S,O)=>{const k=le(f);PE(qe(k,`/games/${p}/users`),async N=>{const F=await N.val();await u(f,g.uid,T,S),console.log(F);const W=[];for(const Y of F)Y.isReady&&W.push(!0);O(Y=>W.length===F.length?!0:Y)})};return{initRulesReducer:t,convertGameToRoomGame:e,convertToRoomPlayer:n,createRoom:a,destroyRoom:l,getRooms:u,getUser:o,joinRoom:h,leaveRoom:c,connectRoom:_,readyUp:async(f,p,g,T)=>{try{const S=le(f);await Kn(qe(S,`/games/${p}/users`)).then(async O=>{const k=await O.val(),N=o(k,g.uid);console.log(k,N);const F=[...k];F[N.index].isReady=!0,await pe(qe(S,`/games/${p}/users`),F),T(W=>{if(W)return{...W,isReady:!0}})})}catch(S){console.error(S)}},startGame:async(f,p)=>{const g=le(f,`/games/${p}/inProgress`);await pe(g,!0)},checkGameInProgress:async(f,p)=>{try{const g=le(f);let T=!1;return await Kn(qe(g,`/games/${p}/inProgress`)).then(async S=>{await S.val()&&(T=!0)}),T}catch(g){console.error(g)}}}})(),lx=[{name:"tsuki",pass:"kitsu"},{name:"werly",pass:"yew"},{name:"arin",pass:"levi"}],ux="http://localhost:5173/runeflux",cv={users:lx,domain:ux},Co=(()=>{const t=async C=>{const{auth:v,setUser:x,db:f}=C;await bT(v).then(p=>{console.log(p)}),await KT(v,async p=>{if(p){const g=p.uid,T=le(f,`users/${g}`),S=await e(f,g);if(S){for(const O of Pr){let k=!1;for(const N in S.cardCatalog)N===O.id&&(k=!0);k||(S.cardCatalog[`${O.id}`]=0)}await pe(T,S),x(O=>Object.assign({},O,S?{...S}:{}))}else{const O={username:"Anon",uid:g,icon:"",goalImages:!1,isReady:!1,stats:{wins:0,played:0,totalRounds:0},cardCatalog:{},goalWins:{}};for(const k of Pr)O.cardCatalog[`${k.id}`]=0;await pe(T,O),x(k=>Object.assign({},k,O))}}else dm(v)})},e=async(C,v)=>{const x=le(C,"/users/");let f=!1;return await Kn(qe(x,`/${v}/`)).then(async p=>{const g=await p.val();g&&(f=g)}),f},n=(C,v,x,f)=>{const{cardNum:p,cardKey:g,amount:T}=x;switch(C){case"CARD":return r(v,g??"",p??NaN,f);case"WINS":return s(v,T??NaN,f);case"ROUNDS":return i(v,T??NaN,f);case"PLAYED":return o(v,T??NaN,f);case"GOALWON":return a(v,g??"",p??NaN,f)}},r=async(C,v,x,f)=>{try{const p=le(C,`/users/${f}/cardCatalog/${v}`);await pe(p,x)}catch(p){return console.error(p)}},s=async(C,v,x)=>{try{const f=le(C,`/users/${x}/stats/wins`);await pe(f,v)}catch(f){return console.error(f)}},i=async(C,v,x)=>{try{const f=le(C,`/users/${x}/stats/totalRounds`);await pe(f,v)}catch(f){return console.error(f)}},o=async(C,v,x)=>{try{const f=le(C,`/users/${x}/stats/played`);await pe(f,v)}catch(f){return console.error(f)}},a=async(C,v,x,f)=>{try{const p=le(C,`/users/${f}/goalWins/${v}`);await pe(p,x)}catch(p){return console.error(p)}};return{createAccountAnon:t,uploadStats:n,changeName:async(C,v,x)=>{try{const f=le(C,`users/${x}/username`);await pe(f,v)}catch(f){return console.error(f)}},changeIcon:async(C,v,x)=>{try{const f=le(C,`/users/${x}/icon`);await pe(f,v)}catch(f){return console.error(f)}},changeGoalSetting:async(C,v,x)=>{try{const f=le(C,`/users/${x}/goalImages`);await pe(f,v)}catch(f){return console.error(f)}},signout:async C=>{try{await dm(C)}catch(v){return console.error(v)}},testUserSignIn:(C,v,x)=>{let f=!1;for(const g of cv.users)g.name.toLowerCase()===C&&g.pass.toLowerCase()===v&&(f=!0);const p={};for(const g of Pr)p[`${g.id}`]=0;return f&&x(g=>({...g,username:C,uid:C,isReady:!1,goalImages:!0,cardCatalog:p,goalWins:{},icon:"",stats:{wins:0,played:0,totalRounds:0}})),f},combineUsers:async(C,v,x)=>{try{const f=le(C,`/users/${v}`),p=le(C,"/users/");await Kn(qe(p,`${x}`)).then(async g=>{const T=await g.val();await pe(f,T)})}catch(f){console.error(f)}}}})();function cx(){const t=P.useContext(ft),e=un(),[n,r]=P.useState(!1);return m.jsx("div",{className:"main_menu",children:m.jsxs("div",{className:"menu",children:[!t.user&&m.jsx(hR,{className:"menu_link",to:"/login",children:"Log in"}),t.user?m.jsx("button",{className:"menu_link",onClick:()=>e("/account"),children:"Continue to Game"}):m.jsx("button",{className:`menu_link ${n?"disabled":""}`,onClick:async()=>{await Co.createAccountAnon(t),r(()=>!0)},children:n?"Please Wait..":"Play as Guest"})]})})}function Hr({isSideBox:t,targets:e,player:n,isTurn:r,selectedPlayerGroup:s,selectPlayerGroup:i,toggleShowHeader:o}){const{user:a}=P.useContext(ft),l=()=>{if(!s)return!1;for(const d of s)if(d.user.uid===(n==null?void 0:n.user.uid))return!0;return!1},u=()=>{if(!e||!e.length)return!1;for(const d of e)if(d===(n==null?void 0:n.user.uid))return!0;return!1},h=()=>{if(n!=null&&n.hand)return n==null?void 0:n.hand.map((d,c)=>m.jsx("span",{className:"mini_hand_card",style:{transform:`translate(calc(-50% * ${c}), 50px)`}},`${d.id}_small_hand__${c}`))};return t?m.jsx("div",{style:u()?{boxShadow:"inset 0px 0px 12px crimson"}:{},className:`user_bar ${r?"highlight":""} ${l()?"selected":""}`,onContextMenu:d=>{d.preventDefault(),i&&i(n??{})},children:m.jsxs("p",{children:[(n==null?void 0:n.user.username)??"Not Signed In!",m.jsx("span",{className:`${n==null?void 0:n.user.icon} ready_mark`}),h()]})}):m.jsxs("div",{className:"user_bar game_user__this_user",onClick:o,children:[m.jsx("p",{children:(a==null?void 0:a.username)??"Not Signed In!"}),m.jsx("p",{className:"user_bar__uid",children:(a==null?void 0:a.uid)??"000000000"})]})}const dx=[{id:"RLF01",type:"RULE",subtype:"LOCATION",name:"Location",effects:[],text:""},{id:"RBF02",type:"RULE",subtype:"BASIC",name:"Draw",effects:[],text:""},{id:"RBF03",type:"RULE",subtype:"BASIC",name:"Play",effects:[],text:""},{id:"RBF04",type:"RULE",subtype:"BASIC",name:"Hand Limit",effects:[],text:""},{id:"RBF05",type:"RULE",subtype:"BASIC",name:"Keeper Limit",effects:[],text:""},{id:"RBF06",type:"RULE",subtype:"BASIC",name:"Teleblock",effects:[],text:""}],Cm={fakeCards:dx},fx=(()=>{const t=A=>{const E={airObj:!1,mindRune:!1};return A.forEach(R=>{R.id==="KR01"&&(E.mindRune=!0),(R.id==="KR03"||R.id==="KE03")&&(E.airObj=!0)}),E.airObj&&E.mindRune?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},e=A=>{const E={ghost:!1,ghostSpeak:!1,fatherAereck:!1};return A.forEach(R=>{R.id==="KL02"&&(E.ghost=!0),R.id==="KL04"&&(E.fatherAereck=!0),R.id==="KE01"&&(E.ghostSpeak=!0)}),E.ghost&&E.ghostSpeak&&E.fatherAereck?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},n=A=>{const E={dukeH:!1,antifireShield:!1};return A.forEach(R=>{R.id==="KL03"&&(E.dukeH=!0),R.id==="KE02"&&(E.antifireShield=!0)}),E.antifireShield&&E.dukeH?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},r=(A,E)=>{const R={crandor:!1,elvarg:!1,antifireShield:!1};return A.forEach(we=>{we.id==="CR01"&&(R.elvarg=!0),we.attachment&&we.attachment.id==="CR01"&&(R.elvarg=!0),we.id==="KE02"&&(R.antifireShield=!0)}),E==="CRANDOR"&&(R.crandor=!0),R.crandor&&R.elvarg&&R.antifireShield?{hasWon:!0,bypassCreeper:!0}:{hasWon:!1,bypassCreeper:!1}},s=A=>{const E={cook:!1,cake:!1};return A.forEach(R=>{R.id==="K01"&&(E.cake=!0),R.id==="KL05"&&(E.cook=!0)}),E.cook&&E.cake?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},i=A=>{const E={dukeH:!1,cook:!1,fatherAereck:!1};A.forEach(we=>{we.id==="KL04"&&(E.fatherAereck=!0),we.id==="KL05"&&(E.cook=!0),we.id==="KL03"&&(E.dukeH=!0)});let R=0;return E.dukeH&&R++,E.cook&&R++,E.fatherAereck&&R++,R>=2?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},o=A=>{const E={airR:!1,fireR:!1,earthR:!1,waterR:!1};A.forEach(we=>{we.id==="KR03"&&(E.airR=!0),we.id==="KR06"&&(E.fireR=!0),we.id==="KR05"&&(E.earthR=!0),we.id==="KR04"&&(E.waterR=!0)});let R=0;return E.airR&&R++,E.earthR&&R++,E.fireR&&R++,E.waterR&&R++,R>=3?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},a=A=>{const E={airR:!1,archmage:!1,dukeH:!1};return A.forEach(R=>{R.id==="KR03"&&(E.airR=!0),R.id==="KL03"&&(E.dukeH=!0),R.id==="KL07"&&(E.archmage=!0)}),E.airR&&E.archmage&&E.dukeH?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},l=A=>{const E={drunkenDwarf:!1,wizardBeer:!1};return A.forEach(R=>{R.id==="KL06"&&(E.drunkenDwarf=!0),R.id==="CR03"&&(E.wizardBeer=!0),R.attachment&&R.attachment.id==="CR03"&&(E.wizardBeer=!0)}),E.drunkenDwarf&&E.wizardBeer?{hasWon:!0,bypassCreeper:!0}:{hasWon:!1,bypassCreeper:!1}},u=A=>{const E={archmage:!1,wizardBeer:!1};return A.forEach(R=>{R.id==="KL07"&&(E.archmage=!0),R.id==="CR03"&&(E.wizardBeer=!0),R.attachment&&R.attachment.id==="CR03"&&(E.wizardBeer=!0)}),E.archmage&&E.wizardBeer?{hasWon:!0,bypassCreeper:!0}:{hasWon:!1,bypassCreeper:!1}},h=A=>{const E={drunkenDwarf:!1,cake:!1};return A.forEach(R=>{R.id==="KL06"&&(E.drunkenDwarf=!0),R.id==="K01"&&(E.cake=!0)}),E.cake&&E.drunkenDwarf?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},d=A=>{const E={natureR:!1,fireR:!1};return A.forEach(R=>{R.id==="KR07"&&(E.natureR=!0),R.id==="KR06"&&(E.fireR=!0)}),E.fireR&&E.natureR?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},c=A=>{let E=0;return A.forEach(R=>{R.type==="CREEPER"&&E++,R.attachment&&E++}),E>=3?{hasWon:!0,bypassCreeper:!0}:{hasWon:!1,bypassCreeper:!1}},_=A=>{const E={kingRoald:!1,poison:!1};return A.forEach(R=>{R.id==="KL08"&&(E.kingRoald=!0),R.id==="CR02"&&(E.poison=!0),R.attachment&&R.attachment.id==="CR02"&&(E.poison=!0)}),E.kingRoald&&E.poison?{hasWon:!0,bypassCreeper:!0}:{hasWon:!1,bypassCreeper:!1}},C=A=>{const E={ava:!1,ghostSpeak:!1,avaDevice:!1};return A.forEach(R=>{R.id==="KL09"&&(E.ava=!0),R.id==="KE05"&&(E.avaDevice=!0),R.id==="KE01"&&(E.ghostSpeak=!0)}),E.ava&&E.avaDevice&&E.ghostSpeak?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},v=A=>{const E={runeXbow:!1,avaDevice:!1};return A.forEach(R=>{R.id==="KE04"&&(E.runeXbow=!0),R.id==="KE05"&&(E.avaDevice=!0)}),E.avaDevice&&E.runeXbow?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},x=A=>{const E={ernest:!1,ava:!1,ghost:!1};return A.forEach(R=>{R.id==="KL01"&&(E.ernest=!0),R.id==="KL09"&&(E.ava=!0),R.id==="KL02"&&(E.ghost=!0)}),E.ava&&E.ernest&&E.ghost?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},f=A=>{const E={runeXbow:!1,feralVampyre:!1};return A.forEach(R=>{R.id==="KE04"&&(E.runeXbow=!0),R.id==="KL10"&&(E.feralVampyre=!0)}),E.runeXbow&&E.feralVampyre?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},p=A=>{const E={lawR:!1,dramanStaff:!1};return A.forEach(R=>{R.id==="KE06"&&(E.dramanStaff=!0),R.id==="KR08"&&(E.lawR=!0)}),E.lawR&&E.dramanStaff?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},g=(A,E)=>{const R={entrana:!1,equipment:0};return A.forEach(we=>{we.subtype==="EQUIPMENT"&&(R.equipment+=1)}),E==="ENTRANA"&&(R.entrana=!0),R.entrana&&R.equipment>=2?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},T=A=>{const E={kingRoald:!1,dukeH:!1};return A.forEach(R=>{R.id==="KL03"&&(E.dukeH=!0),R.id==="KL08"&&(E.kingRoald=!0)}),E.dukeH&&E.kingRoald?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},S=A=>{const E={mindR:!1,goblin:!1};return A.forEach(R=>{R.id==="KR01"&&(E.mindR=!0),R.id==="KL11"&&(E.goblin=!0)}),E.goblin&&E.mindR?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},O=A=>{const E={cosmicR:!1,dramanStaff:!1};return A.forEach(R=>{R.id==="KE06"&&(E.dramanStaff=!0),R.id==="KR09"&&(E.cosmicR=!0)}),E.cosmicR&&E.dramanStaff?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},k=A=>{const E={mindR:!1,chaosR:!1};return A.forEach(R=>{R.id==="KR01"&&(E.mindR=!0),R.id==="KR02"&&(E.chaosR=!0)}),E.chaosR&&E.mindR?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},N=A=>{const E={lawR:!1,natureR:!1,cosmicR:!1};return A.forEach(R=>{R.id==="KR07"&&(E.natureR=!0),R.id==="KR08"&&(E.lawR=!0),R.id==="KR09"&&(E.cosmicR=!0)}),E.cosmicR&&E.lawR&&E.natureR?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},F=A=>{const E={waterR:!1,earthR:!1};return A.forEach(R=>{R.id==="KR05"&&(E.earthR=!0),R.id==="KR04"&&(E.waterR=!0)}),E.earthR&&E.waterR?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},W=(A,E)=>{const R={wilderness:!1,imp:!1,chaosR:!1};return A.forEach(we=>{we.id==="KL12"&&(R.imp=!0),we.id==="KR02"&&(R.chaosR=!0)}),E==="WILDERNESS"&&(R.wilderness=!0),R.chaosR&&R.wilderness&&R.imp?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},Y=A=>{const E={imp:!1,goblin:!1,ernest:!1};return A.forEach(R=>{R.id==="KL12"&&(E.imp=!0),R.id==="KL11"&&(E.goblin=!0),R.id==="KL01"&&(E.ernest=!0)}),E.ernest&&E.goblin&&E.imp?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},Ae=A=>{const E={feralVampyre:!1,vampyreJuvinate:!1};return A.forEach(R=>{R.id==="KL10"&&(E.feralVampyre=!0),R.id==="KL15"&&(E.vampyreJuvinate=!0)}),E.feralVampyre&&E.vampyreJuvinate?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},Ue=A=>{const E={ghost:0};return A.forEach(R=>{R.id==="KL02"&&(E.ghost+=1)}),E.ghost>=3?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},it=(A,E)=>{const R={abyss:!1,chaosR:!1};return A.forEach(we=>{we.id==="KR02"&&(R.chaosR=!0)}),E==="ABYSS"&&(R.abyss=!0),R.abyss&&R.chaosR?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},Tt=A=>{const E={vampyreJuvinate:!1,airStaff:!1};return A.forEach(R=>{R.id==="KL15"&&(E.vampyreJuvinate=!0),R.id==="KE03"&&(E.airStaff=!0)}),E.airStaff&&E.vampyreJuvinate?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},tt=A=>{const E={runeScimitar:!1,runeXbow:!1,airStaff:!1};return A.forEach(R=>{R.id==="KE07"&&(E.runeScimitar=!0),R.id==="KE04"&&(E.runeXbow=!0),R.id==="KE03"&&(E.airStaff=!0)}),E.airStaff&&E.runeScimitar&&E.runeXbow?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},Ce=A=>{const E={runeScimitar:!1,antfireShield:!1};return A.forEach(R=>{R.id==="KE07"&&(E.runeScimitar=!0),R.id==="KE02"&&(E.antfireShield=!0)}),E.antfireShield&&E.runeScimitar?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},G=A=>{const E={chaosR:!1,drunkenDwarf:!1};return A.forEach(R=>{R.id==="KR02"&&(E.chaosR=!0),R.id==="KL06"&&(E.drunkenDwarf=!0)}),E.chaosR&&E.drunkenDwarf?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},q=A=>{const E={antiPoison:!1,poison:!1};return A.forEach(R=>{R.id==="CR02"&&(E.poison=!0),R.attachment&&R.attachment.id==="CR02"&&(E.poison=!0),R.id==="K02"&&(E.antiPoison=!0)}),E.antiPoison&&E.poison?{hasWon:!0,bypassCreeper:!0}:{hasWon:!1,bypassCreeper:!1}},z=(A,E)=>{const R={antiPoison:!1,wilderness:!1};return A.forEach(we=>{we.id==="K02"&&(R.antiPoison=!0)}),E==="WILDERNESS"&&(R.wilderness=!0),R.antiPoison&&R.wilderness?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},fe=A=>{const E={arisMaye:!1,reldo:!1,kingRoald:!1};return A.forEach(R=>{R.id==="KL14"&&(E.reldo=!0),R.id==="KL13"&&(E.arisMaye=!0),R.id==="KL08"&&(E.kingRoald=!0)}),E.kingRoald&&E.arisMaye&&E.reldo?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},Te=A=>{const E={arisMaye:!1,cook:!1};return A.forEach(R=>{R.id==="KL05"&&(E.cook=!0),R.id==="KL13"&&(E.arisMaye=!0)}),E.cook&&E.arisMaye?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},w=(A,E)=>{const R={ernest:!1,zanaris:!1};return A.forEach(we=>{we.id==="KL01"&&(R.ernest=!0)}),E==="ZANARIS"&&(R.zanaris=!0),R.ernest&&R.zanaris?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},L=A=>{const E={dragonDefender:!1};return A.forEach(R=>{R.id==="KEA08"&&(E.dragonDefender=!0)}),E.dragonDefender?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},D=A=>{const E={sire:!1};return A.forEach(R=>{R.id==="KLAB01"&&(E.sire=!0)}),E.sire?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},M=A=>{const E={unsired:!1};return A.forEach(R=>{R.id==="KAB01"&&(E.unsired=!0)}),E.unsired?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},j=A=>{const E={whip:!1,abyssalDagger:!1};return A.forEach(R=>{R.id==="KEAB01"&&(E.whip=!0),R.id==="KEAB02"&&(E.abyssalDagger=!0)}),E.abyssalDagger&&E.whip?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},B=A=>{const E={whip:!1,abyssalDemon:!1};return A.forEach(R=>{R.id==="KEAB01"&&(E.whip=!0),R.id==="KLAB02"&&(E.abyssalDemon=!0)}),E.abyssalDemon&&E.whip?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},V=A=>{const E={verac:!1,torag:!1};return A.forEach(R=>{R.id==="KLM02"&&(E.verac=!0),R.id==="KLM01"&&(E.torag=!0)}),E.torag&&E.verac?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},he=A=>{const E={guthan:!1,dharok:!1};return A.forEach(R=>{R.id==="KLM03"&&(E.guthan=!0),R.id==="KLM04"&&(E.dharok=!0)}),E.guthan&&E.dharok?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},ne=A=>{const E={karil:!1,ahrim:!1};return A.forEach(R=>{R.id==="KLM05"&&(E.karil=!0),R.id==="KLM06"&&(E.ahrim=!0)}),E.karil&&E.ahrim?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},te=A=>{const E={chaosEle:!1,chaosFanatic:!1};return A.forEach(R=>{R.id==="KLW03"&&(E.chaosFanatic=!0),R.id==="KLW02"&&(E.chaosEle=!0)}),E.chaosFanatic&&E.chaosEle?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},ue=A=>{const E={KBD:!1,elvarg:!1};return A.forEach(R=>{R.id==="CR01"&&(E.elvarg=!0),R.id==="KLW01"&&(E.KBD=!0)}),E.KBD&&E.elvarg?{hasWon:!0,bypassCreeper:!0}:{hasWon:!1,bypassCreeper:!1}},Q=A=>{const E={ghostspeak:!1,burning:!1};return A.forEach(R=>{R.id==="KEW01"&&(E.burning=!0),R.id==="KE01"&&(E.ghostspeak=!0)}),E.burning&&E.ghostspeak?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}};return{compareKeepersToGoal:(A,E,R)=>{if(!E)return{hasWon:!1,bypassCreeper:!1};switch(E.id){case"G01":return t(A);case"G02":return e(A);case"G03":return n(A);case"G04":return r(A,R);case"G05":return s(A);case"G06":return i(A);case"G07":return o(A);case"G08":return a(A);case"G09":return l(A);case"G10":return u(A);case"G11":return h(A);case"G12":return d(A);case"G13":return c(A);case"G14":return _(A);case"G15":return C(A);case"G16":return v(A);case"G17":return x(A);case"G18":return f(A);case"G19":return p(A);case"G20":return g(A,R);case"G21":return T(A);case"G22":return S(A);case"G23":return O(A);case"G24":return k(A);case"G25":return N(A);case"G26":return F(A);case"G27":return W(A,R);case"G28":return Y(A);case"G29":return Ae(A);case"G30":return Ue(A);case"G31":return it(A,R);case"G32":return Tt(A);case"G33":return tt(A);case"G34":return Ce(A);case"G35":return G(A);case"G36":return q(A);case"G37":return z(A,R);case"G38":return fe(A);case"G39":return Te(A);case"G40":return w(A,R);case"GAB01":return D(A);case"GAB02":return M(A);case"GAB03":return j(A);case"GAB04":return B(A);case"GA01":return L(A);case"GM01":return V(A);case"GM02":return he(A);case"GM03":return ne(A);case"GW01":return te(A);case"GW02":return ue(A);case"GW03":return Q(A)}return{hasWon:!1,bypassCreeper:!1}}}})();var Re=(t=>(t[t.INIT=0]="INIT",t[t.CHANGE_TURN=1]="CHANGE_TURN",t[t.DRAWN_ADD=2]="DRAWN_ADD",t[t.PLAYED_ADD=3]="PLAYED_ADD",t[t.TEMPORARY_HAND__BEGIN=4]="TEMPORARY_HAND__BEGIN",t[t.TEMPORARY_HAND__END=5]="TEMPORARY_HAND__END",t[t.TEMPORARY_HAND_CARD__ADD=6]="TEMPORARY_HAND_CARD__ADD",t[t.TEMPORARY_HAND_CARD__REMOVE=7]="TEMPORARY_HAND_CARD__REMOVE",t[t.TEMPORARY_PLAY_CHANGE=8]="TEMPORARY_PLAY_CHANGE",t[t.DUEL_BEGIN=9]="DUEL_BEGIN",t[t.DUEL_ROLL__PLAYER_1=10]="DUEL_ROLL__PLAYER_1",t[t.DUEL_ROLL__PLAYER_2=11]="DUEL_ROLL__PLAYER_2",t[t.DUEL_END=12]="DUEL_END",t[t.DUEL_COOLDOWN=13]="DUEL_COOLDOWN",t))(Re||{}),ae=(t=>(t[t.INIT=0]="INIT",t[t.DECK_REPLACE__PURE=1]="DECK_REPLACE__PURE",t[t.DECK_REPLACE__DISCARD_TO_PURE=2]="DECK_REPLACE__DISCARD_TO_PURE",t[t.DECK_REMOVE__PURE_TOP=3]="DECK_REMOVE__PURE_TOP",t[t.DECK_REMOVE__PURE_SPECIFIC=4]="DECK_REMOVE__PURE_SPECIFIC",t[t.DECK_REMOVE__DISCARD_SPECIFIC=5]="DECK_REMOVE__DISCARD_SPECIFIC",t[t.DECK_SHUFFLE__PURE=6]="DECK_SHUFFLE__PURE",t[t.DECK_ADD__DISCARD_BOT=7]="DECK_ADD__DISCARD_BOT",t))(ae||{}),ge=(t=>(t[t.INIT=0]="INIT",t[t.RULE_CHANGE__DRAW=1]="RULE_CHANGE__DRAW",t[t.RULE_CHANGE__PLAY=2]="RULE_CHANGE__PLAY",t[t.RULE_CHANGE__KEEPER_LIMIT=3]="RULE_CHANGE__KEEPER_LIMIT",t[t.RULE_CHANGE__HAND_LIMIT=4]="RULE_CHANGE__HAND_LIMIT",t[t.RULE_CHANGE__LOCATION=5]="RULE_CHANGE__LOCATION",t[t.RULE_CHANGE__LOCATION_RANDOM=6]="RULE_CHANGE__LOCATION_RANDOM",t[t.RULE_CHANGE__TELEBLOCK=7]="RULE_CHANGE__TELEBLOCK",t[t.RULE_RESET__CHOICE=8]="RULE_RESET__CHOICE",t[t.RULE_RESET__ALL=9]="RULE_RESET__ALL",t))(ge||{}),ee=(t=>(t[t.INIT=0]="INIT",t[t.HAND_CARDS__ADD=1]="HAND_CARDS__ADD",t[t.HAND_CARDS__REMOVE=2]="HAND_CARDS__REMOVE",t[t.KEEPER_CARDS__ADD=3]="KEEPER_CARDS__ADD",t[t.KEEPER_CARDS__REMOVE=4]="KEEPER_CARDS__REMOVE",t[t.KEEPER_CARDS__EXCHANGE=5]="KEEPER_CARDS__EXCHANGE",t[t.KEEPER_COOLDOWN__SET=6]="KEEPER_COOLDOWN__SET",t[t.TRADE_HANDS=7]="TRADE_HANDS",t))(ee||{}),$t=(t=>(t[t.INIT=0]="INIT",t[t.GOAL_REPLACE__SINGLE=1]="GOAL_REPLACE__SINGLE",t[t.GOAL_ADD__MULTI=2]="GOAL_ADD__MULTI",t[t.GOAL_REPLACE__MULTI=3]="GOAL_REPLACE__MULTI",t[t.GOAL_RESET=4]="GOAL_RESET",t))($t||{});const{compareKeepersToGoal:hx}=fx,{convertGameToRoomGame:px,convertToRoomPlayer:mx}=vo,Vs=(()=>{const t=(w,L)=>{const{player:D,victim:M,amount:j,duelCard:B,cards:V,init:he}=L.payload,{db:ne,gameId:te}=L.payload.upload,{temporary:ue}=w,Q=Math.ceil(Math.random()*100);switch(L.type){case Re.INIT:return Object.assign({},w,{...he});case Re.CHANGE_TURN:return a("TURN",ne,{turnState:Object.assign({},w,{player:D,drawn:0,played:0})},te),Object.assign({},w,{player:D,drawn:0,played:0});case Re.DRAWN_ADD:return a("TURN",ne,{turnState:Object.assign({},w,{player:D,drawn:j})},te),Object.assign({},w,{player:D,drawn:j});case Re.PLAYED_ADD:return a("TURN",ne,{turnState:Object.assign({},w,{played:j})},te),Object.assign({},w,{played:j});case Re.TEMPORARY_HAND__BEGIN:return a("TURN",ne,{turnState:Object.assign({},w,{temporary:{...ue,hand:V?[...V]:[],play:j??0}})},te),Object.assign({},w,{temporary:{...ue,hand:V?[...V]:[]},play:j??0});case Re.TEMPORARY_HAND_CARD__REMOVE:return a("TURN",ne,{turnState:Object.assign({},w,{temporary:{...ue,hand:V?[...V]:[]}})},te),Object.assign({},w,{temporary:{...ue,hand:V?[...V]:[]}});case Re.TEMPORARY_HAND_CARD__ADD:return a("TURN",ne,{turnState:Object.assign({},w,{temporary:{...ue,hand:ue&&V?[...ue.hand,...V]:[]}})},te),Object.assign({},w,{temporary:{...ue,hand:ue&&V?[...ue.hand,...V]:[]}});case Re.TEMPORARY_PLAY_CHANGE:return a("TURN",ne,{turnState:Object.assign({},w,{temporary:{...ue,play:j}})},te),Object.assign({},w,{temporary:{...ue,play:j}});case Re.DUEL_BEGIN:return a("TURN",ne,{turnState:Object.assign({},w,{duel:{cooldown:!0,card:B,player1:{id:D,num:0},player2:{id:M,num:0}}})},te),Object.assign({},w,{duel:{cooldown:!0,card:B,player1:{id:D,num:0},player2:{id:M,num:0}}});case Re.DUEL_ROLL__PLAYER_1:return a("TURN",ne,{turnState:Object.assign({},w,{duel:{...w.duel,player1:{...w.duel.player1,num:Q}}})},te),Object.assign({},w,{duel:{...w.duel,player1:{...w.duel.player1,num:Q}}});case Re.DUEL_ROLL__PLAYER_2:return a("TURN",ne,{turnState:Object.assign({},w,{duel:{...w.duel,player2:{...w.duel.player2,num:Q}}})},te),Object.assign({},w,{duel:{...w.duel,player2:{...w.duel.player2,num:Q}}});case Re.DUEL_END:return a("TURN",ne,{turnState:Object.assign({},w,{duel:{...w.duel,player1:{id:"",num:0},player2:{id:"",num:0}}})},te),Object.assign({},w,{duel:{...w.duel,player1:{id:"",num:0},player2:{id:"",num:0}}});case Re.DUEL_COOLDOWN:return a("TURN",ne,{turnState:Object.assign({},w,{duel:{...w.duel,cooldown:!1}})},te),Object.assign({},w,{duel:{...w.duel,cooldown:!1}});default:return w}},e=(w,L)=>{const{init:D,initRules:M,ruleKey:j,amount:B,location:V,teleblock:he}=L.payload,{db:ne,gameId:te}=L.payload.upload,ue=["MISTHALIN","ASGARNIA","MORYTANIA","ABYSS","WILDERNESS"].filter(Le=>Le!==V),Q=Math.floor(Math.random()*ue.length);switch(L.type){case ge.INIT:return Object.assign({},w,{...D});case ge.RULE_CHANGE__DRAW:return a("RULES",ne,{ruleState:{...w,drawAmount:B??1}},te),Object.assign({},w,{drawAmount:B??1});case ge.RULE_CHANGE__PLAY:return a("RULES",ne,{ruleState:{...w,playAmount:B??1}},te),Object.assign({},w,{playAmount:B??1});case ge.RULE_CHANGE__HAND_LIMIT:return a("RULES",ne,{ruleState:{...w,handLimit:B??1}},te),Object.assign({},w,{handLimit:B??1});case ge.RULE_CHANGE__KEEPER_LIMIT:return a("RULES",ne,{ruleState:{...w,keeperLimit:B??1}},te),Object.assign({},w,{keeperLimit:B??1});case ge.RULE_CHANGE__LOCATION:return a("RULES",ne,{ruleState:{...w,location:V??"MISTHALIN"}},te),Object.assign({},w,{location:V??"MISTHALIN"});case ge.RULE_CHANGE__LOCATION_RANDOM:return a("RULES",ne,{ruleState:{...w,location:ue[Q]}},te),Object.assign({},w,{location:ue[Q]});case ge.RULE_CHANGE__TELEBLOCK:return a("RULES",ne,{ruleState:{...w,teleblock:he??!1}},te),Object.assign({},w,{teleblock:he??!1});case ge.RULE_RESET__CHOICE:return a("RULES",ne,{ruleState:{...w,[`${j}`]:W(j??"",M??{})}},te),Object.assign({},w,{[`${j}`]:W(j??"",M??{})});case ge.RULE_RESET__ALL:return a("RULES",ne,{ruleState:M??_n},te),Object.assign({},w,M??_n);default:return w}},n=(w,L)=>{const{amount:D,cardIndex:M,init:j}=L.payload,{db:B,gameId:V}=L.payload.upload;let he=L.payload.pile;switch(he.length&&(he=Ae(he),he=Y(he)),L.type){case ae.INIT:return Object.assign({},w,{...j});case ae.DECK_REPLACE__PURE:return a("DECK_PURE",B,{deckState:he},V),Object.assign({},w,{pure:[...he]});case ae.DECK_REPLACE__DISCARD_TO_PURE:return a("DECK_PURE",B,{deckState:[...he]},V),a("DECK_DISCARD",B,{deckState:[]},V),Object.assign({},w,{pure:[...he],discard:[]});case ae.DECK_REMOVE__PURE_TOP:return a("DECK_PURE",B,{deckState:[...w.pure.slice(0,w.pure.length-(D??0))]},V),Object.assign({},w,{pure:[...w.pure.slice(0,w.pure.length-(D??0))]});case ae.DECK_REMOVE__PURE_SPECIFIC:return a("DECK_PURE",B,{deckState:[...z(w.pure,M??0)]},V),Object.assign({},w,{pure:[...z(w.pure,M??0)]});case ae.DECK_REMOVE__DISCARD_SPECIFIC:return a("DECK_DISCARD",B,{deckState:[...z(w.discard,M??0)]},V),Object.assign({},w,{discard:[...z(w.discard,M??0)]});case ae.DECK_ADD__DISCARD_BOT:return a("DECK_DISCARD",B,{deckState:he?[...he].concat([...w.discard]):[]},V),Object.assign({},w,{discard:he?[...he].concat([...w.discard]):[]});case ae.DECK_SHUFFLE__PURE:return a("DECK_PURE",B,{deckState:[...fe(w.pure)]},V),Object.assign({},w,{pure:[...fe(w.pure)]});default:return w}},r=(w,L)=>{const{playerId:D,init:M,cards:j,targetPlayerId:B,keepersToExchange:V,cardIndex:he,cooldown:ne}=L.payload,{db:te,gameId:ue}=L.payload.upload,Q=[...w],Le=S(w,D),A=B?S(w,B):{state:{},index:0};switch(L.type){case ee.INIT:return M?[...M]:[];case ee.HAND_CARDS__ADD:return Q[Le.index]=Object.assign({},Le.state,{hand:[...Le.state.hand,...j??[]]}),a("PLAYER",te,{playersState:Q,playerId:D},ue),[...Q];case ee.HAND_CARDS__REMOVE:return Q[Le.index].hand=j?[...j]:[],a("PLAYER",te,{playersState:Q,playerId:D},ue),[...Q];case ee.KEEPER_CARDS__ADD:return Q[Le.index]=Object.assign({},Le.state,{keepers:Le.state.keepers?[...Le.state.keepers,...j??[]]:[...j??[]]}),a("PLAYER",te,{playersState:Q,playerId:D},ue),[...Q];case ee.KEEPER_CARDS__REMOVE:return Q[Le.index].keepers=j?[...j]:[],a("PLAYER",te,{playersState:Q,playerId:D},ue),[...Q];case ee.KEEPER_CARDS__EXCHANGE:return V?(console.log(V),Q[V[0].playerIndex]=Object.assign({},Q[V[0].playerIndex],{keepers:[...z([...Q[V[0].playerIndex].keepers],V[0].index),j?j[1]:{}]}),Q[V[1].playerIndex]=Object.assign({},Q[V[1].playerIndex],{keepers:[...z([...Q[V[1].playerIndex].keepers],V[1].index),j?j[0]:{}]}),a("PLAYER",te,{playersState:Q,playerId:Q[V[0].playerIndex].user.uid},ue),a("PLAYER",te,{playersState:Q,playerId:Q[V[1].playerIndex].user.uid},ue),[...Q]):[...Q];case ee.KEEPER_COOLDOWN__SET:return Q[Le.index].keepers[he??0].cooldown=ne,a("PLAYER",te,{playersState:Q,playerId:D},ue),[...Q];case ee.TRADE_HANDS:return Q[Le.index]=Object.assign({},Le.state,{hand:[...A.state.hand]}),Q[(A==null?void 0:A.index)??0]=Object.assign({},A==null?void 0:A.state,{hand:[...Le.state.hand]}),a("PLAYER",te,{playersState:Q,playerId:D},ue),a("PLAYER",te,{playersState:Q,playerId:B},ue),[...Q];default:return w}},s=(w,L)=>{const{goals:D,replaceIndex:M}=L.payload,{db:j,gameId:B}=L.payload.upload;switch(L.type){case $t.INIT:return D?[...D]:[];case $t.GOAL_REPLACE__SINGLE:return a("GOAL",j,{goalState:D!=null&&D.length?[...D]:[]},B),[...D];case $t.GOAL_ADD__MULTI:return a("GOAL",j,{goalState:D!=null&&D.length?[...w,...D]:[]},B),[...w,...D];case $t.GOAL_REPLACE__MULTI:return a("GOAL",j,{goalState:M===0?[...D,w[1]]:[w[0],...D]},B),M===0?[...D,w[1]]:[w[0],...D];case $t.GOAL_RESET:return a("GOAL",j,{goalState:[]},B),[];default:return w}},i=w=>{const L={deck:{pure:[],discard:[]},history:{played:[],discarded:[]},players:[{user:w??{username:"hal",uid:"000001",isReady:!0},hand:[],keepers:[],isReady:!1}],goal:[],round:0,pending:!1,counter:!1,isWon:!1,phases:{morytania:0,abyss:0,wilderness:0,asgarnia:0}};for(const M of uv.startDeck)for(const j of da.allCards)M===j.id&&L.deck.pure.push(j);return Object.assign({},L,{initRules:_n,rules:_n,turn:{player:!1,drawn:0,played:0,temporary:{hand:[],play:0},duel:{cooldown:!1,card:null,player1:{id:"",num:0},player2:{id:"",num:0}}}})},o=async(w,L,D)=>{try{const M=le(L,`/games/${w}/game`);await Kn(qe(M,"/")).then(async j=>{const B=await j.val();D(B.deck,B.goal,B.rules,B.players,B.turn,B.round,B.pending,B.counter,B.isWon,B.phases,B.history,B.initRules)}),await PE(M,async j=>{const B=await j.val();D(B.deck,B.goal,B.rules,B.players,B.turn,B.round,B.pending,B.counter,B.isWon,B.phases,B.history,B.initRules)})}catch(M){console.error(M)}},a=(w,L,D,M)=>{const{gameState:j,deckState:B,turnState:V,playersState:he,playerId:ne,roundState:te,ruleState:ue,cardState:Q,goalState:Le,phaseState:A,historyState:E}=D;switch(w){case"DECK_PURE":return u(L,B??[],M);case"DECK_DISCARD":return u(L,B??[],M,!0);case"RULES":return d(L,ue??{},!1,M);case"INIT_RULES":return d(L,ue??{},!0,M);case"TURN":return h(L,V??{},M);case"PLAYER":return c(L,he??[],ne??"",M);case"ROUND":return _(L,te??0,M);case"PENDING":return C(L,Q??!1,M);case"COUNTER":return v(L,Q??!1,M);case"GOAL":return x(L,Le??[],M);case"WIN":return f(L,M);case"PHASE":return p(L,(A==null?void 0:A.location)??"",(A==null?void 0:A.amount)??0,M);case"HISTORY_PLAYED":return g(L,"played",E??[],M);case"HISTORY_DISCARDED":return g(L,"discarded",E??[],M);default:return l(L,j??{},M)}},l=async(w,L,D)=>{try{const M=px(L),j=le(w,`/games/${D}/game`);await pe(j,M)}catch(M){return console.error(M)}},u=async(w,L,D,M=!1)=>{try{const B=le(w,`/games/${D}/game/deck/${M?"discard":"pure"}`);await pe(B,L.length?L:!1)}catch(j){return console.error(j)}},h=async(w,L,D)=>{try{const M=le(w,`/games/${D}/game/turn`);await pe(M,Object.assign({},L,{temporary:{...L.temporary,hand:L.temporary.hand.length?L.temporary.hand:!1}}))}catch(M){return console.error(M)}},d=async(w,L,D=!1,M)=>{try{const j=le(w,`/games/${M}/game/${D?"initRules":"rules"}`);await pe(j,L)}catch(j){return console.error(j)}},c=async(w,L,D,M)=>{try{const{state:j,index:B}=S(L,D),V=mx(j),he=le(w,`/games/${M}/game/players/${B}`);await pe(he,V)}catch(j){return console.error(j)}},_=async(w,L,D)=>{try{const M=le(w,`/games/${D}/game/round`);await pe(M,L)}catch(M){return console.error(M)}},C=async(w,L,D)=>{try{const M=le(w,`/games/${D}/game/pending`);await pe(M,L)}catch(M){return console.error(M)}},v=async(w,L,D)=>{try{const M=le(w,`/games/${D}/game/counter`);await pe(M,L)}catch(M){return console.error(M)}},x=async(w,L,D)=>{try{const M=le(w,`/games/${D}/game/goal`);await pe(M,L!=null&&L.length?L:!1)}catch(M){return console.error(M)}},f=async(w,L)=>{try{const D=le(w,`/games/${L}/game/isWon`);await pe(D,!0)}catch(D){return console.error(D)}},p=async(w,L,D,M)=>{try{const j=le(w,`/games/${M}/game/phases/${L}`);await pe(j,D??0)}catch(j){return console.error(j)}},g=async(w,L,D,M)=>{try{const j=le(w,`/games/${M}/game/history/${L}`);await pe(j,D.length?D:!1)}catch(j){return console.error(j)}},T=(w,L,D="",M,j=[],B="")=>({id:w,type:L,subtype:D,name:M,effects:j,text:B}),S=(w,L)=>{for(let D=0;D<w.length;D++)if(L===w[D].user.uid)return{state:w[D],index:D};return{state:w[0],index:0}},O=(w,L)=>{if(!w.keepers)return{state:null,index:0};for(let D=0;D<w.keepers.length;D++)if(w.keepers[D].id===L)return{state:w.keepers[D],index:D};return{state:null,index:0}},k=w=>{for(const L of Cm.fakeCards){if(w==="location"&&L.id==="RLF01")return{card:L,error:!1};if(w==="drawAmount"&&L.id==="RBF02")return{card:L,error:!1};if(w==="playAmount"&&L.id==="RBF03")return{card:L,error:!1};if(w==="handLimit"&&L.id==="RBF04")return{card:L,error:!1};if(w==="keeperLimit"&&L.id==="RBF05")return{card:L,error:!1};if(w==="teleblock"&&L.id==="RBF06")return{card:L,error:!1}}return{card:Cm.fakeCards[0],error:!0}},N=(w,L)=>{if(w==="playAmount"||w==="drawAmount"||w==="handLimit"||w==="keeperLimit"||w==="location"||w==="teleblock")return k(w).card;for(const D of da.allCards)if(w===D.id)return D;if(L){for(const D of L)if(D.user.uid===w)return T(D.user.uid,"keeper","LIVING",D.user.username,[],"")}return da.allCards[0]},F=(w,L)=>{for(let D=0;D<L.length;D++)if(w===L[D].id)return{state:L[D],index:D};return{state:L[0],index:0}},W=(w,L)=>{const D=L??_n;for(const M in D)if(w===M)return D[M];return 0},Y=w=>{for(const L of w)L.cooldown=!1;return w},Ae=w=>{for(const L of w)L.attachment&&(w.push(L.attachment),L.attachment=null);return w},Ue=w=>{const L=[],D=[];return w.forEach(M=>{M.type==="CREEPER"?L.push(M):D.push(M)}),{keepers:D,creepers:L}},it=w=>{const L=Math.floor(Math.random()*w.length);return w[L].user.uid},Tt=w=>{switch(w){case"GOAL":case"KEEPER":case"CREEPER":return!1;case"ACTION":case"COUNTER":case"RULE":return!0;default:return!0}},tt=w=>{const L=[];for(const D of w)D.type==="CREEPER"&&L.push(D);return L},Ce=(w,L)=>{const D={keeper:null,index:0,playerIndex:0};return w.forEach((M,j)=>{M.keepers&&M.keepers.forEach((B,V)=>{B.id===L&&(D.keeper=B,D.index=V,D.playerIndex=j)})}),D},G=(w,L,D)=>{const M={playerId:"",hasCreeper:!1,bypassCreeper:!1,hasWon:!1};return w.forEach(j=>{if(!j.keepers)return;const{hasWon:B,bypassCreeper:V}=hx(j.keepers,L,D);B&&(j.keepers.forEach(he=>{he.type==="CREEPER"&&(M.hasCreeper=!0)}),M.hasWon=B,M.bypassCreeper=V,M.playerId=j.user.uid)}),console.log(M),M.playerId!==""&&!M.hasCreeper||M.hasCreeper&&M.bypassCreeper?M.playerId:!1},q=w=>w.round===0?3:w.rules.drawAmount-w.turn.drawn,z=(w,L)=>{if(!w.length)return w;const D=w.slice(0,L),M=w.slice(L+1);return D.concat(M)},fe=w=>{const L=[],D=[...w],M=w.length;for(let j=M;j>0;j--){const B=Math.floor(Math.random()*j);L.push(D[B]),D.splice(B,1)}return L};return{loadGame:i,connectGame:o,upload:a,uploadTable:l,getPlayer:S,getPlayerKeeper:O,getCardById:N,getFakeRuleCard:k,getDeckCardById:F,getInitRule:W,seperateCreepersAndKeepers:Ue,chooseWhoGoesFirst:it,checkShouldDiscard:Tt,checkForCreepers:tt,checkPlayersForKeeper:Ce,checkIfWon:G,drawPhase:q,removeCard:z,shuffleDeck:fe,endTurn:(w,L,D,M,j)=>{const B=S(L,D.player.toString()),V=B.index<L.length-1?B.index+1:0;return M({type:1,payload:{player:L[V].user.uid,upload:{db:w,gameId:j}}}),!V},turnReducer:t,goalReducer:s,rulesReducer:e,playerReducer:r,deckReducer:n}})();function to({pageType:t,leaveGame:e}){const{setUser:n}=P.useContext(ft),r=un();return m.jsxs("div",{className:"lobby_header",children:[m.jsx("h1",{className:"header_title",children:"RuneFlux"}),m.jsxs("div",{children:[m.jsx("button",{className:`header_btn ${t==="ACCOUNT"?"selected":""}`,onClick:()=>{r("/account")},children:"Account"}),m.jsx("button",{className:`header_btn ${t==="CATALOG"?"selected":""}`,onClick:()=>{r("/catalog")},children:"Card Catalog"}),m.jsx("button",{className:`header_btn ${t==="LOBBY"?"selected":""}`,onClick:()=>{r("/lobby")},children:"Lobby"}),m.jsx("button",{className:"header_btn",onClick:async()=>{n(()=>{}),r("/")},children:"Log Out"}),t==="GAME"&&m.jsx("button",{className:"header_btn",onClick:e,children:"Leave Game"})]})]})}function _x({initRules:t,setInitRules:e,toggleShowGameSettings:n,uploadInitRules:r}){return m.jsxs("div",{children:[m.jsx("h3",{style:{textAlign:"center"},children:"Initial Rules"}),m.jsxs("ul",{className:"game_settings",children:[m.jsxs("div",{className:"init_rule_btn_group",children:[m.jsx("button",{className:"init_rule_btn",onClick:()=>e("LOCATION_LEFT"),children:"<"}),m.jsxs("li",{children:["Location: ",t.location]}),m.jsx("button",{className:"init_rule_btn",onClick:()=>e("LOCATION_RIGHT"),children:">"})]}),m.jsxs("div",{className:"init_rule_btn_group",children:[m.jsx("button",{className:"init_rule_btn",onClick:()=>e("DRAW_DECREMENT"),children:"-"}),m.jsxs("li",{children:["Draw Amount: ",t.drawAmount]}),m.jsx("button",{className:"init_rule_btn",onClick:()=>e("DRAW_INCREMENT"),children:"+"})]}),m.jsxs("div",{className:"init_rule_btn_group",children:[m.jsx("button",{className:"init_rule_btn",onClick:()=>e("PLAY_DECREMENT"),children:"-"}),m.jsxs("li",{children:["Play Amount: ",t.playAmount]}),m.jsx("button",{className:"init_rule_btn",onClick:()=>e("PLAY_INCREMENT"),children:"+"})]}),m.jsxs("div",{className:"init_rule_btn_group",children:[m.jsx("button",{className:"init_rule_btn",onClick:()=>e("HAND_LIMIT_DECREMENT"),children:"-"}),m.jsxs("li",{children:["Hand Limit: ",t.handLimit]}),m.jsx("button",{className:"init_rule_btn",onClick:()=>e("HAND_LIMIT_INCREMENT"),children:"+"})]}),m.jsxs("div",{className:"init_rule_btn_group",children:[m.jsx("button",{className:"init_rule_btn",onClick:()=>e("KEEPER_LIMIT_DECREMENT"),children:"-"}),m.jsxs("li",{children:["Keeper Limit: ",t.keeperLimit]}),m.jsx("button",{className:"init_rule_btn",onClick:()=>e("KEEPER_LIMIT_INCREMENT"),children:"+"})]}),m.jsxs("div",{className:"init_rule_btn_group",children:[m.jsx("button",{className:`init_rule_btn_bool init_rule_btn ${t.teleblock?"":"disabled"}`,onClick:()=>e("TELEBLOCK_OFF"),children:"OFF"}),m.jsxs("li",{children:["Teleblock: ",t.teleblock.toString()]}),m.jsx("button",{className:`init_rule_btn_bool init_rule_btn ${t.teleblock?"disabled":""}`,onClick:()=>e("TELEBLOCK_ON"),children:"ON"})]})]}),m.jsxs("div",{className:"lobby_btn_group",children:[m.jsx("button",{style:{width:"100%"},className:"play_btn__card",onClick:()=>{r(t),n()},children:"Confirm"}),m.jsx("button",{style:{width:"100%"},className:"discard_btn__card",onClick:()=>{e("RESET")},children:"Reset"})]})]})}const{upload:wm}=Vs;function gx({initRules:t,setInitRules:e}){var it,Tt,tt;const{createRoom:n,getRooms:r,joinRoom:s,leaveRoom:i,destroyRoom:o,readyUp:a,connectRoom:l}=vo,{db:u,user:h,joinedGameID:d,setJoinedGameID:c,setUser:_}=P.useContext(ft),C=un(),[v,x]=P.useState([]),[f,p]=P.useState(!1),[g,T]=P.useState(!1),[S,O]=P.useState(!1),[k,N]=P.useState(!1),F=()=>p(()=>!f);P.useEffect(()=>{if(!h)return C("/");v.length||setTimeout(()=>{r(u,(h==null?void 0:h.uid)??"",x,c)},500),d&&h&&l(u,d,h,x,c,T),console.log(v)},[d,h]),P.useEffect(()=>{g&&C("/game")},[g]);const W=async Ce=>{await wm("RULES",u,{ruleState:{...Ce}},d),await wm("INIT_RULES",u,{ruleState:{...Ce}},d)},Y=()=>{for(const Ce of v)if(Ce.id===d)return Ce;return null},Ae=()=>v.map((Ce,G)=>m.jsxs("div",{className:"room_link",onClick:()=>{s(u,Ce.id,h??{},c,x,T)},children:[m.jsx("p",{children:Ce.users[0].username}),m.jsxs("p",{children:[Array.isArray(Ce.game.players)&&Ce.game.players.length," / 4 Players"]})]},`room_${G}`)),Ue=()=>{let Ce;for(const G of v)G.id===d&&(Ce=G);if(Ce)return Ce.users.map((G,q)=>m.jsxs("div",{className:"lobby_player",children:[m.jsxs("p",{children:[q+1,"). ",G.username," ",G.isReady?m.jsx("span",{className:"check ready_mark"}):m.jsx("span",{className:"cross ready_mark"})]}),(h==null?void 0:h.uid)===G.uid&&m.jsx("button",{className:"lobby_link",onClick:()=>{h&&(h.uid===d?o(u,d,c):i(u,d,h,c))},children:"Leave"})]},`lobby_player__${q}`))};return d?m.jsxs("div",{className:"main_menu",children:[m.jsx(to,{pageType:"LOBBY"}),m.jsx(Hr,{}),m.jsxs("div",{className:"menu lobby",children:[m.jsxs("h2",{children:["Current Session: ",(it=Y())==null?void 0:it.users[0].username]}),f?m.jsx(_x,{initRules:t,setInitRules:e,toggleShowGameSettings:F,uploadInitRules:W}):m.jsxs(m.Fragment,{children:[Ue(),m.jsxs("div",{className:"lobby_btn_group",children:[m.jsx("button",{style:{width:"100%",backgroundColor:"orangered"},className:`play_btn__card ${k?"disabled":""}`,onClick:()=>{N(()=>!0),a(u,d,h??{},_)},children:"Ready"}),m.jsx("button",{style:{width:"100%"},className:`play_btn__card flipped ${((Tt=Y())==null?void 0:Tt.id)===(h==null?void 0:h.uid)?"":"disabled"}`,onClick:()=>{F()},disabled:((tt=Y())==null?void 0:tt.id)!==(h==null?void 0:h.uid),children:"Settings"})]})]})]})]}):m.jsxs("div",{className:"main_menu",children:[m.jsx(to,{pageType:"LOBBY"}),m.jsx(Hr,{}),m.jsxs("div",{className:"menu lobby",children:[m.jsx("div",{className:"refresh_btn__container",children:m.jsx("button",{className:`refresh_btn ${S?"disabled":""}`,onClick:()=>{!h||S||(r(u,h==null?void 0:h.uid,x,c),O(()=>!0),setTimeout(()=>O(()=>!1),15e3))}})}),v.length?Ae():m.jsx("div",{children:m.jsx("h3",{style:{textAlign:"center"},children:"No Rooms"})}),m.jsx("button",{style:{width:"50%",alignSelf:"center"},className:"lobby_link",onClick:()=>n(u,h,c,x,T),children:"Create Game"})]})]})}function yx(){return m.jsx("div",{className:"deck_container",children:Array.from([0,1,2,3,4,5]).map(t=>m.jsx("div",{style:{transform:`rotateZ(-3deg) translate(calc(2px * ${t}), calc(-4px * ${t}))`},className:"card_back card deck_card"},`deck_card__${t}`))})}function Ex({drawCards:t}){return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"underlay"}),m.jsxs("div",{className:"popup",children:[m.jsx(yx,{}),m.jsx("button",{className:"menu_link",onClick:t,children:"Draw Cards"})]})]})}function Xt({cardState:t,position:e,numberInLine:n,player:r,inspectKeeper:s,selectCard:i,selectedGoalGroup:o,selectGoalGroup:a}){const{user:l}=P.useContext(ft),[u,h]=P.useState(!1),[d,c]=P.useState(e==="HAND");P.useEffect(()=>{setTimeout(()=>{c(()=>!1)},300)},[]);const _=`translate(calc(-50% * ${n}), -250px)`,C=`translate(calc(-50% * ${n}), ${u?"-50px":"0"})`,v=()=>{if(!o)return!1;for(const S of o)if(S.state.id===t.state.id)return!0;return!1},x=()=>{if(!(!(l!=null&&l.cardCatalog)||r&&!r.user.cardCatalog)&&(e==="HAND"||e==="SELECT"||e==="CATALOG"||e==="PENDING"||e==="PREVIOUS_PENDING")){const S=r?r.user.cardCatalog[`${t.state.id}`]:l==null?void 0:l.cardCatalog[`${t.state.id}`];if(!S)return"";if(S>999)return"gtrim twilight";if(S>499)return"gtrim";if(S>249)return"strim";if(S>49)return"btrim"}},f=S=>S.split("'").join("").split(" ").join("_").toLowerCase(),p=()=>t.state.text.split("|").map((S,O)=>m.jsx("span",{style:{color:O%2===1?"pink":"white"},children:S},`card_text__${O}`)),g=()=>t.state.text.split("|").map((S,O)=>{if(O%2===1)return m.jsx("div",{className:`${f(S)} goal_image`},`goal_image__${S}_${O}`)}),T=()=>t.state.text.split("|").map((S,O)=>m.jsx("span",{className:"counter_p",children:S},`counter_text__${O}`));return t.state?m.jsxs("div",{className:`card ${x()} ${t.state.type.toLowerCase()} ${e==="PREVIOUS_PENDING"?"previous_pending":""} ${e==="PENDING"?"pending":""} ${e==="HAND"?"hand_card":""} ${v()?"goal_selected":""}`,style:e==="HAND"?{transform:d?_:C}:e==="CREEPER"?{transform:"scale(0.3) translate(-300px, -100px)"}:{},onMouseEnter:S=>{d||(S.stopPropagation(),h(!0))},onMouseLeave:S=>{S.stopPropagation(),h(!1)},onClick:s?()=>s({...t,playerIndex:0}):()=>i&&i(t),onContextMenu:S=>{S.preventDefault(),!(!a||t.state.type!=="GOAL")&&a(t)},children:[m.jsx("div",{className:"card_container__inner_left",children:m.jsx("div",{className:"card_header__background",children:m.jsx("h4",{className:"card_header__text",children:t.state.name.split(" ").join("_")})})}),m.jsxs("div",{className:"card_container__inner_right",children:[m.jsxs("h2",{children:[t.state.type,m.jsx("span",{className:`${t.state.subtype.toLowerCase()}_subtype icon card_subtype`})]}),m.jsx("h3",{className:"card_title",children:t.state.name}),m.jsx("hr",{className:"card_hr__thick"}),m.jsx("p",{children:t.state.type==="GOAL"?l!=null&&l.goalImages?"":p():t.state.type==="COUNTER"?T():t.state.text}),t.state.type!=="GOAL"&&m.jsx("div",{className:`${f(t.state.name)} card_image`}),(l==null?void 0:l.goalImages)&&t.state.type==="GOAL"&&m.jsx("div",{className:"goal_images",children:g()})]})]}):null}function rd({hand:t,selectCard:e}){const n=()=>t.map((r,s)=>m.jsx(Xt,{cardState:{state:r,index:s},position:"HAND",numberInLine:s+1,selectCard:e},`hand_card_${s}`));return m.jsx("div",{className:"hand_container",children:n()})}function Yf({message:t,clearErrors:e}){return m.jsx("div",{className:"errors_container",onAnimationEnd:e,children:m.jsx("p",{className:"errors_message",children:t})})}function vx({cardState:t,table:e,localPlayer:n,playCard:r,discardCard:s,fromWormhole:i,selectedKeeperGroup:o,selectedPlayerGroup:a,selectedRuleGroup:l}){const[u,h]=P.useState([]),[d,c]=P.useState([]),{user:_}=P.useContext(ft),C=()=>{if(t.state.type==="COUNTER"&&e.turn.player!==(_==null?void 0:_.uid))return v();const{player:N,played:F,temporary:W}=e.turn;if(i){if(!W)return!1;const Y=(W==null?void 0:W.play)<1,Ae=t.state.type==="ACTION"||t.state.type==="COUNTER"||t.state.subtype==="LOCATION"?f(t.state.id).error:!1;if(Y||Ae)return[Y,!0,Ae]}else{const Y=F>=e.rules.playAmount,Ae=N===(_==null?void 0:_.uid),Ue=t.state.type==="ACTION"||t.state.type==="COUNTER"||t.state.subtype==="LOCATION"?f(t.state.id).error:!1;if(Y||!Ae||Ue)return[Y,Ae,Ue]}return!1},v=()=>{const{type:N,subtype:F}=e.pending&&e.pending!==!0?e.pending:{type:"",subtype:""},W=!e.pending,Y=[];return t.state.id==="CO01"&&(F==="LOCATION"||x())&&Y.push(!1),t.state.id==="CO02"&&N==="GOAL"&&Y.push(!1),t.state.id==="CO03"&&N==="ACTION"&&Y.push(!1),t.state.id==="CO04"&&x()&&Y.push(!1),t.state.id==="CO05"&&F==="BASIC"&&Y.push(!1),t.state.id==="CO06"&&x()&&Y.push(!1),W||!Y.length?[W,!!Y.length]:!1},x=()=>{if(e.pending&&e.pending!==!0&&e.pending.effects&&e.pending.effects.length)return!!(t.state.id==="CO01"&&e.pending.effects.includes("TELEPORT")||t.state.id==="CO04"&&(e.pending.effects.includes("STEAL_RUNE_CROSSBOW")||e.pending.effects.includes("KEEPER_STEAL_CHOOSE")||e.pending.effects.includes("STEAL_KEEPER"))||t.state.id==="CO06"&&e.pending.effects.includes("DESTROY_1"))},f=N=>N==="A04"&&!a.length?{error:!1,warning:!0}:N==="A04"&&a[0].user.uid===(_==null?void 0:_.uid)?{error:!0,warning:!1}:N==="A05"&&!l.length?{error:!1,warning:!0}:N==="A06"&&!l.length?{error:!1,warning:!0}:N==="A11"&&!o.length?{error:!1,warning:!0}:N==="A11"&&e.players[o[0].playerIndex].user.uid===(_==null?void 0:_.uid)?{error:!0,warning:!1}:N==="A12"&&o.length<2?{warning:!0,error:!1}:N==="A15"&&!o.length?{warning:!0,error:!1}:N==="A15"&&e.players[o[0].playerIndex].user.uid===(_==null?void 0:_.uid)&&o[0].state.type!=="CREEPER"&&!o[0].state.attachment?{error:!0,warning:!1}:N==="CO04"&&!o.length?{warning:!0,error:!1}:N==="CO04"&&e.players[o[0].playerIndex].user.uid===(_==null?void 0:_.uid)?{error:!0,warning:!1}:N==="CO05"&&!l.length?{warning:!0,error:!1}:N==="CO06"&&!o.length?{warning:!0,error:!1}:N==="CO06"&&e.players[o[0].playerIndex].user.uid===(_==null?void 0:_.uid)&&o[0].state.type!=="CREEPER"&&!o[0].state.attachment?{error:!0,warning:!1}:t.state.subtype==="LOCATION"&&e.rules.teleblock?{warning:!0,error:!1}:{warning:!1,error:!1},p=N=>{const F=[];N[0]&&(!i&&(_==null?void 0:_.uid)===e.turn.player&&F.push("Play limit reached! End turn."),i&&F.push("Play limit reached! Discard down to 0."),(_==null?void 0:_.uid)!==e.turn.player&&t.state.type==="COUNTER"&&F.push("No card to counter.")),N[1]===!1&&(t.state.type==="COUNTER"?F.push("Doesn't counter that type of card."):F.push("Please wait for your turn.")),N[2]===!0&&F.push("Cannot select groups pertaining to yourself."),h(()=>[...F])},g=()=>h(()=>[]),T=()=>{if(i){const N=e.turn.temporary.play<1;if(!N)return[N]}else{const N=n.hand.length>e.rules.handLimit;if(!N)return[N]}return!1},S=N=>{const F=[];N[0]||(i?F.push(`Play ${e.turn.temporary.play} more.`):F.push("Hand limit has not been reached.")),c(()=>[...F])},O=()=>c(()=>[]),k=(N,F)=>N.map((W,Y)=>m.jsx(Yf,{message:W,clearErrors:F},`endturn_error__${Y}`));return m.jsxs("div",{className:"popup",children:[m.jsx(Xt,{cardState:t,position:"SELECT"}),m.jsxs("div",{className:"play_btn_group__card",children:[m.jsx("div",{className:"errors_container__play",children:u.length?k(u,g):null}),m.jsx("button",{className:`play_btn__card ${e.pending&&t.state.type!=="COUNTER"||C()?"disabled":""} ${f(t.state.id).warning?"warning":""}`,onClick:()=>{if(e.pending&&t.state.type!=="COUNTER")return;const N=C();if(N)return p(N);r(t.state,t.index)},children:"Play Card"}),m.jsx("div",{className:"errors_container__discard",children:d.length?k(d,O):null}),m.jsx("button",{className:`discard_btn__card ${e.pending||T()?"disabled":""}`,onClick:()=>{if(e.pending)return;const N=T();if(N)return S(N);s(t.index)},children:"Discard Card"})]})]})}function Cx({rules:t,turn:e,targetedRule:n,selectedRuleGroup:r,selectRuleGroup:s,isTurn:i,cooldown:o,setCooldown:a,wormhole:l}){const[u,h]=P.useState(!1),d=["At the end of every turn draw 1 card.","Double agenda(two goals) is in play here.","At the end of every turn discard 1 random card","Once per turn, Challenge an other players keeper for the chance to steal them","Upon arriving here discard all current equipment keepers in play.","10% chance to summon a ghost at the end of your turn.","Once per turn, You have the option to draw 1 and play it.","Each turn a random rule will randomize. Locations not included."],c=_=>{if(!n.length)return{};for(const C of n)if(_===C)return{filter:"drop-shadow(0px 0px 2px var(--crimson))"}};return m.jsxs("div",{style:{zIndex:20},className:"rules_container box_border ",children:[m.jsx("h2",{children:"Rules"}),m.jsx("hr",{}),m.jsxs("ul",{children:[m.jsxs("li",{style:c("location"),className:`rule ${r.includes("location")?"highlight":""} ${t.location==="ABYSS"?`location_btn ${o||!i?"disabled":""}`:""}`,onClick:()=>{t.location!=="ABYSS"||o||!i||(l(1,0),a(()=>!0))},onContextMenu:_=>{_.preventDefault(),s("location")},children:["Location: ",t.location,m.jsx("span",{className:"location_tooltip__btn",onMouseEnter:()=>h(()=>!0),onMouseLeave:()=>h(()=>!1),children:"i"}),u&&m.jsxs("span",{className:"location_tooltip__text",children:[t.location==="MISTHALIN"?d[0]:"",t.location==="ASGARNIA"?d[1]:"",t.location==="CRANDOR"?d[2]:"",t.location==="WILDERNESS"?d[3]:"",t.location==="ENTRANA"?d[4]:"",t.location==="MORYTANIA"?d[5]:"",t.location==="ABYSS"?d[6]:"",t.location==="ZANARIS"?d[7]:""]})]}),m.jsxs("li",{style:c("drawAmount"),className:`rule ${r.includes("drawAmount")?"highlight":""}`,onContextMenu:_=>{_.preventDefault(),s("drawAmount")},children:["Draw: ",e.drawn," / ",t.drawAmount]}),m.jsxs("li",{style:c("playAmount"),className:`rule ${r.includes("playAmount")?"highlight":""}`,onContextMenu:_=>{_.preventDefault(),s("playAmount")},children:["Play: ",e.played," / ",t.playAmount]}),m.jsxs("li",{style:c("handLimit"),className:`rule ${r.includes("handLimit")?"highlight":""}`,onContextMenu:_=>{_.preventDefault(),s("handLimit")},children:["Hand Limit: ",t.handLimit]}),m.jsxs("li",{style:c("keeperLimit"),className:`rule ${r.includes("keeperLimit")?"highlight":""}`,onContextMenu:_=>{_.preventDefault(),s("keeperLimit")},children:["Keeper Limit: ",t.keeperLimit]}),m.jsx("li",{style:c("teleblock"),className:`rule ${r.includes("teleblock")?"highlight":""}`,onContextMenu:_=>{_.preventDefault(),s("teleblock")},children:t.teleblock?"Teleblocked":""})]})]})}function wx({table:t,localPlayer:e,showCardPiles:n,endTurn:r}){const[s,i]=P.useState([]),o=()=>{const d=t.turn.drawn>=t.rules.drawAmount,c=t.turn.played>=t.rules.playAmount||!e.hand.length,_=e.hand.length>t.rules.handLimit,C=e.keepers.length>t.rules.keeperLimit&&!a(),v=t.turn.player===e.user.uid,x=t.turn.temporary.hand.length>0,f=n.discard||n.pure;return!d||!c||_||C||!v||x||f?[d,c,_,C,v,x,f]:!1},a=()=>{if(!e.keepers)return;let d=0;for(const c of e.keepers)c.type==="CREEPER"&&d++;return d===e.keepers.length},l=d=>{const c=[];d[0]||c.push("Draw limit not reached!"),d[1]||c.push("Play limit not reached!"),d[2]&&c.push("Hand limit reached! Discard down."),d[3]&&c.push("Keeper limit reached! Discard a keeper."),d[4]||c.push("Please wait your turn."),d[5]&&c.push("Finish using all the cards in hand."),d[6]&&c.push("Finish choosing a card to draw."),i(()=>[...c])},u=()=>{i(()=>[])},h=()=>s.map((d,c)=>m.jsx(Yf,{message:d,clearErrors:u},`endturn_error__${c}`));return m.jsxs("div",{className:"endturn_btn_container",children:[m.jsx("button",{style:{whiteSpace:"nowrap"},className:`endturn_btn ${o()||t.pending?"disabled":""}`,onClick:()=>{if(t.pending)return;const d=o();if(d)return l([...d]);r()},children:"End Turn"}),s.length?h():null]})}const{getFakeRuleCard:Rx}=Vs;function ll({cardState:t,targets:e,isSideWays:n,inspectKeeper:r,selectKeeperGroup:s,selectedKeeperGroup:i,playerNum:o,player:a,drawSpecificCard:l,playCard:u}){const{user:h}=P.useContext(ft),d=()=>{if(!i||!o)return!1;for(const v of i)if(v.playerIndex===o-1&&v.index===t.index)return!0;return!1},c=()=>{if(!(!e||!o)){for(const v of e)if(t.state.type==="RULE"&&!Rx(v.id).error||v.id===t.state.id&&v.index===t.index&&v.playerIndex===o-1)return!0;return!1}},_=()=>{if(!(h!=null&&h.cardCatalog)||a&&!a.user.cardCatalog)return;const v=a?a.user.cardCatalog[`${t.state.id}`]:h==null?void 0:h.cardCatalog[`${t.state.id}`];if(!v)return"";if(v>999)return"gtrim twilight";if(v>499)return"gtrim";if(v>249)return"strim";if(v>49)return"btrim"},C=()=>t.state.text.split("|").map((v,x)=>{if(x%2===1)return m.jsx("div",{className:`${v.split("'").join("").split(" ").join("_").toLowerCase()} mini_card_image sideways`},`mini_goal_image__${v}_${x}`)});return n?m.jsxs("div",{className:`${_()} card__mini ${t.state.type.toLowerCase()} ${d()?"selected":""}`,style:t.state.effects&&!t.state.cooldown?{background:"var(--black-shine)",boxShadow:c()?"inset 0px 0px 12px crimson":""}:{boxShadow:c()?"inset 0px 0px 12px crimson":""},onClick:t.state.attachment?v=>v.preventDefault():()=>{!o||!r||r({...t,playerIndex:o-1})},onContextMenu:v=>{v.preventDefault(),s&&s({state:t.state,index:t.index,playerIndex:o?o-1:0})},children:[m.jsx("div",{className:"card_container__inner_left",children:m.jsx("div",{className:"card_header__background",children:m.jsx("h4",{className:"card_header__text",style:t.state.name.length>10?{fontSize:"10px"}:{},children:t.state.name.split(" ").join("_")})})}),m.jsx("div",{className:"card_container__inner_right",children:m.jsx("div",{className:`${t.state.name.split("'").join("").split(" ").join("_").toLowerCase()} mini_card_image`})}),t.state.attachment&&m.jsx(Xt,{position:"CREEPER",cardState:{state:t.state.attachment??{},index:0},inspectKeeper:r})]}):m.jsxs("div",{className:`${_()} side_card__mini card__mini  ${t.state.type.toLowerCase()} ${d()?"selected":""}`,style:t.state.effects&&!t.state.cooldown?{background:"var(--black-shine)",boxShadow:c()?"inset 0px 0px 12px crimson":""}:{boxShadow:c()?"inset 0px 0px 12px crimson":""},onClick:t.state.attachment?v=>v.preventDefault():()=>{if(u)return u(t.state);if(l)return l(t.index);!o||!r||r({...t,playerIndex:o-1})},onContextMenu:v=>{v.preventDefault(),s&&s({state:t.state,index:t.index,playerIndex:o?o-1:0})},children:[m.jsx("div",{className:"side_card_container__inner_left",children:m.jsx("div",{className:"side_card_header__background",children:m.jsx("h4",{className:"side_card_header__text",children:t.state.name.split(" ").join("_")})})}),m.jsxs("div",{className:"side_card_container__inner_right",children:[m.jsx("div",{className:`${t.state.name.split("'").join("").split(" ").join("_").toLowerCase()} mini_card_image sideways`}),t.state.type==="GOAL"&&m.jsxs("div",{className:"mini_goal_images",children:[" ",C()]})]}),t.state.attachment&&m.jsx(Xt,{position:"CREEPER",cardState:{state:t.state.attachment??{},index:0},inspectKeeper:r})]})}function Sx({table:t,inspectKeeper:e,selectKeeperGroup:n,selectedKeeperGroup:r,selectGoalGroup:s,selectedGoalGroup:i}){var C,v,x;const{players:o,goal:a}=t,{user:l}=P.useContext(ft),u=()=>{var f,p,g,T;if(l){if(((f=o[0])==null?void 0:f.user.uid)===(l==null?void 0:l.uid))return"180deg";if(((p=o[1])==null?void 0:p.user.uid)===(l==null?void 0:l.uid))return"0deg";if(((g=o[2])==null?void 0:g.user.uid)===(l==null?void 0:l.uid))return"270deg";if(((T=o[3])==null?void 0:T.user.uid)===(l==null?void 0:l.uid))return"90deg"}},h=()=>{var f,p,g,T;if(l){if(((f=o[0])==null?void 0:f.user.uid)===(l==null?void 0:l.uid))return"180deg";if(((p=o[1])==null?void 0:p.user.uid)===(l==null?void 0:l.uid))return"0deg";if(((g=o[2])==null?void 0:g.user.uid)===(l==null?void 0:l.uid))return"90deg";if(((T=o[3])==null?void 0:T.user.uid)===(l==null?void 0:l.uid))return"270deg"}},d=()=>{var f,p,g;if(l){if(o.length>3){if(((f=o[2])==null?void 0:f.user.uid)===(l==null?void 0:l.uid)||((p=o[3])==null?void 0:p.user.uid)===(l==null?void 0:l.uid))return!0}else if(o.length>2&&((g=o[2])==null?void 0:g.user.uid)===(l==null?void 0:l.uid))return!0;return!1}},c=(f,p,g)=>f.map((T,S)=>m.jsx(ll,{isSideWays:p,targets:t.pending&&t.pending!==!0&&t.pending.targets?t.pending.targets:[],cardState:{state:T,index:S},inspectKeeper:e,selectKeeperGroup:n,selectedKeeperGroup:r,player:o[g-1],playerNum:g},`table_keepers__p${g}_${S}`)),_=()=>a.map((f,p)=>m.jsx(Xt,{position:"TABLE",cardState:{state:f,index:p},selectGoalGroup:s,selectedGoalGroup:i},`table_goals__${p}`));return m.jsxs("div",{className:"table_container",style:{width:d()?"660px":"",height:d()?"900px":"",transform:` ${d()?"translateY(-100px)":""} rotateZ(${u()})`},children:[m.jsx("div",{className:`player_1_keepers keeper_container ${o[0].keepers.length>1?"length_2plus":"length_1"}`,children:o[0].keepers.length?c(o[0].keepers,!0,1):m.jsx("div",{className:"mini_card_outline",children:m.jsx("p",{children:"No Keeper!"})})}),o.length>1&&m.jsx("div",{className:`player_2_keepers keeper_container ${((C=o[1])==null?void 0:C.keepers.length)>1?"length_2plus":"length_1"}`,children:(v=o[1])!=null&&v.keepers.length?c((x=o[1])==null?void 0:x.keepers,!0,2):m.jsx("div",{className:"mini_card_outline",children:m.jsx("p",{children:"No Keeper!"})})}),o.length>2&&m.jsx("div",{className:`player_3_keepers keeper_container ${o[2].keepers.length>1?"length_2plus":"length_1"}`,children:o[2].keepers.length?c(o[2].keepers,!1,3):m.jsx("div",{className:"mini_card_outline",children:m.jsx("p",{children:"No Keeper!"})})}),o.length>3&&m.jsx("div",{style:{transform:"translateX(9px)"},className:`player_4_keepers keeper_container ${o[3].keepers.length>1?"length_2plus":"length_1"}`,children:o[3].keepers.length?c(o[3].keepers,!1,4):m.jsx("div",{className:"mini_card_outline",children:m.jsx("p",{children:"No Keeper!"})})}),m.jsx("div",{className:"table_goals",style:{position:"absolute",transform:`${d()?"translateX(5px)":""} rotateZ(${h()})`},children:a.length?_():m.jsx("div",{className:"card_outline",children:m.jsx("h2",{style:{color:"var(--light-pink)"},children:"No Goal !"})})})]})}const{getPlayer:Ix}=Vs;function Ax({cardState:t,table:e,localPlayer:n,playEffect:r,startDuel:s,discardKeeper:i,inspectKeeper:o,selectedKeeperGroup:a,selectedPlayerGroup:l}){const{user:u}=P.useContext(ft),[h,d]=P.useState([]),[c,_]=P.useState([]),C=()=>d(()=>[]),v=()=>_(()=>[]),x=()=>{var N,F,W;const k=Ix(e.players,(u==null?void 0:u.uid)??"");if(t.state.id==="KE04"){if(!a.length||a[0].state.subtype!=="LIVING"||a[0].playerIndex===k.index&&!a[0].state.attachment)return!1}else if(t.state.id==="KR07"){if(!a.length||a[0].state.subtype!=="EQUIPMENT"||a[0].playerIndex===k.index&&!a[0].state.attachment)return!1}else if(t.state.id==="KL07"){if(!a.length||a[0].state.subtype!=="RUNE"||a[0].playerIndex===k.index&&!a[0].state.attachment)return!1}else if(t.state.id==="KE05"){if(!l.length||l[0].user.uid===k.state.user.uid)return!1}else if(t.state.id==="K02"){if(!a.length||a[0].state.id!=="CR02"&&((N=a[0].state.attachment)==null?void 0:N.id)!=="CR02")return!1}else if(t.state.id==="KE02"){if(!a.length||a[0].state.id!=="CR01"&&((F=a[0].state.attachment)==null?void 0:F.id)!=="CR01")return!1}else if(t.state.id==="KL06"){if(!a.length||a[0].state.id!=="CR03"&&((W=a[0].state.attachment)==null?void 0:W.id)!=="CR03")return!1}else if(t.state.id==="KLM01"){if(!a.length||a[0].state.id!=="KLM04"&&a[0].state.id!=="KLM05")return!1}else if(t.state.id==="KLM02"){if(!a.length||a[0].state.id!=="KLM03"&&a[0].state.id!=="KLM06")return!1}else if(t.state.id==="KLM03"){if(!a.length||a[0].state.id!=="KLM01"&&a[0].state.id!=="KLM05")return!1}else if(t.state.id==="KLM04"){if(!a.length||a[0].state.id!=="KLM02"&&a[0].state.id!=="KLM06")return!1}else if(t.state.id==="KLM05"){if(!a.length||a[0].state.id!=="KLM02"&&a[0].state.id!=="KLM04")return!1}else if(t.state.id==="KLM06"){if(!a.length||a[0].state.id!=="KLM01"&&a[0].state.id!=="KLM03")return!1}else if(t.state.id==="KLAB02"&&(!a.length||a[0].playerIndex===k.index))return!1;return!0},f=()=>{const k=!!t.state.cooldown,N=!!t.state.effects,F=n.keepers.length>t.index?n.keepers[t.index].id===t.state.id:!1,W=e.turn.player===n.user.uid,Y=x();return k||!N||!F||!W||!Y?[k,N,F,W,Y]:!1},p=k=>{const N=[];k[0]&&N.push("On Cooldown."),k[1]===!1&&N.push("This Keeper has no effects."),k[2]===!1&&N.push("That Keeper is not yours!"),k[3]===!1&&N.push("Please wait your turn.."),k[4]===!1&&N.push("Select the correct kind of target."),d(()=>[...N])},g=()=>{const k=n.keepers.length>e.rules.keeperLimit,N=e.turn.player===n.user.uid,F=t.state.type==="CREEPER",W=!!t.state.attachment,Y=n.keepers.length>t.index?n.keepers[t.index].id===t.state.id:!1;return!k||!N||F||W||!Y?[k,N,F,W,Y]:!1},T=k=>{const N=[];k[0]===!1&&N.push("Keeper limit not reached. no point in discarding."),k[1]===!1&&N.push("Please wait your turn.."),k[2]&&N.push("Cannot discard creeper in a conventional manner."),k[3]&&N.push("Cannot discard a keeper with a creeper attached."),k[4]===!1&&N.push("That Keeper is not yours!"),_(()=>[...N])},S=()=>{const k=(u==null?void 0:u.uid)===e.turn.player,N=e.players[t.playerIndex].user.uid===(u==null?void 0:u.uid),F=e.turn.duel.cooldown,W=e.rules.location==="WILDERNESS";return!k||N||F||!W?[k,N,F,W]:!1},O=(k,N)=>k.map((F,W)=>m.jsx(Yf,{message:F,clearErrors:N},`inspect_keeper_error__${W}`));return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"underlay",onClick:()=>{o(null)}}),m.jsxs("div",{className:"popup",children:[m.jsx(Xt,{cardState:t,position:"SELECT",player:e.players[t.playerIndex]}),m.jsxs("div",{className:`play_btn_group__card length_${e.rules.location==="WILDERNESS"?"3":"2"}`,children:[m.jsx("div",{className:"errors_container__play",children:h.length?O(h,C):null}),m.jsx("button",{className:`play_btn__card ${e.pending||f()?"disabled":""}`,onClick:()=>{if(e.pending)return;const k=f();if(k)return p(k);r(t.state.id,t.index)},children:"Use Effect"}),e.rules.location==="WILDERNESS"&&m.jsx("button",{className:`challenge_btn__card ${e.pending||S()?"disabled":""}`,onClick:()=>{e.pending||S()||s(e.players[t.playerIndex].user.uid,t)},children:"Challenge"}),m.jsx("div",{className:"errors_container__discard",children:c.length?O(c,v):null}),m.jsx("button",{className:`discard_btn__card ${e.pending||g()?"disabled":""}`,onClick:()=>{if(e.pending)return;const k=g();if(k)return T(k);i(t.index)},children:"Discard Card"})]})]})]})}const{getPlayer:Ho}=Vs;function Tx({turn:t,players:e,rollForDuel:n,endDuel:r}){const{user:s}=P.useContext(ft),[i,o]=P.useState(Ho(e,t.duel.player1.id)),[a,l]=P.useState(Ho(e,t.duel.player2.id)),u=()=>(s==null?void 0:s.uid)===t.duel.player1.id&&t.duel.player1.num===0?1:(s==null?void 0:s.uid)===t.duel.player2.id&&t.duel.player2.num===0?2:0;P.useEffect(()=>{!t.duel.player1.id||!t.duel.player2.id||(o(()=>Ho(e,t.duel.player1.id)),l(()=>Ho(e,t.duel.player2.id)))},[t]);const h=()=>t.duel.player1.num>t.duel.player2.num&&t.duel.player1.num!==0&&t.duel.player2.num!==0?1:t.duel.player2.num>=t.duel.player1.num&&t.duel.player2.num!==0&&t.duel.player1.num!==0?2:0;return m.jsx("div",{className:"popup",children:m.jsxs("div",{className:"duel_group",children:[m.jsxs("div",{className:"duel_group__left",children:[m.jsx("h2",{children:i.state.user.username}),m.jsx("h2",{children:t.duel.player1.num}),m.jsx("button",{className:`play_btn__card ${u()!==1?"disabled":""}`,onClick:()=>{u()===1&&n()},children:"Roll Dice"})]}),m.jsxs("div",{className:"duel_group__middle",children:[m.jsx("h1",{children:h()===0?"V/S":h()===1?`${i.state.user.username}`:`${a.state.user.username} Wins!`}),h()>0&&m.jsxs("div",{className:"duel_group__left",children:[m.jsx("hr",{className:"card_hr__thick full_width"}),m.jsx("button",{className:"challenge_btn__card",onClick:()=>{const d=h()===1?t.duel.player1.id:t.duel.player2.id;r(d)},children:"Continue"})]})]}),m.jsxs("div",{className:"duel_group__right",children:[m.jsx("h2",{children:a.state.user.username}),m.jsx("h2",{children:t.duel.player2.num}),m.jsx("button",{className:`play_btn__card flipped ${u()!==2?"disabled":""}`,onClick:()=>{u()===2&&n()},children:"Roll Dice"})]})]})})}function ju({type:t,pile:e,drawSpecificCard:n,playCard:r}){const s=o=>{n(o,t==="DISCARD")},i=()=>e.map((o,a)=>{if(!(t==="DISCARD"&&o.id==="A17"||t==="PURE"&&o.id==="A16"))return m.jsx(ll,{isSideWays:!1,cardState:{state:o,index:a},drawSpecificCard:s,playCard:r},`card_pile__${o.id}_${a}`)});return m.jsxs("div",{className:"popup",children:[m.jsxs("h2",{children:["Select One To ",r?"Play":"Draw"]}),m.jsx("div",{className:"card_picker",children:i()})]})}const{getCardById:Rm}=Vs;function Nx({history:t,players:e}){const n=P.useRef(null);P.useEffect(()=>{!n||!n.current||n.current.scrollTo(0,n.current.offsetHeight+t.played.length*100)});const r=()=>{if(t)return t.played.map((s,i)=>m.jsxs("div",{className:"history_play",children:[m.jsxs("div",{className:"history_inner_left",children:[m.jsx("h3",{children:s.player}),m.jsx(ll,{isSideWays:!1,cardState:{state:Rm(s.id),index:i}})]}),s.target&&s.target.length?m.jsx("div",{className:"history_targets",children:s.target.map((o,a)=>m.jsx(ll,{isSideWays:!1,playerNum:1,targets:[{id:o,index:0,playerIndex:0}],cardState:{state:Rm(o,e),index:0}},`play_history__target_${a}`))}):m.jsx("div",{style:{width:"150px",height:"75px"}})]},`play_history__${i}`))};return m.jsxs("div",{className:"popup",children:[m.jsx("h2",{children:"Play History"}),m.jsx("div",{ref:n,className:"card_picker history",children:r()})]})}const{loadGame:xx,getPlayer:We,getPlayerKeeper:$o,getCardById:me,seperateCreepersAndKeepers:Sm,connectGame:kx,chooseWhoGoesFirst:Lx,checkShouldDiscard:Uu,checkForCreepers:Px,checkPlayersForKeeper:Fu,checkIfWon:zo,endTurn:Ox,upload:Ye,uploadTable:Wu,shuffleDeck:Dx,drawPhase:bx,removeCard:en,turnReducer:Mx,deckReducer:jx,rulesReducer:Ux,goalReducer:Fx,playerReducer:Wx}=Vs,{uploadStats:Vo}=Co;function Kx({setWinGameStats:t}){const{startGame:e,checkGameInProgress:n,leaveRoom:r,destroyRoom:s,getUser:i}=vo,o=un(),{db:a,user:l,joinedGameID:u,setJoinedGameID:h,setUser:d}=P.useContext(ft),c={db:a,gameId:u},[_,C]=P.useState(xx(l)),[v,x]=P.useReducer(Ux,_.rules),[f,p]=P.useReducer(jx,_.deck),[g,T]=P.useReducer(Mx,_.turn),[S,O]=P.useReducer(Wx,_.players),[k,N]=P.useReducer(Fx,_.goal),[F,W]=P.useState(!0),[Y,Ae]=P.useState(!1),[Ue,it]=P.useState(!1),[Tt,tt]=P.useState({discard:!1,pure:!1,locations:!1}),[Ce,G]=P.useState(!1),[q,z]=P.useState(null),[fe,Te]=P.useState(null),[w,L]=P.useState([]),[D,M]=P.useState([]),[j,B]=P.useState([]),[V,he]=P.useState([]),[ne,te]=P.useState(We(_.players,(l==null?void 0:l.uid)??"").state),ue=()=>{it(()=>!Ue),setTimeout(()=>it(()=>!1),3e3)},Q=y=>{z(I=>I===null||y===null?y:I.state.name===y.state.name?null:y),fe&&Te(()=>null)},Le=y=>{Te(I=>I===null||y===null?y:I.state.name===y.state.name?null:y),q&&z(()=>null)},A=y=>{y!=="KEEPERS"&&B(()=>[]),y!=="PLAYERS"&&M(()=>[]),y!=="RULES"&&L(()=>[]),y!=="GOALS"&&he(()=>[])},E=y=>{L(I=>I.includes(y)?[]:[...I,y]),A("RULES")},R=y=>{B(I=>{for(const b of I)if(b.index===y.index&&b.playerIndex===y.playerIndex)return[];return[...I,y]}),A("KEEPERS")},we=y=>{M(I=>{for(const b of I)if(b.user.uid===y.user.uid)return[];return[...I,y]}),A("PLAYERS")},dv=y=>{he(I=>{for(const b of I)if(b.state.id===y.state.id)return[];return[...I,y]}),A("GOALS")};P.useEffect(()=>{C(y=>({...y,rules:v}))},[v]),P.useEffect(()=>{C(y=>({...y,deck:f}))},[f]),P.useEffect(()=>{if(_.isWon){let y={state:{},index:0},I=null;const b=zo(S,k[0],v.location),$=k.length>1?zo(S,k[1],v.location):null;b?y=We(S,b):$&&(y=We(S,$)),b?I=k[0]:$&&(I=k[1]),t(Z=>({...Z,winner:y.state??null,round:_.round,goal:I})),o("/gameover")}C(y=>(y.turn.player!==g.player&&z(()=>null),{...y,turn:g}))},[g]),P.useEffect(()=>{if(C(I=>({...I,players:S})),te(I=>({...I,...We(S,(l==null?void 0:l.uid)??"").state})),(l==null?void 0:l.uid)!==g.player)return;const y=We(S,(l==null?void 0:l.uid)??"");y.state.hand.length&&y.state.hand.forEach((I,b)=>{if(I.type==="CREEPER"&&!_.pending)return Be(I,b)}),g.temporary.hand.forEach((I,b)=>{I.type==="CREEPER"&&!_.pending&&Xf(I,b)})},[S]),P.useEffect(()=>{C(y=>({...y,goal:k}))},[k]),P.useEffect(()=>{_.counter&&_.counter!==!0&&_.counter.id==="CO03"&&tt(()=>({discard:!1,pure:!1,locations:!1}))},[_.counter]),P.useEffect(()=>{if(!l)return o("/");if(!F)return;hv();const y=I=>{I.preventDefault(),I.key==="Escape"&&(A(),Q(null),Le(null),G(()=>!1)),I.key==="Tab"&&G(()=>!Ce)};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[]);const fv=(y,I,b,$,Z,fn,On,Ys,Wv,Kv,qs,Gv)=>{y.discard||(y.discard=[]),y.pure||(y.pure=[]),qs.played||(qs.played=[]),qs.discarded||(qs.discarded=[]),I||(I=[]);for(const Dn of $)Dn.hand||(Dn.hand=[]),Dn.keepers||(Dn.keepers=[]);Z.temporary.hand||(Z.temporary.hand=[]),p({type:ae.INIT,payload:{init:{...y},pile:{...y.pure},upload:c}}),O({type:ee.INIT,payload:{init:[...$],playerId:$[0].user.uid,upload:c}}),T({type:Re.INIT,payload:{init:{...Z},upload:c}}),x({type:ge.INIT,payload:{init:{...b},amount:0,upload:c}}),N({type:$t.INIT,payload:{goals:[...I],upload:c}}),C(Dn=>({...Dn,round:fn,pending:On,counter:Ys,isWon:Wv,phases:Kv,history:qs,initRules:Gv})),te(Dn=>({...Dn,...We($,(l==null?void 0:l.uid)??"").state}))},hv=async()=>{if(!l)return o("/");if(await kx(u,a,fv),l.uid===u){if(await n(a,u))return;const y=Lx(S);p({type:ae.DECK_SHUFFLE__PURE,payload:{pile:[],upload:{...c}}}),T({type:Re.CHANGE_TURN,payload:{player:y,upload:{...c}}}),await e(a,u)}W(()=>!1)},pv=(y,I)=>{if(T({type:Re.DUEL_BEGIN,payload:{player:l==null?void 0:l.uid,victim:y,duelCard:I,upload:c}}),Ye("PHASE",a,{phaseState:{location:"wilderness",amount:_.phases.wilderness+1}},u),_.phases.wilderness===20){const b=["KLW01","KLW02","KLW03","KEW01","GW01","GW02","GW03","RL09","RL09","RL09"],$=Array.from(b,Z=>me(Z));p({type:ae.DECK_ADD__DISCARD_BOT,payload:{pile:[...$],upload:c}})}Le(null),A()},mv=()=>{const y=(l==null?void 0:l.uid)===g.duel.player1.id;T({type:y?Re.DUEL_ROLL__PLAYER_1:Re.DUEL_ROLL__PLAYER_2,payload:{upload:c}})},_v=y=>{if(y===g.duel.player1.id){if(!g.duel.card)return;O({type:ee.KEEPER_CARDS__ADD,payload:{playerId:y,cards:[g.duel.card.state],upload:c}});const I=en(S[g.duel.card.playerIndex].keepers,g.duel.card.index);O({type:ee.KEEPER_CARDS__REMOVE,payload:{playerId:S[g.duel.card.playerIndex].user.uid,cards:[...I],upload:c}})}T({type:Re.DUEL_END,payload:{upload:c}})},gv=()=>{const y=bx(_);if(!f.pure||f.pure.length<v.drawAmount){const b=Dx([...f.pure,...f.discard]);p({type:ae.DECK_REPLACE__DISCARD_TO_PURE,payload:{pile:[...b],upload:c}});return}const I=Px([...f.pure.slice(f.pure.length-y)]);if(p({type:ae.DECK_REMOVE__PURE_TOP,payload:{pile:[],amount:y,upload:c}}),O({type:ee.HAND_CARDS__ADD,payload:{playerId:(l==null?void 0:l.uid)??"",cards:I.length?[...I]:Array.from(f.pure.slice(f.pure.length-y)),upload:c}}),!I.length)T({type:Re.DRAWN_ADD,payload:{player:_.turn.player&&_.turn.player!==!0?_.turn.player:"a",amount:g.drawn+y,upload:c}});else{const b=Sm(f.pure.slice(f.pure.length-y)).keepers;p({type:ae.DECK_ADD__DISCARD_BOT,payload:{pile:[...b],upload:c}})}},Bl=(y,I,b)=>{const $=We(S,y);let Z=Array.from(f.pure.slice(f.pure.length-(I+b)));if(b>0){const fn=en(Z,Z.length-1);let On,Ys;b>1&&(On=en(fn,Z.length-2),b>2&&(Ys=en(On,Z.length-3))),Z=Ys||On||fn}p({type:ae.DECK_REMOVE__PURE_TOP,payload:{pile:[],amount:I,upload:c}}),O({type:ee.HAND_CARDS__ADD,payload:{playerId:$.state.user.uid??"",cards:Z,upload:c}})},qr=(y=1,I=0)=>{const{creepers:b,keepers:$}=Sm(f.pure.slice(f.pure.length-(y+I)));p({type:ae.DECK_REMOVE__PURE_TOP,payload:{pile:[],amount:y+I,upload:c}}),T({type:Re.TEMPORARY_HAND__BEGIN,payload:{cards:Array.from(f.pure.slice(f.pure.length-(y+I))),amount:y,upload:c}}),b.length&&p({type:ae.DECK_ADD__DISCARD_BOT,payload:{pile:[...$],upload:c}})},Hl=(y,I=!1,b=(l==null?void 0:l.uid)??"")=>{const $=I?f.discard[y]:f.pure[y];p({type:I?ae.DECK_REMOVE__DISCARD_SPECIFIC:ae.DECK_REMOVE__PURE_SPECIFIC,payload:{pile:[],cardIndex:y,upload:c}}),O({type:ee.HAND_CARDS__ADD,payload:{playerId:b,cards:[$],upload:c}}),I||p({type:ae.DECK_SHUFFLE__PURE,payload:{pile:[],upload:c}}),tt(Z=>({...Z,pure:!1,discard:!1}))},wo=(y,I=!0)=>{const b=en(ne.hand,y);I&&p({type:ae.DECK_ADD__DISCARD_BOT,payload:{pile:[ne.hand[y]],upload:c}}),O({type:ee.HAND_CARDS__REMOVE,payload:{playerId:(l==null?void 0:l.uid)??"",cards:[...b],upload:c}}),z(()=>null)},qf=(y,I=!0)=>{if(!g.temporary)return;const{hand:b}=g.temporary,$=en(b,y);I&&p({type:ae.DECK_ADD__DISCARD_BOT,payload:{pile:[b[y]],upload:c}}),T({type:Re.TEMPORARY_HAND_CARD__REMOVE,payload:{cards:[...$],upload:c}}),z(()=>null)},$l=(y,I,b=!0)=>{const $=We(S,I);b&&p({type:ae.DECK_ADD__DISCARD_BOT,payload:{pile:[$.state.hand[y]],upload:c}});const Z=en($.state.hand,y);O({type:ee.HAND_CARDS__REMOVE,payload:{playerId:I,cards:[...Z],upload:c}}),z(()=>null)},zl=(y,I=!0)=>{const b=en(ne.keepers,y);I&&p({type:ae.DECK_ADD__DISCARD_BOT,payload:{pile:[ne.keepers[y]],upload:c}}),O({type:ee.KEEPER_CARDS__REMOVE,payload:{playerId:(l==null?void 0:l.uid)??"",cards:[...b],upload:c}}),Te(()=>null)},dn=(y,I,b=!0)=>{const $=We(S,I),Z=en($.state.keepers,y);b&&p({type:ae.DECK_ADD__DISCARD_BOT,payload:{pile:[S[$.index].keepers[y]],upload:c}}),O({type:ee.KEEPER_CARDS__REMOVE,payload:{playerId:I,cards:[...Z],upload:c}})},yv=()=>{Ye("PENDING",a,{cardState:!1},u)},Ev=y=>!!($o(We(S,(l==null?void 0:l.uid)??"").state,"KL13").state&&y==="A16"),vv=y=>!!($o(We(S,(l==null?void 0:l.uid)??"").state,"KL14").state&&y==="A17"),Vl=y=>{switch(y.id){case"A04":case"AF01":return D.length?[{id:D[0].user.uid,index:0,playerIndex:0}]:[];case"A05":return w.length?[{id:w[0],index:0,playerIndex:0}]:[];case"A06":case"CO05":return Array.from(w,(I,b)=>({id:I,index:b,playerIndex:b}));case"A11":case"A15":case"AF04":case"AF06":case"CO04":case"CO06":return j.length?[{id:j[0].state.id,index:j[0].index,playerIndex:j[0].playerIndex}]:[];case"A12":return Array.from(j,I=>({id:I.state.id,index:I.index,playerIndex:I.playerIndex}));default:return[]}},Cv=(y,I,b)=>{const $=[..._.history.played,{id:y,target:I,player:b}];$.length>50&&$.shift(),Ye("HISTORY_PLAYED",a,{historyState:$},u)},Qf=y=>{if(!l)return;const I=l.cardCatalog[`${y.id}`]?l.cardCatalog[`${y.id}`]+1:1;d(b=>{if(b)return{...b,cardCatalog:Object.assign({},b==null?void 0:b.cardCatalog,{[`${y.id}`]:I})}}),Vo("CARD",a,{cardKey:y.id,cardNum:I},l==null?void 0:l.uid)},wv=()=>{Ye("PHASE",a,{phaseState:{location:"abyss",amount:_.phases.abyss+1}},u),_.phases.abyss===20&&p({type:ae.DECK_ADD__DISCARD_BOT,payload:{pile:Array.from(["KLAB01","KLAB02","KEAB01","KAB01","AAB01","AAB01","AAB01","GAB01","GAB03","GAB04"],y=>me(y)),upload:c}})},Rv=()=>{Ye("PHASE",a,{phaseState:{location:"asgarnia",amount:_.phases.asgarnia+1}},u),_.phases.asgarnia===20&&p({type:ae.DECK_ADD__DISCARD_BOT,payload:{pile:[me("KEA01")],upload:c}})},Sv=()=>{const y=We(S,(l==null?void 0:l.uid)??"");if(!y.state.keepers)return;const I=Array.from([1,2,3,4,5,6,7],b=>`KEA0${b}`);for(const b of I){const $=Fu(S,b);$.playerIndex===y.index&&$.keeper!==null&&(O({type:ee.HAND_CARDS__ADD,payload:{playerId:(l==null?void 0:l.uid)??"",cards:[me(`KEA0${Number(b[4])+1}`)],upload:c}}),zl($.index,!1))}},Be=(y,I)=>{if(!y)return;Qf(y);const b=Vl(y);if(g.player!==(l==null?void 0:l.uid))return Ye("COUNTER",a,{cardState:y},u),wo(I,Uu(y.type)),Yl(y,b);Ye("PENDING",a,{cardState:{...y,targets:b}},u),I>-1&&!Ev(y.id)&&!vv(y.id)&&wo(I,Uu(y.type)),g.player===(l==null?void 0:l.uid)&&y.type!=="CREEPER"&&I>-1&&T({type:Re.PLAYED_ADD,payload:{amount:g.played+1,upload:c}}),Q(null),Yl(y,b)},Xf=(y,I)=>{if(!y||!_.turn.temporary||(l==null?void 0:l.uid)!==g.player)return;Qf(y);const b=Vl(y);Ye("PENDING",a,{cardState:{...y,targets:Vl(y)}},u),qf(I,Uu(y.type)),g.player===(l==null?void 0:l.uid)&&T({type:Re.TEMPORARY_PLAY_CHANGE,payload:{amount:_.turn.temporary.play-1,upload:c}}),wv(),Yl(y,b)},Yl=(y,I)=>{setTimeout(()=>{if(!_.counter)switch(yv(),Cv(y.id,I.length?Array.from(I,b=>b.id):[],(l==null?void 0:l.username)??""),y.type){case"KEEPER":return Ro(y);case"RULE":return Nv(y);case"GOAL":return Rv(),_.phases.asgarnia>19&&Sv(),Tv(y);case"ACTION":return kv(y);case"COUNTER":return Av(y);case"CREEPER":return Iv(y)}},3e3)},Jf=y=>{const I=We(S,(l==null?void 0:l.uid)??""),b=en([...I.state.keepers],y.index);O({type:ee.KEEPER_CARDS__REMOVE,payload:{playerId:(l==null?void 0:l.uid)??"",cards:[...b],upload:c}}),O({type:ee.KEEPER_CARDS__ADD,payload:{playerId:(l==null?void 0:l.uid)??"",cards:[y.state],upload:c}})},Iv=y=>{const I=We(S,(l==null?void 0:l.uid)??"");if(!I.state.keepers)return Ro(y);if(y.subtype==="LIVING_CREEPER"){let b;if(I.state.keepers.forEach(($,Z)=>{$.subtype==="LIVING"&&!$.attachment&&(b={state:{...$},index:Z})}),!b)return Ro(y);b.state.attachment=y,Jf(b)}else if(y.subtype==="EQUIPMENT_CREEPER"){let b;if(I.state.keepers.forEach(($,Z)=>{$.subtype==="EQUIPMENT"&&!$.attachment&&(b={state:{...$},index:Z})}),!b)return Ro(y);b.state.attachment=y,Jf(b)}},Av=y=>{const I=(l==null?void 0:l.uid)===g.player;if(y.effects.includes("TELESTOP_OR_LOCATION_MISTHALIN"))if(I){if(v.teleblock)return;x({type:ge.RULE_CHANGE__LOCATION,payload:{location:"MISTHALIN",upload:c}})}else Ye("RULES",a,{ruleState:{...v,location:v.location}},u);else if(y.effects.includes("GOALSTOP_OR_GOALS_NONE"))I?N({type:$t.GOAL_RESET,payload:{goals:[],upload:c}}):Ye("GOAL",a,{goalState:k},u);else if(y.effects.includes("ACTIONSTOP_OR_DISCARD_1_ALL"))I?S.forEach(b=>{const $=Math.floor(Math.random()*b.hand.length);$l($,b.user.uid)}):(Wu(a,_,u),Ye("PENDING",a,{cardState:!1},u),p({type:ae.DECK_ADD__DISCARD_BOT,payload:{pile:[y],upload:c}}));else if(y.effects.includes("KEEPER_STEALSTOP_OR_KEEPER_STEAL"))I?(dn(j[0].index,S[j[0].playerIndex].user.uid,!1),O({type:ee.KEEPER_CARDS__ADD,payload:{playerId:l.uid,cards:[j[0].state],upload:c}})):(Wu(a,_,u),O({type:ee.KEEPER_CARDS__ADD,payload:{playerId:(l==null?void 0:l.uid)??"",cards:_.pending&&_.pending!==!0&&_.pending.targets?[me(_.pending.targets[0].id)]:[],upload:c}}),Ye("PENDING",a,{cardState:!1},u),p({type:ae.DECK_ADD__DISCARD_BOT,payload:{pile:[y],upload:c}}));else if(y.effects.includes("RULESTOP_OR_RULE_RESET_3"))if(I)for(let b=0;b<=3;b++)x({type:ge.RULE_RESET__CHOICE,payload:{ruleKey:w[b],initRules:_.initRules,upload:c}});else Ye("RULES",a,{ruleState:v},u);else if(y.effects.includes("KEEPER_DISCARD_REFLECT_OR_KEEPER_DISCARD"))if(I)dn(j[0].index,S[j[0].playerIndex].user.uid);else{Wu(a,_,u),Ye("PENDING",a,{cardState:!1},u);const b=We(S,g.player!==!0&&g.player?g.player:""),$=Math.floor(Math.random()*b.state.keepers.length);dn($,b.state.user.uid),p({type:ae.DECK_ADD__DISCARD_BOT,payload:{pile:[y],upload:c}})}Ye("COUNTER",a,{cardState:!1},u),A()},Ro=y=>{O({type:ee.KEEPER_CARDS__ADD,payload:{playerId:(l==null?void 0:l.uid)??"",cards:[y],upload:c}})},Tv=y=>{var b,$;const I=[];I.push(y),(k.length&&v.location!=="ASGARNIA"||v.location==="ASGARNIA"&&k.length>1)&&p({type:ae.DECK_ADD__DISCARD_BOT,payload:{pile:[k[((b=V[0])==null?void 0:b.index)??0]],upload:c}}),v.location==="ASGARNIA"?N({type:k.length<2?$t.GOAL_ADD__MULTI:$t.GOAL_REPLACE__MULTI,payload:{replaceIndex:(($=V[0])==null?void 0:$.index)??0,goals:I,upload:c}}):N({type:$t.GOAL_REPLACE__SINGLE,payload:{goals:I,upload:c}}),A()},Nv=y=>{if(y.effects.includes("RULE_PLAY")){const I=y.effects[1];x({type:ge.RULE_CHANGE__PLAY,payload:{amount:Number(I),upload:c}})}else if(y.effects.includes("RULE_DRAW")){const I=y.effects[1];x({type:ge.RULE_CHANGE__DRAW,payload:{amount:Number(I),upload:c}})}else if(y.effects.includes("RULE_HAND_LIMIT")){const I=y.effects[1];x({type:ge.RULE_CHANGE__HAND_LIMIT,payload:{amount:Number(I),upload:c}})}else if(y.effects.includes("RULE_KEEPER_LIMIT")){const I=y.effects[1];x({type:ge.RULE_CHANGE__KEEPER_LIMIT,payload:{amount:Number(I),upload:c}})}else if(y.effects.includes("LOCATION")){if(v.teleblock)return;const I=y.effects[1];x({type:ge.RULE_CHANGE__LOCATION,payload:{location:I,upload:c}}),I==="ENTRANA"&&xv()}else y.effects.includes("TELEBLOCK")&&x({type:ge.RULE_CHANGE__TELEBLOCK,payload:{teleblock:!0,upload:c}});A()},xv=()=>{S.forEach(y=>{const I=[],b=[];y.keepers.forEach($=>{$.subtype==="EQUIPMENT"?b.push($):I.push($)}),O({type:ee.KEEPER_CARDS__REMOVE,payload:{playerId:y.user.uid,cards:[...I],upload:c}}),p({type:ae.DECK_ADD__DISCARD_BOT,payload:{pile:[...b],upload:c}})})},kv=y=>{if(y.effects.includes("RULES_RESET"))x({type:ge.RULE_RESET__ALL,payload:{initRules:_.initRules,upload:c}});else if(y.effects.includes("TELEPORT"))Lv();else if(y.effects.includes("TELEPORT_SPECIFIC"))tt(I=>({...I,locations:!0}));else if(y.effects.includes("RULE_RESET_CHOOSE"))for(let I=0;I<=(y.effects.length>1?2:0);I++)x({type:ge.RULE_RESET__CHOICE,payload:{ruleKey:w[I],initRules:_.initRules,upload:c}});else if(y.effects.includes("TRADE_HANDS"))O({type:ee.TRADE_HANDS,payload:{playerId:(l==null?void 0:l.uid)??"",targetPlayerId:D[0].user.uid,upload:c}});else if(y.effects.includes("KEEPERS_TO_HAND"))S.forEach(I=>{const b=[],$=[];I.keepers.length&&(I.keepers.forEach(Z=>{Z.type==="CREEPER"||Z.attachment?$.push(Z):b.push(Z)}),O({type:ee.HAND_CARDS__ADD,payload:{playerId:I.user.uid,cards:[...b],upload:c}}),O({type:ee.KEEPER_CARDS__REMOVE,payload:{playerId:I.user.uid,cards:[...$],upload:c}}))});else if(y.effects.includes("KEEPER_EXCHANGE_CHOOSE"))O({type:ee.KEEPER_CARDS__EXCHANGE,payload:{playerId:"",keepersToExchange:[...j.slice(0,2)],cards:[j[0].state,j[1].state],upload:c}});else if(y.effects.includes("SWAP")){const I=We(S,(l==null?void 0:l.uid)??""),b={...$o(I.state,"KLAB02"),playerIndex:I.index};if(!b.state)return;O({type:ee.KEEPER_CARDS__EXCHANGE,payload:{playerId:"",keepersToExchange:[b,j[0]],cards:[b.state,j[0].state],upload:c}})}else if(y.effects.includes("KEEPER_STEAL_CHOOSE"))dn(j[0].index,S[j[0].playerIndex].user.uid,!1),O({type:ee.KEEPER_CARDS__ADD,payload:{playerId:(l==null?void 0:l.uid)??"",cards:[j[0].state],upload:c}});else if(y.effects.includes("DRAW_2_PLAY_2"))qr(2);else if(y.effects.includes("DRAW_5_PLAY_3"))qr(3,2);else if(y.effects.includes("DRAW_3_PLAY_2"))qr(2,1);else if(y.effects.includes("DRAW_8_PLAY_5"))qr(5,3);else if(y.effects.includes("DISCARD_1"))S.forEach(I=>{const b=Math.floor(Math.random()*I.hand.length);$l(b,I.user.uid)});else if(y.effects.includes("DRAW_1"))S.forEach((I,b)=>{Bl(I.user.uid,1,b)});else if(y.effects.includes("DESTROY_1"))dn(j[0].index,S[j[0].playerIndex].user.uid);else if(y.effects.includes("STEAL_RUNE_CROSSBOW")){const I=Fu(S,"KE04");if(!I.keeper)return;dn(I.index,S[I.playerIndex].user.uid,!1),O({type:ee.KEEPER_CARDS__ADD,payload:{playerId:(l==null?void 0:l.uid)??"",cards:[I.keeper],upload:c}})}else if(y.effects.includes("SUMMON_GHOST"))O({type:ee.KEEPER_CARDS__ADD,payload:{playerId:(l==null?void 0:l.uid)??"",cards:[me("KL02")],upload:c}});else if(y.effects.includes("DRAW_SPECIFIC_PURE"))tt(I=>({...I,pure:!0}));else if(y.effects.includes("DRAW_SPECIFIC_DISCARD"))tt(I=>({...I,discard:!0}));else if(y.effects.includes("RULE_RANDOM"))Zf();else if(y.effects.includes("STEAL_CARD_RANDOM")){if(!D.length||!D[0].hand)return;const I=Math.floor(Math.random()*D[0].hand.length),b=D[0].hand[I];O({type:ee.HAND_CARDS__ADD,payload:{playerId:(l==null?void 0:l.uid)??"",cards:[b],upload:c}}),$l(I,D[0].user.uid,!1)}else if(y.effects.includes("SELF_DESTRUCT")){const I=We(S,(l==null?void 0:l.uid)??""),b=$o(I.state,y.id);zl(b.index,!0)}else y.effects.includes("TO_HAND_1")&&(O({type:ee.HAND_CARDS__ADD,payload:{playerId:S[j[0].playerIndex].user.uid,cards:[j[0].state],upload:c}}),dn(j[0].index,S[j[0].playerIndex].user.uid,!1));A()},Lv=()=>{v.teleblock||x({type:ge.RULE_CHANGE__LOCATION_RANDOM,payload:{location:v.location,upload:c}})},Zf=()=>{const y=[ge.RULE_CHANGE__DRAW,ge.RULE_CHANGE__PLAY,ge.RULE_CHANGE__HAND_LIMIT,ge.RULE_CHANGE__KEEPER_LIMIT,ge.RULE_CHANGE__TELEBLOCK],I=Math.floor(Math.random()*y.length),b=[1,2,3,4,5].filter(Z=>{if(I===0&&Z!==v.drawAmount||I===1&&Z!==v.playAmount||I===2&&Z!==v.handLimit||I===3&&Z!==v.keeperLimit)return Z;if(I===4)return v.teleblock?1:5}),$=Math.floor(Math.random()*b.length);x({type:y[I],payload:{amount:b[$],teleblock:!v.teleblock,upload:c}})},Pv=(y,I)=>{const b=We(S,(l==null?void 0:l.uid)??"");if(y==="K01")Bl(b.state.user.uid,1,0);else if(y==="CR01")Be(me("RL07"),-1);else if(y==="KE06")Be(me("RL08"),-1);else if(y==="KR08")Be(me("A01"),-1);else if(y==="KR02")qr(1,0);else if(y==="KE05")Be(me("AF01"),-1);else if(y==="KL07"||y==="KR07"||y==="KE04"||y==="K02"||y==="KE02"||y==="KL06"||y==="KLW01")Be(me("A15"),-1);else if(y==="KL10")Be(me("AF02"),-1);else if(y==="KLM01"||y==="KLM02"||y==="KLM03"||y==="KLM04"||y==="KLM05"||y==="KLM06")Be(me("A11"),-1);else if(y==="KE01")Be(me("A14"),-1);else if(y==="KR09")Be(me("AF03"),-1);else if(y==="KEA08")O({type:ee.HAND_CARDS__ADD,payload:{playerId:(l==null?void 0:l.uid)??"",cards:[me("GA01")],upload:c}});else if(y==="KLAB01")Be(me("AAB01"),-1);else if(y==="KLAB02")Be(me("AF04"),-1);else if(y==="KAB01"){const $=["KEAB01","KEAB02","A07","A08","A09","AAB01","GAB02","RB16","RL02","AF05"],Z=Math.floor(Math.random()*$.length);Be(me($[Z]),-1)}else y==="KLW02"||y==="KLW03"?Be(me("AF06"),-1):y==="KEW01"&&Be(me("RL09"),-1);A(),Le(null),y!=="KLAB02"&&O({type:ee.KEEPER_COOLDOWN__SET,payload:{playerId:(l==null?void 0:l.uid)??"",cooldown:!0,cardIndex:I,upload:c}})},Ov=()=>{const y=Fu(S,"KL12");if(!y.keeper)return;const I=Math.floor(Math.random()*S.length);I!==y.playerIndex&&(dn(y.index,S[y.playerIndex].user.uid,!1),O({type:ee.KEEPER_CARDS__ADD,payload:{playerId:S[I].user.uid,cards:[y.keeper],upload:c}}))},ql=()=>(l==null?void 0:l.uid)===g.player,Dv=()=>{Math.floor(Math.random()*101)<=20&&O({type:ee.KEEPER_CARDS__ADD,payload:{playerId:(l==null?void 0:l.uid)??"",cards:[me("KL02")],upload:c}})},bv=()=>{S.forEach(y=>{y.keepers&&y.keepers.forEach((I,b)=>{var Z;if(I.id!=="KL02")return;if(Math.floor(Math.random()*101)<=76){const fn=Math.ceil(Math.random()*6);dn(b,y.user.uid,!1),O({type:ee.KEEPER_CARDS__ADD,payload:{playerId:y.user.uid,cards:[me(`KLM0${fn}`)],upload:c}});const On=y.user.cardCatalog[`KLM0${fn}`]?y.user.cardCatalog[`KLM0${fn}`]+1:1;if(Vo("CARD",a,{cardKey:`KLM0${fn}`,cardNum:On},(Z=y.user)==null?void 0:Z.uid),Ye("PHASE",a,{phaseState:{location:"morytania",amount:_.phases.morytania+1}},u),_.phases.morytania>0)return;p({type:ae.DECK_ADD__DISCARD_BOT,payload:{pile:[me("GM01"),me("GM02"),me("GM03")],upload:c}})}})})},Mv=()=>{k.length&&jv(),Ov(),Ae(()=>!1);const y=We(S,(l==null?void 0:l.uid)??"");switch(v.location){case"MISTHALIN":Bl((l==null?void 0:l.uid)??"",1,0);break;case"CRANDOR":wo(Math.floor(Math.random()*y.state.hand.length),!0);break;case"MORYTANIA":Dv(),bv();break;case"ZANARIS":Zf();break}g.duel.cooldown&&T({type:Re.DUEL_COOLDOWN,payload:{upload:c}}),y.state.keepers.forEach((b,$)=>{b.cooldown&&O({type:ee.KEEPER_COOLDOWN__SET,payload:{playerId:(l==null?void 0:l.uid)??"",cooldown:!1,cardIndex:$,upload:c}})}),Ox(a,_.players,_.turn,T,u)&&(C(b=>({...b,round:b.round++})),Ye("ROUND",a,{roundState:_.round+1},u))},jv=()=>{const y=zo(S,k[0],v.location);let I;v.location==="ASGARNIA"&&(I=zo(S,k[1],v.location)),(y||I)&&Ye("WIN",a,{},u)},Uv=()=>{if(l){if(o("/lobby"),!i(Array.from([...S],y=>y.user),l.uid).error){const y=(l==null?void 0:l.stats.totalRounds)+_.round,I=(l==null?void 0:l.stats.played)+1;Vo("ROUNDS",a,{amount:y},l.uid),Vo("PLAYED",a,{amount:I},l.uid),d(b=>{if(b)return{...b,stats:Object.assign({},b.stats,{played:I,totalRounds:y})}})}l.uid===u?s(a,u,h):r(a,u,l,h)}},Fv=()=>_.players.map((y,I)=>m.jsx(Hr,{isSideBox:!0,targets:_.pending&&_.pending!==!0&&_.pending.targets?Array.from(_.pending.targets,b=>b.id):[],player:y,isTurn:_.turn.player===y.user.uid,selectedPlayerGroup:D,selectPlayerGroup:we},`player_bar__${I}`));return m.jsxs("div",{className:"game_container",children:[`${cv.domain}/game`===window.location.href&&m.jsxs("div",{children:[m.jsx("button",{className:"play_btn__card",onClick:()=>{Be(me("A16"),-1)},children:"Scry"}),m.jsx("button",{className:"discard_btn__card",onClick:()=>{Be(me("A17"),-1)},children:"History"})]}),m.jsx(Sx,{table:_,inspectKeeper:Le,selectKeeperGroup:R,selectedKeeperGroup:j,selectGoalGroup:dv,selectedGoalGroup:V}),Ue&&m.jsx(to,{pageType:"GAME",leaveGame:Uv}),m.jsx(Hr,{toggleShowHeader:ue}),m.jsx("div",{className:"user_bars__container",children:Fv()}),m.jsx(Cx,{rules:_.rules,turn:g,targetedRule:_.pending&&_.pending!==!0&&_.pending.targets?Array.from(_.pending.targets,y=>y.id):[],selectRuleGroup:E,selectedRuleGroup:w,wormhole:qr,isTurn:ql(),cooldown:Y,setCooldown:Ae}),g.duel.player1.id&&g.duel.player2.id&&m.jsx(Tx,{turn:g,players:S,rollForDuel:mv,endDuel:_v}),(l==null?void 0:l.uid)===_.turn.player&&_.turn.drawn<_.rules.drawAmount&&m.jsx(Ex,{drawCards:gv}),q&&m.jsx(vx,{cardState:q,table:_,localPlayer:ne,playCard:g.temporary.hand.length?Xf:Be,discardCard:g.temporary.hand.length?qf:wo,fromWormhole:!!g.temporary.hand.length,selectedKeeperGroup:j,selectedPlayerGroup:D,selectedRuleGroup:w}),fe&&m.jsx(Ax,{cardState:fe,table:_,localPlayer:ne,playEffect:Pv,startDuel:pv,discardKeeper:zl,inspectKeeper:Le,selectedKeeperGroup:j,selectedPlayerGroup:D}),ne.hand.length&&!g.temporary.hand.length||!ql()?m.jsx(rd,{selectCard:Q,hand:ne.hand}):null,g.temporary.hand.length>0&&ql()&&m.jsx(rd,{selectCard:Q,hand:g.temporary.hand}),m.jsx(wx,{table:_,localPlayer:ne,showCardPiles:Tt,endTurn:Mv}),_.pending!==!1&&_.pending!==!0&&m.jsx(Xt,{position:"PENDING",cardState:{state:_.pending,index:0},player:We(S,g.player&&g.player!==!0?g.player:"").state}),_.counter!==!1&&_.counter!==!0&&m.jsx(Xt,{position:"PENDING",cardState:{state:_.counter,index:0}}),_.history.played&&_.history.played.length&&m.jsx("div",{className:"last_played",onClick:()=>G(()=>!Ce),children:m.jsx(Xt,{position:"PREVIOUS_PENDING",cardState:{state:me(_.history.played[_.history.played.length-1].id),index:0}})}),Tt.pure&&m.jsx(ju,{type:"PURE",pile:f.pure,drawSpecificCard:Hl}),Tt.discard&&m.jsx(ju,{type:"DISCARD",pile:f.discard,drawSpecificCard:Hl}),Tt.locations&&m.jsx(ju,{type:"LOCATIONS",pile:Array.from(Pr.filter(y=>y.subtype==="LOCATION")),drawSpecificCard:Hl,playCard:y=>{Be(y,-1),tt(I=>({...I,locations:!1}))}}),Ce&&m.jsx(Nx,{players:S,history:_.history})]})}function Gx(){const{setUser:t}=P.useContext(ft),e=un(),n=P.useRef(null),r=P.useRef(null);return m.jsx("div",{className:"main_menu",children:m.jsxs("form",{className:"menu",method:"",children:[m.jsxs("div",{className:"form_container__inner",children:[m.jsx("label",{htmlFor:"username",children:"Username"}),m.jsx("input",{id:"username",ref:n,className:"form_input",type:"text",name:"username",placeholder:"Enter Username.."})]}),m.jsxs("div",{className:"form_container__inner",children:[m.jsx("label",{htmlFor:"password",children:"Password"}),m.jsx("input",{id:"password",ref:r,className:"form_input",type:"password",name:"password",placeholder:"Enter Password.."})]}),m.jsx("hr",{}),m.jsxs("div",{className:"form_container__inner",children:[m.jsx("button",{className:"menu_link",type:"button",onClick:()=>{var a;const s=n.current,i=r.current;if(!s||!i)return;Co.testUserSignIn(n==null?void 0:n.current.value,(a=r.current)==null?void 0:a.value,t)&&e("/lobby")},children:"Sign In"}),m.jsx("p",{style:{alignSelf:"center"},children:"Or"}),m.jsx("button",{className:"menu_link",type:"button",children:"Create Account"})]})]})})}const{destroyRoom:Im,leaveRoom:Bx}=vo,{uploadStats:Yo}=Co;function Hx({winGameStats:t}){const{winner:e,round:n,goal:r}=t,{joinedGameID:s,setJoinedGameID:i,db:o,user:a,setUser:l}=P.useContext(ft),u=un(),[h,d]=P.useState(!1);mR(()=>{_(),(a==null?void 0:a.uid)===s&&Im(o,s,i)}),P.useEffect(()=>{if(!a||!e||!n||!r)return u("/account");c()},[]);const c=async()=>{a&&(_(),(a==null?void 0:a.uid)===s?await Im(o,s,i):Bx(o,s,a,i),d(()=>!0))},_=()=>{if(!a||!r)return;if((e==null?void 0:e.user.uid)===a.uid){const x=a!=null&&a.goalWins[`${r.id}`]?(a==null?void 0:a.goalWins[`${r==null?void 0:r.id}`])+1:1,f=a.stats.wins+1;Yo("GOALWON",o,{cardKey:r==null?void 0:r.id,cardNum:x},a.uid),Yo("WINS",o,{amount:f},a.uid),l(p=>{if(p)return{...p,cardCatalog:Object.assign({},p.cardCatalog,{[`${r.id}`]:x}),goalWins:Object.assign({},p.goalWins,{[`${r.id}`]:x}),stats:Object.assign({},p.stats,{wins:f})}})}const C=a.stats.totalRounds+n,v=a.stats.played+1;Yo("ROUNDS",o,{amount:C},a.uid),Yo("PLAYED",o,{amount:v},a.uid),l(x=>{if(x)return{...x,stats:Object.assign({},x.stats,{played:v,totalRounds:C})}})};return m.jsxs(m.Fragment,{children:[m.jsx(Hr,{}),m.jsx("div",{className:"popup",children:m.jsxs("div",{className:"duel_group",children:[m.jsx(Xt,{cardState:{state:r??{},index:0},position:"SELECT"}),m.jsxs("div",{className:"duel_group__middle flex_j",children:[m.jsxs("div",{children:[m.jsxs("h1",{children:[e==null?void 0:e.user.username," Wins!"]}),m.jsxs("h2",{children:["in ",n," rounds"]})]}),m.jsx("button",{className:`play_btn__card flipped ${h?"":"disabled"}`,onClick:()=>{h&&u("/account")},children:"Continue"})]})]})}),m.jsx(rd,{hand:(e==null?void 0:e.keepers)??[],selectCard:()=>null})]})}const $x=["living_subtype","rune_subtype","equipment_subtype","misthalin","asgarnia","morytania","abyss","wilderness","entrana","zanaris","ghost"],{changeName:zx,changeIcon:Vx,changeGoalSetting:Yx}=Co;function qx(){const{user:t,db:e,setUser:n}=P.useContext(ft),r=un(),s=P.useRef(null),[i,o]=P.useState(!1);P.useEffect(()=>{if(!t)return r("/")},[]);const a=(_,C)=>{if(!t)return;const v=_/C;return isNaN(v)?0:v.toFixed(2)},l=()=>{if(!t)return;const _=t.stats.wins/t.stats.played;return isNaN(_)?0:_.toFixed(2)},u=()=>{if(!t)return;const _=[];for(const C in t.cardCatalog)_.push(t.cardCatalog[C]);return _.reduce((C,v)=>C+v,0)},h=()=>{if(!t)return;let _=0;for(const C in t==null?void 0:t.cardCatalog)(t==null?void 0:t.cardCatalog[C])>0&&_++;return _},d=()=>{const{cardCatalog:_,goalWins:C}={cardCatalog:{RL04:0,RL02:0,RL03:0,RL05:0,RL06:0,RL08:0},goalWins:{G30:0}};return{cardCatalog:_,goalWins:C}},c=()=>$x.map((_,C)=>{let v=!1;const{goalWins:x,cardCatalog:f}=t??d();return _==="ghost"&&!x.G30&&(v=!0),_==="morytania"&&f.RL04<50&&(v=!0),_==="abyss"&&f.RL02<50&&(v=!0),_==="asgarnia"&&f.RL03<50&&(v=!0),_==="wilderness"&&f.RL05<50&&(v=!0),_==="entrana"&&f.RL06<50&&(v=!0),_==="zanaris"&&f.RL08<50&&(v=!0),m.jsx("button",{className:`icon_pick ${v?"locked":""}`,onClick:async()=>{!t||v||(await Vx(e,_,t==null?void 0:t.uid),n(p=>{if(p)return{...p,icon:_}}))},children:m.jsx("div",{className:`${_} ready_mark icon`})},`icon__${C}`)});return m.jsxs("div",{className:"main_menu",style:{flexDirection:"row",gap:"5rem"},children:[m.jsx(to,{pageType:"ACCOUNT"}),m.jsx(Hr,{}),m.jsx("div",{className:"menu",children:m.jsxs("div",{children:[m.jsxs("h2",{style:{textAlign:"center"},children:[t==null?void 0:t.username,m.jsx("span",{className:`icon ${t==null?void 0:t.icon} ready_mark`})]}),m.jsx("hr",{className:"card_hr__thick"}),m.jsxs("ul",{className:"stat_list",children:[m.jsxs("div",{className:"stat_list",children:[m.jsxs("div",{className:"li_header stat_list",children:[m.jsx("li",{children:"Games"}),m.jsx("hr",{className:"card_hr__thin"})]}),m.jsxs("li",{children:["Won: ",m.jsx("span",{children:t==null?void 0:t.stats.wins})]}),m.jsxs("li",{children:["Played: ",m.jsx("span",{children:t==null?void 0:t.stats.played})]}),m.jsxs("li",{children:["Win Ratio: ",m.jsx("span",{children:l()})]})]}),m.jsxs("div",{className:"stat_list",children:[m.jsxs("div",{className:"stat_list li_header",children:[m.jsx("li",{children:"Rounds"}),m.jsx("hr",{className:"card_hr__thin"})]}),m.jsxs("li",{children:["Average: ",m.jsx("span",{children:a((t==null?void 0:t.stats.totalRounds)??0,(t==null?void 0:t.stats.played)??0)})]}),m.jsxs("li",{children:["Total: ",m.jsx("span",{children:t==null?void 0:t.stats.totalRounds})]})]}),m.jsxs("div",{className:"stat_list",children:[m.jsxs("div",{className:"stat_list li_header",children:[m.jsx("li",{children:"Cards Played"}),m.jsx("hr",{className:"card_hr__thin"})]}),m.jsxs("li",{children:["Unique: ",m.jsx("span",{children:h()})]}),m.jsxs("li",{children:["Average: ",m.jsx("span",{children:a(u()??0,(t==null?void 0:t.stats.played)??0)})]}),m.jsxs("li",{children:["Total: ",m.jsx("span",{children:u()})]})]})]})]})}),m.jsxs("div",{className:"menu account_options",children:[m.jsxs("div",{children:[m.jsx("h2",{style:{textAlign:"center",marginBottom:"1rem"},children:"Choose Icon"}),m.jsx("div",{className:"icon_picker",children:c()})]}),m.jsxs("div",{className:"username_form",children:[i&&m.jsx("input",{ref:s,style:{padding:"0.25rem"},className:"form_input",type:"text",maxLength:16,placeholder:"Username.."}),m.jsx("button",{className:"menu_link",onClick:()=>{var _;if(!i)return o(()=>!0);!s.current||!t||s.current.value.length<3||(zx(e,(_=s.current)==null?void 0:_.value,t==null?void 0:t.uid),o(()=>!1),n(C=>{var v;if(C)return{...C,username:((v=s.current)==null?void 0:v.value)??"Anon"}}))},children:"Change Name"}),m.jsx("button",{className:`discard_btn__card ${t!=null&&t.goalImages?"enabled":""}`,onClick:async()=>{t&&(await Yx(e,!(t!=null&&t.goalImages),(t==null?void 0:t.uid)??""),n(_=>_&&{..._,goalImages:!t.goalImages}))},children:"Goal Image Mode"})]})]})]})}function Qx({filterByType:t,filterByWin:e,filter:n,playOrWon:r,completionPercentage:s}){return m.jsx("div",{className:"sidebar_container",children:m.jsxs("ul",{children:[m.jsxs("li",{className:`maintype_li ${n?"":"selected"}`,onClick:()=>t(""),children:[s,"% Completion"]}),m.jsxs("section",{className:"keeper_section",children:[m.jsx("li",{className:`maintype_li ${n==="KEEPER"?"selected":""}`,onClick:()=>t("KEEPER"),children:"Keepers"}),m.jsx("li",{className:`subtype_li ${n==="LIVING"?"selected":""}`,onClick:()=>t("LIVING"),children:"- Living"}),m.jsx("li",{className:`subtype_li ${n==="RUNE"?"selected":""}`,onClick:()=>t("RUNE"),children:"- Rune"}),m.jsx("li",{className:`subtype_li ${n==="EQUIPMENT"?"selected":""}`,onClick:()=>t("EQUIPMENT"),children:"- Equipment"})]}),m.jsxs("section",{className:"goal_section",children:[m.jsx("li",{className:`maintype_li ${n==="GOAL"?"selected":""}`,onClick:()=>t("GOAL"),children:"Goals"}),m.jsx("li",{className:`subtype_li ${n==="GOAL"&&r==="PLAY"?"selected":""}`,onClick:()=>e(!1),children:"- Played"}),m.jsx("li",{className:`subtype_li ${n==="GOAL"&&r==="WON"?"selected":""}`,onClick:()=>e(!0),children:"- Won"})]}),m.jsxs("section",{className:"rule_section",children:[m.jsx("li",{className:`maintype_li ${n==="RULE"?"selected":""}`,onClick:()=>t("RULE"),children:"Rules"}),m.jsx("li",{className:`subtype_li ${n==="LOCATION"?"selected":""}`,onClick:()=>t("LOCATION"),children:"- Location"}),m.jsx("li",{className:`subtype_li ${n==="BASIC"?"selected":""}`,onClick:()=>t("BASIC"),children:"- Basic"})]}),m.jsx("section",{className:"action_section",children:m.jsx("li",{className:`maintype_li ${n==="ACTION"?"selected":""}`,onClick:()=>t("ACTION"),children:"Actions"})}),m.jsx("section",{className:"counter_section",children:m.jsx("li",{className:`maintype_li ${n==="COUNTER"?"selected":""}`,onClick:()=>t("COUNTER"),children:"Counters"})}),m.jsx("section",{className:"creeper_section",children:m.jsx("li",{className:`maintype_li ${n==="CREEPER"?"selected":""}`,onClick:()=>t("CREEPER"),children:"Creepers"})})]})})}function Xx({isLocked:t}){return m.jsx("div",{className:`card_back card ${t?"card_fade":""}`,children:m.jsx("p",{className:"card_back__title",children:"Runeflux"})})}function Jx(){const{user:t}=P.useContext(ft),e=un(),[n,r]=P.useState(""),[s,i]=P.useState("PLAY");P.useEffect(()=>{if(!t)return e("/")},[]);const o=c=>{i(()=>"PLAY"),r(()=>c)},a=(c=!1)=>{c&&r(()=>"GOAL"),i(()=>c?"WON":"PLAY")},l=()=>{if(!t)return 0;let c=0;for(const _ in t==null?void 0:t.cardCatalog)(t==null?void 0:t.cardCatalog[_])>0&&c++;return c?Math.round(c/Pr.length*100):0},u=c=>{if(t){if((t==null?void 0:t.cardCatalog[`${c.id}`])>499)return"golden_highlight";if((t==null?void 0:t.cardCatalog[`${c.id}`])>249)return"silver";if((t==null?void 0:t.cardCatalog[`${c.id}`])>49)return"brown";if((t==null?void 0:t.cardCatalog[`${c.id}`])>0)return"black-tooltip"}},h=c=>t?s==="PLAY"?(t==null?void 0:t.cardCatalog[`${c.id}`])>0:t.goalWins[`${c.id}`]?(t==null?void 0:t.goalWins[`${c.id}`])>0:!1:0,d=()=>{if(t)return Pr.map((c,_)=>{if(!(n&&c.type!==n&&c.subtype!==n))return h(c)?m.jsxs("div",{children:[m.jsx(Xt,{position:"CATALOG",cardState:{state:c,index:_}}),s==="PLAY"?m.jsxs("p",{className:"played_amount",style:{backgroundColor:`var(--${u(c)})`},children:["Played: ",t==null?void 0:t.cardCatalog[`${c.id}`]]}):m.jsxs("p",{className:"played_amount",children:["Won: ",t.goalWins?t==null?void 0:t.goalWins[`${c.id}`]:0]})]},`catalog_card__${_}`):m.jsx(Xx,{isLocked:!0},`catalog_card__locked_${_}`)})};return m.jsxs("div",{className:"main_menu",children:[m.jsx(Hr,{}),m.jsx(to,{pageType:"CATALOG"}),m.jsx(Qx,{filter:n,playOrWon:s,filterByType:o,filterByWin:a,completionPercentage:l()}),m.jsx("div",{className:"catalog",children:d()})]})}function Zx(){const t=un();return P.useEffect(()=>{t("/")},[]),m.jsx("div",{children:"Error 404"})}const ek=ly(ex),{initRulesReducer:tk}=vo;function nk(){const[t,e]=P.useState(),[n,r]=P.useState(""),[s,i]=P.useReducer(tk,_n),[o,a]=P.useState({winner:null,round:0,goal:null}),l=q1(ek,"https://flux-bbbdc-default-rtdb.europe-west1.firebasedatabase.app/"),u=ZN(),h=d=>{switch(d){case"DRAW_INCREMENT":return i({type:Ee.DRAW_INCREMENT,payload:{}});case"DRAW_DECREMENT":return i({type:Ee.DRAW_DECREMENT,payload:{}});case"PLAY_INCREMENT":return i({type:Ee.PLAY_INCREMENT,payload:{}});case"PLAY_DECREMENT":return i({type:Ee.PLAY_DECREMENT,payload:{}});case"HAND_LIMIT_INCREMENT":return i({type:Ee.HAND_LIMIT_INCREMENT,payload:{}});case"HAND_LIMIT_DECREMENT":return i({type:Ee.HAND_LIMIT_DECREMENT,payload:{}});case"KEEPER_LIMIT_INCREMENT":return i({type:Ee.KEEPER_LIMIT_INCREMENT,payload:{}});case"KEEPER_LIMIT_DECREMENT":return i({type:Ee.KEEPER_LIMIT_DECREMENT,payload:{}});case"LOCATION_RIGHT":return i({type:Ee.LOCATION_RIGHT,payload:{}});case"LOCATION_LEFT":return i({type:Ee.LOCATION_LEFT,payload:{}});case"TELEBLOCK_ON":return i({type:Ee.TELEBLOCK_ON,payload:{}});case"TELEBLOCK_OFF":return i({type:Ee.TELEBLOCK_OFF,payload:{}});case"RESET":return i({type:Ee.RESET,payload:{}})}};return m.jsx(cR,{basename:"runeflux",children:m.jsx(ft.Provider,{value:{user:t,setUser:e,db:l,auth:u,joinedGameID:n,setJoinedGameID:r},children:m.jsxs(sR,{children:[m.jsx(hn,{path:"/",element:m.jsx(cx,{})}),m.jsx(hn,{path:"/lobby",element:m.jsx(gx,{initRules:s,setInitRules:h})}),m.jsx(hn,{path:"/game",element:m.jsx(Kx,{setWinGameStats:a})}),m.jsx(hn,{path:"/login",element:m.jsx(Gx,{})}),m.jsx(hn,{path:"/gameover",element:m.jsx(Hx,{winGameStats:o})}),m.jsx(hn,{path:"/account",element:m.jsx(qx,{})}),m.jsx(hn,{path:"/catalog",element:m.jsx(Jx,{})}),m.jsx(hn,{path:"*",element:m.jsx(Zx,{})})]})})})}Ku.createRoot(document.getElementById("root")).render(m.jsx(bm.StrictMode,{children:m.jsx(nk,{})}));
