function n0(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function r0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Xp={exports:{}},Ua={},Jp={exports:{}},J={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ds=Symbol.for("react.element"),i0=Symbol.for("react.portal"),s0=Symbol.for("react.fragment"),o0=Symbol.for("react.strict_mode"),a0=Symbol.for("react.profiler"),l0=Symbol.for("react.provider"),u0=Symbol.for("react.context"),c0=Symbol.for("react.forward_ref"),d0=Symbol.for("react.suspense"),h0=Symbol.for("react.memo"),f0=Symbol.for("react.lazy"),Rh=Symbol.iterator;function p0(t){return t===null||typeof t!="object"?null:(t=Rh&&t[Rh]||t["@@iterator"],typeof t=="function"?t:null)}var Zp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},em=Object.assign,tm={};function fi(t,e,n){this.props=t,this.context=e,this.refs=tm,this.updater=n||Zp}fi.prototype.isReactComponent={};fi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};fi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function nm(){}nm.prototype=fi.prototype;function Nc(t,e,n){this.props=t,this.context=e,this.refs=tm,this.updater=n||Zp}var xc=Nc.prototype=new nm;xc.constructor=Nc;em(xc,fi.prototype);xc.isPureReactComponent=!0;var kh=Array.isArray,rm=Object.prototype.hasOwnProperty,Ac={current:null},im={key:!0,ref:!0,__self:!0,__source:!0};function sm(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)rm.call(e,r)&&!im.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Ds,type:t,key:s,ref:o,props:i,_owner:Ac.current}}function m0(t,e){return{$$typeof:Ds,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Pc(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ds}function g0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Th=/\/+/g;function wl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?g0(""+t.key):e.toString(36)}function So(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ds:case i0:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+wl(o,0):r,kh(i)?(n="",t!=null&&(n=t.replace(Th,"$&/")+"/"),So(i,e,n,"",function(u){return u})):i!=null&&(Pc(i)&&(i=m0(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Th,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",kh(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+wl(s,a);o+=So(s,e,n,l,i)}else if(l=p0(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+wl(s,a++),o+=So(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Zs(t,e,n){if(t==null)return t;var r=[],i=0;return So(t,r,"","",function(s){return e.call(n,s,i++)}),r}function y0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Qe={current:null},Io={transition:null},_0={ReactCurrentDispatcher:Qe,ReactCurrentBatchConfig:Io,ReactCurrentOwner:Ac};J.Children={map:Zs,forEach:function(t,e,n){Zs(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Zs(t,function(){e++}),e},toArray:function(t){return Zs(t,function(e){return e})||[]},only:function(t){if(!Pc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};J.Component=fi;J.Fragment=s0;J.Profiler=a0;J.PureComponent=Nc;J.StrictMode=o0;J.Suspense=d0;J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_0;J.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=em({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Ac.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)rm.call(e,l)&&!im.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Ds,type:t.type,key:i,ref:s,props:r,_owner:o}};J.createContext=function(t){return t={$$typeof:u0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:l0,_context:t},t.Consumer=t};J.createElement=sm;J.createFactory=function(t){var e=sm.bind(null,t);return e.type=t,e};J.createRef=function(){return{current:null}};J.forwardRef=function(t){return{$$typeof:c0,render:t}};J.isValidElement=Pc;J.lazy=function(t){return{$$typeof:f0,_payload:{_status:-1,_result:t},_init:y0}};J.memo=function(t,e){return{$$typeof:h0,type:t,compare:e===void 0?null:e}};J.startTransition=function(t){var e=Io.transition;Io.transition={};try{t()}finally{Io.transition=e}};J.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};J.useCallback=function(t,e){return Qe.current.useCallback(t,e)};J.useContext=function(t){return Qe.current.useContext(t)};J.useDebugValue=function(){};J.useDeferredValue=function(t){return Qe.current.useDeferredValue(t)};J.useEffect=function(t,e){return Qe.current.useEffect(t,e)};J.useId=function(){return Qe.current.useId()};J.useImperativeHandle=function(t,e,n){return Qe.current.useImperativeHandle(t,e,n)};J.useInsertionEffect=function(t,e){return Qe.current.useInsertionEffect(t,e)};J.useLayoutEffect=function(t,e){return Qe.current.useLayoutEffect(t,e)};J.useMemo=function(t,e){return Qe.current.useMemo(t,e)};J.useReducer=function(t,e,n){return Qe.current.useReducer(t,e,n)};J.useRef=function(t){return Qe.current.useRef(t)};J.useState=function(t){return Qe.current.useState(t)};J.useSyncExternalStore=function(t,e,n){return Qe.current.useSyncExternalStore(t,e,n)};J.useTransition=function(){return Qe.current.useTransition()};J.version="18.2.0";Jp.exports=J;var x=Jp.exports;const om=r0(x),v0=n0({__proto__:null,default:om},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E0=x,w0=Symbol.for("react.element"),C0=Symbol.for("react.fragment"),S0=Object.prototype.hasOwnProperty,I0=E0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,R0={key:!0,ref:!0,__self:!0,__source:!0};function am(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)S0.call(e,r)&&!R0.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:w0,type:t,key:s,ref:o,props:i,_owner:I0.current}}Ua.Fragment=C0;Ua.jsx=am;Ua.jsxs=am;Xp.exports=Ua;var m=Xp.exports,du={},lm={exports:{}},ht={},um={exports:{}},cm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,$){var R=j.length;j.push($);e:for(;0<R;){var v=R-1>>>1,I=j[v];if(0<i(I,$))j[v]=$,j[R]=I,R=v;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var $=j[0],R=j.pop();if(R!==$){j[0]=R;e:for(var v=0,I=j.length,te=I>>>1;v<te;){var pt=2*(v+1)-1,He=j[pt],Bt=pt+1,Rr=j[Bt];if(0>i(He,R))Bt<I&&0>i(Rr,He)?(j[v]=Rr,j[Bt]=R,v=Bt):(j[v]=He,j[pt]=R,v=pt);else if(Bt<I&&0>i(Rr,R))j[v]=Rr,j[Bt]=R,v=Bt;else break e}}return $}function i(j,$){var R=j.sortIndex-$.sortIndex;return R!==0?R:j.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,h=3,g=!1,_=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(j){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=j)r(u),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(u)}}function k(j){if(E=!1,y(j),!_)if(n(l)!==null)_=!0,re(O);else{var $=n(u);$!==null&&ee(k,$.startTime-j)}}function O(j,$){_=!1,E&&(E=!1,f(T),T=-1),g=!0;var R=h;try{for(y($),d=n(l);d!==null&&(!(d.expirationTime>$)||j&&!P());){var v=d.callback;if(typeof v=="function"){d.callback=null,h=d.priorityLevel;var I=v(d.expirationTime<=$);$=t.unstable_now(),typeof I=="function"?d.callback=I:d===n(l)&&r(l),y($)}else r(l);d=n(l)}if(d!==null)var te=!0;else{var pt=n(u);pt!==null&&ee(k,pt.startTime-$),te=!1}return te}finally{d=null,h=R,g=!1}}var b=!1,A=null,T=-1,M=5,S=-1;function P(){return!(t.unstable_now()-S<M)}function F(){if(A!==null){var j=t.unstable_now();S=j;var $=!0;try{$=A(!0,j)}finally{$?L():(b=!1,A=null)}}else b=!1}var L;if(typeof p=="function")L=function(){p(F)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,B=V.port2;V.port1.onmessage=F,L=function(){B.postMessage(null)}}else L=function(){C(F,0)};function re(j){A=j,b||(b=!0,L())}function ee(j,$){T=C(function(){j(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){_||g||(_=!0,re(O))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(j){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var R=h;h=$;try{return j()}finally{h=R}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,$){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var R=h;h=j;try{return $()}finally{h=R}},t.unstable_scheduleCallback=function(j,$,R){var v=t.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?v+R:v):R=v,j){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=R+I,j={id:c++,callback:$,priorityLevel:j,startTime:R,expirationTime:I,sortIndex:-1},R>v?(j.sortIndex=R,e(u,j),n(l)===null&&j===n(u)&&(E?(f(T),T=-1):E=!0,ee(k,R-v))):(j.sortIndex=I,e(l,j),_||g||(_=!0,re(O))),j},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(j){var $=h;return function(){var R=h;h=$;try{return j.apply(this,arguments)}finally{h=R}}}})(cm);um.exports=cm;var k0=um.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dm=x,dt=k0;function D(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hm=new Set,is={};function wr(t,e){ei(t,e),ei(t+"Capture",e)}function ei(t,e){for(is[t]=e,t=0;t<e.length;t++)hm.add(e[t])}var Zt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hu=Object.prototype.hasOwnProperty,T0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Nh={},xh={};function N0(t){return hu.call(xh,t)?!0:hu.call(Nh,t)?!1:T0.test(t)?xh[t]=!0:(Nh[t]=!0,!1)}function x0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function A0(t,e,n,r){if(e===null||typeof e>"u"||x0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Xe(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){je[t]=new Xe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];je[e]=new Xe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){je[t]=new Xe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){je[t]=new Xe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){je[t]=new Xe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){je[t]=new Xe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){je[t]=new Xe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){je[t]=new Xe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){je[t]=new Xe(t,5,!1,t.toLowerCase(),null,!1,!1)});var Oc=/[\-:]([a-z])/g;function Lc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Oc,Lc);je[e]=new Xe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Oc,Lc);je[e]=new Xe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Oc,Lc);je[e]=new Xe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){je[t]=new Xe(t,1,!1,t.toLowerCase(),null,!1,!1)});je.xlinkHref=new Xe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){je[t]=new Xe(t,1,!1,t.toLowerCase(),null,!0,!0)});function Dc(t,e,n,r){var i=je.hasOwnProperty(e)?je[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(A0(e,n,i,r)&&(n=null),r||i===null?N0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var an=dm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,eo=Symbol.for("react.element"),xr=Symbol.for("react.portal"),Ar=Symbol.for("react.fragment"),bc=Symbol.for("react.strict_mode"),fu=Symbol.for("react.profiler"),fm=Symbol.for("react.provider"),pm=Symbol.for("react.context"),Mc=Symbol.for("react.forward_ref"),pu=Symbol.for("react.suspense"),mu=Symbol.for("react.suspense_list"),Uc=Symbol.for("react.memo"),pn=Symbol.for("react.lazy"),mm=Symbol.for("react.offscreen"),Ah=Symbol.iterator;function Ni(t){return t===null||typeof t!="object"?null:(t=Ah&&t[Ah]||t["@@iterator"],typeof t=="function"?t:null)}var ve=Object.assign,Cl;function Wi(t){if(Cl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Cl=e&&e[1]||""}return`
`+Cl+t}var Sl=!1;function Il(t,e){if(!t||Sl)return"";Sl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Sl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Wi(t):""}function P0(t){switch(t.tag){case 5:return Wi(t.type);case 16:return Wi("Lazy");case 13:return Wi("Suspense");case 19:return Wi("SuspenseList");case 0:case 2:case 15:return t=Il(t.type,!1),t;case 11:return t=Il(t.type.render,!1),t;case 1:return t=Il(t.type,!0),t;default:return""}}function gu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ar:return"Fragment";case xr:return"Portal";case fu:return"Profiler";case bc:return"StrictMode";case pu:return"Suspense";case mu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case pm:return(t.displayName||"Context")+".Consumer";case fm:return(t._context.displayName||"Context")+".Provider";case Mc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Uc:return e=t.displayName||null,e!==null?e:gu(t.type)||"Memo";case pn:e=t._payload,t=t._init;try{return gu(t(e))}catch{}}return null}function O0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gu(e);case 8:return e===bc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function gm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function L0(t){var e=gm(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function to(t){t._valueTracker||(t._valueTracker=L0(t))}function ym(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=gm(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Wo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function yu(t,e){var n=e.checked;return ve({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ph(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Fn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _m(t,e){e=e.checked,e!=null&&Dc(t,"checked",e,!1)}function _u(t,e){_m(t,e);var n=Fn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?vu(t,e.type,n):e.hasOwnProperty("defaultValue")&&vu(t,e.type,Fn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Oh(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function vu(t,e,n){(e!=="number"||Wo(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Gi=Array.isArray;function Br(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Fn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Eu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(D(91));return ve({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Lh(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(D(92));if(Gi(n)){if(1<n.length)throw Error(D(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Fn(n)}}function vm(t,e){var n=Fn(e.value),r=Fn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Dh(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Em(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Em(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var no,wm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(no=no||document.createElement("div"),no.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=no.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ss(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var zi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},D0=["Webkit","ms","Moz","O"];Object.keys(zi).forEach(function(t){D0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),zi[e]=zi[t]})});function Cm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||zi.hasOwnProperty(t)&&zi[t]?(""+e).trim():e+"px"}function Sm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Cm(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var b0=ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cu(t,e){if(e){if(b0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(D(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(D(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(D(61))}if(e.style!=null&&typeof e.style!="object")throw Error(D(62))}}function Su(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Iu=null;function jc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ru=null,zr=null,Hr=null;function bh(t){if(t=Us(t)){if(typeof Ru!="function")throw Error(D(280));var e=t.stateNode;e&&(e=$a(e),Ru(t.stateNode,t.type,e))}}function Im(t){zr?Hr?Hr.push(t):Hr=[t]:zr=t}function Rm(){if(zr){var t=zr,e=Hr;if(Hr=zr=null,bh(t),e)for(t=0;t<e.length;t++)bh(e[t])}}function km(t,e){return t(e)}function Tm(){}var Rl=!1;function Nm(t,e,n){if(Rl)return t(e,n);Rl=!0;try{return km(t,e,n)}finally{Rl=!1,(zr!==null||Hr!==null)&&(Tm(),Rm())}}function os(t,e){var n=t.stateNode;if(n===null)return null;var r=$a(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(D(231,e,typeof n));return n}var ku=!1;if(Zt)try{var xi={};Object.defineProperty(xi,"passive",{get:function(){ku=!0}}),window.addEventListener("test",xi,xi),window.removeEventListener("test",xi,xi)}catch{ku=!1}function M0(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Hi=!1,Go=null,$o=!1,Tu=null,U0={onError:function(t){Hi=!0,Go=t}};function j0(t,e,n,r,i,s,o,a,l){Hi=!1,Go=null,M0.apply(U0,arguments)}function F0(t,e,n,r,i,s,o,a,l){if(j0.apply(this,arguments),Hi){if(Hi){var u=Go;Hi=!1,Go=null}else throw Error(D(198));$o||($o=!0,Tu=u)}}function Cr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function xm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Mh(t){if(Cr(t)!==t)throw Error(D(188))}function W0(t){var e=t.alternate;if(!e){if(e=Cr(t),e===null)throw Error(D(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Mh(i),t;if(s===r)return Mh(i),e;s=s.sibling}throw Error(D(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?t:e}function Am(t){return t=W0(t),t!==null?Pm(t):null}function Pm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Pm(t);if(e!==null)return e;t=t.sibling}return null}var Om=dt.unstable_scheduleCallback,Uh=dt.unstable_cancelCallback,G0=dt.unstable_shouldYield,$0=dt.unstable_requestPaint,Ce=dt.unstable_now,B0=dt.unstable_getCurrentPriorityLevel,Fc=dt.unstable_ImmediatePriority,Lm=dt.unstable_UserBlockingPriority,Bo=dt.unstable_NormalPriority,z0=dt.unstable_LowPriority,Dm=dt.unstable_IdlePriority,ja=null,Mt=null;function H0(t){if(Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(ja,t,void 0,(t.current.flags&128)===128)}catch{}}var xt=Math.clz32?Math.clz32:Y0,K0=Math.log,V0=Math.LN2;function Y0(t){return t>>>=0,t===0?32:31-(K0(t)/V0|0)|0}var ro=64,io=4194304;function $i(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function zo(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=$i(a):(s&=o,s!==0&&(r=$i(s)))}else o=n&~i,o!==0?r=$i(o):s!==0&&(r=$i(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-xt(e),i=1<<n,r|=t[n],e&=~i;return r}function q0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Q0(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-xt(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=q0(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Nu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function bm(){var t=ro;return ro<<=1,!(ro&4194240)&&(ro=64),t}function kl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function bs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-xt(e),t[e]=n}function X0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-xt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Wc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-xt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var oe=0;function Mm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Um,Gc,jm,Fm,Wm,xu=!1,so=[],Rn=null,kn=null,Tn=null,as=new Map,ls=new Map,gn=[],J0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jh(t,e){switch(t){case"focusin":case"focusout":Rn=null;break;case"dragenter":case"dragleave":kn=null;break;case"mouseover":case"mouseout":Tn=null;break;case"pointerover":case"pointerout":as.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ls.delete(e.pointerId)}}function Ai(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Us(e),e!==null&&Gc(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Z0(t,e,n,r,i){switch(e){case"focusin":return Rn=Ai(Rn,t,e,n,r,i),!0;case"dragenter":return kn=Ai(kn,t,e,n,r,i),!0;case"mouseover":return Tn=Ai(Tn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return as.set(s,Ai(as.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ls.set(s,Ai(ls.get(s)||null,t,e,n,r,i)),!0}return!1}function Gm(t){var e=er(t.target);if(e!==null){var n=Cr(e);if(n!==null){if(e=n.tag,e===13){if(e=xm(n),e!==null){t.blockedOn=e,Wm(t.priority,function(){jm(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ro(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Au(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Iu=r,n.target.dispatchEvent(r),Iu=null}else return e=Us(n),e!==null&&Gc(e),t.blockedOn=n,!1;e.shift()}return!0}function Fh(t,e,n){Ro(t)&&n.delete(e)}function eE(){xu=!1,Rn!==null&&Ro(Rn)&&(Rn=null),kn!==null&&Ro(kn)&&(kn=null),Tn!==null&&Ro(Tn)&&(Tn=null),as.forEach(Fh),ls.forEach(Fh)}function Pi(t,e){t.blockedOn===e&&(t.blockedOn=null,xu||(xu=!0,dt.unstable_scheduleCallback(dt.unstable_NormalPriority,eE)))}function us(t){function e(i){return Pi(i,t)}if(0<so.length){Pi(so[0],t);for(var n=1;n<so.length;n++){var r=so[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Rn!==null&&Pi(Rn,t),kn!==null&&Pi(kn,t),Tn!==null&&Pi(Tn,t),as.forEach(e),ls.forEach(e),n=0;n<gn.length;n++)r=gn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<gn.length&&(n=gn[0],n.blockedOn===null);)Gm(n),n.blockedOn===null&&gn.shift()}var Kr=an.ReactCurrentBatchConfig,Ho=!0;function tE(t,e,n,r){var i=oe,s=Kr.transition;Kr.transition=null;try{oe=1,$c(t,e,n,r)}finally{oe=i,Kr.transition=s}}function nE(t,e,n,r){var i=oe,s=Kr.transition;Kr.transition=null;try{oe=4,$c(t,e,n,r)}finally{oe=i,Kr.transition=s}}function $c(t,e,n,r){if(Ho){var i=Au(t,e,n,r);if(i===null)Ml(t,e,r,Ko,n),jh(t,r);else if(Z0(i,t,e,n,r))r.stopPropagation();else if(jh(t,r),e&4&&-1<J0.indexOf(t)){for(;i!==null;){var s=Us(i);if(s!==null&&Um(s),s=Au(t,e,n,r),s===null&&Ml(t,e,r,Ko,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Ml(t,e,r,null,n)}}var Ko=null;function Au(t,e,n,r){if(Ko=null,t=jc(r),t=er(t),t!==null)if(e=Cr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=xm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ko=t,null}function $m(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(B0()){case Fc:return 1;case Lm:return 4;case Bo:case z0:return 16;case Dm:return 536870912;default:return 16}default:return 16}}var Cn=null,Bc=null,ko=null;function Bm(){if(ko)return ko;var t,e=Bc,n=e.length,r,i="value"in Cn?Cn.value:Cn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return ko=i.slice(t,1<r?1-r:void 0)}function To(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function oo(){return!0}function Wh(){return!1}function ft(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?oo:Wh,this.isPropagationStopped=Wh,this}return ve(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=oo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=oo)},persist:function(){},isPersistent:oo}),e}var pi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zc=ft(pi),Ms=ve({},pi,{view:0,detail:0}),rE=ft(Ms),Tl,Nl,Oi,Fa=ve({},Ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oi&&(Oi&&t.type==="mousemove"?(Tl=t.screenX-Oi.screenX,Nl=t.screenY-Oi.screenY):Nl=Tl=0,Oi=t),Tl)},movementY:function(t){return"movementY"in t?t.movementY:Nl}}),Gh=ft(Fa),iE=ve({},Fa,{dataTransfer:0}),sE=ft(iE),oE=ve({},Ms,{relatedTarget:0}),xl=ft(oE),aE=ve({},pi,{animationName:0,elapsedTime:0,pseudoElement:0}),lE=ft(aE),uE=ve({},pi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cE=ft(uE),dE=ve({},pi,{data:0}),$h=ft(dE),hE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=pE[t])?!!e[t]:!1}function Hc(){return mE}var gE=ve({},Ms,{key:function(t){if(t.key){var e=hE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=To(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?fE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hc,charCode:function(t){return t.type==="keypress"?To(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?To(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),yE=ft(gE),_E=ve({},Fa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bh=ft(_E),vE=ve({},Ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hc}),EE=ft(vE),wE=ve({},pi,{propertyName:0,elapsedTime:0,pseudoElement:0}),CE=ft(wE),SE=ve({},Fa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),IE=ft(SE),RE=[9,13,27,32],Kc=Zt&&"CompositionEvent"in window,Ki=null;Zt&&"documentMode"in document&&(Ki=document.documentMode);var kE=Zt&&"TextEvent"in window&&!Ki,zm=Zt&&(!Kc||Ki&&8<Ki&&11>=Ki),zh=String.fromCharCode(32),Hh=!1;function Hm(t,e){switch(t){case"keyup":return RE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Km(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Pr=!1;function TE(t,e){switch(t){case"compositionend":return Km(e);case"keypress":return e.which!==32?null:(Hh=!0,zh);case"textInput":return t=e.data,t===zh&&Hh?null:t;default:return null}}function NE(t,e){if(Pr)return t==="compositionend"||!Kc&&Hm(t,e)?(t=Bm(),ko=Bc=Cn=null,Pr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return zm&&e.locale!=="ko"?null:e.data;default:return null}}var xE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!xE[t.type]:e==="textarea"}function Vm(t,e,n,r){Im(r),e=Vo(e,"onChange"),0<e.length&&(n=new zc("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Vi=null,cs=null;function AE(t){ig(t,0)}function Wa(t){var e=Dr(t);if(ym(e))return t}function PE(t,e){if(t==="change")return e}var Ym=!1;if(Zt){var Al;if(Zt){var Pl="oninput"in document;if(!Pl){var Vh=document.createElement("div");Vh.setAttribute("oninput","return;"),Pl=typeof Vh.oninput=="function"}Al=Pl}else Al=!1;Ym=Al&&(!document.documentMode||9<document.documentMode)}function Yh(){Vi&&(Vi.detachEvent("onpropertychange",qm),cs=Vi=null)}function qm(t){if(t.propertyName==="value"&&Wa(cs)){var e=[];Vm(e,cs,t,jc(t)),Nm(AE,e)}}function OE(t,e,n){t==="focusin"?(Yh(),Vi=e,cs=n,Vi.attachEvent("onpropertychange",qm)):t==="focusout"&&Yh()}function LE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Wa(cs)}function DE(t,e){if(t==="click")return Wa(e)}function bE(t,e){if(t==="input"||t==="change")return Wa(e)}function ME(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ot=typeof Object.is=="function"?Object.is:ME;function ds(t,e){if(Ot(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!hu.call(e,i)||!Ot(t[i],e[i]))return!1}return!0}function qh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Qh(t,e){var n=qh(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qh(n)}}function Qm(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Qm(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Xm(){for(var t=window,e=Wo();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Wo(t.document)}return e}function Vc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function UE(t){var e=Xm(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Qm(n.ownerDocument.documentElement,n)){if(r!==null&&Vc(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Qh(n,s);var o=Qh(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var jE=Zt&&"documentMode"in document&&11>=document.documentMode,Or=null,Pu=null,Yi=null,Ou=!1;function Xh(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ou||Or==null||Or!==Wo(r)||(r=Or,"selectionStart"in r&&Vc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yi&&ds(Yi,r)||(Yi=r,r=Vo(Pu,"onSelect"),0<r.length&&(e=new zc("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Or)))}function ao(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Lr={animationend:ao("Animation","AnimationEnd"),animationiteration:ao("Animation","AnimationIteration"),animationstart:ao("Animation","AnimationStart"),transitionend:ao("Transition","TransitionEnd")},Ol={},Jm={};Zt&&(Jm=document.createElement("div").style,"AnimationEvent"in window||(delete Lr.animationend.animation,delete Lr.animationiteration.animation,delete Lr.animationstart.animation),"TransitionEvent"in window||delete Lr.transitionend.transition);function Ga(t){if(Ol[t])return Ol[t];if(!Lr[t])return t;var e=Lr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Jm)return Ol[t]=e[n];return t}var Zm=Ga("animationend"),eg=Ga("animationiteration"),tg=Ga("animationstart"),ng=Ga("transitionend"),rg=new Map,Jh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hn(t,e){rg.set(t,e),wr(e,[t])}for(var Ll=0;Ll<Jh.length;Ll++){var Dl=Jh[Ll],FE=Dl.toLowerCase(),WE=Dl[0].toUpperCase()+Dl.slice(1);Hn(FE,"on"+WE)}Hn(Zm,"onAnimationEnd");Hn(eg,"onAnimationIteration");Hn(tg,"onAnimationStart");Hn("dblclick","onDoubleClick");Hn("focusin","onFocus");Hn("focusout","onBlur");Hn(ng,"onTransitionEnd");ei("onMouseEnter",["mouseout","mouseover"]);ei("onMouseLeave",["mouseout","mouseover"]);ei("onPointerEnter",["pointerout","pointerover"]);ei("onPointerLeave",["pointerout","pointerover"]);wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wr("onBeforeInput",["compositionend","keypress","textInput","paste"]);wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bi));function Zh(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,F0(r,e,void 0,t),t.currentTarget=null}function ig(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Zh(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Zh(i,a,u),s=l}}}if($o)throw t=Tu,$o=!1,Tu=null,t}function fe(t,e){var n=e[Uu];n===void 0&&(n=e[Uu]=new Set);var r=t+"__bubble";n.has(r)||(sg(e,t,2,!1),n.add(r))}function bl(t,e,n){var r=0;e&&(r|=4),sg(n,t,r,e)}var lo="_reactListening"+Math.random().toString(36).slice(2);function hs(t){if(!t[lo]){t[lo]=!0,hm.forEach(function(n){n!=="selectionchange"&&(GE.has(n)||bl(n,!1,t),bl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[lo]||(e[lo]=!0,bl("selectionchange",!1,e))}}function sg(t,e,n,r){switch($m(e)){case 1:var i=tE;break;case 4:i=nE;break;default:i=$c}n=i.bind(null,e,n,t),i=void 0,!ku||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ml(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=er(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Nm(function(){var u=s,c=jc(n),d=[];e:{var h=rg.get(t);if(h!==void 0){var g=zc,_=t;switch(t){case"keypress":if(To(n)===0)break e;case"keydown":case"keyup":g=yE;break;case"focusin":_="focus",g=xl;break;case"focusout":_="blur",g=xl;break;case"beforeblur":case"afterblur":g=xl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Gh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=sE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=EE;break;case Zm:case eg:case tg:g=lE;break;case ng:g=CE;break;case"scroll":g=rE;break;case"wheel":g=IE;break;case"copy":case"cut":case"paste":g=cE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Bh}var E=(e&4)!==0,C=!E&&t==="scroll",f=E?h!==null?h+"Capture":null:h;E=[];for(var p=u,y;p!==null;){y=p;var k=y.stateNode;if(y.tag===5&&k!==null&&(y=k,f!==null&&(k=os(p,f),k!=null&&E.push(fs(p,k,y)))),C)break;p=p.return}0<E.length&&(h=new g(h,_,null,n,c),d.push({event:h,listeners:E}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",h&&n!==Iu&&(_=n.relatedTarget||n.fromElement)&&(er(_)||_[en]))break e;if((g||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,g?(_=n.relatedTarget||n.toElement,g=u,_=_?er(_):null,_!==null&&(C=Cr(_),_!==C||_.tag!==5&&_.tag!==6)&&(_=null)):(g=null,_=u),g!==_)){if(E=Gh,k="onMouseLeave",f="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(E=Bh,k="onPointerLeave",f="onPointerEnter",p="pointer"),C=g==null?h:Dr(g),y=_==null?h:Dr(_),h=new E(k,p+"leave",g,n,c),h.target=C,h.relatedTarget=y,k=null,er(c)===u&&(E=new E(f,p+"enter",_,n,c),E.target=y,E.relatedTarget=C,k=E),C=k,g&&_)t:{for(E=g,f=_,p=0,y=E;y;y=Tr(y))p++;for(y=0,k=f;k;k=Tr(k))y++;for(;0<p-y;)E=Tr(E),p--;for(;0<y-p;)f=Tr(f),y--;for(;p--;){if(E===f||f!==null&&E===f.alternate)break t;E=Tr(E),f=Tr(f)}E=null}else E=null;g!==null&&ef(d,h,g,E,!1),_!==null&&C!==null&&ef(d,C,_,E,!0)}}e:{if(h=u?Dr(u):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var O=PE;else if(Kh(h))if(Ym)O=bE;else{O=LE;var b=OE}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(O=DE);if(O&&(O=O(t,u))){Vm(d,O,n,c);break e}b&&b(t,h,u),t==="focusout"&&(b=h._wrapperState)&&b.controlled&&h.type==="number"&&vu(h,"number",h.value)}switch(b=u?Dr(u):window,t){case"focusin":(Kh(b)||b.contentEditable==="true")&&(Or=b,Pu=u,Yi=null);break;case"focusout":Yi=Pu=Or=null;break;case"mousedown":Ou=!0;break;case"contextmenu":case"mouseup":case"dragend":Ou=!1,Xh(d,n,c);break;case"selectionchange":if(jE)break;case"keydown":case"keyup":Xh(d,n,c)}var A;if(Kc)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Pr?Hm(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(zm&&n.locale!=="ko"&&(Pr||T!=="onCompositionStart"?T==="onCompositionEnd"&&Pr&&(A=Bm()):(Cn=c,Bc="value"in Cn?Cn.value:Cn.textContent,Pr=!0)),b=Vo(u,T),0<b.length&&(T=new $h(T,t,null,n,c),d.push({event:T,listeners:b}),A?T.data=A:(A=Km(n),A!==null&&(T.data=A)))),(A=kE?TE(t,n):NE(t,n))&&(u=Vo(u,"onBeforeInput"),0<u.length&&(c=new $h("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=A))}ig(d,e)})}function fs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vo(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=os(t,n),s!=null&&r.unshift(fs(t,s,i)),s=os(t,e),s!=null&&r.push(fs(t,s,i))),t=t.return}return r}function Tr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ef(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=os(n,s),l!=null&&o.unshift(fs(n,l,a))):i||(l=os(n,s),l!=null&&o.push(fs(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var $E=/\r\n?/g,BE=/\u0000|\uFFFD/g;function tf(t){return(typeof t=="string"?t:""+t).replace($E,`
`).replace(BE,"")}function uo(t,e,n){if(e=tf(e),tf(t)!==e&&n)throw Error(D(425))}function Yo(){}var Lu=null,Du=null;function bu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Mu=typeof setTimeout=="function"?setTimeout:void 0,zE=typeof clearTimeout=="function"?clearTimeout:void 0,nf=typeof Promise=="function"?Promise:void 0,HE=typeof queueMicrotask=="function"?queueMicrotask:typeof nf<"u"?function(t){return nf.resolve(null).then(t).catch(KE)}:Mu;function KE(t){setTimeout(function(){throw t})}function Ul(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),us(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);us(e)}function Nn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function rf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var mi=Math.random().toString(36).slice(2),bt="__reactFiber$"+mi,ps="__reactProps$"+mi,en="__reactContainer$"+mi,Uu="__reactEvents$"+mi,VE="__reactListeners$"+mi,YE="__reactHandles$"+mi;function er(t){var e=t[bt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[en]||n[bt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=rf(t);t!==null;){if(n=t[bt])return n;t=rf(t)}return e}t=n,n=t.parentNode}return null}function Us(t){return t=t[bt]||t[en],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Dr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(D(33))}function $a(t){return t[ps]||null}var ju=[],br=-1;function Kn(t){return{current:t}}function me(t){0>br||(t.current=ju[br],ju[br]=null,br--)}function he(t,e){br++,ju[br]=t.current,t.current=e}var Wn={},Be=Kn(Wn),nt=Kn(!1),ur=Wn;function ti(t,e){var n=t.type.contextTypes;if(!n)return Wn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function rt(t){return t=t.childContextTypes,t!=null}function qo(){me(nt),me(Be)}function sf(t,e,n){if(Be.current!==Wn)throw Error(D(168));he(Be,e),he(nt,n)}function og(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(D(108,O0(t)||"Unknown",i));return ve({},n,r)}function Qo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Wn,ur=Be.current,he(Be,t),he(nt,nt.current),!0}function of(t,e,n){var r=t.stateNode;if(!r)throw Error(D(169));n?(t=og(t,e,ur),r.__reactInternalMemoizedMergedChildContext=t,me(nt),me(Be),he(Be,t)):me(nt),he(nt,n)}var Ht=null,Ba=!1,jl=!1;function ag(t){Ht===null?Ht=[t]:Ht.push(t)}function qE(t){Ba=!0,ag(t)}function Vn(){if(!jl&&Ht!==null){jl=!0;var t=0,e=oe;try{var n=Ht;for(oe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ht=null,Ba=!1}catch(i){throw Ht!==null&&(Ht=Ht.slice(t+1)),Om(Fc,Vn),i}finally{oe=e,jl=!1}}return null}var Mr=[],Ur=0,Xo=null,Jo=0,mt=[],gt=0,cr=null,Kt=1,Vt="";function qn(t,e){Mr[Ur++]=Jo,Mr[Ur++]=Xo,Xo=t,Jo=e}function lg(t,e,n){mt[gt++]=Kt,mt[gt++]=Vt,mt[gt++]=cr,cr=t;var r=Kt;t=Vt;var i=32-xt(r)-1;r&=~(1<<i),n+=1;var s=32-xt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Kt=1<<32-xt(e)+i|n<<i|r,Vt=s+t}else Kt=1<<s|n<<i|r,Vt=t}function Yc(t){t.return!==null&&(qn(t,1),lg(t,1,0))}function qc(t){for(;t===Xo;)Xo=Mr[--Ur],Mr[Ur]=null,Jo=Mr[--Ur],Mr[Ur]=null;for(;t===cr;)cr=mt[--gt],mt[gt]=null,Vt=mt[--gt],mt[gt]=null,Kt=mt[--gt],mt[gt]=null}var ct=null,ut=null,ge=!1,Rt=null;function ug(t,e){var n=yt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function af(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ct=t,ut=Nn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ct=t,ut=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=cr!==null?{id:Kt,overflow:Vt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=yt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ct=t,ut=null,!0):!1;default:return!1}}function Fu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Wu(t){if(ge){var e=ut;if(e){var n=e;if(!af(t,e)){if(Fu(t))throw Error(D(418));e=Nn(n.nextSibling);var r=ct;e&&af(t,e)?ug(r,n):(t.flags=t.flags&-4097|2,ge=!1,ct=t)}}else{if(Fu(t))throw Error(D(418));t.flags=t.flags&-4097|2,ge=!1,ct=t}}}function lf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ct=t}function co(t){if(t!==ct)return!1;if(!ge)return lf(t),ge=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!bu(t.type,t.memoizedProps)),e&&(e=ut)){if(Fu(t))throw cg(),Error(D(418));for(;e;)ug(t,e),e=Nn(e.nextSibling)}if(lf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(D(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ut=Nn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ut=null}}else ut=ct?Nn(t.stateNode.nextSibling):null;return!0}function cg(){for(var t=ut;t;)t=Nn(t.nextSibling)}function ni(){ut=ct=null,ge=!1}function Qc(t){Rt===null?Rt=[t]:Rt.push(t)}var QE=an.ReactCurrentBatchConfig;function St(t,e){if(t&&t.defaultProps){e=ve({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Zo=Kn(null),ea=null,jr=null,Xc=null;function Jc(){Xc=jr=ea=null}function Zc(t){var e=Zo.current;me(Zo),t._currentValue=e}function Gu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Vr(t,e){ea=t,Xc=jr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(et=!0),t.firstContext=null)}function vt(t){var e=t._currentValue;if(Xc!==t)if(t={context:t,memoizedValue:e,next:null},jr===null){if(ea===null)throw Error(D(308));jr=t,ea.dependencies={lanes:0,firstContext:t}}else jr=jr.next=t;return e}var tr=null;function ed(t){tr===null?tr=[t]:tr.push(t)}function dg(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,ed(e)):(n.next=i.next,i.next=n),e.interleaved=n,tn(t,r)}function tn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var mn=!1;function td(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function xn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ne&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,tn(t,n)}return i=r.interleaved,i===null?(e.next=e,ed(r)):(e.next=i.next,i.next=e),r.interleaved=e,tn(t,n)}function No(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Wc(t,n)}}function uf(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ta(t,e,n,r){var i=t.updateQueue;mn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,c=u=l=null,a=s;do{var h=a.lane,g=a.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,E=a;switch(h=e,g=n,E.tag){case 1:if(_=E.payload,typeof _=="function"){d=_.call(g,d,h);break e}d=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=E.payload,h=typeof _=="function"?_.call(g,d,h):_,h==null)break e;d=ve({},d,h);break e;case 2:mn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else g={eventTime:g,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=g,l=d):c=c.next=g,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);hr|=o,t.lanes=o,t.memoizedState=d}}function cf(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(D(191,i));i.call(r)}}}var fg=new dm.Component().refs;function $u(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ve({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var za={isMounted:function(t){return(t=t._reactInternals)?Cr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=qe(),i=Pn(t),s=Xt(r,i);s.payload=e,n!=null&&(s.callback=n),e=xn(t,s,i),e!==null&&(At(e,t,i,r),No(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=qe(),i=Pn(t),s=Xt(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=xn(t,s,i),e!==null&&(At(e,t,i,r),No(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=qe(),r=Pn(t),i=Xt(n,r);i.tag=2,e!=null&&(i.callback=e),e=xn(t,i,r),e!==null&&(At(e,t,r,n),No(e,t,r))}};function df(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ds(n,r)||!ds(i,s):!0}function pg(t,e,n){var r=!1,i=Wn,s=e.contextType;return typeof s=="object"&&s!==null?s=vt(s):(i=rt(e)?ur:Be.current,r=e.contextTypes,s=(r=r!=null)?ti(t,i):Wn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=za,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function hf(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&za.enqueueReplaceState(e,e.state,null)}function Bu(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=fg,td(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=vt(s):(s=rt(e)?ur:Be.current,i.context=ti(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&($u(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&za.enqueueReplaceState(i,i.state,null),ta(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Li(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===fg&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,t))}return t}function ho(t,e){throw t=Object.prototype.toString.call(e),Error(D(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ff(t){var e=t._init;return e(t._payload)}function mg(t){function e(f,p){if(t){var y=f.deletions;y===null?(f.deletions=[p],f.flags|=16):y.push(p)}}function n(f,p){if(!t)return null;for(;p!==null;)e(f,p),p=p.sibling;return null}function r(f,p){for(f=new Map;p!==null;)p.key!==null?f.set(p.key,p):f.set(p.index,p),p=p.sibling;return f}function i(f,p){return f=On(f,p),f.index=0,f.sibling=null,f}function s(f,p,y){return f.index=y,t?(y=f.alternate,y!==null?(y=y.index,y<p?(f.flags|=2,p):y):(f.flags|=2,p)):(f.flags|=1048576,p)}function o(f){return t&&f.alternate===null&&(f.flags|=2),f}function a(f,p,y,k){return p===null||p.tag!==6?(p=Hl(y,f.mode,k),p.return=f,p):(p=i(p,y),p.return=f,p)}function l(f,p,y,k){var O=y.type;return O===Ar?c(f,p,y.props.children,k,y.key):p!==null&&(p.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===pn&&ff(O)===p.type)?(k=i(p,y.props),k.ref=Li(f,p,y),k.return=f,k):(k=Do(y.type,y.key,y.props,null,f.mode,k),k.ref=Li(f,p,y),k.return=f,k)}function u(f,p,y,k){return p===null||p.tag!==4||p.stateNode.containerInfo!==y.containerInfo||p.stateNode.implementation!==y.implementation?(p=Kl(y,f.mode,k),p.return=f,p):(p=i(p,y.children||[]),p.return=f,p)}function c(f,p,y,k,O){return p===null||p.tag!==7?(p=or(y,f.mode,k,O),p.return=f,p):(p=i(p,y),p.return=f,p)}function d(f,p,y){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Hl(""+p,f.mode,y),p.return=f,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case eo:return y=Do(p.type,p.key,p.props,null,f.mode,y),y.ref=Li(f,null,p),y.return=f,y;case xr:return p=Kl(p,f.mode,y),p.return=f,p;case pn:var k=p._init;return d(f,k(p._payload),y)}if(Gi(p)||Ni(p))return p=or(p,f.mode,y,null),p.return=f,p;ho(f,p)}return null}function h(f,p,y,k){var O=p!==null?p.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return O!==null?null:a(f,p,""+y,k);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case eo:return y.key===O?l(f,p,y,k):null;case xr:return y.key===O?u(f,p,y,k):null;case pn:return O=y._init,h(f,p,O(y._payload),k)}if(Gi(y)||Ni(y))return O!==null?null:c(f,p,y,k,null);ho(f,y)}return null}function g(f,p,y,k,O){if(typeof k=="string"&&k!==""||typeof k=="number")return f=f.get(y)||null,a(p,f,""+k,O);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case eo:return f=f.get(k.key===null?y:k.key)||null,l(p,f,k,O);case xr:return f=f.get(k.key===null?y:k.key)||null,u(p,f,k,O);case pn:var b=k._init;return g(f,p,y,b(k._payload),O)}if(Gi(k)||Ni(k))return f=f.get(y)||null,c(p,f,k,O,null);ho(p,k)}return null}function _(f,p,y,k){for(var O=null,b=null,A=p,T=p=0,M=null;A!==null&&T<y.length;T++){A.index>T?(M=A,A=null):M=A.sibling;var S=h(f,A,y[T],k);if(S===null){A===null&&(A=M);break}t&&A&&S.alternate===null&&e(f,A),p=s(S,p,T),b===null?O=S:b.sibling=S,b=S,A=M}if(T===y.length)return n(f,A),ge&&qn(f,T),O;if(A===null){for(;T<y.length;T++)A=d(f,y[T],k),A!==null&&(p=s(A,p,T),b===null?O=A:b.sibling=A,b=A);return ge&&qn(f,T),O}for(A=r(f,A);T<y.length;T++)M=g(A,f,T,y[T],k),M!==null&&(t&&M.alternate!==null&&A.delete(M.key===null?T:M.key),p=s(M,p,T),b===null?O=M:b.sibling=M,b=M);return t&&A.forEach(function(P){return e(f,P)}),ge&&qn(f,T),O}function E(f,p,y,k){var O=Ni(y);if(typeof O!="function")throw Error(D(150));if(y=O.call(y),y==null)throw Error(D(151));for(var b=O=null,A=p,T=p=0,M=null,S=y.next();A!==null&&!S.done;T++,S=y.next()){A.index>T?(M=A,A=null):M=A.sibling;var P=h(f,A,S.value,k);if(P===null){A===null&&(A=M);break}t&&A&&P.alternate===null&&e(f,A),p=s(P,p,T),b===null?O=P:b.sibling=P,b=P,A=M}if(S.done)return n(f,A),ge&&qn(f,T),O;if(A===null){for(;!S.done;T++,S=y.next())S=d(f,S.value,k),S!==null&&(p=s(S,p,T),b===null?O=S:b.sibling=S,b=S);return ge&&qn(f,T),O}for(A=r(f,A);!S.done;T++,S=y.next())S=g(A,f,T,S.value,k),S!==null&&(t&&S.alternate!==null&&A.delete(S.key===null?T:S.key),p=s(S,p,T),b===null?O=S:b.sibling=S,b=S);return t&&A.forEach(function(F){return e(f,F)}),ge&&qn(f,T),O}function C(f,p,y,k){if(typeof y=="object"&&y!==null&&y.type===Ar&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case eo:e:{for(var O=y.key,b=p;b!==null;){if(b.key===O){if(O=y.type,O===Ar){if(b.tag===7){n(f,b.sibling),p=i(b,y.props.children),p.return=f,f=p;break e}}else if(b.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===pn&&ff(O)===b.type){n(f,b.sibling),p=i(b,y.props),p.ref=Li(f,b,y),p.return=f,f=p;break e}n(f,b);break}else e(f,b);b=b.sibling}y.type===Ar?(p=or(y.props.children,f.mode,k,y.key),p.return=f,f=p):(k=Do(y.type,y.key,y.props,null,f.mode,k),k.ref=Li(f,p,y),k.return=f,f=k)}return o(f);case xr:e:{for(b=y.key;p!==null;){if(p.key===b)if(p.tag===4&&p.stateNode.containerInfo===y.containerInfo&&p.stateNode.implementation===y.implementation){n(f,p.sibling),p=i(p,y.children||[]),p.return=f,f=p;break e}else{n(f,p);break}else e(f,p);p=p.sibling}p=Kl(y,f.mode,k),p.return=f,f=p}return o(f);case pn:return b=y._init,C(f,p,b(y._payload),k)}if(Gi(y))return _(f,p,y,k);if(Ni(y))return E(f,p,y,k);ho(f,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,p!==null&&p.tag===6?(n(f,p.sibling),p=i(p,y),p.return=f,f=p):(n(f,p),p=Hl(y,f.mode,k),p.return=f,f=p),o(f)):n(f,p)}return C}var ri=mg(!0),gg=mg(!1),js={},Ut=Kn(js),ms=Kn(js),gs=Kn(js);function nr(t){if(t===js)throw Error(D(174));return t}function nd(t,e){switch(he(gs,e),he(ms,t),he(Ut,js),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:wu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=wu(e,t)}me(Ut),he(Ut,e)}function ii(){me(Ut),me(ms),me(gs)}function yg(t){nr(gs.current);var e=nr(Ut.current),n=wu(e,t.type);e!==n&&(he(ms,t),he(Ut,n))}function rd(t){ms.current===t&&(me(Ut),me(ms))}var ye=Kn(0);function na(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Fl=[];function id(){for(var t=0;t<Fl.length;t++)Fl[t]._workInProgressVersionPrimary=null;Fl.length=0}var xo=an.ReactCurrentDispatcher,Wl=an.ReactCurrentBatchConfig,dr=0,_e=null,ke=null,Pe=null,ra=!1,qi=!1,ys=0,XE=0;function Fe(){throw Error(D(321))}function sd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ot(t[n],e[n]))return!1;return!0}function od(t,e,n,r,i,s){if(dr=s,_e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xo.current=t===null||t.memoizedState===null?tw:nw,t=n(r,i),qi){s=0;do{if(qi=!1,ys=0,25<=s)throw Error(D(301));s+=1,Pe=ke=null,e.updateQueue=null,xo.current=rw,t=n(r,i)}while(qi)}if(xo.current=ia,e=ke!==null&&ke.next!==null,dr=0,Pe=ke=_e=null,ra=!1,e)throw Error(D(300));return t}function ad(){var t=ys!==0;return ys=0,t}function Dt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pe===null?_e.memoizedState=Pe=t:Pe=Pe.next=t,Pe}function Et(){if(ke===null){var t=_e.alternate;t=t!==null?t.memoizedState:null}else t=ke.next;var e=Pe===null?_e.memoizedState:Pe.next;if(e!==null)Pe=e,ke=t;else{if(t===null)throw Error(D(310));ke=t,t={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},Pe===null?_e.memoizedState=Pe=t:Pe=Pe.next=t}return Pe}function _s(t,e){return typeof e=="function"?e(t):e}function Gl(t){var e=Et(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var r=ke,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((dr&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,_e.lanes|=c,hr|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Ot(r,e.memoizedState)||(et=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,_e.lanes|=s,hr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function $l(t){var e=Et(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Ot(s,e.memoizedState)||(et=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function _g(){}function vg(t,e){var n=_e,r=Et(),i=e(),s=!Ot(r.memoizedState,i);if(s&&(r.memoizedState=i,et=!0),r=r.queue,ld(Cg.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Pe!==null&&Pe.memoizedState.tag&1){if(n.flags|=2048,vs(9,wg.bind(null,n,r,i,e),void 0,null),De===null)throw Error(D(349));dr&30||Eg(n,e,i)}return i}function Eg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function wg(t,e,n,r){e.value=n,e.getSnapshot=r,Sg(e)&&Ig(t)}function Cg(t,e,n){return n(function(){Sg(e)&&Ig(t)})}function Sg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ot(t,n)}catch{return!0}}function Ig(t){var e=tn(t,1);e!==null&&At(e,t,1,-1)}function pf(t){var e=Dt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:t},e.queue=t,t=t.dispatch=ew.bind(null,_e,t),[e.memoizedState,t]}function vs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Rg(){return Et().memoizedState}function Ao(t,e,n,r){var i=Dt();_e.flags|=t,i.memoizedState=vs(1|e,n,void 0,r===void 0?null:r)}function Ha(t,e,n,r){var i=Et();r=r===void 0?null:r;var s=void 0;if(ke!==null){var o=ke.memoizedState;if(s=o.destroy,r!==null&&sd(r,o.deps)){i.memoizedState=vs(e,n,s,r);return}}_e.flags|=t,i.memoizedState=vs(1|e,n,s,r)}function mf(t,e){return Ao(8390656,8,t,e)}function ld(t,e){return Ha(2048,8,t,e)}function kg(t,e){return Ha(4,2,t,e)}function Tg(t,e){return Ha(4,4,t,e)}function Ng(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function xg(t,e,n){return n=n!=null?n.concat([t]):null,Ha(4,4,Ng.bind(null,e,t),n)}function ud(){}function Ag(t,e){var n=Et();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Pg(t,e){var n=Et();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Og(t,e,n){return dr&21?(Ot(n,e)||(n=bm(),_e.lanes|=n,hr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,et=!0),t.memoizedState=n)}function JE(t,e){var n=oe;oe=n!==0&&4>n?n:4,t(!0);var r=Wl.transition;Wl.transition={};try{t(!1),e()}finally{oe=n,Wl.transition=r}}function Lg(){return Et().memoizedState}function ZE(t,e,n){var r=Pn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Dg(t))bg(e,n);else if(n=dg(t,e,n,r),n!==null){var i=qe();At(n,t,r,i),Mg(n,e,r)}}function ew(t,e,n){var r=Pn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Dg(t))bg(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Ot(a,o)){var l=e.interleaved;l===null?(i.next=i,ed(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=dg(t,e,i,r),n!==null&&(i=qe(),At(n,t,r,i),Mg(n,e,r))}}function Dg(t){var e=t.alternate;return t===_e||e!==null&&e===_e}function bg(t,e){qi=ra=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Mg(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Wc(t,n)}}var ia={readContext:vt,useCallback:Fe,useContext:Fe,useEffect:Fe,useImperativeHandle:Fe,useInsertionEffect:Fe,useLayoutEffect:Fe,useMemo:Fe,useReducer:Fe,useRef:Fe,useState:Fe,useDebugValue:Fe,useDeferredValue:Fe,useTransition:Fe,useMutableSource:Fe,useSyncExternalStore:Fe,useId:Fe,unstable_isNewReconciler:!1},tw={readContext:vt,useCallback:function(t,e){return Dt().memoizedState=[t,e===void 0?null:e],t},useContext:vt,useEffect:mf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ao(4194308,4,Ng.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ao(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ao(4,2,t,e)},useMemo:function(t,e){var n=Dt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Dt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ZE.bind(null,_e,t),[r.memoizedState,t]},useRef:function(t){var e=Dt();return t={current:t},e.memoizedState=t},useState:pf,useDebugValue:ud,useDeferredValue:function(t){return Dt().memoizedState=t},useTransition:function(){var t=pf(!1),e=t[0];return t=JE.bind(null,t[1]),Dt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=_e,i=Dt();if(ge){if(n===void 0)throw Error(D(407));n=n()}else{if(n=e(),De===null)throw Error(D(349));dr&30||Eg(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,mf(Cg.bind(null,r,s,t),[t]),r.flags|=2048,vs(9,wg.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Dt(),e=De.identifierPrefix;if(ge){var n=Vt,r=Kt;n=(r&~(1<<32-xt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ys++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=XE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},nw={readContext:vt,useCallback:Ag,useContext:vt,useEffect:ld,useImperativeHandle:xg,useInsertionEffect:kg,useLayoutEffect:Tg,useMemo:Pg,useReducer:Gl,useRef:Rg,useState:function(){return Gl(_s)},useDebugValue:ud,useDeferredValue:function(t){var e=Et();return Og(e,ke.memoizedState,t)},useTransition:function(){var t=Gl(_s)[0],e=Et().memoizedState;return[t,e]},useMutableSource:_g,useSyncExternalStore:vg,useId:Lg,unstable_isNewReconciler:!1},rw={readContext:vt,useCallback:Ag,useContext:vt,useEffect:ld,useImperativeHandle:xg,useInsertionEffect:kg,useLayoutEffect:Tg,useMemo:Pg,useReducer:$l,useRef:Rg,useState:function(){return $l(_s)},useDebugValue:ud,useDeferredValue:function(t){var e=Et();return ke===null?e.memoizedState=t:Og(e,ke.memoizedState,t)},useTransition:function(){var t=$l(_s)[0],e=Et().memoizedState;return[t,e]},useMutableSource:_g,useSyncExternalStore:vg,useId:Lg,unstable_isNewReconciler:!1};function si(t,e){try{var n="",r=e;do n+=P0(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Bl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function zu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var iw=typeof WeakMap=="function"?WeakMap:Map;function Ug(t,e,n){n=Xt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){oa||(oa=!0,ec=r),zu(t,e)},n}function jg(t,e,n){n=Xt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){zu(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){zu(t,e),typeof r!="function"&&(An===null?An=new Set([this]):An.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function gf(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new iw;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=_w.bind(null,t,e,n),e.then(t,t))}function yf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function _f(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Xt(-1,1),e.tag=2,xn(n,e,1))),n.lanes|=1),t)}var sw=an.ReactCurrentOwner,et=!1;function Ve(t,e,n,r){e.child=t===null?gg(e,null,n,r):ri(e,t.child,n,r)}function vf(t,e,n,r,i){n=n.render;var s=e.ref;return Vr(e,i),r=od(t,e,n,r,s,i),n=ad(),t!==null&&!et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,nn(t,e,i)):(ge&&n&&Yc(e),e.flags|=1,Ve(t,e,r,i),e.child)}function Ef(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!yd(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Fg(t,e,s,r,i)):(t=Do(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ds,n(o,r)&&t.ref===e.ref)return nn(t,e,i)}return e.flags|=1,t=On(s,r),t.ref=e.ref,t.return=e,e.child=t}function Fg(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ds(s,r)&&t.ref===e.ref)if(et=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(et=!0);else return e.lanes=t.lanes,nn(t,e,i)}return Hu(t,e,n,r,i)}function Wg(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},he(Wr,lt),lt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,he(Wr,lt),lt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,he(Wr,lt),lt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,he(Wr,lt),lt|=r;return Ve(t,e,i,n),e.child}function Gg(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Hu(t,e,n,r,i){var s=rt(n)?ur:Be.current;return s=ti(e,s),Vr(e,i),n=od(t,e,n,r,s,i),r=ad(),t!==null&&!et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,nn(t,e,i)):(ge&&r&&Yc(e),e.flags|=1,Ve(t,e,n,i),e.child)}function wf(t,e,n,r,i){if(rt(n)){var s=!0;Qo(e)}else s=!1;if(Vr(e,i),e.stateNode===null)Po(t,e),pg(e,n,r),Bu(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=vt(u):(u=rt(n)?ur:Be.current,u=ti(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&hf(e,o,r,u),mn=!1;var h=e.memoizedState;o.state=h,ta(e,r,o,i),l=e.memoizedState,a!==r||h!==l||nt.current||mn?(typeof c=="function"&&($u(e,n,c,r),l=e.memoizedState),(a=mn||df(e,n,a,r,h,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,hg(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:St(e.type,a),o.props=u,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=vt(l):(l=rt(n)?ur:Be.current,l=ti(e,l));var g=n.getDerivedStateFromProps;(c=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&hf(e,o,r,l),mn=!1,h=e.memoizedState,o.state=h,ta(e,r,o,i);var _=e.memoizedState;a!==d||h!==_||nt.current||mn?(typeof g=="function"&&($u(e,n,g,r),_=e.memoizedState),(u=mn||df(e,n,u,r,h,_,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Ku(t,e,n,r,s,i)}function Ku(t,e,n,r,i,s){Gg(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&of(e,n,!1),nn(t,e,s);r=e.stateNode,sw.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ri(e,t.child,null,s),e.child=ri(e,null,a,s)):Ve(t,e,a,s),e.memoizedState=r.state,i&&of(e,n,!0),e.child}function $g(t){var e=t.stateNode;e.pendingContext?sf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&sf(t,e.context,!1),nd(t,e.containerInfo)}function Cf(t,e,n,r,i){return ni(),Qc(i),e.flags|=256,Ve(t,e,n,r),e.child}var Vu={dehydrated:null,treeContext:null,retryLane:0};function Yu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Bg(t,e,n){var r=e.pendingProps,i=ye.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),he(ye,i&1),t===null)return Wu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ya(o,r,0,null),t=or(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Yu(n),e.memoizedState=Vu,t):cd(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return ow(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=On(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=On(a,s):(s=or(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Yu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Vu,r}return s=t.child,t=s.sibling,r=On(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function cd(t,e){return e=Ya({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function fo(t,e,n,r){return r!==null&&Qc(r),ri(e,t.child,null,n),t=cd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ow(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Bl(Error(D(422))),fo(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Ya({mode:"visible",children:r.children},i,0,null),s=or(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ri(e,t.child,null,o),e.child.memoizedState=Yu(o),e.memoizedState=Vu,s);if(!(e.mode&1))return fo(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(D(419)),r=Bl(s,r,void 0),fo(t,e,o,r)}if(a=(o&t.childLanes)!==0,et||a){if(r=De,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,tn(t,i),At(r,t,i,-1))}return gd(),r=Bl(Error(D(421))),fo(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=vw.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ut=Nn(i.nextSibling),ct=e,ge=!0,Rt=null,t!==null&&(mt[gt++]=Kt,mt[gt++]=Vt,mt[gt++]=cr,Kt=t.id,Vt=t.overflow,cr=e),e=cd(e,r.children),e.flags|=4096,e)}function Sf(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Gu(t.return,e,n)}function zl(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function zg(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ve(t,e,r.children,n),r=ye.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Sf(t,n,e);else if(t.tag===19)Sf(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(he(ye,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&na(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),zl(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&na(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}zl(e,!0,n,null,s);break;case"together":zl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Po(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function nn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),hr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(D(153));if(e.child!==null){for(t=e.child,n=On(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=On(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function aw(t,e,n){switch(e.tag){case 3:$g(e),ni();break;case 5:yg(e);break;case 1:rt(e.type)&&Qo(e);break;case 4:nd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;he(Zo,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(he(ye,ye.current&1),e.flags|=128,null):n&e.child.childLanes?Bg(t,e,n):(he(ye,ye.current&1),t=nn(t,e,n),t!==null?t.sibling:null);he(ye,ye.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return zg(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),he(ye,ye.current),r)break;return null;case 22:case 23:return e.lanes=0,Wg(t,e,n)}return nn(t,e,n)}var Hg,qu,Kg,Vg;Hg=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};qu=function(){};Kg=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,nr(Ut.current);var s=null;switch(n){case"input":i=yu(t,i),r=yu(t,r),s=[];break;case"select":i=ve({},i,{value:void 0}),r=ve({},r,{value:void 0}),s=[];break;case"textarea":i=Eu(t,i),r=Eu(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Yo)}Cu(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(is.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(is.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&fe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Vg=function(t,e,n,r){n!==r&&(e.flags|=4)};function Di(t,e){if(!ge)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function We(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function lw(t,e,n){var r=e.pendingProps;switch(qc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return We(e),null;case 1:return rt(e.type)&&qo(),We(e),null;case 3:return r=e.stateNode,ii(),me(nt),me(Be),id(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(co(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Rt!==null&&(rc(Rt),Rt=null))),qu(t,e),We(e),null;case 5:rd(e);var i=nr(gs.current);if(n=e.type,t!==null&&e.stateNode!=null)Kg(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(D(166));return We(e),null}if(t=nr(Ut.current),co(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[bt]=e,r[ps]=s,t=(e.mode&1)!==0,n){case"dialog":fe("cancel",r),fe("close",r);break;case"iframe":case"object":case"embed":fe("load",r);break;case"video":case"audio":for(i=0;i<Bi.length;i++)fe(Bi[i],r);break;case"source":fe("error",r);break;case"img":case"image":case"link":fe("error",r),fe("load",r);break;case"details":fe("toggle",r);break;case"input":Ph(r,s),fe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},fe("invalid",r);break;case"textarea":Lh(r,s),fe("invalid",r)}Cu(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&uo(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&uo(r.textContent,a,t),i=["children",""+a]):is.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&fe("scroll",r)}switch(n){case"input":to(r),Oh(r,s,!0);break;case"textarea":to(r),Dh(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Yo)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Em(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[bt]=e,t[ps]=r,Hg(t,e,!1,!1),e.stateNode=t;e:{switch(o=Su(n,r),n){case"dialog":fe("cancel",t),fe("close",t),i=r;break;case"iframe":case"object":case"embed":fe("load",t),i=r;break;case"video":case"audio":for(i=0;i<Bi.length;i++)fe(Bi[i],t);i=r;break;case"source":fe("error",t),i=r;break;case"img":case"image":case"link":fe("error",t),fe("load",t),i=r;break;case"details":fe("toggle",t),i=r;break;case"input":Ph(t,r),i=yu(t,r),fe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ve({},r,{value:void 0}),fe("invalid",t);break;case"textarea":Lh(t,r),i=Eu(t,r),fe("invalid",t);break;default:i=r}Cu(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Sm(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&wm(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ss(t,l):typeof l=="number"&&ss(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(is.hasOwnProperty(s)?l!=null&&s==="onScroll"&&fe("scroll",t):l!=null&&Dc(t,s,l,o))}switch(n){case"input":to(t),Oh(t,r,!1);break;case"textarea":to(t),Dh(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Fn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Br(t,!!r.multiple,s,!1):r.defaultValue!=null&&Br(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Yo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return We(e),null;case 6:if(t&&e.stateNode!=null)Vg(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(D(166));if(n=nr(gs.current),nr(Ut.current),co(e)){if(r=e.stateNode,n=e.memoizedProps,r[bt]=e,(s=r.nodeValue!==n)&&(t=ct,t!==null))switch(t.tag){case 3:uo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&uo(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[bt]=e,e.stateNode=r}return We(e),null;case 13:if(me(ye),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ge&&ut!==null&&e.mode&1&&!(e.flags&128))cg(),ni(),e.flags|=98560,s=!1;else if(s=co(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(D(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(D(317));s[bt]=e}else ni(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;We(e),s=!1}else Rt!==null&&(rc(Rt),Rt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ye.current&1?xe===0&&(xe=3):gd())),e.updateQueue!==null&&(e.flags|=4),We(e),null);case 4:return ii(),qu(t,e),t===null&&hs(e.stateNode.containerInfo),We(e),null;case 10:return Zc(e.type._context),We(e),null;case 17:return rt(e.type)&&qo(),We(e),null;case 19:if(me(ye),s=e.memoizedState,s===null)return We(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Di(s,!1);else{if(xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=na(t),o!==null){for(e.flags|=128,Di(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return he(ye,ye.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ce()>oi&&(e.flags|=128,r=!0,Di(s,!1),e.lanes=4194304)}else{if(!r)if(t=na(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Di(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ge)return We(e),null}else 2*Ce()-s.renderingStartTime>oi&&n!==1073741824&&(e.flags|=128,r=!0,Di(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ce(),e.sibling=null,n=ye.current,he(ye,r?n&1|2:n&1),e):(We(e),null);case 22:case 23:return md(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?lt&1073741824&&(We(e),e.subtreeFlags&6&&(e.flags|=8192)):We(e),null;case 24:return null;case 25:return null}throw Error(D(156,e.tag))}function uw(t,e){switch(qc(e),e.tag){case 1:return rt(e.type)&&qo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ii(),me(nt),me(Be),id(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return rd(e),null;case 13:if(me(ye),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(D(340));ni()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return me(ye),null;case 4:return ii(),null;case 10:return Zc(e.type._context),null;case 22:case 23:return md(),null;case 24:return null;default:return null}}var po=!1,Ge=!1,cw=typeof WeakSet=="function"?WeakSet:Set,G=null;function Fr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ee(t,e,r)}else n.current=null}function Qu(t,e,n){try{n()}catch(r){Ee(t,e,r)}}var If=!1;function dw(t,e){if(Lu=Ho,t=Xm(),Vc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var g;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)h=d,d=g;for(;;){if(d===t)break t;if(h===n&&++u===i&&(a=o),h===s&&++c===r&&(l=o),(g=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Du={focusedElem:t,selectionRange:n},Ho=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var E=_.memoizedProps,C=_.memoizedState,f=e.stateNode,p=f.getSnapshotBeforeUpdate(e.elementType===e.type?E:St(e.type,E),C);f.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(k){Ee(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return _=If,If=!1,_}function Qi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Qu(e,n,s)}i=i.next}while(i!==r)}}function Ka(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Xu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Yg(t){var e=t.alternate;e!==null&&(t.alternate=null,Yg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[bt],delete e[ps],delete e[Uu],delete e[VE],delete e[YE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function qg(t){return t.tag===5||t.tag===3||t.tag===4}function Rf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ju(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Yo));else if(r!==4&&(t=t.child,t!==null))for(Ju(t,e,n),t=t.sibling;t!==null;)Ju(t,e,n),t=t.sibling}function Zu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Zu(t,e,n),t=t.sibling;t!==null;)Zu(t,e,n),t=t.sibling}var be=null,It=!1;function dn(t,e,n){for(n=n.child;n!==null;)Qg(t,e,n),n=n.sibling}function Qg(t,e,n){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(ja,n)}catch{}switch(n.tag){case 5:Ge||Fr(n,e);case 6:var r=be,i=It;be=null,dn(t,e,n),be=r,It=i,be!==null&&(It?(t=be,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):be.removeChild(n.stateNode));break;case 18:be!==null&&(It?(t=be,n=n.stateNode,t.nodeType===8?Ul(t.parentNode,n):t.nodeType===1&&Ul(t,n),us(t)):Ul(be,n.stateNode));break;case 4:r=be,i=It,be=n.stateNode.containerInfo,It=!0,dn(t,e,n),be=r,It=i;break;case 0:case 11:case 14:case 15:if(!Ge&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Qu(n,e,o),i=i.next}while(i!==r)}dn(t,e,n);break;case 1:if(!Ge&&(Fr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ee(n,e,a)}dn(t,e,n);break;case 21:dn(t,e,n);break;case 22:n.mode&1?(Ge=(r=Ge)||n.memoizedState!==null,dn(t,e,n),Ge=r):dn(t,e,n);break;default:dn(t,e,n)}}function kf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new cw),e.forEach(function(r){var i=Ew.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ct(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:be=a.stateNode,It=!1;break e;case 3:be=a.stateNode.containerInfo,It=!0;break e;case 4:be=a.stateNode.containerInfo,It=!0;break e}a=a.return}if(be===null)throw Error(D(160));Qg(s,o,i),be=null,It=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Ee(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Xg(e,t),e=e.sibling}function Xg(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ct(e,t),Lt(t),r&4){try{Qi(3,t,t.return),Ka(3,t)}catch(E){Ee(t,t.return,E)}try{Qi(5,t,t.return)}catch(E){Ee(t,t.return,E)}}break;case 1:Ct(e,t),Lt(t),r&512&&n!==null&&Fr(n,n.return);break;case 5:if(Ct(e,t),Lt(t),r&512&&n!==null&&Fr(n,n.return),t.flags&32){var i=t.stateNode;try{ss(i,"")}catch(E){Ee(t,t.return,E)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&_m(i,s),Su(a,o);var u=Su(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?Sm(i,d):c==="dangerouslySetInnerHTML"?wm(i,d):c==="children"?ss(i,d):Dc(i,c,d,u)}switch(a){case"input":_u(i,s);break;case"textarea":vm(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Br(i,!!s.multiple,g,!1):h!==!!s.multiple&&(s.defaultValue!=null?Br(i,!!s.multiple,s.defaultValue,!0):Br(i,!!s.multiple,s.multiple?[]:"",!1))}i[ps]=s}catch(E){Ee(t,t.return,E)}}break;case 6:if(Ct(e,t),Lt(t),r&4){if(t.stateNode===null)throw Error(D(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(E){Ee(t,t.return,E)}}break;case 3:if(Ct(e,t),Lt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{us(e.containerInfo)}catch(E){Ee(t,t.return,E)}break;case 4:Ct(e,t),Lt(t);break;case 13:Ct(e,t),Lt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(fd=Ce())),r&4&&kf(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Ge=(u=Ge)||c,Ct(e,t),Ge=u):Ct(e,t),Lt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(G=t,c=t.child;c!==null;){for(d=G=c;G!==null;){switch(h=G,g=h.child,h.tag){case 0:case 11:case 14:case 15:Qi(4,h,h.return);break;case 1:Fr(h,h.return);var _=h.stateNode;if(typeof _.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(E){Ee(r,n,E)}}break;case 5:Fr(h,h.return);break;case 22:if(h.memoizedState!==null){Nf(d);continue}}g!==null?(g.return=h,G=g):Nf(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Cm("display",o))}catch(E){Ee(t,t.return,E)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(E){Ee(t,t.return,E)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ct(e,t),Lt(t),r&4&&kf(t);break;case 21:break;default:Ct(e,t),Lt(t)}}function Lt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(qg(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ss(i,""),r.flags&=-33);var s=Rf(t);Zu(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Rf(t);Ju(t,a,o);break;default:throw Error(D(161))}}catch(l){Ee(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function hw(t,e,n){G=t,Jg(t)}function Jg(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var i=G,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||po;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ge;a=po;var u=Ge;if(po=o,(Ge=l)&&!u)for(G=i;G!==null;)o=G,l=o.child,o.tag===22&&o.memoizedState!==null?xf(i):l!==null?(l.return=o,G=l):xf(i);for(;s!==null;)G=s,Jg(s),s=s.sibling;G=i,po=a,Ge=u}Tf(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,G=s):Tf(t)}}function Tf(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ge||Ka(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ge)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:St(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&cf(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}cf(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&us(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}Ge||e.flags&512&&Xu(e)}catch(h){Ee(e,e.return,h)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function Nf(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function xf(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ka(4,e)}catch(l){Ee(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ee(e,i,l)}}var s=e.return;try{Xu(e)}catch(l){Ee(e,s,l)}break;case 5:var o=e.return;try{Xu(e)}catch(l){Ee(e,o,l)}}}catch(l){Ee(e,e.return,l)}if(e===t){G=null;break}var a=e.sibling;if(a!==null){a.return=e.return,G=a;break}G=e.return}}var fw=Math.ceil,sa=an.ReactCurrentDispatcher,dd=an.ReactCurrentOwner,_t=an.ReactCurrentBatchConfig,ne=0,De=null,Ie=null,Ue=0,lt=0,Wr=Kn(0),xe=0,Es=null,hr=0,Va=0,hd=0,Xi=null,Ze=null,fd=0,oi=1/0,zt=null,oa=!1,ec=null,An=null,mo=!1,Sn=null,aa=0,Ji=0,tc=null,Oo=-1,Lo=0;function qe(){return ne&6?Ce():Oo!==-1?Oo:Oo=Ce()}function Pn(t){return t.mode&1?ne&2&&Ue!==0?Ue&-Ue:QE.transition!==null?(Lo===0&&(Lo=bm()),Lo):(t=oe,t!==0||(t=window.event,t=t===void 0?16:$m(t.type)),t):1}function At(t,e,n,r){if(50<Ji)throw Ji=0,tc=null,Error(D(185));bs(t,n,r),(!(ne&2)||t!==De)&&(t===De&&(!(ne&2)&&(Va|=n),xe===4&&yn(t,Ue)),it(t,r),n===1&&ne===0&&!(e.mode&1)&&(oi=Ce()+500,Ba&&Vn()))}function it(t,e){var n=t.callbackNode;Q0(t,e);var r=zo(t,t===De?Ue:0);if(r===0)n!==null&&Uh(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Uh(n),e===1)t.tag===0?qE(Af.bind(null,t)):ag(Af.bind(null,t)),HE(function(){!(ne&6)&&Vn()}),n=null;else{switch(Mm(r)){case 1:n=Fc;break;case 4:n=Lm;break;case 16:n=Bo;break;case 536870912:n=Dm;break;default:n=Bo}n=oy(n,Zg.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Zg(t,e){if(Oo=-1,Lo=0,ne&6)throw Error(D(327));var n=t.callbackNode;if(Yr()&&t.callbackNode!==n)return null;var r=zo(t,t===De?Ue:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=la(t,r);else{e=r;var i=ne;ne|=2;var s=ty();(De!==t||Ue!==e)&&(zt=null,oi=Ce()+500,sr(t,e));do try{gw();break}catch(a){ey(t,a)}while(1);Jc(),sa.current=s,ne=i,Ie!==null?e=0:(De=null,Ue=0,e=xe)}if(e!==0){if(e===2&&(i=Nu(t),i!==0&&(r=i,e=nc(t,i))),e===1)throw n=Es,sr(t,0),yn(t,r),it(t,Ce()),n;if(e===6)yn(t,r);else{if(i=t.current.alternate,!(r&30)&&!pw(i)&&(e=la(t,r),e===2&&(s=Nu(t),s!==0&&(r=s,e=nc(t,s))),e===1))throw n=Es,sr(t,0),yn(t,r),it(t,Ce()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(D(345));case 2:Qn(t,Ze,zt);break;case 3:if(yn(t,r),(r&130023424)===r&&(e=fd+500-Ce(),10<e)){if(zo(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){qe(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Mu(Qn.bind(null,t,Ze,zt),e);break}Qn(t,Ze,zt);break;case 4:if(yn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-xt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ce()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*fw(r/1960))-r,10<r){t.timeoutHandle=Mu(Qn.bind(null,t,Ze,zt),r);break}Qn(t,Ze,zt);break;case 5:Qn(t,Ze,zt);break;default:throw Error(D(329))}}}return it(t,Ce()),t.callbackNode===n?Zg.bind(null,t):null}function nc(t,e){var n=Xi;return t.current.memoizedState.isDehydrated&&(sr(t,e).flags|=256),t=la(t,e),t!==2&&(e=Ze,Ze=n,e!==null&&rc(e)),t}function rc(t){Ze===null?Ze=t:Ze.push.apply(Ze,t)}function pw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ot(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function yn(t,e){for(e&=~hd,e&=~Va,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-xt(e),r=1<<n;t[n]=-1,e&=~r}}function Af(t){if(ne&6)throw Error(D(327));Yr();var e=zo(t,0);if(!(e&1))return it(t,Ce()),null;var n=la(t,e);if(t.tag!==0&&n===2){var r=Nu(t);r!==0&&(e=r,n=nc(t,r))}if(n===1)throw n=Es,sr(t,0),yn(t,e),it(t,Ce()),n;if(n===6)throw Error(D(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Qn(t,Ze,zt),it(t,Ce()),null}function pd(t,e){var n=ne;ne|=1;try{return t(e)}finally{ne=n,ne===0&&(oi=Ce()+500,Ba&&Vn())}}function fr(t){Sn!==null&&Sn.tag===0&&!(ne&6)&&Yr();var e=ne;ne|=1;var n=_t.transition,r=oe;try{if(_t.transition=null,oe=1,t)return t()}finally{oe=r,_t.transition=n,ne=e,!(ne&6)&&Vn()}}function md(){lt=Wr.current,me(Wr)}function sr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,zE(n)),Ie!==null)for(n=Ie.return;n!==null;){var r=n;switch(qc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&qo();break;case 3:ii(),me(nt),me(Be),id();break;case 5:rd(r);break;case 4:ii();break;case 13:me(ye);break;case 19:me(ye);break;case 10:Zc(r.type._context);break;case 22:case 23:md()}n=n.return}if(De=t,Ie=t=On(t.current,null),Ue=lt=e,xe=0,Es=null,hd=Va=hr=0,Ze=Xi=null,tr!==null){for(e=0;e<tr.length;e++)if(n=tr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}tr=null}return t}function ey(t,e){do{var n=Ie;try{if(Jc(),xo.current=ia,ra){for(var r=_e.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ra=!1}if(dr=0,Pe=ke=_e=null,qi=!1,ys=0,dd.current=null,n===null||n.return===null){xe=1,Es=e,Ie=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Ue,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var g=yf(o);if(g!==null){g.flags&=-257,_f(g,o,a,s,e),g.mode&1&&gf(s,u,e),e=g,l=u;var _=e.updateQueue;if(_===null){var E=new Set;E.add(l),e.updateQueue=E}else _.add(l);break e}else{if(!(e&1)){gf(s,u,e),gd();break e}l=Error(D(426))}}else if(ge&&a.mode&1){var C=yf(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),_f(C,o,a,s,e),Qc(si(l,a));break e}}s=l=si(l,a),xe!==4&&(xe=2),Xi===null?Xi=[s]:Xi.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var f=Ug(s,l,e);uf(s,f);break e;case 1:a=l;var p=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof p.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(An===null||!An.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=jg(s,a,e);uf(s,k);break e}}s=s.return}while(s!==null)}ry(n)}catch(O){e=O,Ie===n&&n!==null&&(Ie=n=n.return);continue}break}while(1)}function ty(){var t=sa.current;return sa.current=ia,t===null?ia:t}function gd(){(xe===0||xe===3||xe===2)&&(xe=4),De===null||!(hr&268435455)&&!(Va&268435455)||yn(De,Ue)}function la(t,e){var n=ne;ne|=2;var r=ty();(De!==t||Ue!==e)&&(zt=null,sr(t,e));do try{mw();break}catch(i){ey(t,i)}while(1);if(Jc(),ne=n,sa.current=r,Ie!==null)throw Error(D(261));return De=null,Ue=0,xe}function mw(){for(;Ie!==null;)ny(Ie)}function gw(){for(;Ie!==null&&!G0();)ny(Ie)}function ny(t){var e=sy(t.alternate,t,lt);t.memoizedProps=t.pendingProps,e===null?ry(t):Ie=e,dd.current=null}function ry(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=uw(n,e),n!==null){n.flags&=32767,Ie=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xe=6,Ie=null;return}}else if(n=lw(n,e,lt),n!==null){Ie=n;return}if(e=e.sibling,e!==null){Ie=e;return}Ie=e=t}while(e!==null);xe===0&&(xe=5)}function Qn(t,e,n){var r=oe,i=_t.transition;try{_t.transition=null,oe=1,yw(t,e,n,r)}finally{_t.transition=i,oe=r}return null}function yw(t,e,n,r){do Yr();while(Sn!==null);if(ne&6)throw Error(D(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(D(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(X0(t,s),t===De&&(Ie=De=null,Ue=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||mo||(mo=!0,oy(Bo,function(){return Yr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=_t.transition,_t.transition=null;var o=oe;oe=1;var a=ne;ne|=4,dd.current=null,dw(t,n),Xg(n,t),UE(Du),Ho=!!Lu,Du=Lu=null,t.current=n,hw(n),$0(),ne=a,oe=o,_t.transition=s}else t.current=n;if(mo&&(mo=!1,Sn=t,aa=i),s=t.pendingLanes,s===0&&(An=null),H0(n.stateNode),it(t,Ce()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(oa)throw oa=!1,t=ec,ec=null,t;return aa&1&&t.tag!==0&&Yr(),s=t.pendingLanes,s&1?t===tc?Ji++:(Ji=0,tc=t):Ji=0,Vn(),null}function Yr(){if(Sn!==null){var t=Mm(aa),e=_t.transition,n=oe;try{if(_t.transition=null,oe=16>t?16:t,Sn===null)var r=!1;else{if(t=Sn,Sn=null,aa=0,ne&6)throw Error(D(331));var i=ne;for(ne|=4,G=t.current;G!==null;){var s=G,o=s.child;if(G.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(G=u;G!==null;){var c=G;switch(c.tag){case 0:case 11:case 15:Qi(8,c,s)}var d=c.child;if(d!==null)d.return=c,G=d;else for(;G!==null;){c=G;var h=c.sibling,g=c.return;if(Yg(c),c===u){G=null;break}if(h!==null){h.return=g,G=h;break}G=g}}}var _=s.alternate;if(_!==null){var E=_.child;if(E!==null){_.child=null;do{var C=E.sibling;E.sibling=null,E=C}while(E!==null)}}G=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,G=o;else e:for(;G!==null;){if(s=G,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Qi(9,s,s.return)}var f=s.sibling;if(f!==null){f.return=s.return,G=f;break e}G=s.return}}var p=t.current;for(G=p;G!==null;){o=G;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,G=y;else e:for(o=p;G!==null;){if(a=G,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ka(9,a)}}catch(O){Ee(a,a.return,O)}if(a===o){G=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,G=k;break e}G=a.return}}if(ne=i,Vn(),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(ja,t)}catch{}r=!0}return r}finally{oe=n,_t.transition=e}}return!1}function Pf(t,e,n){e=si(n,e),e=Ug(t,e,1),t=xn(t,e,1),e=qe(),t!==null&&(bs(t,1,e),it(t,e))}function Ee(t,e,n){if(t.tag===3)Pf(t,t,n);else for(;e!==null;){if(e.tag===3){Pf(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(An===null||!An.has(r))){t=si(n,t),t=jg(e,t,1),e=xn(e,t,1),t=qe(),e!==null&&(bs(e,1,t),it(e,t));break}}e=e.return}}function _w(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=qe(),t.pingedLanes|=t.suspendedLanes&n,De===t&&(Ue&n)===n&&(xe===4||xe===3&&(Ue&130023424)===Ue&&500>Ce()-fd?sr(t,0):hd|=n),it(t,e)}function iy(t,e){e===0&&(t.mode&1?(e=io,io<<=1,!(io&130023424)&&(io=4194304)):e=1);var n=qe();t=tn(t,e),t!==null&&(bs(t,e,n),it(t,n))}function vw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),iy(t,n)}function Ew(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(e),iy(t,n)}var sy;sy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||nt.current)et=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return et=!1,aw(t,e,n);et=!!(t.flags&131072)}else et=!1,ge&&e.flags&1048576&&lg(e,Jo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Po(t,e),t=e.pendingProps;var i=ti(e,Be.current);Vr(e,n),i=od(null,e,r,t,i,n);var s=ad();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rt(r)?(s=!0,Qo(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,td(e),i.updater=za,e.stateNode=i,i._reactInternals=e,Bu(e,r,t,n),e=Ku(null,e,r,!0,s,n)):(e.tag=0,ge&&s&&Yc(e),Ve(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Po(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Cw(r),t=St(r,t),i){case 0:e=Hu(null,e,r,t,n);break e;case 1:e=wf(null,e,r,t,n);break e;case 11:e=vf(null,e,r,t,n);break e;case 14:e=Ef(null,e,r,St(r.type,t),n);break e}throw Error(D(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:St(r,i),Hu(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:St(r,i),wf(t,e,r,i,n);case 3:e:{if($g(e),t===null)throw Error(D(387));r=e.pendingProps,s=e.memoizedState,i=s.element,hg(t,e),ta(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=si(Error(D(423)),e),e=Cf(t,e,r,n,i);break e}else if(r!==i){i=si(Error(D(424)),e),e=Cf(t,e,r,n,i);break e}else for(ut=Nn(e.stateNode.containerInfo.firstChild),ct=e,ge=!0,Rt=null,n=gg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ni(),r===i){e=nn(t,e,n);break e}Ve(t,e,r,n)}e=e.child}return e;case 5:return yg(e),t===null&&Wu(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,bu(r,i)?o=null:s!==null&&bu(r,s)&&(e.flags|=32),Gg(t,e),Ve(t,e,o,n),e.child;case 6:return t===null&&Wu(e),null;case 13:return Bg(t,e,n);case 4:return nd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ri(e,null,r,n):Ve(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:St(r,i),vf(t,e,r,i,n);case 7:return Ve(t,e,e.pendingProps,n),e.child;case 8:return Ve(t,e,e.pendingProps.children,n),e.child;case 12:return Ve(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,he(Zo,r._currentValue),r._currentValue=o,s!==null)if(Ot(s.value,o)){if(s.children===i.children&&!nt.current){e=nn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Xt(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Gu(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(D(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Gu(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ve(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Vr(e,n),i=vt(i),r=r(i),e.flags|=1,Ve(t,e,r,n),e.child;case 14:return r=e.type,i=St(r,e.pendingProps),i=St(r.type,i),Ef(t,e,r,i,n);case 15:return Fg(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:St(r,i),Po(t,e),e.tag=1,rt(r)?(t=!0,Qo(e)):t=!1,Vr(e,n),pg(e,r,i),Bu(e,r,i,n),Ku(null,e,r,!0,t,n);case 19:return zg(t,e,n);case 22:return Wg(t,e,n)}throw Error(D(156,e.tag))};function oy(t,e){return Om(t,e)}function ww(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yt(t,e,n,r){return new ww(t,e,n,r)}function yd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Cw(t){if(typeof t=="function")return yd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Mc)return 11;if(t===Uc)return 14}return 2}function On(t,e){var n=t.alternate;return n===null?(n=yt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Do(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")yd(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ar:return or(n.children,i,s,e);case bc:o=8,i|=8;break;case fu:return t=yt(12,n,e,i|2),t.elementType=fu,t.lanes=s,t;case pu:return t=yt(13,n,e,i),t.elementType=pu,t.lanes=s,t;case mu:return t=yt(19,n,e,i),t.elementType=mu,t.lanes=s,t;case mm:return Ya(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case fm:o=10;break e;case pm:o=9;break e;case Mc:o=11;break e;case Uc:o=14;break e;case pn:o=16,r=null;break e}throw Error(D(130,t==null?t:typeof t,""))}return e=yt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function or(t,e,n,r){return t=yt(7,t,r,e),t.lanes=n,t}function Ya(t,e,n,r){return t=yt(22,t,r,e),t.elementType=mm,t.lanes=n,t.stateNode={isHidden:!1},t}function Hl(t,e,n){return t=yt(6,t,null,e),t.lanes=n,t}function Kl(t,e,n){return e=yt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Sw(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kl(0),this.expirationTimes=kl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kl(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function _d(t,e,n,r,i,s,o,a,l){return t=new Sw(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=yt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},td(s),t}function Iw(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ay(t){if(!t)return Wn;t=t._reactInternals;e:{if(Cr(t)!==t||t.tag!==1)throw Error(D(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(D(171))}if(t.tag===1){var n=t.type;if(rt(n))return og(t,n,e)}return e}function ly(t,e,n,r,i,s,o,a,l){return t=_d(n,r,!0,t,i,s,o,a,l),t.context=ay(null),n=t.current,r=qe(),i=Pn(n),s=Xt(r,i),s.callback=e??null,xn(n,s,i),t.current.lanes=i,bs(t,i,r),it(t,r),t}function qa(t,e,n,r){var i=e.current,s=qe(),o=Pn(i);return n=ay(n),e.context===null?e.context=n:e.pendingContext=n,e=Xt(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=xn(i,e,o),t!==null&&(At(t,i,o,s),No(t,i,o)),o}function ua(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Of(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function vd(t,e){Of(t,e),(t=t.alternate)&&Of(t,e)}function Rw(){return null}var uy=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ed(t){this._internalRoot=t}Qa.prototype.render=Ed.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(D(409));qa(t,e,null,null)};Qa.prototype.unmount=Ed.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;fr(function(){qa(null,t,null,null)}),e[en]=null}};function Qa(t){this._internalRoot=t}Qa.prototype.unstable_scheduleHydration=function(t){if(t){var e=Fm();t={blockedOn:null,target:t,priority:e};for(var n=0;n<gn.length&&e!==0&&e<gn[n].priority;n++);gn.splice(n,0,t),n===0&&Gm(t)}};function wd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Xa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Lf(){}function kw(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=ua(o);s.call(u)}}var o=ly(e,r,t,0,null,!1,!1,"",Lf);return t._reactRootContainer=o,t[en]=o.current,hs(t.nodeType===8?t.parentNode:t),fr(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=ua(l);a.call(u)}}var l=_d(t,0,!1,null,null,!1,!1,"",Lf);return t._reactRootContainer=l,t[en]=l.current,hs(t.nodeType===8?t.parentNode:t),fr(function(){qa(e,l,n,r)}),l}function Ja(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=ua(o);a.call(l)}}qa(e,o,t,i)}else o=kw(n,e,t,i,r);return ua(o)}Um=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=$i(e.pendingLanes);n!==0&&(Wc(e,n|1),it(e,Ce()),!(ne&6)&&(oi=Ce()+500,Vn()))}break;case 13:fr(function(){var r=tn(t,1);if(r!==null){var i=qe();At(r,t,1,i)}}),vd(t,1)}};Gc=function(t){if(t.tag===13){var e=tn(t,134217728);if(e!==null){var n=qe();At(e,t,134217728,n)}vd(t,134217728)}};jm=function(t){if(t.tag===13){var e=Pn(t),n=tn(t,e);if(n!==null){var r=qe();At(n,t,e,r)}vd(t,e)}};Fm=function(){return oe};Wm=function(t,e){var n=oe;try{return oe=t,e()}finally{oe=n}};Ru=function(t,e,n){switch(e){case"input":if(_u(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=$a(r);if(!i)throw Error(D(90));ym(r),_u(r,i)}}}break;case"textarea":vm(t,n);break;case"select":e=n.value,e!=null&&Br(t,!!n.multiple,e,!1)}};km=pd;Tm=fr;var Tw={usingClientEntryPoint:!1,Events:[Us,Dr,$a,Im,Rm,pd]},bi={findFiberByHostInstance:er,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Nw={bundleType:bi.bundleType,version:bi.version,rendererPackageName:bi.rendererPackageName,rendererConfig:bi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:an.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Am(t),t===null?null:t.stateNode},findFiberByHostInstance:bi.findFiberByHostInstance||Rw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var go=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!go.isDisabled&&go.supportsFiber)try{ja=go.inject(Nw),Mt=go}catch{}}ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tw;ht.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wd(e))throw Error(D(200));return Iw(t,e,null,n)};ht.createRoot=function(t,e){if(!wd(t))throw Error(D(299));var n=!1,r="",i=uy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=_d(t,1,!1,null,null,n,!1,r,i),t[en]=e.current,hs(t.nodeType===8?t.parentNode:t),new Ed(e)};ht.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(D(188)):(t=Object.keys(t).join(","),Error(D(268,t)));return t=Am(e),t=t===null?null:t.stateNode,t};ht.flushSync=function(t){return fr(t)};ht.hydrate=function(t,e,n){if(!Xa(e))throw Error(D(200));return Ja(null,t,e,!0,n)};ht.hydrateRoot=function(t,e,n){if(!wd(t))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=uy;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=ly(e,null,t,1,n??null,i,!1,s,o),t[en]=e.current,hs(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Qa(e)};ht.render=function(t,e,n){if(!Xa(e))throw Error(D(200));return Ja(null,t,e,!1,n)};ht.unmountComponentAtNode=function(t){if(!Xa(t))throw Error(D(40));return t._reactRootContainer?(fr(function(){Ja(null,null,t,!1,function(){t._reactRootContainer=null,t[en]=null})}),!0):!1};ht.unstable_batchedUpdates=pd;ht.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Xa(n))throw Error(D(200));if(t==null||t._reactInternals===void 0)throw Error(D(38));return Ja(t,e,n,!1,r)};ht.version="18.2.0-next-9e3b772b8-20220608";function cy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cy)}catch(t){console.error(t)}}cy(),lm.exports=ht;var xw=lm.exports,Df=xw;du.createRoot=Df.createRoot,du.hydrateRoot=Df.hydrateRoot;/**
 * @remix-run/router v1.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ws(){return ws=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ws.apply(this,arguments)}var In;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(In||(In={}));const bf="popstate";function Aw(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return ic("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:ca(i)}return Ow(e,n,null,t)}function Re(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Cd(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Pw(){return Math.random().toString(36).substr(2,8)}function Mf(t,e){return{usr:t.state,key:t.key,idx:e}}function ic(t,e,n,r){return n===void 0&&(n=null),ws({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?gi(e):e,{state:n,key:e&&e.key||r||Pw()})}function ca(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function gi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Ow(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=In.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(ws({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function d(){a=In.Pop;let C=c(),f=C==null?null:C-u;u=C,l&&l({action:a,location:E.location,delta:f})}function h(C,f){a=In.Push;let p=ic(E.location,C,f);n&&n(p,C),u=c()+1;let y=Mf(p,u),k=E.createHref(p);try{o.pushState(y,"",k)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(k)}s&&l&&l({action:a,location:E.location,delta:1})}function g(C,f){a=In.Replace;let p=ic(E.location,C,f);n&&n(p,C),u=c();let y=Mf(p,u),k=E.createHref(p);o.replaceState(y,"",k),s&&l&&l({action:a,location:E.location,delta:0})}function _(C){let f=i.location.origin!=="null"?i.location.origin:i.location.href,p=typeof C=="string"?C:ca(C);return Re(f,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,f)}let E={get action(){return a},get location(){return t(i,o)},listen(C){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(bf,d),l=C,()=>{i.removeEventListener(bf,d),l=null}},createHref(C){return e(i,C)},createURL:_,encodeLocation(C){let f=_(C);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:h,replace:g,go(C){return o.go(C)}};return E}var Uf;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Uf||(Uf={}));function Lw(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?gi(e):e,i=Sd(r.pathname||"/",n);if(i==null)return null;let s=dy(t);Dw(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=Bw(s[a],Kw(i));return o}function dy(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Re(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Ln([r,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&(Re(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),dy(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:Gw(u,s.index),routesMeta:c})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of hy(s.path))i(s,o,l)}),e}function hy(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=hy(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Dw(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:$w(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const bw=/^:\w+$/,Mw=3,Uw=2,jw=1,Fw=10,Ww=-2,jf=t=>t==="*";function Gw(t,e){let n=t.split("/"),r=n.length;return n.some(jf)&&(r+=Ww),e&&(r+=Uw),n.filter(i=>!jf(i)).reduce((i,s)=>i+(bw.test(s)?Mw:s===""?jw:Fw),r)}function $w(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Bw(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",c=zw({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);let d=a.route;s.push({params:r,pathname:Ln([i,c.pathname]),pathnameBase:Qw(Ln([i,c.pathnameBase])),route:d}),c.pathnameBase!=="/"&&(i=Ln([i,c.pathnameBase]))}return s}function zw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Hw(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,c,d)=>{if(c==="*"){let h=a[d]||"";o=s.slice(0,s.length-h.length).replace(/(.)\/+$/,"$1")}return u[c]=Vw(a[d]||"",c),u},{}),pathname:s,pathnameBase:o,pattern:t}}function Hw(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Cd(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Kw(t){try{return decodeURI(t)}catch(e){return Cd(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Vw(t,e){try{return decodeURIComponent(t)}catch(n){return Cd(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Sd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Yw(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?gi(t):t;return{pathname:n?n.startsWith("/")?n:qw(n,e):e,search:Xw(r),hash:Jw(i)}}function qw(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Vl(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fy(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function py(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=gi(t):(i=ws({},t),Re(!i.pathname||!i.pathname.includes("?"),Vl("?","pathname","search",i)),Re(!i.pathname||!i.pathname.includes("#"),Vl("#","pathname","hash",i)),Re(!i.search||!i.search.includes("#"),Vl("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(r||o==null)a=n;else{let d=e.length-1;if(o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=Yw(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Ln=t=>t.join("/").replace(/\/\/+/g,"/"),Qw=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Xw=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Jw=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Zw(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const my=["post","put","patch","delete"];new Set(my);const eC=["get",...my];new Set(eC);/**
 * React Router v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function da(){return da=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},da.apply(this,arguments)}const Id=x.createContext(null),tC=x.createContext(null),yi=x.createContext(null),Za=x.createContext(null),Sr=x.createContext({outlet:null,matches:[],isDataRoute:!1}),gy=x.createContext(null);function nC(t,e){let{relative:n}=e===void 0?{}:e;Fs()||Re(!1);let{basename:r,navigator:i}=x.useContext(yi),{hash:s,pathname:o,search:a}=_y(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Ln([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Fs(){return x.useContext(Za)!=null}function el(){return Fs()||Re(!1),x.useContext(Za).location}function yy(t){x.useContext(yi).static||x.useLayoutEffect(t)}function ln(){let{isDataRoute:t}=x.useContext(Sr);return t?mC():rC()}function rC(){Fs()||Re(!1);let t=x.useContext(Id),{basename:e,navigator:n}=x.useContext(yi),{matches:r}=x.useContext(Sr),{pathname:i}=el(),s=JSON.stringify(fy(r).map(l=>l.pathnameBase)),o=x.useRef(!1);return yy(()=>{o.current=!0}),x.useCallback(function(l,u){if(u===void 0&&(u={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let c=py(l,JSON.parse(s),i,u.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:Ln([e,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[e,n,s,i,t])}function _y(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=x.useContext(Sr),{pathname:i}=el(),s=JSON.stringify(fy(r).map(o=>o.pathnameBase));return x.useMemo(()=>py(t,JSON.parse(s),i,n==="path"),[t,s,i,n])}function iC(t,e){return sC(t,e)}function sC(t,e,n){Fs()||Re(!1);let{navigator:r}=x.useContext(yi),{matches:i}=x.useContext(Sr),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let l=el(),u;if(e){var c;let E=typeof e=="string"?gi(e):e;a==="/"||(c=E.pathname)!=null&&c.startsWith(a)||Re(!1),u=E}else u=l;let d=u.pathname||"/",h=a==="/"?d:d.slice(a.length)||"/",g=Lw(t,{pathname:h}),_=cC(g&&g.map(E=>Object.assign({},E,{params:Object.assign({},o,E.params),pathname:Ln([a,r.encodeLocation?r.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?a:Ln([a,r.encodeLocation?r.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),i,n);return e&&_?x.createElement(Za.Provider,{value:{location:da({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:In.Pop}},_):_}function oC(){let t=pC(),e=Zw(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),n?x.createElement("pre",{style:i},n):null,s)}const aC=x.createElement(oC,null);class lC extends x.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?x.createElement(Sr.Provider,{value:this.props.routeContext},x.createElement(gy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function uC(t){let{routeContext:e,match:n,children:r}=t,i=x.useContext(Id);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),x.createElement(Sr.Provider,{value:e},r)}function cC(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let s=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let a=s.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||Re(!1),s=s.slice(0,Math.min(s.length,a+1))}return s.reduceRight((a,l,u)=>{let c=l.route.id?o==null?void 0:o[l.route.id]:null,d=null;n&&(d=l.route.errorElement||aC);let h=e.concat(s.slice(0,u+1)),g=()=>{let _;return c?_=d:l.route.Component?_=x.createElement(l.route.Component,null):l.route.element?_=l.route.element:_=a,x.createElement(uC,{match:l,routeContext:{outlet:a,matches:h,isDataRoute:n!=null},children:_})};return n&&(l.route.ErrorBoundary||l.route.errorElement||u===0)?x.createElement(lC,{location:n.location,revalidation:n.revalidation,component:d,error:c,children:g(),routeContext:{outlet:null,matches:h,isDataRoute:!0}}):g()},null)}var vy=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(vy||{}),ha=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ha||{});function dC(t){let e=x.useContext(Id);return e||Re(!1),e}function hC(t){let e=x.useContext(tC);return e||Re(!1),e}function fC(t){let e=x.useContext(Sr);return e||Re(!1),e}function Ey(t){let e=fC(),n=e.matches[e.matches.length-1];return n.route.id||Re(!1),n.route.id}function pC(){var t;let e=x.useContext(gy),n=hC(ha.UseRouteError),r=Ey(ha.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function mC(){let{router:t}=dC(vy.UseNavigateStable),e=Ey(ha.UseNavigateStable),n=x.useRef(!1);return yy(()=>{n.current=!0}),x.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,da({fromRouteId:e},s)))},[t,e])}function fn(t){Re(!1)}function gC(t){let{basename:e="/",children:n=null,location:r,navigationType:i=In.Pop,navigator:s,static:o=!1}=t;Fs()&&Re(!1);let a=e.replace(/^\/*/,"/"),l=x.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof r=="string"&&(r=gi(r));let{pathname:u="/",search:c="",hash:d="",state:h=null,key:g="default"}=r,_=x.useMemo(()=>{let E=Sd(u,a);return E==null?null:{location:{pathname:E,search:c,hash:d,state:h,key:g},navigationType:i}},[a,u,c,d,h,g,i]);return _==null?null:x.createElement(yi.Provider,{value:l},x.createElement(Za.Provider,{children:n,value:_}))}function yC(t){let{children:e,location:n}=t;return iC(sc(e),n)}new Promise(()=>{});function sc(t,e){e===void 0&&(e=[]);let n=[];return x.Children.forEach(t,(r,i)=>{if(!x.isValidElement(r))return;let s=[...e,i];if(r.type===x.Fragment){n.push.apply(n,sc(r.props.children,s));return}r.type!==fn&&Re(!1),!r.props.index||!r.props.children||Re(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=sc(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function oc(){return oc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oc.apply(this,arguments)}function _C(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function vC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function EC(t,e){return t.button===0&&(!e||e==="_self")&&!vC(t)}const wC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],CC="startTransition",Ff=v0[CC];function SC(t){let{basename:e,children:n,future:r,window:i}=t,s=x.useRef();s.current==null&&(s.current=Aw({window:i,v5Compat:!0}));let o=s.current,[a,l]=x.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},c=x.useCallback(d=>{u&&Ff?Ff(()=>l(d)):l(d)},[l,u]);return x.useLayoutEffect(()=>o.listen(c),[o,c]),x.createElement(gC,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o})}const IC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",RC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kC=x.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c}=e,d=_C(e,wC),{basename:h}=x.useContext(yi),g,_=!1;if(typeof u=="string"&&RC.test(u)&&(g=u,IC))try{let p=new URL(window.location.href),y=u.startsWith("//")?new URL(p.protocol+u):new URL(u),k=Sd(y.pathname,h);y.origin===p.origin&&k!=null?u=k+y.search+y.hash:_=!0}catch{}let E=nC(u,{relative:i}),C=TC(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i});function f(p){r&&r(p),p.defaultPrevented||C(p)}return x.createElement("a",oc({},d,{href:g||E,onClick:_||s?r:f,ref:n,target:l}))});var Wf;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(Wf||(Wf={}));var Gf;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Gf||(Gf={}));function TC(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o}=e===void 0?{}:e,a=ln(),l=el(),u=_y(t,{relative:o});return x.useCallback(c=>{if(EC(c,n)){c.preventDefault();let d=r!==void 0?r:ca(l)===ca(u);a(t,{replace:d,state:i,preventScrollReset:s,relative:o})}},[l,a,u,r,i,n,t,s,o])}function NC(t,e){let{capture:n}=e||{};x.useEffect(()=>{let r=n!=null?{capture:n}:void 0;return window.addEventListener("beforeunload",t,r),()=>{window.removeEventListener("beforeunload",t,r)}},[t,n])}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U=function(t,e){if(!t)throw _i(e)},_i=function(t){return new Error("Firebase Database ("+wy.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},xC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Rd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,d=(s&3)<<4|a>>4;let h=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(h=64)),r.push(n[c],n[d],n[h],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Cy(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):xC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new AC;const h=s<<2|a>>4;if(r.push(h),u!==64){const g=a<<4&240|u>>2;if(r.push(g),d!==64){const _=u<<6&192|d;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class AC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Sy=function(t){const e=Cy(t);return Rd.encodeByteArray(e,!0)},fa=function(t){return Sy(t).replace(/\./g,"")},pa=function(t){try{return Rd.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(t){return Iy(void 0,t)}function Iy(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!OC(n)||(t[n]=Iy(t[n],e[n]));return t}function OC(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=()=>LC().__FIREBASE_DEFAULTS__,bC=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},MC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&pa(t[1]);return e&&JSON.parse(e)},kd=()=>{try{return DC()||bC()||MC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ry=t=>{var e,n;return(n=(e=kd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},UC=t=>{const e=Ry(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},ky=()=>{var t;return(t=kd())===null||t===void 0?void 0:t.config},Ty=t=>{var e;return(e=kd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[fa(JSON.stringify(n)),fa(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Td(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function FC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Ny(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function WC(){const t=ze();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function xy(){return wy.NODE_ADMIN===!0}function GC(){try{return typeof indexedDB=="object"}catch{return!1}}function $C(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC="FirebaseError";class Yn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=BC,Object.setPrototypeOf(this,Yn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ws.prototype.create)}}class Ws{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?zC(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Yn(i,a,r)}}function zC(t,e){return t.replace(HC,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const HC=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(t){return JSON.parse(t)}function Te(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Cs(pa(s[0])||""),n=Cs(pa(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},KC=function(t){const e=Ay(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},VC=function(t){const e=Ay(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ai(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function ac(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ma(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function ga(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if($f(s)&&$f(o)){if(!ga(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function $f(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],u,c;for(let d=0;d<80;d++){d<40?d<20?(u=a^s&(o^a),c=1518500249):(u=s^o^a,c=1859775393):d<60?(u=s&o|a&(s|o),c=2400959708):(u=s^o^a,c=3395469782);const h=(i<<5|i>>>27)+u+l+c+r[d]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function qC(t,e){const n=new QC(t,e);return n.subscribe.bind(n)}class QC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");XC(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Yl),i.error===void 0&&(i.error=Yl),i.complete===void 0&&(i.complete=Yl);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Yl(){}function Nd(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,U(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},nl=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(t){return t&&t._delegate?t._delegate:t}class pr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new tl;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tS(e))try{this.getOrInitializeService({instanceIdentifier:Xn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Xn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xn){return this.instances.has(e)}getOptions(e=Xn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:eS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xn){return this.component?this.component.multipleInstances?e:Xn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function eS(t){return t===Xn?void 0:t}function tS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ZC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const rS={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},iS=ae.INFO,sS={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},oS=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=sS[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xd{constructor(e){this.name=e,this._logLevel=iS,this._logHandler=oS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const aS=(t,e)=>e.some(n=>t instanceof n);let Bf,zf;function lS(){return Bf||(Bf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uS(){return zf||(zf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Py=new WeakMap,lc=new WeakMap,Oy=new WeakMap,ql=new WeakMap,Ad=new WeakMap;function cS(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Dn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Py.set(n,t)}).catch(()=>{}),Ad.set(e,t),e}function dS(t){if(lc.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});lc.set(t,e)}let uc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return lc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Oy.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Dn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function hS(t){uc=t(uc)}function fS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ql(this),e,...n);return Oy.set(r,e.sort?e.sort():[e]),Dn(r)}:uS().includes(t)?function(...e){return t.apply(Ql(this),e),Dn(Py.get(this))}:function(...e){return Dn(t.apply(Ql(this),e))}}function pS(t){return typeof t=="function"?fS(t):(t instanceof IDBTransaction&&dS(t),aS(t,lS())?new Proxy(t,uc):t)}function Dn(t){if(t instanceof IDBRequest)return cS(t);if(ql.has(t))return ql.get(t);const e=pS(t);return e!==t&&(ql.set(t,e),Ad.set(e,t)),e}const Ql=t=>Ad.get(t);function mS(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Dn(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Dn(o.result),l.oldVersion,l.newVersion,Dn(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const gS=["get","getKey","getAll","getAllKeys","count"],yS=["put","add","delete","clear"],Xl=new Map;function Hf(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xl.get(e))return Xl.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=yS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||gS.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return Xl.set(e,s),s}hS(t=>({...t,get:(e,n,r)=>Hf(e,n)||t.get(e,n,r),has:(e,n)=>!!Hf(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function vS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const cc="@firebase/app",Kf="0.9.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr=new xd("@firebase/app"),ES="@firebase/app-compat",wS="@firebase/analytics-compat",CS="@firebase/analytics",SS="@firebase/app-check-compat",IS="@firebase/app-check",RS="@firebase/auth",kS="@firebase/auth-compat",TS="@firebase/database",NS="@firebase/database-compat",xS="@firebase/functions",AS="@firebase/functions-compat",PS="@firebase/installations",OS="@firebase/installations-compat",LS="@firebase/messaging",DS="@firebase/messaging-compat",bS="@firebase/performance",MS="@firebase/performance-compat",US="@firebase/remote-config",jS="@firebase/remote-config-compat",FS="@firebase/storage",WS="@firebase/storage-compat",GS="@firebase/firestore",$S="@firebase/firestore-compat",BS="firebase",zS="10.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc="[DEFAULT]",HS={[cc]:"fire-core",[ES]:"fire-core-compat",[CS]:"fire-analytics",[wS]:"fire-analytics-compat",[IS]:"fire-app-check",[SS]:"fire-app-check-compat",[RS]:"fire-auth",[kS]:"fire-auth-compat",[TS]:"fire-rtdb",[NS]:"fire-rtdb-compat",[xS]:"fire-fn",[AS]:"fire-fn-compat",[PS]:"fire-iid",[OS]:"fire-iid-compat",[LS]:"fire-fcm",[DS]:"fire-fcm-compat",[bS]:"fire-perf",[MS]:"fire-perf-compat",[US]:"fire-rc",[jS]:"fire-rc-compat",[FS]:"fire-gcs",[WS]:"fire-gcs-compat",[GS]:"fire-fst",[$S]:"fire-fst-compat","fire-js":"fire-js",[BS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=new Map,hc=new Map;function KS(t,e){try{t.container.addComponent(e)}catch(n){mr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function li(t){const e=t.name;if(hc.has(e))return mr.debug(`There were multiple attempts to register component ${e}.`),!1;hc.set(e,t);for(const n of ya.values())KS(n,t);return!0}function Pd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},bn=new Ws("app","Firebase",VS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new pr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei=zS;function Ly(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:dc,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw bn.create("bad-app-name",{appName:String(i)});if(n||(n=ky()),!n)throw bn.create("no-options");const s=ya.get(i);if(s){if(ga(n,s.options)&&ga(r,s.config))return s;throw bn.create("duplicate-app",{appName:i})}const o=new nS(i);for(const l of hc.values())o.addComponent(l);const a=new YS(n,r,o);return ya.set(i,a),a}function Dy(t=dc){const e=ya.get(t);if(!e&&t===dc&&ky())return Ly();if(!e)throw bn.create("no-app",{appName:t});return e}function Mn(t,e,n){var r;let i=(r=HS[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mr.warn(a.join(" "));return}li(new pr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS="firebase-heartbeat-database",QS=1,Ss="firebase-heartbeat-store";let Jl=null;function by(){return Jl||(Jl=mS(qS,QS,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ss)}}}).catch(t=>{throw bn.create("idb-open",{originalErrorMessage:t.message})})),Jl}async function XS(t){try{return await(await by()).transaction(Ss).objectStore(Ss).get(My(t))}catch(e){if(e instanceof Yn)mr.warn(e.message);else{const n=bn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});mr.warn(n.message)}}}async function Vf(t,e){try{const r=(await by()).transaction(Ss,"readwrite");await r.objectStore(Ss).put(e,My(t)),await r.done}catch(n){if(n instanceof Yn)mr.warn(n.message);else{const r=bn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});mr.warn(r.message)}}}function My(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS=1024,ZS=30*24*60*60*1e3;class eI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new nI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Yf();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=ZS}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Yf(),{heartbeatsToSend:n,unsentEntries:r}=tI(this._heartbeatsCache.heartbeats),i=fa(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Yf(){return new Date().toISOString().substring(0,10)}function tI(t,e=JS){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),qf(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),qf(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class nI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return GC()?$C().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await XS(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Vf(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Vf(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function qf(t){return fa(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(t){li(new pr("platform-logger",e=>new _S(e),"PRIVATE")),li(new pr("heartbeat",e=>new eI(e),"PRIVATE")),Mn(cc,Kf,t),Mn(cc,Kf,"esm2017"),Mn("fire-js","")}rI("");var iI="firebase",sI="10.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mn(iI,sI,"app");const Qf="@firebase/database",Xf="1.0.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uy="";function oI(t){Uy=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Te(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Cs(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return un(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new aI(e)}}catch{}return new lI},rr=jy("localStorage"),fc=jy("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr=new xd("@firebase/database"),uI=function(){let t=1;return function(){return t++}}(),Fy=function(t){const e=JC(t),n=new YC;n.update(e);const r=n.digest();return Rd.encodeByteArray(r)},Gs=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Gs.apply(null,r):typeof r=="object"?e+=Te(r):e+=r,e+=" "}return e};let ar=null,Jf=!0;const cI=function(t,e){U(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(qr.logLevel=ae.VERBOSE,ar=qr.log.bind(qr),e&&fc.set("logging_enabled",!0)):typeof t=="function"?ar=t:(ar=null,fc.remove("logging_enabled"))},$e=function(...t){if(Jf===!0&&(Jf=!1,ar===null&&fc.get("logging_enabled")===!0&&cI(!0)),ar){const e=Gs.apply(null,t);ar(e)}},$s=function(t){return function(...e){$e(t,...e)}},pc=function(...t){const e="FIREBASE INTERNAL ERROR: "+Gs(...t);qr.error(e)},rn=function(...t){const e=`FIREBASE FATAL ERROR: ${Gs(...t)}`;throw qr.error(e),new Error(e)},st=function(...t){const e="FIREBASE WARNING: "+Gs(...t);qr.warn(e)},dI=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&st("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Wy=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},hI=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ui="[MIN_NAME]",gr="[MAX_NAME]",wi=function(t,e){if(t===e)return 0;if(t===ui||e===gr)return-1;if(e===ui||t===gr)return 1;{const n=Zf(t),r=Zf(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},fI=function(t,e){return t===e?0:t<e?-1:1},Mi=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Te(e))},Od=function(t){if(typeof t!="object"||t===null)return Te(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Te(e[r]),n+=":",n+=Od(t[e[r]]);return n+="}",n},Gy=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function ot(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const $y=function(t){U(!Wy(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(l=n;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const c=u.join("");let d="";for(l=0;l<64;l+=8){let h=parseInt(c.substr(l,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},pI=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},mI=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function gI(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const yI=new RegExp("^-?(0*)\\d{1,10}$"),_I=-2147483648,vI=2147483647,Zf=function(t){if(yI.test(t)){const e=Number(t);if(e>=_I&&e<=vI)return e}return null},Ci=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw st("Exception was thrown by user callback.",n),e},Math.floor(0))}},EI=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Zi=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){st(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?($e("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',st(e)}}class Qr{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Qr.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld="5",By="v",zy="s",Hy="r",Ky="f",Vy=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Yy="ls",qy="p",mc="ac",Qy="websocket",Xy="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=rr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&rr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function SI(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Zy(t,e,n){U(typeof e=="string","typeof type must == string"),U(typeof n=="object","typeof params must == object");let r;if(e===Qy)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Xy)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);SI(t)&&(n.ns=t.namespace);const i=[];return ot(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(){this.counters_={}}incrementCounter(e,n=1){un(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return PC(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zl={},eu={};function Dd(t){const e=t.toString();return Zl[e]||(Zl[e]=new II),Zl[e]}function RI(t,e){const n=t.toString();return eu[n]||(eu[n]=e()),eu[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ci(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep="start",TI="close",NI="pLPCommand",xI="pRTLPCB",e_="id",t_="pw",n_="ser",AI="cb",PI="seg",OI="ts",LI="d",DI="dframe",r_=1870,i_=30,bI=r_-i_,MI=25e3,UI=3e4;class Gr{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=$s(e),this.stats_=Dd(n),this.urlFn=l=>(this.appCheckToken&&(l[mc]=this.appCheckToken),Zy(n,Xy,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new kI(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(UI)),hI(()=>{if(this.isClosed_)return;this.scriptTagHolder=new bd((...s)=>{const[o,a,l,u,c]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===ep)this.id=a,this.password=l;else if(o===TI)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[ep]="t",r[n_]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[AI]=this.scriptTagHolder.uniqueCallbackIdentifier),r[By]=Ld,this.transportSessionId&&(r[zy]=this.transportSessionId),this.lastSessionId&&(r[Yy]=this.lastSessionId),this.applicationId&&(r[qy]=this.applicationId),this.appCheckToken&&(r[mc]=this.appCheckToken),typeof location<"u"&&location.hostname&&Vy.test(location.hostname)&&(r[Hy]=Ky);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Gr.forceAllow_=!0}static forceDisallow(){Gr.forceDisallow_=!0}static isAvailable(){return Gr.forceAllow_?!0:!Gr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!pI()&&!mI()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Te(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Sy(n),i=Gy(r,bI);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[DI]="t",r[e_]=e,r[t_]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Te(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class bd{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=uI(),window[NI+this.uniqueCallbackIdentifier]=e,window[xI+this.uniqueCallbackIdentifier]=n,this.myIFrame=bd.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){$e("frame writing exception"),a.stack&&$e(a.stack),$e(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||$e("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[e_]=this.myID,e[t_]=this.myPW,e[n_]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+i_+r.length<=r_;){const o=this.pendingSegs.shift();r=r+"&"+PI+i+"="+o.seg+"&"+OI+i+"="+o.ts+"&"+LI+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(MI)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{$e("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI=16384,FI=45e3;let _a=null;typeof MozWebSocket<"u"?_a=MozWebSocket:typeof WebSocket<"u"&&(_a=WebSocket);class kt{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=$s(this.connId),this.stats_=Dd(n),this.connURL=kt.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[By]=Ld,typeof location<"u"&&location.hostname&&Vy.test(location.hostname)&&(o[Hy]=Ky),n&&(o[zy]=n),r&&(o[Yy]=r),i&&(o[mc]=i),s&&(o[qy]=s),Zy(e,Qy,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,rr.set("previous_websocket_failure",!0);try{let r;xy(),this.mySock=new _a(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){kt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&_a!==null&&!kt.forceDisallow_}static previouslyFailed(){return rr.isInMemoryStorage||rr.get("previous_websocket_failure")===!0}markConnectionHealthy(){rr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Cs(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(U(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Te(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Gy(n,jI);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(FI))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}kt.responsesRequiredToBeHealthy=2;kt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Gr,kt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=kt&&kt.isAvailable();let r=n&&!kt.previouslyFailed();if(e.webSocketOnly&&(n||st("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[kt];else{const i=this.transports_=[];for(const s of Is.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Is.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Is.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI=6e4,GI=5e3,$I=10*1024,BI=100*1024,tu="t",tp="d",zI="s",np="r",HI="e",rp="o",ip="a",sp="n",op="p",KI="h";class VI{constructor(e,n,r,i,s,o,a,l,u,c){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=$s("c:"+this.id+":"),this.transportManager_=new Is(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Zi(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>BI?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>$I?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(tu in e){const n=e[tu];n===ip?this.upgradeIfSecondaryHealthy_():n===np?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===rp&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Mi("t",e),r=Mi("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:op,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:ip,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:sp,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Mi("t",e),r=Mi("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Mi(tu,e);if(tp in e){const r=e[tp];if(n===KI){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===sp){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===zI?this.onConnectionShutdown_(r):n===np?this.onReset_(r):n===HI?pc("Server Error: "+r):n===rp?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):pc("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Ld!==r&&st("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Zi(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(WI))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Zi(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(GI))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:op,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(rr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e){this.allowedEvents_=e,this.listeners_={},U(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){U(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va extends o_{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Td()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new va}getInitialEvent(e){return U(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap=32,lp=768;class le{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ie(){return new le("")}function q(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Gn(t){return t.pieces_.length-t.pieceNum_}function de(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new le(t.pieces_,e)}function a_(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function YI(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function l_(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function u_(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new le(e,0)}function Ne(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof le)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new le(n,0)}function X(t){return t.pieceNum_>=t.pieces_.length}function Ye(t,e){const n=q(t),r=q(e);if(n===null)return e;if(n===r)return Ye(de(t),de(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Md(t,e){if(Gn(t)!==Gn(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Tt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Gn(t)>Gn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class qI{constructor(e,n){this.errorPrefix_=n,this.parts_=l_(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=nl(this.parts_[r]);c_(this)}}function QI(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=nl(e),c_(t)}function XI(t){const e=t.parts_.pop();t.byteLength_-=nl(e),t.parts_.length>0&&(t.byteLength_-=1)}function c_(t){if(t.byteLength_>lp)throw new Error(t.errorPrefix_+"has a key path longer than "+lp+" bytes ("+t.byteLength_+").");if(t.parts_.length>ap)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ap+") or object contains a cycle "+Jn(t))}function Jn(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud extends o_{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Ud}getInitialEvent(e){return U(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=1e3,JI=60*5*1e3,up=30*1e3,ZI=1.3,eR=3e4,tR="server_kill",cp=3;class Jt extends s_{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Jt.nextPersistentConnectionId_++,this.log_=$s("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ui,this.maxReconnectDelay_=JI,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!xy())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ud.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&va.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(Te(s)),U(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new tl,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),U(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),U(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,u=a.s;Jt.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&un(e,"w")){const r=ai(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();st(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||VC(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=up)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=KC(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),U(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Te(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):pc("Unrecognized action received from server: "+Te(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){U(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ui,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ui,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>eR&&(this.reconnectDelay_=Ui),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*ZI)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Jt.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},u=function(d){U(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:u};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);o?$e("getToken() completed but was canceled"):($e("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new VI(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,g=>{st(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(tR)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&st(d),l())}}}interrupt(e){$e("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){$e("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ac(this.interruptReasons_)&&(this.reconnectDelay_=Ui,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>Od(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new le(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){$e("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=cp&&(this.reconnectDelay_=up,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){$e("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=cp&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Uy.replace(/\./g,"-")]=1,Td()?e["framework.cordova"]=1:Ny()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=va.getInstance().currentlyOnline();return ac(this.interruptReasons_)&&e}}Jt.nextPersistentConnectionId_=0;Jt.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Q(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Q(ui,e),i=new Q(ui,n);return this.compare(r,i)!==0}minPost(){return Q.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yo;class d_ extends rl{static get __EMPTY_NODE(){return yo}static set __EMPTY_NODE(e){yo=e}compare(e,n){return wi(e.name,n.name)}isDefinedOn(e){throw _i("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Q.MIN}maxPost(){return new Q(gr,yo)}makePost(e,n){return U(typeof e=="string","KeyIndex indexValue must always be a string."),new Q(e,yo)}toString(){return".key"}}const Xr=new d_;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Oe{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Oe.RED,this.left=i??tt.EMPTY_NODE,this.right=s??tt.EMPTY_NODE}copy(e,n,r,i,s){return new Oe(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return tt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return tt.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Oe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Oe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Oe.RED=!0;Oe.BLACK=!1;class nR{copy(e,n,r,i,s){return this}insert(e,n,r){return new Oe(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class tt{constructor(e,n=tt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new tt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Oe.BLACK,null,null))}remove(e){return new tt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Oe.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new _o(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new _o(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new _o(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new _o(this.root_,null,this.comparator_,!0,e)}}tt.EMPTY_NODE=new nR;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(t,e){return wi(t.name,e.name)}function jd(t,e){return wi(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gc;function iR(t){gc=t}const h_=function(t){return typeof t=="number"?"number:"+$y(t):"string:"+t},f_=function(t){if(t.isLeafNode()){const e=t.val();U(typeof e=="string"||typeof e=="number"||typeof e=="object"&&un(e,".sv"),"Priority must be a string or number.")}else U(t===gc||t.isEmpty(),"priority of unexpected type.");U(t===gc||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dp;class Ae{constructor(e,n=Ae.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,U(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),f_(this.priorityNode_)}static set __childrenNodeConstructor(e){dp=e}static get __childrenNodeConstructor(){return dp}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Ae(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Ae.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return X(e)?this:q(e)===".priority"?this.priorityNode_:Ae.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Ae.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=q(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(U(r!==".priority"||Gn(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Ae.__childrenNodeConstructor.EMPTY_NODE.updateChild(de(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+h_(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=$y(this.value_):e+=this.value_,this.lazyHash_=Fy(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Ae.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ae.__childrenNodeConstructor?-1:(U(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Ae.VALUE_TYPE_ORDER.indexOf(n),s=Ae.VALUE_TYPE_ORDER.indexOf(r);return U(i>=0,"Unknown leaf type: "+n),U(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Ae.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let p_,m_;function sR(t){p_=t}function oR(t){m_=t}class aR extends rl{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?wi(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Q.MIN}maxPost(){return new Q(gr,new Ae("[PRIORITY-POST]",m_))}makePost(e,n){const r=p_(e);return new Q(n,new Ae("[PRIORITY-POST]",r))}toString(){return".priority"}}const we=new aR;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=Math.log(2);class uR{constructor(e){const n=s=>parseInt(Math.log(s)/lR,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Ea=function(t,e,n,r){t.sort(e);const i=function(l,u){const c=u-l;let d,h;if(c===0)return null;if(c===1)return d=t[l],h=n?n(d):d,new Oe(h,d.node,Oe.BLACK,null,null);{const g=parseInt(c/2,10)+l,_=i(l,g),E=i(g+1,u);return d=t[g],h=n?n(d):d,new Oe(h,d.node,Oe.BLACK,_,E)}},s=function(l){let u=null,c=null,d=t.length;const h=function(_,E){const C=d-_,f=d;d-=_;const p=i(C+1,f),y=t[C],k=n?n(y):y;g(new Oe(k,y.node,E,null,p))},g=function(_){u?(u.left=_,u=_):(c=_,u=_)};for(let _=0;_<l.count;++_){const E=l.nextBitIsOne(),C=Math.pow(2,l.count-(_+1));E?h(C,Oe.BLACK):(h(C,Oe.BLACK),h(C,Oe.RED))}return c},o=new uR(t.length),a=s(o);return new tt(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nu;const Nr={};class Yt{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return U(Nr&&we,"ChildrenNode.ts has not been loaded"),nu=nu||new Yt({".priority":Nr},{".priority":we}),nu}get(e){const n=ai(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof tt?n:null}hasIndex(e){return un(this.indexSet_,e.toString())}addIndex(e,n){U(e!==Xr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(Q.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Ea(r,e.getCompare()):a=Nr;const l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;const c=Object.assign({},this.indexes_);return c[l]=a,new Yt(c,u)}addToIndexes(e,n){const r=ma(this.indexes_,(i,s)=>{const o=ai(this.indexSet_,s);if(U(o,"Missing index implementation for "+s),i===Nr)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Q.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),Ea(a,o.getCompare())}else return Nr;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new Q(e.name,a))),l.insert(e,e.node)}});return new Yt(r,this.indexSet_)}removeFromIndexes(e,n){const r=ma(this.indexes_,i=>{if(i===Nr)return i;{const s=n.get(e.name);return s?i.remove(new Q(e.name,s)):i}});return new Yt(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ji;class H{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&f_(this.priorityNode_),this.children_.isEmpty()&&U(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ji||(ji=new H(new tt(jd),null,Yt.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ji}updatePriority(e){return this.children_.isEmpty()?this:new H(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ji:n}}getChild(e){const n=q(e);return n===null?this:this.getImmediateChild(n).getChild(de(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(U(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Q(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?ji:this.priorityNode_;return new H(i,o,s)}}updateChild(e,n){const r=q(e);if(r===null)return n;{U(q(e)!==".priority"||Gn(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(de(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(we,(o,a)=>{n[o]=a.val(e),r++,s&&H.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+h_(this.getPriority().val())+":"),this.forEachChild(we,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":Fy(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new Q(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Q(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Q(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Q.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Q.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Bs?-1:0}withIndex(e){if(e===Xr||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new H(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Xr||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(we),i=n.getIterator(we);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Xr?null:this.indexMap_.get(e.toString())}}H.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class cR extends H{constructor(){super(new tt(jd),H.EMPTY_NODE,Yt.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return H.EMPTY_NODE}isEmpty(){return!1}}const Bs=new cR;Object.defineProperties(Q,{MIN:{value:new Q(ui,H.EMPTY_NODE)},MAX:{value:new Q(gr,Bs)}});d_.__EMPTY_NODE=H.EMPTY_NODE;Ae.__childrenNodeConstructor=H;iR(Bs);oR(Bs);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=!0;function Le(t,e=null){if(t===null)return H.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),U(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Ae(n,Le(e))}if(!(t instanceof Array)&&dR){const n=[];let r=!1;if(ot(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=Le(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new Q(o,l)))}}),n.length===0)return H.EMPTY_NODE;const s=Ea(n,rR,o=>o.name,jd);if(r){const o=Ea(n,we.getCompare());return new H(s,Le(e),new Yt({".priority":o},{".priority":we}))}else return new H(s,Le(e),Yt.Default)}else{let n=H.EMPTY_NODE;return ot(t,(r,i)=>{if(un(t,r)&&r.substring(0,1)!=="."){const s=Le(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Le(e))}}sR(Le);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR extends rl{constructor(e){super(),this.indexPath_=e,U(!X(e)&&q(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?wi(e.name,n.name):s}makePost(e,n){const r=Le(e),i=H.EMPTY_NODE.updateChild(this.indexPath_,r);return new Q(n,i)}maxPost(){const e=H.EMPTY_NODE.updateChild(this.indexPath_,Bs);return new Q(gr,e)}toString(){return l_(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR extends rl{compare(e,n){const r=e.node.compareTo(n.node);return r===0?wi(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Q.MIN}maxPost(){return Q.MAX}makePost(e,n){const r=Le(e);return new Q(n,r)}toString(){return".value"}}const pR=new fR;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(t){return{type:"value",snapshotNode:t}}function ci(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Rs(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ks(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function mR(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){U(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Rs(n,a)):U(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(ci(n,r)):o.trackChildChange(ks(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(we,(i,s)=>{n.hasChild(i)||r.trackChildChange(Rs(i,s))}),n.isLeafNode()||n.forEachChild(we,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(ks(i,s,o))}else r.trackChildChange(ci(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?H.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this.indexedFilter_=new Fd(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ts.getStartPost_(e),this.endPost_=Ts.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new Q(n,r))||(r=H.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=H.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(H.EMPTY_NODE);const s=this;return n.forEachChild(we,(o,a)=>{s.matches(new Q(o,a))||(i=i.updateImmediateChild(o,H.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Ts(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new Q(n,r))||(r=H.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=H.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=H.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(H.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,H.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,g)=>d(g,h)}else o=this.index_.getCompare();const a=e;U(a.numChildren()===this.limit_,"");const l=new Q(n,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),c=this.rangedFilter_.matches(l);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=i.getChildAfterChild(this.index_,u,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);const g=h==null?1:o(h,l);if(c&&!r.isEmpty()&&g>=0)return s!=null&&s.trackChildChange(ks(n,r,d)),a.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(Rs(n,d));const E=a.updateImmediateChild(n,H.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(s!=null&&s.trackChildChange(ci(h.name,h.node)),E.updateImmediateChild(h.name,h.node)):E}}else return r.isEmpty()?e:c&&o(u,l)>=0?(s!=null&&(s.trackChildChange(Rs(u.name,u.node)),s.trackChildChange(ci(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(u.name,H.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=we}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return U(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return U(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ui}hasEnd(){return this.endSet_}getIndexEndValue(){return U(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return U(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:gr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return U(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===we}copy(){const e=new Wd;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function yR(t){return t.loadsAllData()?new Fd(t.getIndex()):t.hasLimit()?new gR(t):new Ts(t)}function hp(t){const e={};if(t.isDefault())return e;let n;if(t.index_===we?n="$priority":t.index_===pR?n="$value":t.index_===Xr?n="$key":(U(t.index_ instanceof hR,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Te(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Te(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Te(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Te(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Te(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function fp(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==we&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa extends s_{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=$s("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(U(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=wa.getListenId_(e,r),a={};this.listens_[o]=a;const l=hp(e._queryParams);this.restRequest_(s+".json",l,(u,c)=>{let d=c;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(s,d,!1,r),ai(this.listens_,o)===a){let h;u?u===401?h="permission_denied":h="rest_error:"+u:h="ok",i(h,null)}})}unlisten(e,n){const r=wa.getListenId_(e,n);delete this.listens_[r]}get(e){const n=hp(e._queryParams),r=e._path.toString(),i=new tl;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+vi(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Cs(a.responseText)}catch{st("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&st("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(){this.rootNode_=H.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(){return{value:null,children:new Map}}function y_(t,e,n){if(X(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=q(e);t.children.has(r)||t.children.set(r,Ca());const i=t.children.get(r);e=de(e),y_(i,e,n)}}function yc(t,e,n){t.value!==null?n(e,t.value):vR(t,(r,i)=>{const s=new le(e.toString()+"/"+r);yc(i,s,n)})}function vR(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&ot(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp=10*1e3,wR=30*1e3,CR=5*60*1e3;class SR{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new ER(e);const r=pp+(wR-pp)*Math.random();Zi(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;ot(e,(i,s)=>{s>0&&un(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Zi(this.reportStats_.bind(this),Math.floor(Math.random()*2*CR))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Nt||(Nt={}));function __(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Gd(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function $d(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Nt.ACK_USER_WRITE,this.source=__()}operationForChild(e){if(X(this.path)){if(this.affectedTree.value!=null)return U(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new le(e));return new Sa(ie(),n,this.revert)}}else return U(q(this.path)===e,"operationForChild called for unrelated child."),new Sa(de(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n){this.source=e,this.path=n,this.type=Nt.LISTEN_COMPLETE}operationForChild(e){return X(this.path)?new Ns(this.source,ie()):new Ns(this.source,de(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Nt.OVERWRITE}operationForChild(e){return X(this.path)?new yr(this.source,ie(),this.snap.getImmediateChild(e)):new yr(this.source,de(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Nt.MERGE}operationForChild(e){if(X(this.path)){const n=this.children.subtree(new le(e));return n.isEmpty()?null:n.value?new yr(this.source,ie(),n.value):new xs(this.source,ie(),n)}else return U(q(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new xs(this.source,de(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(X(e))return this.isFullyInitialized()&&!this.filtered_;const n=q(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function RR(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(mR(o.childName,o.snapshotNode))}),Fi(t,i,"child_removed",e,r,n),Fi(t,i,"child_added",e,r,n),Fi(t,i,"child_moved",s,r,n),Fi(t,i,"child_changed",e,r,n),Fi(t,i,"value",e,r,n),i}function Fi(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>TR(t,a,l)),o.forEach(a=>{const l=kR(t,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function kR(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function TR(t,e,n){if(e.childName==null||n.childName==null)throw _i("Should only compare child_ events.");const r=new Q(e.childName,e.snapshotNode),i=new Q(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(t,e){return{eventCache:t,serverCache:e}}function es(t,e,n,r){return il(new $n(e,n,r),t.serverCache)}function v_(t,e,n,r){return il(t.eventCache,new $n(e,n,r))}function Ia(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function _r(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ru;const NR=()=>(ru||(ru=new tt(fI)),ru);class pe{constructor(e,n=NR()){this.value=e,this.children=n}static fromObject(e){let n=new pe(null);return ot(e,(r,i)=>{n=n.set(new le(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ie(),value:this.value};if(X(e))return null;{const r=q(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(de(e),n);return s!=null?{path:Ne(new le(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(X(e))return this;{const n=q(e),r=this.children.get(n);return r!==null?r.subtree(de(e)):new pe(null)}}set(e,n){if(X(e))return new pe(n,this.children);{const r=q(e),s=(this.children.get(r)||new pe(null)).set(de(e),n),o=this.children.insert(r,s);return new pe(this.value,o)}}remove(e){if(X(e))return this.children.isEmpty()?new pe(null):new pe(null,this.children);{const n=q(e),r=this.children.get(n);if(r){const i=r.remove(de(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new pe(null):new pe(this.value,s)}else return this}}get(e){if(X(e))return this.value;{const n=q(e),r=this.children.get(n);return r?r.get(de(e)):null}}setTree(e,n){if(X(e))return n;{const r=q(e),s=(this.children.get(r)||new pe(null)).setTree(de(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new pe(this.value,o)}}fold(e){return this.fold_(ie(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Ne(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,ie(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(X(e))return null;{const s=q(e),o=this.children.get(s);return o?o.findOnPath_(de(e),Ne(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ie(),n)}foreachOnPath_(e,n,r){if(X(e))return this;{this.value&&r(n,this.value);const i=q(e),s=this.children.get(i);return s?s.foreachOnPath_(de(e),Ne(n,i),r):new pe(null)}}foreach(e){this.foreach_(ie(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Ne(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.writeTree_=e}static empty(){return new Pt(new pe(null))}}function ts(t,e,n){if(X(e))return new Pt(new pe(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Ye(i,e);return s=s.updateChild(o,n),new Pt(t.writeTree_.set(i,s))}else{const i=new pe(n),s=t.writeTree_.setTree(e,i);return new Pt(s)}}}function mp(t,e,n){let r=t;return ot(n,(i,s)=>{r=ts(r,Ne(e,i),s)}),r}function gp(t,e){if(X(e))return Pt.empty();{const n=t.writeTree_.setTree(e,new pe(null));return new Pt(n)}}function _c(t,e){return Ir(t,e)!=null}function Ir(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ye(n.path,e)):null}function yp(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(we,(r,i)=>{e.push(new Q(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Q(r,i.value))}),e}function Un(t,e){if(X(e))return t;{const n=Ir(t,e);return n!=null?new Pt(new pe(n)):new Pt(t.writeTree_.subtree(e))}}function vc(t){return t.writeTree_.isEmpty()}function di(t,e){return E_(ie(),t.writeTree_,e)}function E_(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(U(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=E_(Ne(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Ne(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(t,e){return I_(e,t)}function xR(t,e,n,r,i){U(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=ts(t.visibleWrites,e,n)),t.lastWriteId=r}function AR(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function PR(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);U(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&OR(a,r.path)?i=!1:Tt(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return LR(t),!0;if(r.snap)t.visibleWrites=gp(t.visibleWrites,r.path);else{const a=r.children;ot(a,l=>{t.visibleWrites=gp(t.visibleWrites,Ne(r.path,l))})}return!0}else return!1}function OR(t,e){if(t.snap)return Tt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Tt(Ne(t.path,n),e))return!0;return!1}function LR(t){t.visibleWrites=w_(t.allWrites,DR,ie()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function DR(t){return t.visible}function w_(t,e,n){let r=Pt.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)Tt(n,o)?(a=Ye(n,o),r=ts(r,a,s.snap)):Tt(o,n)&&(a=Ye(o,n),r=ts(r,ie(),s.snap.getChild(a)));else if(s.children){if(Tt(n,o))a=Ye(n,o),r=mp(r,a,s.children);else if(Tt(o,n))if(a=Ye(o,n),X(a))r=mp(r,ie(),s.children);else{const l=ai(s.children,q(a));if(l){const u=l.getChild(de(a));r=ts(r,ie(),u)}}}else throw _i("WriteRecord should have .snap or .children")}}return r}function C_(t,e,n,r,i){if(!r&&!i){const s=Ir(t.visibleWrites,e);if(s!=null)return s;{const o=Un(t.visibleWrites,e);if(vc(o))return n;if(n==null&&!_c(o,ie()))return null;{const a=n||H.EMPTY_NODE;return di(o,a)}}}else{const s=Un(t.visibleWrites,e);if(!i&&vc(s))return n;if(!i&&n==null&&!_c(s,ie()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(Tt(u.path,e)||Tt(e,u.path))},a=w_(t.allWrites,o,e),l=n||H.EMPTY_NODE;return di(a,l)}}}function bR(t,e,n){let r=H.EMPTY_NODE;const i=Ir(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(we,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Un(t.visibleWrites,e);return n.forEachChild(we,(o,a)=>{const l=di(Un(s,new le(o)),a);r=r.updateImmediateChild(o,l)}),yp(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=Un(t.visibleWrites,e);return yp(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function MR(t,e,n,r,i){U(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Ne(e,n);if(_c(t.visibleWrites,s))return null;{const o=Un(t.visibleWrites,s);return vc(o)?i.getChild(n):di(o,i.getChild(n))}}function UR(t,e,n,r){const i=Ne(e,n),s=Ir(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=Un(t.visibleWrites,i);return di(o,r.getNode().getImmediateChild(n))}else return null}function jR(t,e){return Ir(t.visibleWrites,e)}function FR(t,e,n,r,i,s,o){let a;const l=Un(t.visibleWrites,e),u=Ir(l,ie());if(u!=null)a=u;else if(n!=null)a=di(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const c=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let g=h.getNext();for(;g&&c.length<i;)d(g,r)!==0&&c.push(g),g=h.getNext();return c}else return[]}function WR(){return{visibleWrites:Pt.empty(),allWrites:[],lastWriteId:-1}}function Ra(t,e,n,r){return C_(t.writeTree,t.treePath,e,n,r)}function Bd(t,e){return bR(t.writeTree,t.treePath,e)}function _p(t,e,n,r){return MR(t.writeTree,t.treePath,e,n,r)}function ka(t,e){return jR(t.writeTree,Ne(t.treePath,e))}function GR(t,e,n,r,i,s){return FR(t.writeTree,t.treePath,e,n,r,i,s)}function zd(t,e,n){return UR(t.writeTree,t.treePath,e,n)}function S_(t,e){return I_(Ne(t.treePath,e),t.writeTree)}function I_(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;U(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),U(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,ks(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Rs(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,ci(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,ks(r,e.snapshotNode,i.oldSnap));else throw _i("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const R_=new BR;class Hd{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new $n(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return zd(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:_r(this.viewCache_),s=GR(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR(t){return{filter:t}}function HR(t,e){U(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),U(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function KR(t,e,n,r,i){const s=new $R;let o,a;if(n.type===Nt.OVERWRITE){const u=n;u.source.fromUser?o=Ec(t,e,u.path,u.snap,r,i,s):(U(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!X(u.path),o=Ta(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===Nt.MERGE){const u=n;u.source.fromUser?o=YR(t,e,u.path,u.children,r,i,s):(U(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=wc(t,e,u.path,u.children,r,i,a,s))}else if(n.type===Nt.ACK_USER_WRITE){const u=n;u.revert?o=XR(t,e,u.path,r,i,s):o=qR(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===Nt.LISTEN_COMPLETE)o=QR(t,e,n.path,r,s);else throw _i("Unknown operation type: "+n.type);const l=s.getChanges();return VR(e,o,l),{viewCache:o,changes:l}}function VR(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Ia(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(g_(Ia(e)))}}function k_(t,e,n,r,i,s){const o=e.eventCache;if(ka(r,n)!=null)return e;{let a,l;if(X(n))if(U(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=_r(e),c=u instanceof H?u:H.EMPTY_NODE,d=Bd(r,c);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const u=Ra(r,_r(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=q(n);if(u===".priority"){U(Gn(n)===1,"Can't have a priority with additional path components");const c=o.getNode();l=e.serverCache.getNode();const d=_p(r,n,c,l);d!=null?a=t.filter.updatePriority(c,d):a=o.getNode()}else{const c=de(n);let d;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const h=_p(r,n,o.getNode(),l);h!=null?d=o.getNode().getImmediateChild(u).updateChild(c,h):d=o.getNode().getImmediateChild(u)}else d=zd(r,u,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),u,d,c,i,s):a=o.getNode()}}return es(e,a,o.isFullyInitialized()||X(n),t.filter.filtersNodes())}}function Ta(t,e,n,r,i,s,o,a){const l=e.serverCache;let u;const c=o?t.filter:t.filter.getIndexedFilter();if(X(n))u=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){const g=l.getNode().updateChild(n,r);u=c.updateFullNode(l.getNode(),g,null)}else{const g=q(n);if(!l.isCompleteForPath(n)&&Gn(n)>1)return e;const _=de(n),C=l.getNode().getImmediateChild(g).updateChild(_,r);g===".priority"?u=c.updatePriority(l.getNode(),C):u=c.updateChild(l.getNode(),g,C,_,R_,null)}const d=v_(e,u,l.isFullyInitialized()||X(n),c.filtersNodes()),h=new Hd(i,d,s);return k_(t,d,n,i,h,a)}function Ec(t,e,n,r,i,s,o){const a=e.eventCache;let l,u;const c=new Hd(i,e,s);if(X(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=es(e,u,!0,t.filter.filtersNodes());else{const d=q(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),l=es(e,u,a.isFullyInitialized(),a.isFiltered());else{const h=de(n),g=a.getNode().getImmediateChild(d);let _;if(X(h))_=r;else{const E=c.getCompleteChild(d);E!=null?a_(h)===".priority"&&E.getChild(u_(h)).isEmpty()?_=E:_=E.updateChild(h,r):_=H.EMPTY_NODE}if(g.equals(_))l=e;else{const E=t.filter.updateChild(a.getNode(),d,_,h,c,o);l=es(e,E,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function vp(t,e){return t.eventCache.isCompleteForChild(e)}function YR(t,e,n,r,i,s,o){let a=e;return r.foreach((l,u)=>{const c=Ne(n,l);vp(e,q(c))&&(a=Ec(t,a,c,u,i,s,o))}),r.foreach((l,u)=>{const c=Ne(n,l);vp(e,q(c))||(a=Ec(t,a,c,u,i,s,o))}),a}function Ep(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function wc(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;X(n)?u=r:u=new pe(null).setTree(n,r);const c=e.serverCache.getNode();return u.children.inorderTraversal((d,h)=>{if(c.hasChild(d)){const g=e.serverCache.getNode().getImmediateChild(d),_=Ep(t,g,h);l=Ta(t,l,new le(d),_,i,s,o,a)}}),u.children.inorderTraversal((d,h)=>{const g=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!c.hasChild(d)&&!g){const _=e.serverCache.getNode().getImmediateChild(d),E=Ep(t,_,h);l=Ta(t,l,new le(d),E,i,s,o,a)}}),l}function qR(t,e,n,r,i,s,o){if(ka(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(X(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Ta(t,e,n,l.getNode().getChild(n),i,s,a,o);if(X(n)){let u=new pe(null);return l.getNode().forEachChild(Xr,(c,d)=>{u=u.set(new le(c),d)}),wc(t,e,n,u,i,s,a,o)}else return e}else{let u=new pe(null);return r.foreach((c,d)=>{const h=Ne(n,c);l.isCompleteForPath(h)&&(u=u.set(c,l.getNode().getChild(h)))}),wc(t,e,n,u,i,s,a,o)}}function QR(t,e,n,r,i){const s=e.serverCache,o=v_(e,s.getNode(),s.isFullyInitialized()||X(n),s.isFiltered());return k_(t,o,n,r,R_,i)}function XR(t,e,n,r,i,s){let o;if(ka(r,n)!=null)return e;{const a=new Hd(r,e,i),l=e.eventCache.getNode();let u;if(X(n)||q(n)===".priority"){let c;if(e.serverCache.isFullyInitialized())c=Ra(r,_r(e));else{const d=e.serverCache.getNode();U(d instanceof H,"serverChildren would be complete if leaf node"),c=Bd(r,d)}c=c,u=t.filter.updateFullNode(l,c,s)}else{const c=q(n);let d=zd(r,c,e.serverCache);d==null&&e.serverCache.isCompleteForChild(c)&&(d=l.getImmediateChild(c)),d!=null?u=t.filter.updateChild(l,c,d,de(n),a,s):e.eventCache.getNode().hasChild(c)?u=t.filter.updateChild(l,c,H.EMPTY_NODE,de(n),a,s):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Ra(r,_r(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||ka(r,ie())!=null,es(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Fd(r.getIndex()),s=yR(r);this.processor_=zR(s);const o=n.serverCache,a=n.eventCache,l=i.updateFullNode(H.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(H.EMPTY_NODE,a.getNode(),null),c=new $n(l,o.isFullyInitialized(),i.filtersNodes()),d=new $n(u,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=il(d,c),this.eventGenerator_=new IR(this.query_)}get query(){return this.query_}}function ZR(t){return t.viewCache_.serverCache.getNode()}function ek(t){return Ia(t.viewCache_)}function tk(t,e){const n=_r(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!X(e)&&!n.getImmediateChild(q(e)).isEmpty())?n.getChild(e):null}function wp(t){return t.eventRegistrations_.length===0}function nk(t,e){t.eventRegistrations_.push(e)}function Cp(t,e,n){const r=[];if(n){U(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function Sp(t,e,n,r){e.type===Nt.MERGE&&e.source.queryId!==null&&(U(_r(t.viewCache_),"We should always have a full cache before handling merges"),U(Ia(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=KR(t.processor_,i,e,n,r);return HR(t.processor_,s.viewCache),U(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,T_(t,s.changes,s.viewCache.eventCache.getNode(),null)}function rk(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(we,(s,o)=>{r.push(ci(s,o))}),n.isFullyInitialized()&&r.push(g_(n.getNode())),T_(t,r,n.getNode(),e)}function T_(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return RR(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Na;class N_{constructor(){this.views=new Map}}function ik(t){U(!Na,"__referenceConstructor has already been defined"),Na=t}function sk(){return U(Na,"Reference.ts has not been loaded"),Na}function ok(t){return t.views.size===0}function Kd(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return U(s!=null,"SyncTree gave us an op for an invalid query."),Sp(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(Sp(o,e,n,r));return s}}function x_(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=Ra(n,i?r:null),l=!1;a?l=!0:r instanceof H?(a=Bd(n,r),l=!1):(a=H.EMPTY_NODE,l=!1);const u=il(new $n(a,l,!1),new $n(r,i,!1));return new JR(e,u)}return o}function ak(t,e,n,r,i,s){const o=x_(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),nk(o,n),rk(o,n)}function lk(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=Bn(t);if(i==="default")for(const[l,u]of t.views.entries())o=o.concat(Cp(u,n,r)),wp(u)&&(t.views.delete(l),u.query._queryParams.loadsAllData()||s.push(u.query));else{const l=t.views.get(i);l&&(o=o.concat(Cp(l,n,r)),wp(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!Bn(t)&&s.push(new(sk())(e._repo,e._path)),{removed:s,events:o}}function A_(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function jn(t,e){let n=null;for(const r of t.views.values())n=n||tk(r,e);return n}function P_(t,e){if(e._queryParams.loadsAllData())return ol(t);{const r=e._queryIdentifier;return t.views.get(r)}}function O_(t,e){return P_(t,e)!=null}function Bn(t){return ol(t)!=null}function ol(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xa;function uk(t){U(!xa,"__referenceConstructor has already been defined"),xa=t}function ck(){return U(xa,"Reference.ts has not been loaded"),xa}let dk=1;class Ip{constructor(e){this.listenProvider_=e,this.syncPointTree_=new pe(null),this.pendingWriteTree_=WR(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function L_(t,e,n,r,i){return xR(t.pendingWriteTree_,e,n,r,i),i?Hs(t,new yr(__(),e,n)):[]}function ir(t,e,n=!1){const r=AR(t.pendingWriteTree_,e);if(PR(t.pendingWriteTree_,e)){let s=new pe(null);return r.snap!=null?s=s.set(ie(),!0):ot(r.children,o=>{s=s.set(new le(o),!0)}),Hs(t,new Sa(r.path,s,n))}else return[]}function zs(t,e,n){return Hs(t,new yr(Gd(),e,n))}function hk(t,e,n){const r=pe.fromObject(n);return Hs(t,new xs(Gd(),e,r))}function fk(t,e){return Hs(t,new Ns(Gd(),e))}function pk(t,e,n){const r=Yd(t,n);if(r){const i=qd(r),s=i.path,o=i.queryId,a=Ye(s,e),l=new Ns($d(o),a);return Qd(t,s,l)}else return[]}function Aa(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&(e._queryIdentifier==="default"||O_(o,e))){const l=lk(o,e,n,r);ok(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const u=l.removed;if(a=l.events,!i){const c=u.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(h,g)=>Bn(g));if(c&&!d){const h=t.syncPointTree_.subtree(s);if(!h.isEmpty()){const g=yk(h);for(let _=0;_<g.length;++_){const E=g[_],C=E.query,f=U_(t,E);t.listenProvider_.startListening(ns(C),As(t,C),f.hashFn,f.onComplete)}}}!d&&u.length>0&&!r&&(c?t.listenProvider_.stopListening(ns(e),null):u.forEach(h=>{const g=t.queryToTagMap.get(al(h));t.listenProvider_.stopListening(ns(h),g)}))}_k(t,u)}return a}function D_(t,e,n,r){const i=Yd(t,r);if(i!=null){const s=qd(i),o=s.path,a=s.queryId,l=Ye(o,e),u=new yr($d(a),l,n);return Qd(t,o,u)}else return[]}function mk(t,e,n,r){const i=Yd(t,r);if(i){const s=qd(i),o=s.path,a=s.queryId,l=Ye(o,e),u=pe.fromObject(n),c=new xs($d(a),l,u);return Qd(t,o,c)}else return[]}function Cc(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(h,g)=>{const _=Ye(h,i);s=s||jn(g,_),o=o||Bn(g)});let a=t.syncPointTree_.get(i);a?(o=o||Bn(a),s=s||jn(a,ie())):(a=new N_,t.syncPointTree_=t.syncPointTree_.set(i,a));let l;s!=null?l=!0:(l=!1,s=H.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((g,_)=>{const E=jn(_,ie());E&&(s=s.updateImmediateChild(g,E))}));const u=O_(a,e);if(!u&&!e._queryParams.loadsAllData()){const h=al(e);U(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const g=vk();t.queryToTagMap.set(h,g),t.tagToQueryMap.set(g,h)}const c=sl(t.pendingWriteTree_,i);let d=ak(a,e,n,c,s,l);if(!u&&!o&&!r){const h=P_(a,e);d=d.concat(Ek(t,e,h))}return d}function Vd(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=Ye(o,e),u=jn(a,l);if(u)return u});return C_(i,e,s,n,!0)}function gk(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,c)=>{const d=Ye(u,n);r=r||jn(c,d)});let i=t.syncPointTree_.get(n);i?r=r||jn(i,ie()):(i=new N_,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new $n(r,!0,!1):null,a=sl(t.pendingWriteTree_,e._path),l=x_(i,e,a,s?o.getNode():H.EMPTY_NODE,s);return ek(l)}function Hs(t,e){return b_(e,t.syncPointTree_,null,sl(t.pendingWriteTree_,ie()))}function b_(t,e,n,r){if(X(t.path))return M_(t,e,n,r);{const i=e.get(ie());n==null&&i!=null&&(n=jn(i,ie()));let s=[];const o=q(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const u=n?n.getImmediateChild(o):null,c=S_(r,o);s=s.concat(b_(a,l,u,c))}return i&&(s=s.concat(Kd(i,t,r,n))),s}}function M_(t,e,n,r){const i=e.get(ie());n==null&&i!=null&&(n=jn(i,ie()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,u=S_(r,o),c=t.operationForChild(o);c&&(s=s.concat(M_(c,a,l,u)))}),i&&(s=s.concat(Kd(i,t,r,n))),s}function U_(t,e){const n=e.query,r=As(t,n);return{hashFn:()=>(ZR(e)||H.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?pk(t,n._path,r):fk(t,n._path);{const s=gI(i,n);return Aa(t,n,null,s)}}}}function As(t,e){const n=al(e);return t.queryToTagMap.get(n)}function al(t){return t._path.toString()+"$"+t._queryIdentifier}function Yd(t,e){return t.tagToQueryMap.get(e)}function qd(t){const e=t.indexOf("$");return U(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new le(t.substr(0,e))}}function Qd(t,e,n){const r=t.syncPointTree_.get(e);U(r,"Missing sync point for query tag that we're tracking");const i=sl(t.pendingWriteTree_,e);return Kd(r,n,i,null)}function yk(t){return t.fold((e,n,r)=>{if(n&&Bn(n))return[ol(n)];{let i=[];return n&&(i=A_(n)),ot(r,(s,o)=>{i=i.concat(o)}),i}})}function ns(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(ck())(t._repo,t._path):t}function _k(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=al(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function vk(){return dk++}function Ek(t,e,n){const r=e._path,i=As(t,e),s=U_(t,n),o=t.listenProvider_.startListening(ns(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)U(!Bn(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((u,c,d)=>{if(!X(u)&&c&&Bn(c))return[ol(c).query];{let h=[];return c&&(h=h.concat(A_(c).map(g=>g.query))),ot(d,(g,_)=>{h=h.concat(_)}),h}});for(let u=0;u<l.length;++u){const c=l[u];t.listenProvider_.stopListening(ns(c),As(t,c))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Xd(n)}node(){return this.node_}}class Jd{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Ne(this.path_,e);return new Jd(this.syncTree_,n)}node(){return Vd(this.syncTree_,this.path_)}}const wk=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Rp=function(t,e,n){if(!t||typeof t!="object")return t;if(U(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Ck(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Sk(t[".sv"],e);U(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Ck=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:U(!1,"Unexpected server value: "+t)}},Sk=function(t,e,n){t.hasOwnProperty("increment")||U(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&U(!1,"Unexpected increment value: "+r);const i=e.node();if(U(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},Ik=function(t,e,n,r){return Zd(e,new Jd(n,t),r)},j_=function(t,e,n){return Zd(t,new Xd(e),n)};function Zd(t,e,n){const r=t.getPriority().val(),i=Rp(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=Rp(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Ae(a,Le(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Ae(i))),o.forEachChild(we,(a,l)=>{const u=Zd(l,e.getImmediateChild(a),n);u!==l&&(s=s.updateImmediateChild(a,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function th(t,e){let n=e instanceof le?e:new le(e),r=t,i=q(n);for(;i!==null;){const s=ai(r.node.children,i)||{children:{},childCount:0};r=new eh(i,r,s),n=de(n),i=q(n)}return r}function Si(t){return t.node.value}function F_(t,e){t.node.value=e,Sc(t)}function W_(t){return t.node.childCount>0}function Rk(t){return Si(t)===void 0&&!W_(t)}function ll(t,e){ot(t.node.children,(n,r)=>{e(new eh(n,t,r))})}function G_(t,e,n,r){n&&!r&&e(t),ll(t,i=>{G_(i,e,!0,r)}),n&&r&&e(t)}function kk(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Ks(t){return new le(t.parent===null?t.name:Ks(t.parent)+"/"+t.name)}function Sc(t){t.parent!==null&&Tk(t.parent,t.name,t)}function Tk(t,e,n){const r=Rk(n),i=un(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Sc(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Sc(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk=/[\[\].#$\/\u0000-\u001F\u007F]/,xk=/[\[\].#$\u0000-\u001F\u007F]/,iu=10*1024*1024,$_=function(t){return typeof t=="string"&&t.length!==0&&!Nk.test(t)},B_=function(t){return typeof t=="string"&&t.length!==0&&!xk.test(t)},Ak=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),B_(t)},Pk=function(t,e,n,r){r&&e===void 0||nh(Nd(t,"value"),e,n)},nh=function(t,e,n){const r=n instanceof le?new qI(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Jn(r));if(typeof e=="function")throw new Error(t+"contains a function "+Jn(r)+" with contents = "+e.toString());if(Wy(e))throw new Error(t+"contains "+e.toString()+" "+Jn(r));if(typeof e=="string"&&e.length>iu/3&&nl(e)>iu)throw new Error(t+"contains a string greater than "+iu+" utf8 bytes "+Jn(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(ot(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!$_(o)))throw new Error(t+" contains an invalid key ("+o+") "+Jn(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);QI(r,o),nh(t,a,r),XI(r)}),i&&s)throw new Error(t+' contains ".value" child '+Jn(r)+" in addition to actual children.")}},z_=function(t,e,n,r){if(!(r&&n===void 0)&&!B_(n))throw new Error(Nd(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Ok=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),z_(t,e,n,r)},H_=function(t,e){if(q(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Lk=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!$_(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Ak(n))throw new Error(Nd(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function rh(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!Md(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function K_(t,e,n){rh(t,n),V_(t,r=>Md(r,e))}function Wt(t,e,n){rh(t,n),V_(t,r=>Tt(r,e)||Tt(e,r))}function V_(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(bk(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function bk(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();ar&&$e("event: "+n.toString()),Ci(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk="repo_interrupt",Uk=25;class jk{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Dk,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ca(),this.transactionQueueTree_=new eh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Fk(t,e,n){if(t.stats_=Dd(t.repoInfo_),t.forceRestClient_||EI())t.server_=new wa(t.repoInfo_,(r,i,s,o)=>{kp(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Tp(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Te(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Jt(t.repoInfo_,e,(r,i,s,o)=>{kp(t,r,i,s,o)},r=>{Tp(t,r)},r=>{Gk(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=RI(t.repoInfo_,()=>new SR(t.stats_,t.server_)),t.infoData_=new _R,t.infoSyncTree_=new Ip({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=zs(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),sh(t,"connected",!1),t.serverSyncTree_=new Ip({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const u=o(a,l);Wt(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function Wk(t){const n=t.infoData_.getNode(new le(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ih(t){return wk({timestamp:Wk(t)})}function kp(t,e,n,r,i){t.dataUpdateCount++;const s=new le(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=ma(n,u=>Le(u));o=mk(t.serverSyncTree_,s,l,i)}else{const l=Le(n);o=D_(t.serverSyncTree_,s,l,i)}else if(r){const l=ma(n,u=>Le(u));o=hk(t.serverSyncTree_,s,l)}else{const l=Le(n);o=zs(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=cl(t,s)),Wt(t.eventQueue_,a,o)}function Tp(t,e){sh(t,"connected",e),e===!1&&zk(t)}function Gk(t,e){ot(e,(n,r)=>{sh(t,n,r)})}function sh(t,e,n){const r=new le("/.info/"+e),i=Le(n);t.infoData_.updateSnapshot(r,i);const s=zs(t.infoSyncTree_,r,i);Wt(t.eventQueue_,r,s)}function Y_(t){return t.nextWriteId_++}function $k(t,e,n){const r=gk(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=Le(i).withIndex(e._queryParams.getIndex());Cc(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=zs(t.serverSyncTree_,e._path,s);else{const a=As(t.serverSyncTree_,e);o=D_(t.serverSyncTree_,e._path,s,a)}return Wt(t.eventQueue_,e._path,o),Aa(t.serverSyncTree_,e,n,null,!0),s},i=>(ul(t,"get for query "+Te(e)+" failed: "+i),Promise.reject(new Error(i))))}function Bk(t,e,n,r,i){ul(t,"set",{path:e.toString(),value:n,priority:r});const s=ih(t),o=Le(n,r),a=Vd(t.serverSyncTree_,e),l=j_(o,a,s),u=Y_(t),c=L_(t.serverSyncTree_,e,l,u,!0);rh(t.eventQueue_,c),t.server_.put(e.toString(),o.val(!0),(h,g)=>{const _=h==="ok";_||st("set at "+e+" failed: "+h);const E=ir(t.serverSyncTree_,u,!_);Wt(t.eventQueue_,e,E),Vk(t,i,h,g)});const d=Z_(t,e);cl(t,d),Wt(t.eventQueue_,d,[])}function zk(t){ul(t,"onDisconnectEvents");const e=ih(t),n=Ca();yc(t.onDisconnect_,ie(),(i,s)=>{const o=Ik(i,s,t.serverSyncTree_,e);y_(n,i,o)});let r=[];yc(n,ie(),(i,s)=>{r=r.concat(zs(t.serverSyncTree_,i,s));const o=Z_(t,i);cl(t,o)}),t.onDisconnect_=Ca(),Wt(t.eventQueue_,ie(),r)}function Hk(t,e,n){let r;q(e._path)===".info"?r=Cc(t.infoSyncTree_,e,n):r=Cc(t.serverSyncTree_,e,n),K_(t.eventQueue_,e._path,r)}function Np(t,e,n){let r;q(e._path)===".info"?r=Aa(t.infoSyncTree_,e,n):r=Aa(t.serverSyncTree_,e,n),K_(t.eventQueue_,e._path,r)}function Kk(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Mk)}function ul(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),$e(n,...e)}function Vk(t,e,n,r){e&&Ci(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function q_(t,e,n){return Vd(t.serverSyncTree_,e,n)||H.EMPTY_NODE}function oh(t,e=t.transactionQueueTree_){if(e||dl(t,e),Si(e)){const n=X_(t,e);U(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&Yk(t,Ks(e),n)}else W_(e)&&ll(e,n=>{oh(t,n)})}function Yk(t,e,n){const r=n.map(u=>u.currentWriteId),i=q_(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const c=n[u];U(c.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;const d=Ye(e,c.path);s=s.updateChild(d,c.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,u=>{ul(t,"transaction put response",{path:l.toString(),status:u});let c=[];if(u==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,c=c.concat(ir(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();dl(t,th(t.transactionQueueTree_,e)),oh(t,t.transactionQueueTree_),Wt(t.eventQueue_,e,c);for(let h=0;h<d.length;h++)Ci(d[h])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{st("transaction at "+l.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}cl(t,e)}},o)}function cl(t,e){const n=Q_(t,e),r=Ks(n),i=X_(t,n);return qk(t,i,r),r}function qk(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],u=Ye(n,l.path);let c=!1,d;if(U(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)c=!0,d=l.abortReason,i=i.concat(ir(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=Uk)c=!0,d="maxretry",i=i.concat(ir(t.serverSyncTree_,l.currentWriteId,!0));else{const h=q_(t,l.path,o);l.currentInputSnapshot=h;const g=e[a].update(h.val());if(g!==void 0){nh("transaction failed: Data returned ",g,l.path);let _=Le(g);typeof g=="object"&&g!=null&&un(g,".priority")||(_=_.updatePriority(h.getPriority()));const C=l.currentWriteId,f=ih(t),p=j_(_,h,f);l.currentOutputSnapshotRaw=_,l.currentOutputSnapshotResolved=p,l.currentWriteId=Y_(t),o.splice(o.indexOf(C),1),i=i.concat(L_(t.serverSyncTree_,l.path,p,l.currentWriteId,l.applyLocally)),i=i.concat(ir(t.serverSyncTree_,C,!0))}else c=!0,d="nodata",i=i.concat(ir(t.serverSyncTree_,l.currentWriteId,!0))}Wt(t.eventQueue_,n,i),i=[],c&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}dl(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Ci(r[a]);oh(t,t.transactionQueueTree_)}function Q_(t,e){let n,r=t.transactionQueueTree_;for(n=q(e);n!==null&&Si(r)===void 0;)r=th(r,n),e=de(e),n=q(e);return r}function X_(t,e){const n=[];return J_(t,e,n),n.sort((r,i)=>r.order-i.order),n}function J_(t,e,n){const r=Si(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);ll(e,i=>{J_(t,i,n)})}function dl(t,e){const n=Si(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,F_(e,n.length>0?n:void 0)}ll(e,r=>{dl(t,r)})}function Z_(t,e){const n=Ks(Q_(t,e)),r=th(t.transactionQueueTree_,e);return kk(r,i=>{su(t,i)}),su(t,r),G_(r,i=>{su(t,i)}),n}function su(t,e){const n=Si(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(U(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(U(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(ir(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?F_(e,void 0):n.length=s+1,Wt(t.eventQueue_,Ks(e),i);for(let o=0;o<r.length;o++)Ci(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function Xk(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):st(`Invalid query segment '${n}' in query '${t}'`)}return e}const xp=function(t,e){const n=Jk(t),r=n.namespace;n.domain==="firebase.com"&&rn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&rn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||dI();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Jy(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new le(n.pathString)}},Jk=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let c=t.indexOf("/");c===-1&&(c=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(c,d)),c<d&&(i=Qk(t.substring(c,d)));const h=Xk(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;const g=e.slice(0,u);if(g.toLowerCase()==="localhost")n="localhost";else if(g.split(".").length<=2)n=g;else{const _=e.indexOf(".");r=e.substring(0,_).toLowerCase(),n=e.substring(_+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Te(this.snapshot.exportVal())}}class tv{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return U(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return X(this._path)?null:a_(this._path)}get ref(){return new $t(this._repo,this._path)}get _queryIdentifier(){const e=fp(this._queryParams),n=Od(e);return n==="{}"?"default":n}get _queryObject(){return fp(this._queryParams)}isEqual(e){if(e=at(e),!(e instanceof ah))return!1;const n=this._repo===e._repo,r=Md(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+YI(this._path)}}class $t extends ah{constructor(e,n){super(e,n,new Wd,!1)}get parent(){const e=u_(this._path);return e===null?null:new $t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class hi{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new le(e),r=Me(this.ref,e);return new hi(this._node.getChild(n),r,we)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new hi(i,Me(this.ref,r),we)))}hasChild(e){const n=new le(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function se(t,e){return t=at(t),t._checkNotDeleted("ref"),e!==void 0?Me(t._root,e):t._root}function Me(t,e){return t=at(t),q(t._path)===null?Ok("child","path",e,!1):z_("child","path",e,!1),new $t(t._repo,Ne(t._path,e))}function Zk(t){return H_("remove",t._path),ce(t,null)}function ce(t,e){t=at(t),H_("set",t._path),Pk("set",e,t._path,!1);const n=new tl;return Bk(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Zn(t){t=at(t);const e=new nv(()=>{}),n=new hl(e);return $k(t._repo,t,n).then(r=>new hi(r,new $t(t._repo,t._path),t._queryParams.getIndex()))}class hl{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new ev("value",this,new hi(e.snapshotNode,new $t(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new tv(this,e,n):null}matches(e){return e instanceof hl?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class lh{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new tv(this,e,n):null}createEvent(e,n){U(e.childName!=null,"Child events should have a childName.");const r=Me(new $t(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new ev(e.type,this,new hi(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof lh?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function e1(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const l=n,u=(c,d)=>{Np(t._repo,t,a),l(c,d)};u.userCallback=n.userCallback,u.context=n.context,n=u}const o=new nv(n,s||void 0),a=e==="value"?new hl(o):new lh(e,o);return Hk(t._repo,t,a),()=>Np(t._repo,t,a)}function rv(t,e,n,r){return e1(t,"value",e,n,r)}ik($t);uk($t);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1="FIREBASE_DATABASE_EMULATOR_HOST",Ic={};let n1=!1;function r1(t,e,n,r){t.repoInfo_=new Jy(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function i1(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||rn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),$e("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=xp(s,i),a=o.repoInfo,l,u;typeof process<"u"&&process.env&&(u=process.env[t1]),u?(l=!0,s=`http://${u}?ns=${a.namespace}`,o=xp(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const c=i&&l?new Qr(Qr.OWNER):new CI(t.name,t.options,e);Lk("Invalid Firebase Database URL",o),X(o.path)||rn("Database URL must point to the root of a Firebase Database (not including a child path).");const d=o1(a,t,c,new wI(t.name,n));return new a1(d,t)}function s1(t,e){const n=Ic[e];(!n||n[t.key]!==t)&&rn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Kk(t),delete n[t.key]}function o1(t,e,n,r){let i=Ic[e.name];i||(i={},Ic[e.name]=i);let s=i[t.toURLString()];return s&&rn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new jk(t,n1,n,r),i[t.toURLString()]=s,s}class a1{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Fk(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new $t(this._repo,ie())),this._rootInternal}_delete(){return this._rootInternal!==null&&(s1(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&rn("Cannot call "+e+" on a deleted database.")}}function l1(t=Dy(),e){const n=Pd(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=UC("database");r&&u1(n,...r)}return n}function u1(t,e,n,r={}){t=at(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&rn("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&rn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Qr(Qr.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:jC(r.mockUserToken,t.app.options.projectId);s=new Qr(o)}r1(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(t){oI(Ei),li(new pr("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return i1(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Mn(Qf,Xf,t),Mn(Qf,Xf,"esm2017")}Jt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Jt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};c1();function uh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function iv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const d1=iv,sv=new Ws("auth","Firebase",iv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa=new xd("@firebase/auth");function h1(t,...e){Pa.logLevel<=ae.WARN&&Pa.warn(`Auth (${Ei}): ${t}`,...e)}function bo(t,...e){Pa.logLevel<=ae.ERROR&&Pa.error(`Auth (${Ei}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(t,...e){throw ch(t,...e)}function jt(t,...e){return ch(t,...e)}function f1(t,e,n){const r=Object.assign(Object.assign({},d1()),{[e]:n});return new Ws("auth","Firebase",r).create(e,{appName:t.name})}function ch(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return sv.create(t,...e)}function K(t,e,...n){if(!t)throw ch(e,...n)}function qt(t){const e="INTERNAL ASSERTION FAILED: "+t;throw bo(e),new Error(e)}function on(t,e){t||qt(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rc(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function p1(){return Ap()==="http:"||Ap()==="https:"}function Ap(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(p1()||FC()||"connection"in navigator)?navigator.onLine:!0}function g1(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,n){this.shortDelay=e,this.longDelay=n,on(n>e,"Short delay should be less than long delay!"),this.isMobile=Td()||Ny()}get(){return m1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(t,e){on(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;qt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;qt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;qt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=new Vs(3e4,6e4);function hh(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ys(t,e,n,r,i={}){return av(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=vi(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),ov.fetch()(uv(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function av(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},y1),e);try{const i=new v1(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw vo(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw vo(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw vo(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw vo(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw f1(t,c,u);sn(t,c)}}catch(i){if(i instanceof Yn)throw i;sn(t,"network-request-failed",{message:String(i)})}}async function lv(t,e,n,r,i={}){const s=await Ys(t,e,n,r,i);return"mfaPendingCredential"in s&&sn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function uv(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?dh(t.config,i):`${t.config.apiScheme}://${i}`}class v1{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(jt(this.auth,"network-request-failed")),_1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function vo(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=jt(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E1(t,e){return Ys(t,"POST","/v1/accounts:delete",e)}async function w1(t,e){return Ys(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function C1(t,e=!1){const n=at(t),r=await n.getIdToken(e),i=fh(r);K(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:rs(ou(i.auth_time)),issuedAtTime:rs(ou(i.iat)),expirationTime:rs(ou(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function ou(t){return Number(t)*1e3}function fh(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return bo("JWT malformed, contained fewer than 3 sections"),null;try{const i=pa(n);return i?JSON.parse(i):(bo("Failed to decode base64 JWT payload"),null)}catch(i){return bo("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function S1(t){const e=fh(t);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ps(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Yn&&I1(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function I1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=rs(this.lastLoginAt),this.creationTime=rs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oa(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Ps(t,w1(n,{idToken:r}));K(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?N1(s.providerUserInfo):[],a=T1(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new cv(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function k1(t){const e=at(t);await Oa(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function T1(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function N1(t){return t.map(e=>{var{providerId:n}=e,r=uh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x1(t,e){const n=await av(t,{},async()=>{const r=vi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=uv(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ov.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):S1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return K(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await x1(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Os;return r&&(K(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(K(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(K(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Os,this.toJSON())}_performRefresh(){return qt("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(t,e){K(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class lr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=uh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new R1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new cv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ps(this,this.stsTokenManager.getToken(this.auth,e));return K(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return C1(this,e)}reload(){return k1(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new lr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Oa(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Ps(this,E1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,c;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(a=n.tenantId)!==null&&a!==void 0?a:void 0,C=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,f=(u=n.createdAt)!==null&&u!==void 0?u:void 0,p=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:y,emailVerified:k,isAnonymous:O,providerData:b,stsTokenManager:A}=n;K(y&&A,e,"internal-error");const T=Os.fromJSON(this.name,A);K(typeof y=="string",e,"internal-error"),hn(d,e.name),hn(h,e.name),K(typeof k=="boolean",e,"internal-error"),K(typeof O=="boolean",e,"internal-error"),hn(g,e.name),hn(_,e.name),hn(E,e.name),hn(C,e.name),hn(f,e.name),hn(p,e.name);const M=new lr({uid:y,auth:e,email:h,emailVerified:k,displayName:d,isAnonymous:O,photoURL:_,phoneNumber:g,tenantId:E,stsTokenManager:T,createdAt:f,lastLoginAt:p});return b&&Array.isArray(b)&&(M.providerData=b.map(S=>Object.assign({},S))),C&&(M._redirectEventId=C),M}static async _fromIdTokenResponse(e,n,r=!1){const i=new Os;i.updateFromServerResponse(n);const s=new lr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Oa(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp=new Map;function Qt(t){on(t instanceof Function,"Expected a class definition");let e=Pp.get(t);return e?(on(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Pp.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}dv.type="NONE";const Op=dv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mo(t,e,n){return`firebase:${t}:${e}:${n}`}class Jr{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Mo(this.userKey,i.apiKey,s),this.fullPersistenceKey=Mo("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?lr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Jr(Qt(Op),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Qt(Op);const o=Mo(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const d=lr._fromJSON(e,c);u!==s&&(a=d),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Jr(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Jr(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gv(e))return"Blackberry";if(yv(e))return"Webos";if(ph(e))return"Safari";if((e.includes("chrome/")||fv(e))&&!e.includes("edge/"))return"Chrome";if(mv(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function hv(t=ze()){return/firefox\//i.test(t)}function ph(t=ze()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fv(t=ze()){return/crios\//i.test(t)}function pv(t=ze()){return/iemobile/i.test(t)}function mv(t=ze()){return/android/i.test(t)}function gv(t=ze()){return/blackberry/i.test(t)}function yv(t=ze()){return/webos/i.test(t)}function fl(t=ze()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function A1(t=ze()){var e;return fl(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function P1(){return WC()&&document.documentMode===10}function _v(t=ze()){return fl(t)||mv(t)||yv(t)||gv(t)||/windows phone/i.test(t)||pv(t)}function O1(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(t,e=[]){let n;switch(t){case"Browser":n=Lp(ze());break;case"Worker":n=`${Lp(ze())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ei}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D1(t,e={}){return Ys(t,"GET","/v2/passwordPolicy",hh(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1=6;class M1{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:b1,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dp(this),this.idTokenSubscription=new Dp(this),this.beforeStateQueue=new L1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Qt(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Jr.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Oa(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=g1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?at(e):null;return n&&K(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Qt(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await D1(this),n=new M1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ws("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Qt(e)||this._popupRedirectResolver;K(n,this,"argument-error"),this.redirectPersistenceManager=await Jr.create(this,[Qt(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&h1(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function pl(t){return at(t)}class Dp{constructor(e){this.auth=e,this.observer=null,this.addObserver=qC(n=>this.observer=n)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function F1(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=jt("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",j1().appendChild(r)})}function W1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(t,e){const n=Pd(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(ga(s,e??{}))return i;sn(i,"already-initialized")}return n.initialize({options:e})}function $1(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Qt);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function B1(t,e,n){const r=pl(t);K(r._canInitEmulator,r,"emulator-config-failed"),K(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=Ev(e),{host:o,port:a}=z1(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||H1()}function Ev(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function z1(t){const e=Ev(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:bp(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:bp(o)}}}function bp(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function H1(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return qt("not implemented")}_getIdTokenResponse(e){return qt("not implemented")}_linkToIdToken(e,n){return qt("not implemented")}_getReauthenticationResolver(e){return qt("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zr(t,e){return lv(t,"POST","/v1/accounts:signInWithIdp",hh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1="http://localhost";class vr extends wv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new vr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):sn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=uh(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new vr(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Zr(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Zr(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Zr(e,n)}buildRequest(){const e={requestUri:K1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=vi(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends Cv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n extends qs{constructor(){super("facebook.com")}static credential(e){return vr._fromParams({providerId:_n.PROVIDER_ID,signInMethod:_n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _n.credentialFromTaggedObject(e)}static credentialFromError(e){return _n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _n.credential(e.oauthAccessToken)}catch{return null}}}_n.FACEBOOK_SIGN_IN_METHOD="facebook.com";_n.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn extends qs{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return vr._fromParams({providerId:vn.PROVIDER_ID,signInMethod:vn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return vn.credentialFromTaggedObject(e)}static credentialFromError(e){return vn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return vn.credential(n,r)}catch{return null}}}vn.GOOGLE_SIGN_IN_METHOD="google.com";vn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En extends qs{constructor(){super("github.com")}static credential(e){return vr._fromParams({providerId:En.PROVIDER_ID,signInMethod:En.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return En.credentialFromTaggedObject(e)}static credentialFromError(e){return En.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return En.credential(e.oauthAccessToken)}catch{return null}}}En.GITHUB_SIGN_IN_METHOD="github.com";En.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn extends qs{constructor(){super("twitter.com")}static credential(e,n){return vr._fromParams({providerId:wn.PROVIDER_ID,signInMethod:wn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return wn.credentialFromTaggedObject(e)}static credentialFromError(e){return wn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return wn.credential(n,r)}catch{return null}}}wn.TWITTER_SIGN_IN_METHOD="twitter.com";wn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V1(t,e){return lv(t,"POST","/v1/accounts:signUp",hh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await lr._fromIdTokenResponse(e,r,i),o=Mp(r);return new zn({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Mp(r);return new zn({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Mp(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y1(t){var e;const n=pl(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new zn({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await V1(n,{returnSecureToken:!0}),i=await zn._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La extends Yn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,La.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new La(e,n,r,i)}}function Sv(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?La._fromErrorAndOperation(t,s,e,r):s})}async function q1(t,e,n=!1){const r=await Ps(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return zn._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q1(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await Ps(t,Sv(r,i,e,t),n);K(s.idToken,r,"internal-error");const o=fh(s.idToken);K(o,r,"internal-error");const{sub:a}=o;return K(t.uid===a,r,"user-mismatch"),zn._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&sn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X1(t,e,n=!1){const r="signIn",i=await Sv(t,r,e),s=await zn._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function J1(t,e,n,r){return at(t).onIdTokenChanged(e,n,r)}function Z1(t,e,n){return at(t).beforeAuthStateChanged(e,n)}function eT(t,e,n,r){return at(t).onAuthStateChanged(e,n,r)}function Up(t){return at(t).signOut()}const Da="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Da,"1"),this.storage.removeItem(Da),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(){const t=ze();return ph(t)||fl(t)}const nT=1e3,rT=10;class Rv extends Iv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=tT()&&O1(),this.fallbackToPolling=_v(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);P1()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,rT):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},nT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Rv.type="LOCAL";const iT=Rv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv extends Iv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}kv.type="SESSION";const Tv=kv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new ml(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await sT(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ml.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=mh("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const h=d;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(){return window}function aT(t){Ft().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(){return typeof Ft().WorkerGlobalScope<"u"&&typeof Ft().importScripts=="function"}async function lT(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uT(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function cT(){return Nv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv="firebaseLocalStorageDb",dT=1,ba="firebaseLocalStorage",Av="fbase_key";class Qs{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gl(t,e){return t.transaction([ba],e?"readwrite":"readonly").objectStore(ba)}function hT(){const t=indexedDB.deleteDatabase(xv);return new Qs(t).toPromise()}function kc(){const t=indexedDB.open(xv,dT);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ba,{keyPath:Av})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ba)?e(r):(r.close(),await hT(),e(await kc()))})})}async function jp(t,e,n){const r=gl(t,!0).put({[Av]:e,value:n});return new Qs(r).toPromise()}async function fT(t,e){const n=gl(t,!1).get(e),r=await new Qs(n).toPromise();return r===void 0?null:r.value}function Fp(t,e){const n=gl(t,!0).delete(e);return new Qs(n).toPromise()}const pT=800,mT=3;class Pv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kc(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>mT)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Nv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ml._getInstance(cT()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await lT(),!this.activeServiceWorker)return;this.sender=new oT(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||uT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kc();return await jp(e,Da,"1"),await Fp(e,Da),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>jp(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>fT(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Fp(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=gl(i,!1).getAll();return new Qs(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Pv.type="LOCAL";const gT=Pv;new Vs(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(t,e){return e?Qt(e):(K(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh extends wv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Zr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Zr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _T(t){return X1(t.auth,new gh(t),t.bypassAuthState)}function vT(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),Q1(n,new gh(t),t.bypassAuthState)}async function ET(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),q1(n,new gh(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _T;case"linkViaPopup":case"linkViaRedirect":return ET;case"reauthViaPopup":case"reauthViaRedirect":return vT;default:sn(this.auth,"internal-error")}}resolve(e){on(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){on(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT=new Vs(2e3,1e4);class $r extends Ov{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,$r.currentPopupAction&&$r.currentPopupAction.cancel(),$r.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return K(e,this.auth,"internal-error"),e}async onExecution(){on(this.filter.length===1,"Popup operations only handle one event");const e=mh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(jt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(jt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$r.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wT.get())};e()}}$r.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="pendingRedirect",Uo=new Map;class ST extends Ov{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Uo.get(this.auth._key());if(!e){try{const r=await IT(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Uo.set(this.auth._key(),e)}return this.bypassAuthState||Uo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IT(t,e){const n=TT(e),r=kT(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function RT(t,e){Uo.set(t._key(),e)}function kT(t){return Qt(t._redirectPersistence)}function TT(t){return Mo(CT,t.config.apiKey,t.name)}async function NT(t,e,n=!1){const r=pl(t),i=yT(r,e),o=await new ST(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT=10*60*1e3;class AT{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!PT(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Lv(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(jt(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xT&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wp(e))}saveEventToCache(e){this.cachedEventUids.add(Wp(e)),this.lastProcessedEventTime=Date.now()}}function Wp(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Lv({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function PT(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Lv(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OT(t,e={}){return Ys(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DT=/^https?/;async function bT(t){if(t.config.emulator)return;const{authorizedDomains:e}=await OT(t);for(const n of e)try{if(MT(n))return}catch{}sn(t,"unauthorized-domain")}function MT(t){const e=Rc(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!DT.test(n))return!1;if(LT.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=new Vs(3e4,6e4);function Gp(){const t=Ft().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function jT(t){return new Promise((e,n)=>{var r,i,s;function o(){Gp(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Gp(),n(jt(t,"network-request-failed"))},timeout:UT.get()})}if(!((i=(r=Ft().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Ft().gapi)===null||s===void 0)&&s.load)o();else{const a=W1("iframefcb");return Ft()[a]=()=>{gapi.load?o():n(jt(t,"network-request-failed"))},F1(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw jo=null,e})}let jo=null;function FT(t){return jo=jo||jT(t),jo}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT=new Vs(5e3,15e3),GT="__/auth/iframe",$T="emulator/auth/iframe",BT={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zT=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function HT(t){const e=t.config;K(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?dh(e,$T):`https://${t.config.authDomain}/${GT}`,r={apiKey:e.apiKey,appName:t.name,v:Ei},i=zT.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${vi(r).slice(1)}`}async function KT(t){const e=await FT(t),n=Ft().gapi;return K(n,t,"internal-error"),e.open({where:document.body,url:HT(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BT,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=jt(t,"network-request-failed"),a=Ft().setTimeout(()=>{s(o)},WT.get());function l(){Ft().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},YT=500,qT=600,QT="_blank",XT="http://localhost";class $p{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function JT(t,e,n,r=YT,i=qT){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},VT),{width:r.toString(),height:i.toString(),top:s,left:o}),u=ze().toLowerCase();n&&(a=fv(u)?QT:n),hv(u)&&(e=e||XT,l.scrollbars="yes");const c=Object.entries(l).reduce((h,[g,_])=>`${h}${g}=${_},`,"");if(A1(u)&&a!=="_self")return ZT(e||"",a),new $p(null);const d=window.open(e||"",a,c);K(d,t,"popup-blocked");try{d.focus()}catch{}return new $p(d)}function ZT(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN="__/auth/handler",tN="emulator/auth/handler",nN=encodeURIComponent("fac");async function Bp(t,e,n,r,i,s){K(t.config.authDomain,t,"auth-domain-config-required"),K(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ei,eventId:i};if(e instanceof Cv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",ac(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,d]of Object.entries(s||{}))o[c]=d}if(e instanceof qs){const c=e.getScopes().filter(d=>d!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${nN}=${encodeURIComponent(l)}`:"";return`${rN(t)}?${vi(a).slice(1)}${u}`}function rN({config:t}){return t.emulator?dh(t,tN):`https://${t.authDomain}/${eN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au="webStorageSupport";class iN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Tv,this._completeRedirectFn=NT,this._overrideRedirectResult=RT}async _openPopup(e,n,r,i){var s;on((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Bp(e,n,r,Rc(),i);return JT(e,o,mh())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Bp(e,n,r,Rc(),i);return aT(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(on(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await KT(e),r=new AT(e);return n.register("authEvent",i=>(K(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(au,{type:au},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[au];o!==void 0&&n(!!o),sn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=bT(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _v()||ph()||fl()}}const sN=iN;var zp="@firebase/auth",Hp="1.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function lN(t){li(new pr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;K(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vv(t)},u=new U1(r,i,s,l);return $1(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),li(new pr("auth-internal",e=>{const n=pl(e.getProvider("auth").getImmediate());return(r=>new oN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mn(zp,Hp,aN(t)),Mn(zp,Hp,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=5*60,cN=Ty("authIdTokenMaxAge")||uN;let Kp=null;const dN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>cN)return;const i=n==null?void 0:n.token;Kp!==i&&(Kp=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function hN(t=Dy()){const e=Pd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=G1(t,{popupRedirectResolver:sN,persistence:[gT,iT,Tv]}),r=Ty("authTokenSyncURL");if(r){const s=dN(r);Z1(n,s,()=>s(n.currentUser)),J1(n,o=>s(o))}const i=Ry("auth");return i&&B1(n,`http://${i}`),n}lN("Browser");const fN={apiKey:"AIzaSyDe0ZfHtpKXrg0-UOjsBfVYx10YMBkT7pA",authDomain:"flux-bbbdc.firebaseapp.com",projectId:"flux-bbbdc",storageBucket:"flux-bbbdc.appspot.com",messagingSenderId:"322357398073",appId:"1:322357398073:web:ee4403314c949f43be1be8"},Je=x.createContext({}),pN=[{name:"tsuki",pass:"kitsu"},{name:"werly",pass:"yew"},{name:"arin",pass:"levi"}],mN="localhost:5173/runeflux",gN={users:pN,domain:mN},Ma=[{id:"KL01",type:"KEEPER",subtype:"LIVING",name:"Ernest",effects:[],text:""},{id:"KL02",type:"KEEPER",subtype:"LIVING",name:"Ghost",effects:["LOCATION_MORYTANIA__CHANGE_BROTHERS"],text:"Reveals its origins when in a specific location."},{id:"KL03",type:"KEEPER",subtype:"LIVING",name:"Duke Horacio",effects:[],text:""},{id:"KL04",type:"KEEPER",subtype:"LIVING",name:"Father Aereck",effects:[],text:""},{id:"KL05",type:"KEEPER",subtype:"LIVING",name:"Cook",effects:[],text:""},{id:"KL06",type:"KEEPER",subtype:"LIVING",name:"Drunken Dwarf",effects:["DISCARD_OR_DRAW_RANDOM_1_2"],text:"Once per turn, randomly draw or discard between 1 - 2 cards"},{id:"KL07",type:"KEEPER",subtype:"LIVING",name:"Archmage Sedridor",effects:["DESTROY_1"],text:"Once per turn, choose one rune keeper to destroy."},{id:"KL08",type:"KEEPER",subtype:"LIVING",name:"King Roald",effects:[],text:""},{id:"KL09",type:"KEEPER",subtype:"LIVING",name:"Ava",effects:[],text:""},{id:"KL10",type:"KEEPER",subtype:"LIVING",name:"Vampyre Juvinate",effects:["STEAL_RUNE_CROSSBOW"],text:"Once per turn, steal the rune crossbow from another player."},{id:"KL11",type:"KEEPER",subtype:"LIVING",name:"Goblin",effects:[],text:""},{id:"KL12",type:"KEEPER",subtype:"LIVING",name:"Imp",effects:["WARP"],text:"At the end of a players turn or when discarded teleport to another player."},{id:"KR01",type:"KEEPER",subtype:"RUNE",name:"Mind Rune",effects:[],text:""},{id:"KR02",type:"KEEPER",subtype:"RUNE",name:"Chaos Rune",effects:["WORMHOLE"],text:"Once per turn, choose to draw 1 and play it."},{id:"KR03",type:"KEEPER",subtype:"RUNE",name:"Air Rune",effects:[],text:""},{id:"KR04",type:"KEEPER",subtype:"RUNE",name:"Water Rune",effects:[],text:""},{id:"KR05",type:"KEEPER",subtype:"RUNE",name:"Earth Rune",effects:[],text:""},{id:"KR06",type:"KEEPER",subtype:"RUNE",name:"Fire Rune",effects:[],text:""},{id:"KR07",type:"KEEPER",subtype:"RUNE",name:"Nature Rune",effects:["DESTROY_1"],text:"Once per turn, choose one equipment keeper to destroy"},{id:"KR08",type:"KEEPER",subtype:"RUNE",name:"Law Rune",effects:["TELEPORT"],text:"Once per turn, teleport to a random location."},{id:"KR09",type:"KEEPER",subtype:"RUNE",name:"Cosmic Rune",effects:[],text:""},{id:"KE01",type:"KEEPER",subtype:"EQUIPMENT",name:"Ghostspeak Amulet",effects:["SUMMON_GHOST"],text:""},{id:"KE02",type:"KEEPER",subtype:"EQUIPMENT",name:"Anti-Dragonfire Shield",effects:[],text:""},{id:"KE03",type:"KEEPER",subtype:"EQUIPMENT",name:"Air Staff",effects:[],text:""},{id:"KE04",type:"KEEPER",subtype:"EQUIPMENT",name:"Rune Crossbow",effects:["DESTROY_1"],text:"Once per turn, choose one living keeper to destroy"},{id:"KE05",type:"KEEPER",subtype:"EQUIPMENT",name:"Ava's Attractor",effects:["STEAL_1_FROM_HAND"],text:"Once per turn, attract a card to your hand from an opposing player of your choice."},{id:"KE06",type:"KEEPER",subtype:"EQUIPMENT",name:"Draman Staff",effects:[],text:""},{id:"KE07",type:"KEEPER",subtype:"EQUIPMENT",name:"Rune Scimitar",effects:[],text:""},{id:"K01",type:"KEEPER",subtype:"",name:"Cake",effects:["DRAW_1"],text:""},{id:"CR01",type:"CREEPER",subtype:"EQUIPMENT_CREEPER",name:"Elvarg",effects:["LOCATION_CRANDOR"],text:"A creeper that attaches to equipment disabling any use effects and preventing that player from winning."},{id:"CR02",type:"CREEPER",subtype:"LIVING_CREEPER",name:"Poison",effects:[],text:"A creeper that attaches to a living keeper disabling any use effects and preventing that player from winning."},{id:"CR03",type:"CREEPER",subtype:"LIVING_CREEPER",name:"Wizard Mind Bomb",effects:[],text:"A creeper that attaches to a living keeper disabling any use effects and preventing that player from winning."},{id:"G01",type:"GOAL",subtype:"",name:"Your First Spell",effects:[],text:"To cast your first spell you must acquire the following reagents: |air rune| or |air staff|, |mind rune|."},{id:"G02",type:"GOAL",subtype:"",name:"Restless Ghost",effects:[],text:"In the cemetary of lumbridge you must put the |ghost| to rest. QUEST REQUIREMENTS: |ghost|, |ghostspeak amulet|, |father aereck|"},{id:"G03",type:"GOAL",subtype:"",name:"Ready To Slay A Dragon",effects:[],text:"Speak to |Duke Horacio| to get your |antifire shield|, then you can believe you can fight a dragon."},{id:"G04",type:"GOAL",subtype:"",name:"Dragon Slayer",effects:[],text:"Find your way to |crandor|, off the coast of misthalin and fight the dragon known as |Elvarg|. |antifire shield| is required."},{id:"G05",type:"GOAL",subtype:"",name:"Cook's Assistant",effects:[],text:"For most new adventurers, they end up helping |Cook| get ingredients for his |Cake| for the eternal duke's birthday."},{id:"G06",type:"GOAL",subtype:"",name:"Lumbridge Citizens",effects:[],text:"Collection type: lumbridge residents including the likes of |Duke Horacio|, |Cook| and |Father Aereck|"},{id:"G07",type:"GOAL",subtype:"",name:"Elemental Runes",effects:[],text:"Collection type: any 3 elemental |runes| from |Air|, |Water|, |Earth| or |Fire|"},{id:"G08",type:"GOAL",subtype:"",name:"Rune Mysteries",effects:[],text:"The path to unlocking runecraft requires the power of |Air|, QUEST REQUIREMENTS: |Air Rune|, |Archmage Sedridor|, |Duke Horacio|"},{id:"G09",type:"GOAL",subtype:"",name:"How to become a Chaos Dwarf",effects:[],text:"Under the curse of zamorak dwarves that use magic end up becoming corrupt and turning into chaos dwarves, requirements: |Drunken Dwarf|, |Wizard Mind Bomb|"},{id:"G10",type:"GOAL",subtype:"",name:"Drunken Wizard",effects:[],text:"A wizards favourite drinks got to be a |wizard mind bomb| right, so bring one to |Archmage Sedridor| for reasons."},{id:"G11",type:"GOAL",subtype:"",name:"Rock Cake",effects:[],text:"A secret cake baked only by dwarfs, requirements: |Drunken Dwarf|, |Cake|"},{id:"G12",type:"GOAL",subtype:"",name:"Alchemy",effects:[],text:"To cast alchemy spell you must have a |Nature rune| and |Fire Runes|"},{id:"G13",type:"GOAL",subtype:"",name:"Cursed",effects:[],text:"Not the spell, but someone who gains all 3 creepers must have bad luck right well now they can win, |Any 3 creepers|"},{id:"G14",type:"GOAL",subtype:"",name:"Regicide",effects:[],text:"Requirements: |King Roald|, |Poison|. Wait this isn't how regicide goes."},{id:"G15",type:"GOAL",subtype:"",name:"Animal Magnetism",effects:[],text:"The quest all aspiring newbie rangers rush to for some QoL ammo reservation, Requirements: |Ava|, |Ghostspeak Amulet|, |Ava's Attractor|"},{id:"G16",type:"GOAL",subtype:"",name:"Ranged Setup",effects:[],text:"The power houses of early game range. Requirements: |Rune Crossbow|, |Ava's Attractor|"},{id:"G17",type:"GOAL",subtype:"",name:"Draynor Manor",effects:[],text:"Collection type: residents of draynor manor |Ernest|, |Ava|, |Ghost|"},{id:"G18",type:"GOAL",subtype:"",name:"Swampmans Nightmares",effects:[],text:"|Rune Crossbow| and |Vampyre Juvinate|. You get the rest."},{id:"G19",type:"GOAL",subtype:"",name:"Entrana",effects:[],text:"Collection Type: |Law Rune|, |Draman Staff|"},{id:"G20",type:"GOAL",subtype:"",name:"Smuggler",effects:[],text:"Since equipment and runes aren't allowed on entrana, find a way to get them there. Requirements: |Entrana|, |Any 4 equipment or rune type keepers|."},{id:"G21",type:"GOAL",subtype:"",name:"Misthalins Nobility",effects:[],text:"Collection Type: |King Roald|, |Duke Horacio|"},{id:"G22",type:"GOAL",subtype:"",name:"Mind Goblin",effects:[],text:"They exist. |Mind Rune|, |Goblin|"},{id:"G23",type:"GOAL",subtype:"",name:"Zanaris",effects:[],text:"Collection Type: |Cosmic Rune|, |Dramen Staff|"},{id:"G24",type:"GOAL",subtype:"",name:"Catalytic Runes",effects:[],text:"Collection Type: |Mind Rune|, |Chaos Rune|"},{id:"G25",type:"GOAL",subtype:"",name:"Utility Runes",effects:[],text:"Collection Type: |Law Rune|, |Nature Rune|, |Cosmic Rune|"},{id:"G26",type:"GOAL",subtype:"",name:"Misthalins Altars",effects:[],text:"Collection Type: |Water Rune|, |Earth Rune|"},{id:"G27",type:"GOAL",subtype:"",name:"Zamorak",effects:[],text:"Collection Type: |Wilderness|, |Imp|, |Chaos Rune|"},{id:"G28",type:"GOAL",subtype:"",name:"Starter Monsters",effects:[],text:"Collection Type: |Imp|, |Goblin|, |Ernest(he's a chicken right)|"},{id:"G29",type:"GOAL",subtype:"",name:"Morytanias Low-Tier Undead",effects:[],text:"Collection Type: |Morytania|, |Ghost|, |Vampyre Juvinate|"},{id:"G30",type:"GOAL",subtype:"",name:"Port-Phasmatys",effects:[],text:"Collection Type: |4 ghosts| and location |Morytania|"},{id:"G31",type:"GOAL",subtype:"",name:"Chaos",effects:[],text:"Collection Type: |Abyss|, |Chaos Rune|"},{id:"G32",type:"GOAL",subtype:"",name:"Juvinile 'Rare Drop'",effects:[],text:"After defeating a |Vampyre juvinate|, you have been graced with the staff of utmost versatility the |Air Staff|."},{id:"G33",type:"GOAL",subtype:"",name:"Tribrid",effects:[],text:"Collection Type: |Rune Scimitar|, |Rune Crossbow|, |Air Staff|"},{id:"G34",type:"GOAL",subtype:"",name:"Meele Setup",effects:[],text:"Collection Type: |Rune Scimitar|, |Antidragon-fire shield|, |Cake|"},{id:"G35",type:"GOAL",subtype:"",name:"Chaos Dwarf",effects:[],text:"Collection Type: |Chaos Rune|, |Drunken Dwarf|"},{id:"RL01",type:"RULE",subtype:"LOCATION",name:"Misthalin",effects:["LOCATION","MISTHALIN"],text:"teleport all players to the location of misthalin, this location has no special effects."},{id:"RL02",type:"RULE",subtype:"LOCATION",name:"Abyss",effects:["LOCATION","ABYSS"],text:"When this card is in play, each player has to discard down to 1 card to end their turn."},{id:"RL03",type:"RULE",subtype:"LOCATION",name:"Asgarnia",effects:["LOCATION","ASGARNIA"],text:"When this card is in play, there can be 2 different goals in play. Only 1 is required to win."},{id:"RL04",type:"RULE",subtype:"LOCATION",name:"Morytania",effects:["LOCATION","MORYTANIA"],text:"When this card is in play, Ghosts have a 20% chance to spawn at the end of turns."},{id:"RL05",type:"RULE",subtype:"LOCATION",name:"Wilderness",effects:["LOCATION","WILDERNESS"],text:"When this card is in play, once per turn, choose a keeper to challenge and steal."},{id:"RL06",type:"RULE",subtype:"LOCATION",name:"Entrana",effects:["LOCATION","ENTRANA"],text:"When this card is in play, on arrival everyone must discard all equipment/rune keepers in play."},{id:"RL07",type:"RULE",subtype:"LOCATION",name:"Crandor",effects:["LOCATION","CRANDOR"],text:"When this card is in play, at the end of every turn discard one card."},{id:"RB01",type:"RULE",subtype:"BASIC",name:"Draw 2",effects:["RULE_DRAW","2"],text:"When this card is in play, each player will draw 2 cards per turn."},{id:"RB02",type:"RULE",subtype:"BASIC",name:"Draw 3",effects:["RULE_DRAW","3"],text:"When this card is in play, each player will draw 3 cards per turn."},{id:"RB03",type:"RULE",subtype:"BASIC",name:"Draw 4",effects:["RULE_DRAW","4"],text:"When this card is in play, each player will draw 4 cards per turn."},{id:"RB04",type:"RULE",subtype:"BASIC",name:"Draw 5",effects:["RULE_DRAW","5"],text:"When this card is in play, each player will draw 5 cards per turn."},{id:"RB05",type:"RULE",subtype:"BASIC",name:"Play 2",effects:["RULE_PLAY","2"],text:"When this card is in play, each player will play 2 cards per turn."},{id:"RB06",type:"RULE",subtype:"BASIC",name:"Play 3",effects:["RULE_PLAY","3"],text:"When this card is in play, each player will play 3 cards per turn."},{id:"RB07",type:"RULE",subtype:"BASIC",name:"Play 4",effects:["RULE_PLAY","4"],text:"When this card is in play, each player will play 4 cards per turn."},{id:"RB08",type:"RULE",subtype:"BASIC",name:"Play All",effects:["RULE_PLAY","5"],text:"When this card is in play, each player will play all cards per turn."},{id:"RB09",type:"RULE",subtype:"BASIC",name:"Hand Limit 1",effects:["RULE_HAND_LIMIT","1"],text:"When this card is in play, each player has to discard down to 1 card to end their turn."},{id:"RB10",type:"RULE",subtype:"BASIC",name:"Hand Limit 2",effects:["RULE_HAND_LIMIT","2"],text:"When this card is in play, each player has to discard down to 2 card to end their turn."},{id:"RB11",type:"RULE",subtype:"BASIC",name:"Hand Limit 3",effects:["RULE_HAND_LIMIT","3"],text:"When this card is in play, each player has to discard down to 3 card to end their turn."},{id:"RB12",type:"RULE",subtype:"BASIC",name:"Keeper Limit 3",effects:["RULE_KEEPER_LIMIT","3"],text:"When this card is in play, each player can have 3 keepers in play."},{id:"RB13",type:"RULE",subtype:"BASIC",name:"Keeper Limit 4",effects:["RULE_KEEPER_LIMIT","4"],text:"When this card is in play, each player can have 4 keepers in play."},{id:"RB14",type:"RULE",subtype:"BASIC",name:"Keeper Limit 1",effects:["RULE_KEEPER_LIMIT","1"],text:"When this card is in play, each player can have 1 keepers in play."},{id:"RB15",type:"RULE",subtype:"BASIC",name:"Teleblock",effects:["TELEBLOCK"],text:"When this card is in play, location can not be changed."},{id:"A01",type:"ACTION",subtype:"",name:"Teleport",effects:["LOCATION_RANDOM"],text:"teleport to a random location."},{id:"A02",type:"ACTION",subtype:"",name:"Rules Reset",effects:["RULES_RESET"],text:"When played, all rules will be returned to their base values from the start of the game."},{id:"A03",type:"ACTION",subtype:"",name:"Pick up all keepers",effects:["KEEPERS_TO_HAND"],text:"When played, all players must pick up all their keepers in play."},{id:"A04",type:"ACTION",subtype:"",name:"Trade Hands",effects:["TRADE_HANDS"],text:"When played, choose a player to trade hands with."},{id:"A05",type:"ACTION",subtype:"",name:"Reset One Rule",effects:["RULE_RESET_CHOOSE"],text:"When played, choose 1 rule to reset."},{id:"A06",type:"ACTION",subtype:"",name:"Reset half of rules(upto)",effects:["RULE_RESET_CHOOSE","HALF","OPTIONAL"],text:"When played, choose up to half the rules to reset."},{id:"A07",type:"ACTION",subtype:"",name:"Draw 3, Play 2",effects:["DRAW_3_PLAY_2"],text:"Draw 3 cards, out of those 3 cards you must choose 2 to play and finally discard the remaining card."},{id:"A08",type:"ACTION",subtype:"",name:"Draw 2, Use'em",effects:["DRAW_2_PLAY_2"],text:"Draw 2 cards and immediately use them."},{id:"A09",type:"ACTION",subtype:"",name:"Draw 5, discard 2",effects:["DRAW_5_PLAY_3"],text:"Draw 5 cards, out of those 5 cards you must choose 3 to play and finally discard the remaining cards."},{id:"A10",type:"ACTION",subtype:"",name:"Everyone draw 1",effects:["DRAW_1","ALL_PLAYERS"],text:"All players draw 1 card."},{id:"A11",type:"ACTION",subtype:"",name:"Steal A Keeper",effects:["KEEPER_STEAL_CHOOSE"],text:"Choose a keeper on field to take into your possession."},{id:"A12",type:"ACTION",subtype:"",name:"Exchange Keepers",effects:["KEEPER_EXCHANGE_CHOOSE"],text:"Choose 2 keepers on the field and swap their locations."},{id:"A13",type:"ACTION",subtype:"",name:"Everyone Discard 1",effects:["DISCARD_1","ALL_PLAYERS"],text:"Draw 2 cards and immediately use them."},{id:"A14",type:"ACTION",subtype:"",name:"Summon Ghost",effects:["SUMMON_GHOST"],text:"Summon a ghost to add to your keepers."},{id:"CO01",type:"COUNTER",subtype:"",name:"telestop",effects:["TELESTOP_OR_LOCATION_MISTHALIN"],text:"Out of turn stop an opposing players teleport, during your turn teleport to misthalin."},{id:"CO02",type:"COUNTER",subtype:"",name:"Canceled Plans",effects:["GOALSTOP_OR_GOALS_NONE"],text:"Out of turn, stop another player while they are playing a goal card, during your turn discard all goals in play."},{id:"CO03",type:"COUNTER",subtype:"",name:"Belay That!",effects:["ACTIONSTOP_OR_DISCARD_1_ALL"],text:"Out of turn, stop another player while they are playing an action card, during your turn every discards one."},{id:"CO04",type:"COUNTER",subtype:"",name:"That's Mine!",effects:["KEEPER_STEALSTOP_OR_KEEPER_STEAL"],text:"Out of turn, when another player trys to steal a keeper you steal it instead, during your turn choose a keeper to steal."},{id:"CO05",type:"COUNTER",subtype:"",name:"Veto!",effects:["RULESTOP_OR_RULE_RESET_3"],text:"Out of turn, stop another player while they are playing a rule card, during your turn reset up to 3 rules."},{id:"CO06",type:"COUNTER",subtype:"",name:"It's a Trap!",effects:["KEEPER_DISCARD_REFLECT_OR_KEEPER_DISCARD"],text:"Out of turn, when another player trys to destroy one of your keepers destroy a random one of theirs instead, during your turn, choose a keeper to discard."}],Fo={startDeck:Ma},Xs=(()=>{const t=async h=>{const{auth:g,setUser:_,db:E}=h;await Y1(g).then(C=>{console.log(C)}),await eT(g,async C=>{if(C){const f=C.uid,p=se(E,`users/${f}`),y=await e(E,f);if(y)_(k=>Object.assign({},k,y?{...y}:{}));else{const k={username:"Anon",uid:f,icon:"",isReady:!1,stats:{wins:0,played:0,totalRounds:0},cardCatalog:{},goalWins:{}};for(const O of Ma)k.cardCatalog[`${O.id}`]=0;await ce(p,k),_(O=>Object.assign({},O,k))}}else Up(g)})},e=async(h,g)=>{const _=se(h,"/users/");let E=!1;return await Zn(Me(_,`/${g}/`)).then(async C=>{const f=await C.val();f&&(E=f)}),E},n=(h,g,_,E)=>{const{cardNum:C,cardKey:f,amount:p}=_;switch(h){case"CARD":return r(g,f??"",C??NaN,E);case"WINS":return i(g,p??NaN,E);case"ROUNDS":return s(g,p??NaN,E);case"PLAYED":return o(g,p??NaN,E);case"GOALWON":return a(g,f??"",C??NaN,E)}},r=async(h,g,_,E)=>{try{const C=se(h,`/users/${E}/cardCatalog/${g}`);await ce(C,_)}catch(C){return console.error(C)}},i=async(h,g,_)=>{try{const E=se(h,`/users/${_}/stats/wins`);await ce(E,g)}catch(E){return console.error(E)}},s=async(h,g,_)=>{try{const E=se(h,`/users/${_}/stats/totalRounds`);await ce(E,g)}catch(E){return console.error(E)}},o=async(h,g,_)=>{try{const E=se(h,`/users/${_}/stats/played`);await ce(E,g)}catch(E){return console.error(E)}},a=async(h,g,_,E)=>{try{const C=se(h,`/users/${E}/goalWins/${g}`);await ce(C,_)}catch(C){return console.error(C)}};return{createAccountAnon:t,uploadStats:n,changeName:async(h,g,_)=>{try{const E=se(h,`users/${_}/username`);await ce(E,g)}catch(E){return console.error(E)}},changeIcon:async(h,g,_)=>{try{const E=se(h,`/users/${_}/icon`);await ce(E,g)}catch(E){return console.error(E)}},signout:async h=>{try{await Up(h)}catch(g){return console.error(g)}},testUserSignIn:(h,g,_)=>{let E=!1;for(const C of gN.users)C.name.toLowerCase()===h&&C.pass.toLowerCase()===g&&(E=!0);return E&&_(C=>({...C,username:h,uid:h,isReady:!1,cardCatalog:{},goalWins:{},icon:"",stats:{wins:0,played:0,totalRounds:0}})),E}}})();function yN(){const t=x.useContext(Je),e=ln(),[n,r]=x.useState(!1);return m.jsx("div",{className:"main_menu",children:m.jsxs("div",{className:"menu",children:[!t.user&&m.jsx(kC,{className:"menu_link",to:"/login",children:"Log in"}),t.user?m.jsx("button",{className:"menu_link",onClick:()=>e("/account"),children:"Continue to Game"}):m.jsx("button",{className:`menu_link ${n?"disabled":""}`,onClick:async()=>{await Xs.createAccountAnon(t),r(()=>!0)},children:n?"Please Wait..":"Play as Guest"})]})})}function Er({isSideBox:t,player:e,isTurn:n,selectedPlayerGroup:r,selectPlayerGroup:i}){const{user:s}=x.useContext(Je),o=()=>{if(!r)return!1;for(const a of r)if(a.user.uid===(e==null?void 0:e.user.uid))return!0;return!1};return t?m.jsx("div",{className:`user_bar ${n?"highlight":""} ${o()?"selected":""}`,onContextMenu:a=>{a.preventDefault(),i&&i(e??{})},children:m.jsxs("p",{children:[(e==null?void 0:e.user.username)??"Not Signed In!",m.jsx("span",{className:`${e==null?void 0:e.user.icon} ready_mark`})]})}):m.jsxs("div",{className:"user_bar game_user__this_user",children:[m.jsx("p",{children:(s==null?void 0:s.username)??"Not Signed In!"}),m.jsx("p",{className:"user_bar__uid",children:(s==null?void 0:s.uid)??"000000000"})]})}const _N=1,vN=1,EN=5,wN=2,CN="MISTHALIN",SN=!1,Ls={drawAmount:_N,playAmount:vN,handLimit:EN,keeperLimit:wN,location:CN,teleblock:SN},yl=(()=>{const t=C=>{Array.isArray(C.deck.discard)&&!C.deck.discard.length&&(C.deck.discard=!1),Array.isArray(C.goal)&&!C.goal.length&&(C.goal=!1);for(const f of C.players)Array.isArray(f.hand)&&!f.hand.length&&(f.hand=!1),Array.isArray(f.keepers)&&!f.keepers.length&&(f.keepers=!1);return C},e=C=>((!Array.isArray(C.hand)||!C.hand.length)&&(C.hand=!1),(!Array.isArray(C.keepers)||!C.keepers.length)&&(C.keepers=!1),C),n=(C,f=!1,p=!1)=>({user:C,hand:f,keepers:p}),r=(C,f,p)=>({uid:C,username:f,isReady:p,cardCatalog:{},goalWins:{},stats:{wins:0,played:0,totalRounds:0},icon:""}),i=(C,f)=>{for(let p=0;p<C.length;p++)if(f===C[p].user.uid)return{state:C[p],index:p,error:!1};return{state:C[0],index:0,error:!0}},s=(C,f)=>{for(let p=0;p<C.length;p++)if(f===C[p].uid)return{state:C[p],index:p,error:!1};return{state:C[0],index:0,error:!0}},o=(C,f,p,y,k)=>{const O=se(C,`/games/${f==null?void 0:f.uid}`),b={deck:{pure:[],discard:!1},players:[{user:f??r("00001","hally",!1),hand:!1,keepers:!1}],goal:!1,turn:{player:!1,drawn:0,played:0,temporary:{hand:[],play:0},duel:{cooldown:!1,player1:{id:"",num:0},player2:{id:"",num:0}}},pending:!1,isWon:!1,round:0};for(const T of Fo.startDeck)b.deck.pure.push(T);const A={game:Object.assign({},b,{rules:Ls}),id:(f==null?void 0:f.uid)??"",displayName:(f==null?void 0:f.username)??"",inProgress:!1,users:[f??{uid:"0"}]};ce(O,A),p((f==null?void 0:f.uid)??""),h(C,(f==null?void 0:f.uid)??"",f??{},y,p,k)},a=async(C,f,p)=>{try{const y=se(C,`/games/${f}`);await Zk(y),p(()=>"")}catch(y){return console.error(y)}},l=async(C,f,p,y)=>{try{const k=se(C),O=[];await Zn(Me(k,"/games")).then(async b=>{const A=await b.val();for(const T in A)O.push(A[T]),i(A[T].game.players,f).error||y(()=>A[T].id);p(O)})}catch{return"ERROR"}},u=(C,f,p,y,k,O)=>{const b=se(C);Zn(Me(b,`/games/${f}/`)).then(async A=>{const T=await A.val();if(T.game.players.length>=4)return console.error("Full Room");for(const F of T.game.players)if(F.user.uid===p.uid)return;const M=n(p),S=[...T.game.players];S.push(M),await ce(Me(b,`/games/${f}/game/players`),S);const P=[...T.users];P.push(p),await ce(Me(b,`/games/${f}/users`),P),y(f),h(C,f,p,k,y,O)})},c=(C,f)=>{const p=C.slice(0,f),y=C.slice(f+1);return p.concat(y)},d=async(C,f,p,y)=>{const k=se(C);await Zn(Me(k,`/games/${f}/`)).then(async O=>{const b=await O.val(),A=[...b.game.players],T=A.findIndex(L=>L.user.uid===p.uid),M=c(A,T);await ce(Me(k,`/games/${f}/game/players`),M);const S=[...b.users],P=S.findIndex(L=>L.uid===p.uid),F=c(S,P);await ce(Me(k,`/games/${f}/users`),F),y(()=>"")})},h=(C,f,p,y,k,O)=>{const b=se(C);rv(Me(b,`/games/${f}/users`),async A=>{const T=await A.val();await l(C,p.uid,y,k),console.log(T);const M=[];for(const S of T)S.isReady&&M.push(!0);O(S=>M.length===T.length?!0:S)})};return{convertGameToRoomGame:t,convertToRoomPlayer:e,createRoom:o,destroyRoom:a,getRooms:l,joinRoom:u,leaveRoom:d,connectRoom:h,readyUp:async(C,f,p,y)=>{try{const k=se(C);await Zn(Me(k,`/games/${f}/users`)).then(async O=>{const b=await O.val(),A=s(b,p.uid);console.log(b,A);const T=[...b];T[A.index].isReady=!0,await ce(Me(k,`/games/${f}/users`),T),y(M=>{if(M)return{...M,isReady:!0}})})}catch(k){console.error(k)}},startGame:async(C,f)=>{const p=se(C,`/games/${f}/inProgress`);await ce(p,!0)},checkGameInProgress:async(C,f)=>{try{const p=se(C);let y=!1;return await Zn(Me(p,`/games/${f}/inProgress`)).then(async k=>{await k.val()&&(y=!0)}),y}catch(p){console.error(p)}}}})();function yh({pageType:t}){const{setUser:e}=x.useContext(Je),n=ln();return m.jsxs("div",{className:"lobby_header",children:[m.jsx("h1",{className:"header_title",children:"RuneFlux"}),m.jsxs("div",{children:[m.jsx("button",{className:`header_btn ${t==="ACCOUNT"?"selected":""}`,onClick:()=>{n("/account")},children:"Account"}),m.jsx("button",{className:`header_btn ${t==="CATALOG"?"selected":""}`,onClick:()=>{n("/catalog")},children:"Card Catalog"}),m.jsx("button",{className:`header_btn ${t==="LOBBY"?"selected":""}`,onClick:()=>{n("/lobby")},children:"Lobby"}),m.jsx("button",{className:"header_btn",onClick:async()=>{e(()=>{}),n("/")},children:"Log Out"})]})]})}function IN(){var T;const{createRoom:t,getRooms:e,joinRoom:n,leaveRoom:r,destroyRoom:i,readyUp:s,connectRoom:o}=yl,{db:a,user:l,joinedGameID:u,setJoinedGameID:c,setUser:d}=x.useContext(Je),h=ln(),[g,_]=x.useState([]),[E,C]=x.useState(!1),[f,p]=x.useState(!1),[y,k]=x.useState(!1);x.useEffect(()=>{if(!l)return h("/");g.length||setTimeout(()=>{e(a,(l==null?void 0:l.uid)??"",_,c)},500),u&&l&&o(a,u,l,_,c,C),console.log(g)},[u,l]),x.useEffect(()=>{E&&h("/game")},[E]);const O=()=>{for(const M of g)if(M.id===u)return M;return null},b=()=>g.map((M,S)=>m.jsxs("div",{className:"room_link",onClick:()=>{n(a,M.id,l??{},c,_,C)},children:[m.jsx("p",{children:M.users[0].username}),m.jsxs("p",{children:[Array.isArray(M.game.players)&&M.game.players.length," / 4 Players"]})]},`room_${S}`)),A=()=>{let M;for(const S of g)S.id===u&&(M=S);if(M)return M.users.map((S,P)=>m.jsxs("div",{className:"lobby_player",children:[m.jsxs("p",{children:[P+1,"). ",S.username," ",S.isReady?m.jsx("span",{className:"check ready_mark"}):m.jsx("span",{className:"cross ready_mark"})]}),(l==null?void 0:l.uid)===S.uid&&m.jsx("button",{className:"lobby_link",onClick:()=>{l&&(l.uid===u?i(a,u,c):r(a,u,l,c))},children:"Leave"})]},`lobby_player__${P}`))};return u?m.jsxs("div",{className:"main_menu",children:[m.jsx(Er,{}),m.jsxs("div",{className:"menu lobby",children:[m.jsxs("h2",{children:["Current Session: ",(T=O())==null?void 0:T.users[0].username]}),A(),m.jsx("button",{style:{marginTop:"1rem"},className:`lobby_link ${y?"disabled":""}`,onClick:()=>{k(()=>!0),s(a,u,l??{},d)},children:"Ready"})]})]}):m.jsxs("div",{className:"main_menu",children:[m.jsx(yh,{pageType:"LOBBY"}),m.jsx(Er,{}),m.jsxs("div",{className:"menu lobby",children:[m.jsx("div",{className:"refresh_btn__container",children:m.jsx("button",{className:`refresh_btn ${f?"disabled":""}`,onClick:()=>{!l||f||(e(a,l==null?void 0:l.uid,_,c),p(()=>!0),setTimeout(()=>p(()=>!1),15e3))}})}),g.length?b():m.jsx("div",{children:m.jsx("h3",{style:{textAlign:"center"},children:"No Rooms"})}),m.jsx("button",{style:{width:"50%",alignSelf:"center"},className:"lobby_link",onClick:()=>t(a,l,c,_,C),children:"Create Game"})]})]})}const RN=(()=>{const t=R=>{const v={airObj:!1,mindRune:!1};return R.forEach(I=>{I.id==="KR01"&&(v.mindRune=!0),(I.id==="KR03"||I.id==="KE03")&&(v.airObj=!0)}),v.airObj&&v.mindRune?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},e=R=>{const v={ghost:!1,ghostSpeak:!1,fatherAereck:!1};return R.forEach(I=>{I.id==="KL02"&&(v.ghost=!0),I.id==="KL04"&&(v.fatherAereck=!0),I.id==="KE01"&&(v.ghostSpeak=!0)}),v.ghost&&v.ghostSpeak&&v.fatherAereck?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},n=R=>{const v={dukeH:!1,antifireShield:!1};return R.forEach(I=>{I.id==="KL03"&&(v.dukeH=!0),I.id==="KE02"&&(v.antifireShield=!0)}),v.antifireShield&&v.dukeH?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},r=(R,v)=>{const I={crandor:!1,elvarg:!1,antifireShield:!1};return R.forEach(te=>{te.id==="CR01"&&(I.elvarg=!0),te.id==="KE02"&&(I.antifireShield=!0)}),v==="CRANDOR"&&(I.crandor=!0),I.crandor&&I.elvarg&&I.antifireShield?{hasWon:!0,bypassCreeper:!0}:{hasWon:!1,bypassCreeper:!1}},i=R=>{const v={cook:!1,cake:!1};return R.forEach(I=>{I.id==="K01"&&(v.cake=!0),I.id==="KL05"&&(v.cook=!0)}),v.cook&&v.cake?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},s=R=>{const v={dukeH:!1,cook:!1,fatherAereck:!1};R.forEach(te=>{te.id==="KL04"&&(v.fatherAereck=!0),te.id==="KL05"&&(v.cook=!0),te.id==="KL03"&&(v.dukeH=!0)});let I=0;return v.dukeH&&I++,v.cook&&I++,v.fatherAereck&&I++,I>=2?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},o=R=>{const v={airR:!1,fireR:!1,earthR:!1,waterR:!1};R.forEach(te=>{te.id==="KR03"&&(v.airR=!0),te.id==="KR06"&&(v.fireR=!0),te.id==="KR05"&&(v.earthR=!0),te.id==="KR04"&&(v.waterR=!0)});let I=0;return v.airR&&I++,v.earthR&&I++,v.fireR&&I++,v.waterR&&I++,I>=3?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},a=R=>{const v={airR:!1,archmage:!1,dukeH:!1};return R.forEach(I=>{I.id==="KR03"&&(v.airR=!0),I.id==="KL03"&&(v.dukeH=!0),I.id==="KL07"&&(v.archmage=!0)}),v.airR&&v.archmage&&v.dukeH?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},l=R=>{const v={drunkenDwarf:!1,wizardBeer:!1};return R.forEach(I=>{I.id==="KL06"&&(v.drunkenDwarf=!0),I.id==="CR03"&&(v.wizardBeer=!0)}),v.drunkenDwarf&&v.wizardBeer?{hasWon:!0,bypassCreeper:!0}:{hasWon:!1,bypassCreeper:!1}},u=R=>{const v={archmage:!1,wizardBeer:!1};return R.forEach(I=>{I.id==="KL07"&&(v.archmage=!0),I.id==="CR03"&&(v.wizardBeer=!0)}),v.archmage&&v.wizardBeer?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},c=R=>{const v={drunkenDwarf:!1,cake:!1};return R.forEach(I=>{I.id==="KL06"&&(v.drunkenDwarf=!0),I.id==="K01"&&(v.cake=!0)}),v.cake&&v.drunkenDwarf?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},d=R=>{const v={natureR:!1,fireR:!1};return R.forEach(I=>{I.id==="KR07"&&(v.natureR=!0),I.id==="KR06"&&(v.fireR=!0)}),v.fireR&&v.natureR?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},h=R=>{let v=0;return R.forEach(I=>{I.type==="CREEPER"&&v++}),v>=3?{hasWon:!0,bypassCreeper:!0}:{hasWon:!1,bypassCreeper:!1}},g=R=>{const v={kingRoald:!1,poison:!1};return R.forEach(I=>{I.id==="KL08"&&(v.kingRoald=!0),I.id==="CR02"&&(v.poison=!0)}),v.kingRoald&&v.poison?{hasWon:!0,bypassCreeper:!0}:{hasWon:!1,bypassCreeper:!1}},_=R=>{const v={ava:!1,ghostSpeak:!1,avaDevice:!1};return R.forEach(I=>{I.id==="KL09"&&(v.ava=!0),I.id==="KE05"&&(v.avaDevice=!0),I.id==="KE01"&&(v.ghostSpeak=!0)}),v.ava&&v.avaDevice&&v.ghostSpeak?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},E=R=>{const v={runeXbow:!1,avaDevice:!1};return R.forEach(I=>{I.id==="KE04"&&(v.runeXbow=!0),I.id==="KE05"&&(v.avaDevice=!0)}),v.avaDevice&&v.runeXbow?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},C=R=>{const v={ernest:!1,ava:!1,ghost:!1};return R.forEach(I=>{I.id==="KL01"&&(v.ernest=!0),I.id==="KL09"&&(v.ava=!0),I.id==="KL02"&&(v.ghost=!0)}),v.ava&&v.ernest&&v.ghost?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},f=R=>{const v={runeXbow:!1,vampyreJuvinate:!1};return R.forEach(I=>{I.id==="KE04"&&(v.runeXbow=!0),I.id==="KL10"&&(v.vampyreJuvinate=!0)}),v.runeXbow&&v.vampyreJuvinate?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},p=R=>{const v={lawR:!1,dramanStaff:!1};return R.forEach(I=>{I.id==="KE06"&&(v.dramanStaff=!0),I.id==="KR08"&&(v.lawR=!0)}),v.lawR&&v.dramanStaff?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},y=(R,v)=>{const I={entrana:!1,equipmentOrRune:0};return R.forEach(te=>{(te.subtype==="RUNE"||te.subtype==="EQUIPMENT")&&(I.equipmentOrRune+=1)}),v==="ENTRANA"&&(I.entrana=!0),I.entrana&&I.equipmentOrRune>=4?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},k=R=>{const v={kingRoald:!1,dukeH:!1};return R.forEach(I=>{I.id==="KL03"&&(v.dukeH=!0),I.id==="KL08"&&(v.kingRoald=!0)}),v.dukeH&&v.kingRoald?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},O=R=>{const v={mindR:!1,goblin:!1};return R.forEach(I=>{I.id==="KR01"&&(v.mindR=!0),I.id==="KL11"&&(v.goblin=!0)}),v.goblin&&v.mindR?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},b=R=>{const v={cosmicR:!1,dramanStaff:!1};return R.forEach(I=>{I.id==="KE06"&&(v.dramanStaff=!0),I.id==="KR09"&&(v.cosmicR=!0)}),v.cosmicR&&v.dramanStaff?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},A=R=>{const v={mindR:!1,chaosR:!1};return R.forEach(I=>{I.id==="KR01"&&(v.mindR=!0),I.id==="KR02"&&(v.chaosR=!0)}),v.chaosR&&v.mindR?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},T=R=>{const v={lawR:!1,natureR:!1,cosmicR:!1};return R.forEach(I=>{I.id==="KE07"&&(v.natureR=!0),I.id==="KR08"&&(v.lawR=!0),I.id==="KR09"&&(v.cosmicR=!0)}),v.cosmicR&&v.lawR&&v.natureR?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},M=R=>{const v={waterR:!1,earthR:!1};return R.forEach(I=>{I.id==="KR05"&&(v.earthR=!0),I.id==="KR04"&&(v.waterR=!0)}),v.earthR&&v.waterR?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},S=(R,v)=>{const I={wilderness:!1,imp:!1,chaosR:!1};return R.forEach(te=>{te.id==="KL12"&&(I.imp=!0),te.id==="KR02"&&(I.chaosR=!0)}),v==="WILDERNESS"&&(I.wilderness=!0),I.chaosR&&I.wilderness&&I.imp?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},P=R=>{const v={imp:!1,goblin:!1,ernest:!1};return R.forEach(I=>{I.id==="KL12"&&(v.imp=!0),I.id==="KL11"&&(v.goblin=!0),I.id==="KL01"&&(v.ernest=!0)}),v.ernest&&v.goblin&&v.imp?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},F=(R,v)=>{const I={morytania:!1,ghost:!1,vampyreJuvinate:!1};return R.forEach(te=>{te.id==="KL11"&&(I.ghost=!0),te.id==="KL01"&&(I.vampyreJuvinate=!0)}),v==="MORYTANIA"&&(I.morytania=!0),I.ghost&&I.morytania&&I.vampyreJuvinate?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},L=(R,v)=>{const I={morytania:!1,ghost:0};return R.forEach(te=>{te.id==="KL11"&&(I.ghost+=1)}),v==="MORYTANIA"&&(I.morytania=!0),I.ghost>=4&&I.morytania?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},V=(R,v)=>{const I={abyss:!1,chaosR:!1};return R.forEach(te=>{te.id==="KR02"&&(I.chaosR=!0)}),v==="ABYSS"&&(I.abyss=!0),I.abyss&&I.chaosR?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},B=R=>{const v={vampyreJuvinate:!1,airStaff:!1};return R.forEach(I=>{I.id==="KL10"&&(v.vampyreJuvinate=!0),I.id==="KE03"&&(v.airStaff=!0)}),v.airStaff&&v.vampyreJuvinate?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},re=R=>{const v={runeScimitar:!1,runeXbow:!1,airStaff:!1};return R.forEach(I=>{I.id==="KE07"&&(v.runeScimitar=!0),I.id==="KE04"&&(v.runeXbow=!0),I.id==="KE03"&&(v.airStaff=!0)}),v.airStaff&&v.runeScimitar&&v.runeXbow?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},ee=R=>{const v={runeScimitar:!1,antfireShield:!1,cake:!1};return R.forEach(I=>{I.id==="KE07"&&(v.runeScimitar=!0),I.id==="KE02"&&(v.antfireShield=!0),I.id==="K01"&&(v.cake=!0)}),v.antfireShield&&v.cake&&v.runeScimitar?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},j=R=>{const v={chaosR:!1,drunkenDwarf:!1};return R.forEach(I=>{I.id==="KR02"&&(v.chaosR=!0),I.id==="KL06"&&(v.drunkenDwarf=!0)}),v.chaosR&&v.drunkenDwarf?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}};return{compareKeepersToGoal:(R,v,I)=>{if(!v)return{hasWon:!1,bypassCreeper:!1};switch(v.id){case"G01":return t(R);case"G02":return e(R);case"G03":return n(R);case"G04":return r(R,I);case"G05":return i(R);case"G06":return s(R);case"G07":return o(R);case"G08":return a(R);case"G09":return l(R);case"G10":return u(R);case"G11":return c(R);case"G12":return d(R);case"G13":return h(R);case"G14":return g(R);case"G15":return _(R);case"G16":return E(R);case"G17":return C(R);case"G18":return f(R);case"G19":return p(R);case"G20":return y(R,I);case"G21":return k(R);case"G22":return O(R);case"G23":return b(R);case"G24":return A(R);case"G25":return T(R);case"G26":return M(R);case"G27":return S(R,I);case"G28":return P(R);case"G29":return F(R,I);case"G30":return L(R,I);case"G31":return V(R,I);case"G32":return B(R);case"G33":return re(R);case"G34":return ee(R);case"G35":return j(R)}return{hasWon:!1,bypassCreeper:!1}}}})();var ue=(t=>(t[t.INIT=0]="INIT",t[t.CHANGE_TURN=1]="CHANGE_TURN",t[t.DRAWN_ADD=2]="DRAWN_ADD",t[t.PLAYED_ADD=3]="PLAYED_ADD",t[t.TEMPORARY_HAND__BEGIN=4]="TEMPORARY_HAND__BEGIN",t[t.TEMPORARY_HAND__END=5]="TEMPORARY_HAND__END",t[t.TEMPORARY_HAND_CARD__ADD=6]="TEMPORARY_HAND_CARD__ADD",t[t.TEMPORARY_HAND_CARD__REMOVE=7]="TEMPORARY_HAND_CARD__REMOVE",t[t.TEMPORARY_PLAY_CHANGE=8]="TEMPORARY_PLAY_CHANGE",t[t.DUEL_BEGIN=9]="DUEL_BEGIN",t[t.DUEL_ROLL__PLAYER_1=10]="DUEL_ROLL__PLAYER_1",t[t.DUEL_ROLL__PLAYER_2=11]="DUEL_ROLL__PLAYER_2",t[t.DUEL_END=12]="DUEL_END",t[t.DUEL_COOLDOWN=13]="DUEL_COOLDOWN",t))(ue||{});const{compareKeepersToGoal:kN}=RN,{convertGameToRoomGame:TN,convertToRoomPlayer:NN}=yl,_h=(()=>{const t=(S,P)=>{const{player:F,victim:L,amount:V,duelCard:B,cards:re,init:ee}=P.payload,{db:j,gameId:$}=P.payload.upload,{temporary:R}=S,v=Math.ceil(Math.random()*100);switch(P.type){case ue.INIT:return Object.assign({},S,{...ee});case ue.CHANGE_TURN:return r("TURN",j,{turnState:Object.assign({},S,{player:F,drawn:0,played:0})},$),Object.assign({},S,{player:F,drawn:0,played:0});case ue.DRAWN_ADD:return r("TURN",j,{turnState:Object.assign({},S,{player:F,drawn:V})},$),Object.assign({},S,{player:F,drawn:V});case ue.PLAYED_ADD:return r("TURN",j,{turnState:Object.assign({},S,{played:V})},$),Object.assign({},S,{played:V});case ue.TEMPORARY_HAND__BEGIN:return r("TURN",j,{turnState:Object.assign({},S,{temporary:{...R,hand:re?[...re]:[],play:V??0}})},$),Object.assign({},S,{temporary:{...R,hand:re?[...re]:[]},play:V??0});case ue.TEMPORARY_HAND_CARD__REMOVE:return r("TURN",j,{turnState:Object.assign({},S,{temporary:{...R,hand:re?[...re]:[]}})},$),Object.assign({},S,{temporary:{...R,hand:re?[...re]:[]}});case ue.TEMPORARY_HAND_CARD__ADD:return r("TURN",j,{turnState:Object.assign({},S,{temporary:{...R,hand:R&&re?[...R.hand,...re]:[]}})},$),Object.assign({},S,{temporary:{...R,hand:R&&re?[...R.hand,...re]:[]}});case ue.TEMPORARY_PLAY_CHANGE:return r("TURN",j,{turnState:Object.assign({},S,{temporary:{...R,play:V}})},$),Object.assign({},S,{temporary:{...R,play:V}});case ue.DUEL_BEGIN:return r("TURN",j,{turnState:Object.assign({},S,{duel:{cooldown:!0,card:B,player1:{id:F,num:0},player2:{id:L,num:0}}})},$),Object.assign({},S,{duel:{cooldown:!0,card:B,player1:{id:F,num:0},player2:{id:L,num:0}}});case ue.DUEL_ROLL__PLAYER_1:return r("TURN",j,{turnState:Object.assign({},S,{duel:{...S.duel,player1:{...S.duel.player1,num:v}}})},$),Object.assign({},S,{duel:{...S.duel,player1:{...S.duel.player1,num:v}}});case ue.DUEL_ROLL__PLAYER_2:return r("TURN",j,{turnState:Object.assign({},S,{duel:{...S.duel,player2:{...S.duel.player2,num:v}}})},$),Object.assign({},S,{duel:{...S.duel,player2:{...S.duel.player2,num:v}}});case ue.DUEL_END:return r("TURN",j,{turnState:Object.assign({},S,{duel:{...S.duel,player1:{id:"",num:0},player2:{id:"",num:0}}})},$),Object.assign({},S,{duel:{...S.duel,player1:{id:"",num:0},player2:{id:"",num:0}}});case ue.DUEL_COOLDOWN:return r("TURN",j,{turnState:Object.assign({},S,{duel:{...S.duel,cooldown:!1}})},$),Object.assign({},S,{duel:{...S.duel,cooldown:!1}});default:return S}},e=S=>{const P={deck:{pure:[],discard:[]},players:[{user:S??{username:"hal",uid:"000001",isReady:!0},hand:[],keepers:[],isReady:!1}],goal:[],round:0,pending:!1,counter:!1,isWon:!1};for(const L of Fo.startDeck)P.deck.pure.push(L);return Object.assign({},P,{rules:Ls,turn:{player:!1,drawn:0,played:0,temporary:{hand:[],play:0},duel:{cooldown:!1,card:null,player1:{id:"",num:0},player2:{id:"",num:0}}}})},n=async(S,P,F)=>{try{const L=se(P,`/games/${S}/game`);await Zn(Me(L,"/")).then(async V=>{const B=await V.val();F(B.deck,B.goal,B.rules,B.players,B.turn,B.round,B.pending,B.counter,B.isWon)}),await rv(L,async V=>{const B=await V.val();F(B.deck,B.goal,B.rules,B.players,B.turn,B.round,B.pending,B.counter,B.isWon)})}catch(L){console.error(L)}},r=(S,P,F,L)=>{const{gameState:V,deckState:B,turnState:re,playersState:ee,playerId:j,roundState:$,ruleState:R,cardState:v,goalState:I}=F;switch(S){case"DECK_PURE":return s(P,B??[],L);case"DECK_DISCARD":return s(P,B??[],L,!0);case"RULES":return a(P,R??{},L);case"TURN":return o(P,re??{},L);case"PLAYER":return l(P,ee??[],j??"",L);case"ROUND":return u(P,$??0,L);case"PENDING":return c(P,v??!1,L);case"COUNTER":return d(P,v??!1,L);case"GOAL":return h(P,I??[],L);case"WIN":return g(P,L);default:return i(P,V??{},L)}},i=async(S,P,F)=>{try{const L=TN(P),V=se(S,`/games/${F}/game`);await ce(V,L)}catch(L){return console.error(L)}},s=async(S,P,F,L=!1)=>{try{const B=se(S,`/games/${F}/game/deck/${L?"discard":"pure"}`);await ce(B,P.length?P:!1)}catch(V){return console.error(V)}},o=async(S,P,F)=>{try{const L=se(S,`/games/${F}/game/turn`);await ce(L,Object.assign({},P,{temporary:{...P.temporary,hand:P.temporary.hand.length?P.temporary.hand:!1}}))}catch(L){return console.error(L)}},a=async(S,P,F)=>{try{const L=se(S,`/games/${F}/game/rules`);await ce(L,P)}catch(L){return console.error(L)}},l=async(S,P,F,L)=>{try{const{state:V,index:B}=_(P,F),re=NN(V),ee=se(S,`/games/${L}/game/players/${B}`);await ce(ee,re)}catch(V){return console.error(V)}},u=async(S,P,F)=>{try{const L=se(S,`/games/${F}/game/round`);await ce(L,P)}catch(L){return console.error(L)}},c=async(S,P,F)=>{try{const L=se(S,`/games/${F}/game/pending`);await ce(L,P)}catch(L){return console.error(L)}},d=async(S,P,F)=>{try{const L=se(S,`/games/${F}/game/counter`);await ce(L,P)}catch(L){return console.error(L)}},h=async(S,P,F)=>{try{const L=se(S,`/games/${F}/game/goal`);await ce(L,P!=null&&P.length?P:!1)}catch(L){return console.error(L)}},g=async(S,P)=>{try{const F=se(S,`/games/${P}/game/isWon`);await ce(F,!0)}catch(F){return console.error(F)}},_=(S,P)=>{for(let F=0;F<S.length;F++)if(P===S[F].user.uid)return{state:S[F],index:F};return{state:S[0],index:0}};return{loadGame:e,connectGame:n,upload:r,uploadTable:i,getPlayer:_,getCardById:S=>{for(const P of Fo.startDeck)if(S===P.id)return P;return Fo.startDeck[0]},getInitRule:S=>{const P=Ls;for(const F in P)if(S===F)return P[F];return 0},chooseWhoGoesFirst:S=>{const P=Math.floor(Math.random()*S.length);return S[P].user.uid},checkShouldDiscard:S=>{switch(S){case"GOAL":case"KEEPER":case"CREEPER":return!1;case"ACTION":case"COUNTER":case"RULE":return!0;default:return!0}},checkForCreepers:S=>{const P=[];for(const F of S)F.type==="CREEPER"&&P.push(F);return P},checkPlayersForKeeper:(S,P)=>{const F={keeper:null,index:0,playerIndex:0};return S.forEach((L,V)=>{L.keepers.forEach((B,re)=>{B.id===P&&(F.keeper=B,F.index=re,F.playerIndex=V)})}),F},checkIfWon:(S,P,F)=>{const L={playerId:"",hasCreeper:!1,bypassCreeper:!1,hasWon:!1};return S.forEach(V=>{const{hasWon:B,bypassCreeper:re}=kN(V.keepers,P,F);B&&(V.keepers.forEach(ee=>{ee.type==="CREEPER"&&(L.hasCreeper=!0)}),L.hasWon=B,L.bypassCreeper=re,L.playerId=V.user.uid)}),L.playerId!==""&&!L.hasCreeper||L.hasCreeper&&L.bypassCreeper?L.playerId:!1},drawPhase:S=>S.round===0?3:S.rules.drawAmount-S.turn.drawn,removeCard:(S,P)=>{const F=S.slice(0,P),L=S.slice(P+1);return console.log(F,L),F.concat(L)},shuffleDeck:S=>{const P=[],F=[...S],L=S.length;for(let V=L;V>0;V--){const B=Math.floor(Math.random()*V);P.push(F[B]),F.splice(B,1)}return P},endTurn:(S,P,F,L,V)=>{const B=_(P,F.player.toString()),re=B.index<P.length-1?B.index+1:0;return L({type:1,payload:{player:P[re].user.uid,upload:{db:S,gameId:V}}}),!re},turnReducer:t}})();function xN(){return m.jsx("div",{className:"deck_container",children:Array.from([0,1,2,3,4,5]).map(t=>m.jsx("div",{style:{transform:`rotateZ(-3deg) translate(calc(2px * ${t}), calc(-4px * ${t}))`},className:"card_back card deck_card"},`deck_card__${t}`))})}function AN({drawCards:t}){return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"underlay"}),m.jsxs("div",{className:"popup",children:[m.jsx(xN,{}),m.jsx("button",{className:"menu_link",onClick:t,children:"Draw Cards"})]})]})}function Gt({cardState:t,position:e,numberInLine:n,inspectKeeper:r,selectCard:i,selectedGoalGroup:s,selectGoalGroup:o}){const{user:a}=x.useContext(Je),[l,u]=x.useState(!1),[c,d]=x.useState(e==="HAND");x.useEffect(()=>{setTimeout(()=>{d(()=>!1)},300)},[]);const h=`translate(calc(-50% * ${n}), -250px)`,g=`translate(calc(-50% * ${n}), ${l?"-50px":"0"})`,_=()=>{if(!s)return!1;for(const f of s)if(f.state.id===t.state.id)return!0;return!1},E=()=>{if(a!=null&&a.cardCatalog&&(e==="HAND"||e==="SELECT"||e==="CATALOG")){const f=a==null?void 0:a.cardCatalog[`${t.state.id}`];if(!f)return"";if(f>999)return"gtrim twilight";if(f>499)return"gtrim";if(f>249)return"strim";if(f>49)return"btrim"}},C=()=>t.state.text.split("|").map((f,p)=>m.jsx("span",{style:{color:p%2===1?"pink":"white"},children:f},`card_text__${p}`));return t.state?m.jsxs("div",{className:`card ${E()} ${t.state.type.toLowerCase()} ${e==="PENDING"?"pending":""} ${e==="HAND"?"hand_card":""} ${_()?"goal_selected":""}`,style:e==="HAND"?{transform:c?h:g}:e==="CREEPER"?{transform:"scale(0.3) translate(-300px, -100px)"}:{},onMouseEnter:f=>{c||(f.stopPropagation(),u(!0))},onMouseLeave:f=>{f.stopPropagation(),u(!1)},onClick:r?()=>r({...t,playerIndex:0}):()=>i&&i(t),onContextMenu:f=>{f.preventDefault(),!(!o||t.state.type!=="GOAL")&&o(t)},children:[m.jsx("div",{className:"card_container__inner_left",children:m.jsx("div",{className:"card_header__background",children:m.jsx("h4",{className:"card_header__text",children:t.state.name.split(" ").join("_")})})}),m.jsxs("div",{className:"card_container__inner_right",children:[m.jsxs("h2",{children:[t.state.type,m.jsx("span",{className:`${t.state.subtype.toLowerCase()}_subtype icon card_subtype`})]}),m.jsx("h3",{children:t.state.name}),m.jsx("hr",{className:"card_hr__thick"}),m.jsx("p",{children:t.state.type==="GOAL"?C():t.state.text})]})]}):null}function Tc({hand:t,selectCard:e}){const n=()=>t.map((r,i)=>m.jsx(Gt,{cardState:{state:r,index:i},position:"HAND",numberInLine:i+1,selectCard:e},`hand_card_${i}`));return m.jsx("div",{className:"hand_container",children:n()})}function vh({message:t,clearErrors:e}){return m.jsx("div",{className:"errors_container",onAnimationEnd:e,children:m.jsx("p",{className:"errors_message",children:t})})}function PN({cardState:t,table:e,localPlayer:n,playCard:r,discardCard:i,fromWormhole:s,selectedKeeperGroup:o,selectedPlayerGroup:a,selectedRuleGroup:l}){const[u,c]=x.useState([]),[d,h]=x.useState([]),{user:g}=x.useContext(Je),_=()=>{if(t.state.type==="COUNTER"&&e.turn.player!==(g==null?void 0:g.uid))return E();const{player:T,played:M,temporary:S}=e.turn;if(s){if(!S)return!1;const P=(S==null?void 0:S.play)<1,F=t.state.type==="ACTION"||t.state.type==="COUNTER"?f(t.state.id).error:!1;if(P||F)return[P,!0,F]}else{const P=M>=e.rules.playAmount,F=T===(g==null?void 0:g.uid),L=t.state.type==="ACTION"||t.state.type==="COUNTER"?f(t.state.id).error:!1;if(P||!F||L)return[P,F,L]}return!1},E=()=>{const{type:T,subtype:M}=e.pending&&e.pending!==!0?e.pending:{type:"",subtype:""},S=!e.pending,P=[];return t.state.id==="CO01"&&M==="LOCATION"&&P.push(!1),t.state.id==="CO02"&&T==="GOAL"&&P.push(!1),t.state.id==="CO03"&&T==="ACTION"&&P.push(!1),t.state.id==="CO04"&&C()&&P.push(!1),t.state.id==="CO05"&&M==="BASIC"&&P.push(!1),t.state.id==="CO06"&&C()&&P.push(!1),S||!P.length?[S,!!P.length]:!1},C=()=>{if(t.state.effects&&t.state.effects.length)return!!(t.state.id==="CO04"&&(t.state.effects.includes("STEAL_RUNE_CROSSBOW")||t.state.effects.includes("KEEPER_STEAL_CHOOSE"))||t.state.id==="CO06"&&t.state.effects.includes("DESTROY_1"))},f=T=>T==="A04"&&!a.length?{error:!1,warning:!0}:T==="A04"&&a[0].user.uid===(g==null?void 0:g.uid)?{error:!0,warning:!1}:T==="A05"&&!l.length?{error:!1,warning:!0}:T==="A06"&&!l.length?{error:!1,warning:!0}:T==="A11"&&!o.length?{error:!1,warning:!0}:T==="A11"&&e.players[o[0].playerIndex].user.uid===(g==null?void 0:g.uid)?{error:!0,warning:!1}:T==="A12"&&o.length<2?{warning:!0,error:!1}:T==="CO04"&&!o.length?{warning:!0,error:!1}:T==="CO04"&&e.players[o[0].playerIndex].user.uid===(g==null?void 0:g.uid)?{error:!0,warning:!1}:T==="CO05"&&!l.length?{warning:!0,error:!1}:T==="CO06"&&!o.length?{warning:!0,error:!1}:T==="CO06"&&e.players[o[0].playerIndex].user.uid===(g==null?void 0:g.uid)?{error:!0,warning:!1}:{warning:!1,error:!1},p=T=>{const M=[];T[0]&&(!s&&(g==null?void 0:g.uid)===e.turn.player&&M.push("Play limit reached! End turn."),s&&M.push("Play limit reached! Discard down to 0."),(g==null?void 0:g.uid)!==e.turn.player&&t.state.type==="COUNTER"&&M.push("No card to counter.")),T[1]===!1&&(t.state.type==="COUNTER"?M.push("Doesn't counter that type of card."):M.push("Please wait for your turn.")),T[2]===!0&&M.push("Cannot select groups pertaining to yourself."),c(()=>[...M])},y=()=>c(()=>[]),k=()=>{if(s){const T=e.turn.temporary.play<1;if(!T)return[T]}else{const T=n.hand.length>e.rules.handLimit;if(!T)return[T]}return!1},O=T=>{const M=[];T[0]||(s?M.push(`Play ${e.turn.temporary.play} more.`):M.push("Hand limit has not been reached.")),h(()=>[...M])},b=()=>h(()=>[]),A=(T,M)=>T.map((S,P)=>m.jsx(vh,{message:S,clearErrors:M},`endturn_error__${P}`));return m.jsxs("div",{className:"popup",children:[m.jsx(Gt,{cardState:t,position:"SELECT"}),m.jsxs("div",{className:"play_btn_group__card",children:[m.jsx("div",{className:"errors_container__play",children:u.length?A(u,y):null}),m.jsx("button",{className:`play_btn__card ${e.pending&&t.state.type!=="COUNTER"||_()?"disabled":""} ${f(t.state.id).warning?"warning":""}`,onClick:()=>{if(e.pending&&t.state.type!=="COUNTER")return;const T=_();if(T)return p(T);r(t.state,t.index)},children:"Play Card"}),m.jsx("div",{className:"errors_container__discard",children:d.length?A(d,b):null}),m.jsx("button",{className:`discard_btn__card ${e.pending||k()?"disabled":""}`,onClick:()=>{if(e.pending)return;const T=k();if(T)return O(T);i(t.index)},children:"Discard Card"})]})]})}function ON({rules:t,selectedRuleGroup:e,selectRuleGroup:n,isTurn:r,cooldown:i,setCooldown:s,wormhole:o}){const[a,l]=x.useState(!1),u=["No special effects here.","Double agenda(two goals) is in play here.","At the end of every turn discard 1 random card","Once per turn, Challenge an other players keeper for the chance to steal them","Upon arriving here discard all current equipment and rune keepers in play.","10% chance to summon a ghost at the end of your turn.","Once per turn, You have the option to draw 1 and play it."];return m.jsxs("div",{style:{zIndex:20},className:"rules_container box_border ",children:[m.jsx("h2",{children:"Rules"}),m.jsx("hr",{}),m.jsxs("ul",{children:[m.jsxs("li",{className:`rule ${e.includes("location")?"highlight":""} ${t.location==="ABYSS"?`location_btn ${i||!r?"disabled":""}`:""}`,onClick:()=>{t.location!=="ABYSS"||i||!r||(o(1,0),s(()=>!0))},onContextMenu:c=>{c.preventDefault(),n("location")},children:["Location: ",t.location,m.jsx("span",{className:"location_tooltip__btn",onMouseEnter:()=>l(()=>!0),onMouseLeave:()=>l(()=>!1),children:"i"}),a&&m.jsxs("span",{className:"location_tooltip__text",children:[t.location==="MISTHALIN"?u[0]:"",t.location==="ASGARNIA"?u[1]:"",t.location==="CRANDOR"?u[2]:"",t.location==="WILDERNESS"?u[3]:"",t.location==="ENTRANA"?u[4]:"",t.location==="MORYTANIA"?u[5]:"",t.location==="ABYSS"?u[6]:""]})]}),m.jsxs("li",{className:`rule ${e.includes("drawAmount")?"highlight":""}`,onContextMenu:c=>{c.preventDefault(),n("drawAmount")},children:["Draw: ",t.drawAmount]}),m.jsxs("li",{className:`rule ${e.includes("playAmount")?"highlight":""}`,onContextMenu:c=>{c.preventDefault(),n("playAmount")},children:["Play: ",t.playAmount]}),m.jsxs("li",{className:`rule ${e.includes("handLimit")?"highlight":""}`,onContextMenu:c=>{c.preventDefault(),n("handLimit")},children:["Hand Limit: ",t.handLimit]}),m.jsxs("li",{className:`rule ${e.includes("keeperLimit")?"highlight":""}`,onContextMenu:c=>{c.preventDefault(),n("keeperLimit")},children:["Keeper Limit: ",t.keeperLimit]}),m.jsx("li",{className:`rule ${e.includes("teleblock")?"highlight":""}`,onContextMenu:c=>{c.preventDefault(),n("teleblock")},children:t.teleblock?"Teleblocked":""})]})]})}function LN({table:t,localPlayer:e,endTurn:n}){const[r,i]=x.useState([]),s=()=>{const u=t.turn.drawn>=t.rules.drawAmount,c=t.turn.played>=t.rules.playAmount||!e.hand.length,d=e.hand.length>t.rules.handLimit,h=e.keepers.length>t.rules.keeperLimit,g=t.turn.player===e.user.uid,_=t.turn.temporary.hand.length>0;return!u||!c||d||h||!g||_?[u,c,d,h,g,_]:!1},o=u=>{const c=[];u[0]||c.push("Draw limit not reached!"),u[1]||c.push("Play limit not reached!"),u[2]&&c.push("Hand limit reached! Discard down."),u[3]&&c.push("Keeper limit reached! Discard a keeper."),u[4]||c.push("Please wait your turn."),u[5]&&c.push("Finish using all the cards in hand."),i(()=>[...c])},a=()=>{i(()=>[])},l=()=>r.map((u,c)=>m.jsx(vh,{message:u,clearErrors:a},`endturn_error__${c}`));return m.jsxs("div",{className:"endturn_btn_container",children:[m.jsx("button",{style:{whiteSpace:"nowrap"},className:`endturn_btn ${s()||t.pending?"disabled":""}`,onClick:()=>{if(t.pending)return;const u=s();if(u)return o([...u]);n()},children:"End Turn"}),r.length?l():null]})}function DN({cardState:t,isSideWays:e,inspectKeeper:n,selectKeeperGroup:r,selectedKeeperGroup:i,playerNum:s}){const o=()=>{if(!i||!s)return!1;for(const a of i)if(a.playerIndex===s-1&&a.index===t.index)return!0;return!1};return e?m.jsxs("div",{className:`card__mini ${t.state.type.toLowerCase()} ${o()?"selected":""}`,style:t.state.effects&&!t.state.cooldown?{background:"var(--black-shine)"}:{},onClick:t.state.attachment?a=>a.preventDefault():()=>{s&&n({...t,playerIndex:s-1})},onContextMenu:a=>{a.preventDefault(),r&&r({state:t.state,index:t.index,playerIndex:s?s-1:0})},children:[m.jsx("div",{className:"card_container__inner_left",children:m.jsx("div",{className:"card_header__background",children:m.jsx("h4",{className:"card_header__text",style:t.state.name.length>10?{fontSize:"10px"}:{},children:t.state.name.split(" ").join("_")})})}),m.jsx("div",{className:"card_container__inner_right"}),t.state.attachment&&m.jsx(Gt,{position:"CREEPER",cardState:{state:t.state.attachment??{},index:0},inspectKeeper:n})]}):m.jsxs("div",{className:`side_card__mini card__mini  ${t.state.type.toLowerCase()} ${o()?"selected":""}`,style:t.state.effects&&!t.state.cooldown?{background:"var(--black-shine)"}:{},onClick:t.state.attachment?a=>a.preventDefault():()=>{s&&n({...t,playerIndex:s-1})},onContextMenu:a=>{a.preventDefault(),r&&r({state:t.state,index:t.index,playerIndex:s?s-1:0})},children:[m.jsx("div",{className:"side_card_container__inner_left",children:m.jsx("div",{className:"side_card_header__background",children:m.jsx("h4",{className:"side_card_header__text",children:t.state.name.split(" ").join("_")})})}),m.jsx("div",{className:"side_card_container__inner_right"}),t.state.attachment&&m.jsx(Gt,{position:"CREEPER",cardState:{state:t.state.attachment??{},index:0},inspectKeeper:n})]})}function bN({table:t,inspectKeeper:e,selectKeeperGroup:n,selectedKeeperGroup:r,selectGoalGroup:i,selectedGoalGroup:s}){var h,g,_;const{players:o,goal:a}=t,{user:l}=x.useContext(Je),u=()=>{if(o[0].user.uid===(l==null?void 0:l.uid))return"180deg";if(o[1].user.uid===(l==null?void 0:l.uid))return"0deg";if(o[2].user.uid===(l==null?void 0:l.uid))return"270deg";if(o[3].user.uid===(l==null?void 0:l.uid))return"90deg"},c=(E,C,f)=>E.map((p,y)=>m.jsx(DN,{isSideWays:C,cardState:{state:p,index:y},inspectKeeper:e,selectKeeperGroup:n,selectedKeeperGroup:r,playerNum:f},`table_keepers__p${f}_${y}`)),d=()=>a.map((E,C)=>m.jsx(Gt,{position:"TABLE",cardState:{state:E,index:C},selectGoalGroup:i,selectedGoalGroup:s},`table_goals__${C}`));return m.jsxs("div",{className:"table_container",style:{transform:`rotateZ(${u()})`},children:[m.jsx("div",{className:`player_1_keepers keeper_container ${o[0].keepers.length>1?"length_2plus":"length_1"}`,children:o[0].keepers.length?c(o[0].keepers,!0,1):m.jsx("div",{className:"mini_card_outline",children:m.jsx("p",{children:"No Keeper!"})})}),o.length>1&&m.jsx("div",{className:`player_2_keepers keeper_container ${((h=o[1])==null?void 0:h.keepers.length)>1?"length_2plus":"length_1"}`,children:(g=o[1])!=null&&g.keepers.length?c((_=o[1])==null?void 0:_.keepers,!0,2):m.jsx("div",{className:"mini_card_outline",children:m.jsx("p",{children:"No Keeper!"})})}),o.length>2&&m.jsx("div",{className:`player_3_keepers keeper_container ${o[2].keepers.length>1?"length_2plus":"length_1"}`,children:o[2].keepers.length?c(o[2].keepers,!1,3):m.jsx("div",{className:"mini_card_outline",children:m.jsx("p",{children:"No Keeper!"})})}),o.length>3&&m.jsx("div",{className:`player_4_keepers keeper_container ${o[3].keepers.length>1?"length_2plus":"length_1"}`,children:o[3].keepers.length?c(o[3].keepers,!1,4):m.jsx("div",{className:"mini_card_outline",children:m.jsx("p",{children:"No Keeper!"})})}),m.jsx("div",{className:"table_goals",children:a.length?d():m.jsx("div",{className:"card_outline",children:m.jsx("h2",{style:{color:"var(--light-pink)"},children:"No Goal !"})})})]})}const{getPlayer:MN}=_h;function UN({cardState:t,table:e,localPlayer:n,playEffect:r,startDuel:i,discardKeeper:s,inspectKeeper:o,selectedKeeperGroup:a,selectedPlayerGroup:l}){const{user:u}=x.useContext(Je),[c,d]=x.useState([]),[h,g]=x.useState([]),_=()=>d(()=>[]),E=()=>g(()=>[]),C=()=>{const A=MN(e.players,(u==null?void 0:u.uid)??"");if(t.state.id==="KE04"){if(!a.length||a[0].state.subtype!=="LIVING"||a[0].playerIndex===A.index&&!a[0].state.attachment)return!1}else if(t.state.id==="KR07"){if(!a.length||a[0].state.subtype!=="EQUIPMENT"||a[0].playerIndex===A.index&&!a[0].state.attachment)return!1}else if(t.state.id==="KL07"){if(!a.length||a[0].state.subtype!=="RUNE"||a[0].playerIndex===A.index&&!a[0].state.attachment)return!1}else if(t.state.id==="KE05"&&(!l.length||l[0].user.uid===A.state.user.uid))return!1;return!0},f=()=>{const A=!!t.state.cooldown,T=!!t.state.effects,M=n.keepers.length>t.index?n.keepers[t.index].id===t.state.id:!1,S=e.turn.player===n.user.uid,P=C();return A||!T||!M||!S||!P?[A,T,M,S,P]:!1},p=A=>{const T=[];A[0]&&T.push("On Cooldown."),A[1]===!1&&T.push("This Keeper has no effects."),A[2]===!1&&T.push("That Keeper is not yours!"),A[3]===!1&&T.push("Please wait your turn.."),A[4]===!1&&T.push("Select the correct kind of target."),d(()=>[...T])},y=()=>{const A=n.keepers.length>e.rules.keeperLimit,T=e.turn.player===n.user.uid,M=t.state.type==="CREEPER",S=!!t.state.attachment,P=n.keepers.length>t.index?n.keepers[t.index].id===t.state.id:!1;return!A||!T||M||S||!P?[A,T,M,S,P]:!1},k=A=>{const T=[];A[0]===!1&&T.push("Keeper limit not reached. no point in discarding."),A[1]===!1&&T.push("Please wait your turn.."),A[2]&&T.push("Cannot discard creeper in a conventional manner."),A[3]&&T.push("Cannot discard a keeper with a creeper attached."),A[4]===!1&&T.push("That Keeper is not yours!"),g(()=>[...T])},O=()=>{const A=(u==null?void 0:u.uid)===e.turn.player,T=e.players[t.playerIndex].user.uid===(u==null?void 0:u.uid),M=e.turn.duel.cooldown,S=e.rules.location==="WILDERNESS";return console.log(A,T,M,S),!A||T||M||!S?[A,T,M,S]:!1},b=(A,T)=>A.map((M,S)=>m.jsx(vh,{message:M,clearErrors:T},`inspect_keeper_error__${S}`));return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"underlay",onClick:()=>{o(null)}}),m.jsxs("div",{className:"popup",children:[m.jsx(Gt,{cardState:t,position:"SELECT"}),m.jsxs("div",{className:`play_btn_group__card length_${e.rules.location==="WILDERNESS"?"3":"2"}`,children:[m.jsx("div",{className:"errors_container__play",children:c.length?b(c,_):null}),m.jsx("button",{className:`play_btn__card ${e.pending||f()?"disabled":""}`,onClick:()=>{if(e.pending)return;const A=f();if(A)return p(A);r(t.state.id,t.index)},children:"Use Effect"}),e.rules.location==="WILDERNESS"&&m.jsx("button",{className:`challenge_btn__card ${e.pending||O()?"disabled":""}`,onClick:()=>{e.pending||O()||i(e.players[t.playerIndex].user.uid,t)},children:"Challenge"}),m.jsx("div",{className:"errors_container__discard",children:h.length?b(h,E):null}),m.jsx("button",{className:`discard_btn__card ${e.pending||y()?"disabled":""}`,onClick:()=>{if(e.pending)return;const A=y();if(A)return k(A);s(t.index)},children:"Discard Card"})]})]})]})}const{getPlayer:Eo}=_h;function jN({turn:t,players:e,rollForDuel:n,endDuel:r}){const{user:i}=x.useContext(Je),[s,o]=x.useState(Eo(e,t.duel.player1.id)),[a,l]=x.useState(Eo(e,t.duel.player2.id)),u=()=>(i==null?void 0:i.uid)===t.duel.player1.id&&t.duel.player1.num===0?1:(i==null?void 0:i.uid)===t.duel.player2.id&&t.duel.player2.num===0?2:0;x.useEffect(()=>{!t.duel.player1.id||!t.duel.player2.id||(o(()=>Eo(e,t.duel.player1.id)),l(()=>Eo(e,t.duel.player2.id)))},[t]);const c=()=>t.duel.player1.num>t.duel.player2.num&&t.duel.player1.num!==0&&t.duel.player2.num!==0?1:t.duel.player2.num>=t.duel.player1.num&&t.duel.player2.num!==0&&t.duel.player1.num!==0?2:0;return m.jsx("div",{className:"popup",children:m.jsxs("div",{className:"duel_group",children:[m.jsxs("div",{className:"duel_group__left",children:[m.jsx("h2",{children:s.state.user.username}),m.jsx("h2",{children:t.duel.player1.num}),m.jsx("button",{className:`play_btn__card ${u()!==1?"disabled":""}`,onClick:()=>{u()===1&&n()},children:"Roll Dice"})]}),m.jsxs("div",{className:"duel_group__middle",children:[m.jsx("h1",{children:c()===0?"V/S":c()===1?`${s.state.user.username}`:`${a.state.user.username} Wins!`}),c()>0&&m.jsxs("div",{className:"duel_group__left",children:[m.jsx("hr",{className:"card_hr__thick full_width"}),m.jsx("button",{className:"challenge_btn__card",onClick:()=>{const d=c()===1?t.duel.player1.id:t.duel.player2.id;r(d)},children:"Continue"})]})]}),m.jsxs("div",{className:"duel_group__right",children:[m.jsx("h2",{children:a.state.user.username}),m.jsx("h2",{children:t.duel.player2.num}),m.jsx("button",{className:`play_btn__card flipped ${u()!==2?"disabled":""}`,onClick:()=>{u()===2&&n()},children:"Roll Dice"})]})]})})}const{loadGame:FN,getPlayer:Ke,getCardById:lu,getInitRule:Vp,connectGame:WN,chooseWhoGoesFirst:GN,checkShouldDiscard:uu,checkForCreepers:$N,checkPlayersForKeeper:Yp,checkIfWon:wo,endTurn:BN,upload:Y,uploadTable:cu,shuffleDeck:qp,drawPhase:zN,removeCard:Se,turnReducer:HN}=_h,{uploadStats:KN}=Xs,VN=(t,e)=>{const{init:n,ruleKey:r,amount:i,location:s,teleblock:o}=e.payload,{db:a,gameId:l}=e.payload.upload,u=["MISTHALIN","ASGARNIA","MORYTANIA","ABYSS","ENTRANA","CRANDOR"],c=Math.floor(Math.random()*u.length);switch(e.type){case 0:return Object.assign({},t,{...n});case 1:return Y("RULES",a,{ruleState:{...t,drawAmount:i??1}},l),Object.assign({},t,{drawAmount:i??1});case 2:return Y("RULES",a,{ruleState:{...t,playAmount:i??1}},l),Object.assign({},t,{playAmount:i??1});case 4:return Y("RULES",a,{ruleState:{...t,handLimit:i??1}},l),Object.assign({},t,{handLimit:i??1});case 3:return Y("RULES",a,{ruleState:{...t,keeperLimit:i??1}},l),Object.assign({},t,{keeperLimit:i??1});case 5:return Y("RULES",a,{ruleState:{...t,location:s??"MISTHALIN"}},l),Object.assign({},t,{location:s??"MISTHALIN"});case 6:return Y("RULES",a,{ruleState:{...t,location:u[c]}},l),Object.assign({},t,{location:u[c]});case 7:return Y("RULES",a,{ruleState:{...t,teleblock:o??!1}},l),Object.assign({},t,{teleblock:o??!1});case 8:return Y("RULES",a,{ruleState:{...t,[`${r}`]:Vp(r??"")}},l),Object.assign({},t,{[`${r}`]:Vp(r??"")});case 9:return Y("RULES",a,{ruleState:{...Ls}},l),Object.assign({},t,{...Ls});default:return t}},YN=(t,e)=>{const{pile:n,amount:r,init:i}=e.payload,{db:s,gameId:o}=e.payload.upload;switch(e.type){case 0:return Object.assign({},t,{...i});case 1:return Y("DECK_PURE",s,{deckState:n},o),Object.assign({},t,{pure:[...n]});case 2:return Y("DECK_PURE",s,{deckState:[...n]},o),Y("DECK_DISCARD",s,{deckState:[]},o),Object.assign({},t,{pure:[...n],discard:[]});case 3:return Y("DECK_PURE",s,{deckState:[...t.pure.slice(0,t.pure.length-(r??0))]},o),Object.assign({},t,{pure:[...t.pure.slice(0,t.pure.length-(r??0))]});case 4:return Y("DECK_DISCARD",s,{deckState:n?[...n].concat([...t.discard]):[]},o),Object.assign({},t,{discard:n?[...n].concat([...t.discard]):[]});default:return t}},qN=(t,e)=>{const{playerId:n,init:r,cards:i,targetPlayerId:s,keepersToExchange:o,cardIndex:a,cooldown:l}=e.payload,{db:u,gameId:c}=e.payload.upload,d=[...t],h=Ke(t,n),g=s?Ke(t,s):{state:{},index:0};switch(e.type){case 0:return r?[...r]:[];case 1:return d[h.index]=Object.assign({},h.state,{hand:[...h.state.hand,...i??[]]}),Y("PLAYER",u,{playersState:d,playerId:n},c),[...d];case 2:return d[h.index].hand=i?[...i]:[],Y("PLAYER",u,{playersState:d,playerId:n},c),[...d];case 3:return d[h.index]=Object.assign({},h.state,{keepers:[...h.state.keepers,...i??[]]}),Y("PLAYER",u,{playersState:d,playerId:n},c),[...d];case 4:return d[h.index].keepers=i?[...i]:[],Y("PLAYER",u,{playersState:d,playerId:n},c),[...d];case 5:return o?(console.log(o),d[o[0].playerIndex]=Object.assign({},d[o[0].playerIndex],{keepers:[...Se([...d[o[0].playerIndex].keepers],o[0].index),i?i[1]:{}]}),d[o[1].playerIndex]=Object.assign({},d[o[1].playerIndex],{keepers:[...Se([...d[o[1].playerIndex].keepers],o[1].index),i?i[0]:{}]}),Y("PLAYER",u,{playersState:d,playerId:d[o[0].playerIndex].user.uid},c),Y("PLAYER",u,{playersState:d,playerId:d[o[1].playerIndex].user.uid},c),[...d]):[...d];case 6:return d[h.index].keepers[a??0].cooldown=l,Y("PLAYER",u,{playersState:d,playerId:n},c),[...d];case 7:return d[h.index]=Object.assign({},h.state,{hand:[...g.state.hand]}),d[(g==null?void 0:g.index)??0]=Object.assign({},g==null?void 0:g.state,{hand:[...h.state.hand]}),Y("PLAYER",u,{playersState:d,playerId:n},c),Y("PLAYER",u,{playersState:d,playerId:s},c),[...d];default:return t}},QN=(t,e)=>{const{goals:n,replaceIndex:r}=e.payload,{db:i,gameId:s}=e.payload.upload;switch(e.type){case 0:return n?[...n]:[];case 1:return Y("GOAL",i,{goalState:n!=null&&n.length?[...n]:[]},s),[...n];case 2:return Y("GOAL",i,{goalState:n!=null&&n.length?[...t,...n]:[]},s),[...t,...n];case 3:return Y("GOAL",i,{goalState:r===0?[...n,t[1]]:[t[0],...n]},s),r===0?[...n,t[1]]:[t[0],...n];case 4:return Y("GOAL",i,{goalState:[]},s),[];default:return t}};function XN({setWinGameStats:t}){const{startGame:e,checkGameInProgress:n}=yl,r=ln(),{db:i,user:s,joinedGameID:o,setUser:a}=x.useContext(Je),l={db:i,gameId:o},[u,c]=x.useState(FN(s)),[d,h]=x.useReducer(VN,u.rules),[g,_]=x.useReducer(YN,u.deck),[E,C]=x.useReducer(HN,u.turn),[f,p]=x.useReducer(qN,u.players),[y,k]=x.useReducer(QN,u.goal),[O,b]=x.useState(!0),[A,T]=x.useState(!1),[M,S]=x.useState(null),[P,F]=x.useState(null),[L,V]=x.useState([]),[B,re]=x.useState([]),[ee,j]=x.useState([]),[$,R]=x.useState([]),[v,I]=x.useState(Ke(u.players,(s==null?void 0:s.uid)??"").state),te=w=>{S(N=>N===null||w===null?w:N.state.name===w.state.name?null:w),P&&F(()=>null)},pt=w=>{F(N=>N===null||w===null?w:N.state.name===w.state.name?null:w),M&&S(()=>null)},He=w=>{w!=="KEEPERS"&&j(()=>[]),w!=="PLAYERS"&&re(()=>[]),w!=="RULES"&&V(()=>[]),w!=="GOALS"&&R(()=>[])},Bt=w=>{V(N=>N.includes(w)?[]:[...N,w]),He("RULES")},Rr=w=>{j(N=>{for(const W of N)if(W.index===w.index&&W.playerIndex===w.playerIndex)return[];return[...N,w]}),He("KEEPERS")},Dv=w=>{re(N=>{for(const W of N)if(W.user.uid===w.user.uid)return[];return[...N,w]}),He("PLAYERS")},bv=w=>{R(N=>{for(const W of N)if(W.state.id===w.state.id)return[];return[...N,w]}),He("GOALS")};x.useEffect(()=>{c(w=>({...w,rules:d}))},[d]),x.useEffect(()=>{c(w=>({...w,deck:g}))},[g]),x.useEffect(()=>{if(u.isWon){let w={state:{},index:0},N=null;const W=wo(f,y[0],d.location),z=y.length>1?wo(f,y[1],d.location):null;W?w=Ke(f,W):z&&(w=Ke(f,z)),W?N=y[0]:z&&(N=y[1]),t(Z=>({...Z,winner:w.state??null,round:u.round,goal:N})),r("/gameover")}c(w=>(w.turn.player!==E.player&&S(()=>null),{...w,turn:E}))},[E]),x.useEffect(()=>{c(N=>({...N,players:f})),I(N=>({...N,...Ke(f,(s==null?void 0:s.uid)??"").state}));const w=Ke(f,(s==null?void 0:s.uid)??"");w.state.hand.length&&w.state.hand.forEach((N,W)=>{if(N.type==="CREEPER"&&!u.pending)return ki(N,W)}),E.temporary.hand.forEach((N,W)=>{N.type==="CREEPER"&&!u.pending&&Ch(N,W)})},[f]),x.useEffect(()=>{c(w=>({...w,goal:y}))},[y]),x.useEffect(()=>{if(!s)return r("/");if(!O)return;Uv();const w=N=>{N.key==="Escape"&&(He(),te(null),pt(null))};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[]);const Mv=(w,N,W,z,Z,wt,kr,Ti,t0)=>{w.discard||(w.discard=[]),w.pure||(w.pure=[]),N||(N=[]);for(const cn of z)cn.hand||(cn.hand=[]),cn.keepers||(cn.keepers=[]);Z.temporary.hand||(Z.temporary.hand=[]),_({type:0,payload:{init:{...w},pile:{...w.pure},upload:l}}),p({type:0,payload:{init:[...z],playerId:z[0].user.uid,upload:l}}),C({type:ue.INIT,payload:{init:{...Z},upload:l}}),h({type:0,payload:{init:{...W},amount:0,upload:l}}),k({type:0,payload:{goals:[...N],upload:l}}),c(cn=>({...cn,round:wt,pending:kr,counter:Ti,isWon:t0})),I(cn=>({...cn,...Ke(z,(s==null?void 0:s.uid)??"").state}))},Uv=async()=>{if(!s)return r("/");if(await WN(o,i,Mv),s.uid===o){if(await n(i,o))return;const w=GN(f),N=qp(u.deck.pure);_({type:1,payload:{pile:N,upload:{...l}}}),C({type:ue.CHANGE_TURN,payload:{player:w,upload:{...l}}}),await e(i,o)}b(()=>!1)},jv=(w,N)=>{C({type:ue.DUEL_BEGIN,payload:{player:s==null?void 0:s.uid,victim:w,duelCard:N,upload:l}})},Fv=()=>{const w=(s==null?void 0:s.uid)===E.duel.player1.id;C({type:w?ue.DUEL_ROLL__PLAYER_1:ue.DUEL_ROLL__PLAYER_2,payload:{upload:l}})},Wv=w=>{if(w===E.duel.player1.id){if(!E.duel.card)return;p({type:3,payload:{playerId:w,cards:[E.duel.card.state],upload:l}});const N=Se(f[E.duel.card.playerIndex].keepers,E.duel.card.index);p({type:4,payload:{playerId:f[E.duel.card.playerIndex].user.uid,cards:[...N],upload:l}})}C({type:ue.DUEL_END,payload:{upload:l}})},Gv=()=>{const w=zN(u);if(!g.pure||g.pure.length<d.drawAmount){const W=qp([...g.pure,...g.discard]);_({type:2,payload:{pile:[...W],upload:l}});return}const N=$N([...g.pure.slice(g.pure.length-w)]);_({type:3,payload:{pile:[],amount:w,upload:l}}),p({type:1,payload:{playerId:(s==null?void 0:s.uid)??"",cards:Array.from(g.pure.slice(g.pure.length-w)),upload:l}}),!N.length&&C({type:ue.DRAWN_ADD,payload:{player:u.turn.player&&u.turn.player!==!0?u.turn.player:"a",amount:E.drawn+w,upload:l}})},_l=(w,N,W)=>{const z=Ke(f,w);let Z=Array.from(g.pure.slice(g.pure.length-(N+W)));if(W>0){const wt=Se(Z,Z.length-1);let kr,Ti;W>1&&(kr=Se(wt,Z.length-2),W>2&&(Ti=Se(kr,Z.length-3))),Z=Ti||kr||wt}_({type:3,payload:{pile:[],amount:N,upload:l}}),p({type:1,payload:{playerId:z.state.user.uid??"",cards:Z,upload:l}})},Ii=(w=1,N=0)=>{_({type:3,payload:{pile:[],amount:w,upload:l}}),C({type:ue.TEMPORARY_HAND__BEGIN,payload:{cards:[...g.pure.slice(g.pure.length-(w+N))],amount:w,upload:l}})},Ri=(w,N=!0)=>{const W=Se(v.hand,w);N&&_({type:4,payload:{pile:[v.hand[w]],upload:l}}),p({type:2,payload:{playerId:(s==null?void 0:s.uid)??"",cards:[...W],upload:l}}),S(()=>null)},Eh=(w,N=!0)=>{if(!E.temporary)return;const{hand:W}=E.temporary,z=Se(W,w);N&&_({type:4,payload:{pile:[W[w]],upload:l}}),C({type:ue.TEMPORARY_HAND_CARD__REMOVE,payload:{cards:[...z],upload:l}}),S(()=>null)},wh=(w,N)=>{const W=Ke(f,N);_({type:4,payload:{pile:[W.state.hand[w]],upload:l}});const z=Se(W.state.hand,w);p({type:2,payload:{playerId:N,cards:[...z],upload:l}}),S(()=>null)},$v=(w,N=!0)=>{const W=Se(v.keepers,w);N&&_({type:4,payload:{pile:[v.keepers[w]],upload:l}}),p({type:4,payload:{playerId:(s==null?void 0:s.uid)??"",cards:[...W],upload:l}}),F(()=>null)},Bv=()=>{Y("PENDING",i,{cardState:!1},o)},ki=(w,N)=>{if(!w||w.subtype==="LOCATION"&&d.teleblock)return;const W=u.pending??null;if(s){const z=s.cardCatalog[`${w.id}`]+1;a(Z=>{if(Z)return{...Z,cardCatalog:Object.assign({},Z==null?void 0:Z.cardCatalog,{[`${w.id}`]:z})}}),KN("CARD",i,{cardKey:w.id,cardNum:z},s==null?void 0:s.uid)}if(E.player!==(s==null?void 0:s.uid))return Y("COUNTER",i,{cardState:w},o),Ri(N,uu(w.type)),vl(w,W);Y("PENDING",i,{cardState:w},o),N>-1&&Ri(N,uu(w.type)),E.player===(s==null?void 0:s.uid)&&w.type!=="CREEPER"&&N>-1&&C({type:ue.PLAYED_ADD,payload:{amount:E.played+1,upload:l}}),vl(w,W)},Ch=(w,N)=>{if(!w||!u.turn.temporary||w.subtype==="LOCATION"&&d.teleblock)return;const W=u.pending??null;Y("PENDING",i,{cardState:w},o),Eh(N,uu(w.type)),E.player===(s==null?void 0:s.uid)&&C({type:ue.TEMPORARY_PLAY_CHANGE,payload:{amount:u.turn.temporary.play-1,upload:l}}),vl(w,W)},vl=(w,N)=>{setTimeout(()=>{switch(Bv(),w.type){case"KEEPER":return Js(w);case"RULE":return Vv(w);case"GOAL":return Kv(w);case"ACTION":return qv(w);case"COUNTER":return Hv(w,N);case"CREEPER":return zv(w)}He()},3e3)},Sh=w=>{const N=Ke(f,(s==null?void 0:s.uid)??""),W=Se([...N.state.keepers],w.index);p({type:4,payload:{playerId:(s==null?void 0:s.uid)??"",cards:[...W],upload:l}}),p({type:3,payload:{playerId:(s==null?void 0:s.uid)??"",cards:[w.state],upload:l}})},zv=w=>{const N=Ke(f,(s==null?void 0:s.uid)??"");if(!N.state.keepers)return Js(w);if(w.subtype==="LIVING_CREEPER"){let W;if(N.state.keepers.forEach((z,Z)=>{z.subtype==="LIVING"&&!z.attachment&&(W={state:{...z},index:Z})}),!W)return Js(w);W.state.attachment=w,Sh(W)}else if(w.subtype==="EQUIPMENT_CREEPER"){let W;if(N.state.keepers.forEach((z,Z)=>{z.subtype==="EQUIPMENT"&&!z.attachment&&(W={state:{...z},index:Z})}),!W)return Js(w);W.state.attachment=w,Sh(W)}},Hv=(w,N)=>{const W=(s==null?void 0:s.uid)===E.player;if(w.effects.includes("TELESTOP_OR_LOCATION_MISTHALIN"))W?h({type:5,payload:{location:"MISTHALIN",upload:l}}):Y("RULE",i,{ruleState:d},o);else if(w.effects.includes("GOALSTOP_OR_GOALS_NONE"))W?k({type:4,payload:{goals:[],upload:l}}):Y("GOAL",i,{goalState:y},o);else if(w.effects.includes("ACTIONSTOP_OR_DISCARD_1_ALL"))W?f.forEach(z=>{const Z=Math.floor(Math.random()*z.hand.length);wh(Z,z.user.uid)}):(cu(i,u,o),Y("PENDING",i,{cardState:!1},o));else if(w.effects.includes("KEEPER_STEALSTOP_OR_KEEPER_STEAL"))if(W){p({type:3,payload:{playerId:s.uid,cards:[ee[0].state],upload:l}});const z=Se(f[ee[0].playerIndex].keepers,ee[0].index);p({type:4,payload:{playerId:f[ee[0].playerIndex].user.uid,cards:[...z],upload:l}})}else cu(i,u,o),Y("PENDING",i,{cardState:!1},o),p({type:3,payload:{playerId:(s==null?void 0:s.uid)??"",cards:N&&N!==!0?[N]:[],upload:l}});else if(w.effects.includes("RULESTOP_OR_RULE_RESET_2"))if(W){const z=L.length>2?2:1;for(let Z=0;Z<=z;Z++)h({type:8,payload:{ruleKey:L[Z],upload:l}})}else Y("RULE",i,{ruleState:d},o);else if(w.effects.includes("KEEPER_DISCARD_REFLECT_OR_KEEPER_DISCARD"))if(W){const z=Se(f[ee[0].playerIndex].keepers,ee[0].index);p({type:4,payload:{playerId:f[ee[0].playerIndex].user.uid,cards:[...z],upload:l}})}else{cu(i,u,o),Y("PENDING",i,{cardState:!1},o);const z=Ke(f,E.player!==!0&&E.player?E.player:""),Z=Math.floor(Math.random()*z.state.keepers.length),wt=Se(z.state.keepers,Z);p({type:4,payload:{playerId:z.state.user.uid,cards:[...wt],upload:l}})}Y("COUNTER",i,{cardState:!1},o),He()},Js=w=>{p({type:3,payload:{playerId:(s==null?void 0:s.uid)??"",cards:[w],upload:l}})},Kv=w=>{var W,z;const N=[];N.push(w),(y.length&&d.location!=="ASGARNIA"||d.location==="ASGARNIA"&&y.length>1)&&_({type:4,payload:{pile:[y[((W=$[0])==null?void 0:W.index)??0]],upload:l}}),d.location==="ASGARNIA"?k({type:y.length<2?2:3,payload:{replaceIndex:((z=$[0])==null?void 0:z.index)??0,goals:N,upload:l}}):k({type:1,payload:{goals:N,upload:l}}),He()},Vv=w=>{if(w.effects.includes("RULE_PLAY")){const N=w.effects[1];h({type:2,payload:{amount:Number(N),upload:l}})}else if(w.effects.includes("RULE_DRAW")){const N=w.effects[1];h({type:1,payload:{amount:Number(N),upload:l}})}else if(w.effects.includes("RULE_HAND_LIMIT")){const N=w.effects[1];h({type:4,payload:{amount:Number(N),upload:l}})}else if(w.effects.includes("RULE_KEEPER_LIMIT")){const N=w.effects[1];h({type:3,payload:{amount:Number(N),upload:l}})}else if(w.effects.includes("LOCATION")){const N=w.effects[1];h({type:5,payload:{location:N,upload:l}}),N==="ENTRANA"&&Yv()}else w.effects.includes("TELEBLOCK")&&h({type:7,payload:{teleblock:!0,upload:l}});He()},Yv=()=>{f.forEach(w=>{let N=[...w.keepers];w.keepers.forEach((W,z)=>{(W.subtype==="RUNE"||W.subtype==="EQUIPMENT")&&(N=Se(N,z))}),p({type:4,payload:{playerId:w.user.uid,cards:[...N],upload:l}})})},qv=w=>{if(w.effects.includes("RULES_RESET"))h({type:9,payload:{upload:l}});else if(w.effects.includes("LOCATION_RANDOM"))Ih();else if(w.effects.includes("RULE_RESET_CHOOSE"))for(let N=0;N<=(w.effects.length>1?2:0);N++)h({type:8,payload:{ruleKey:L[N],upload:l}});else if(w.effects.includes("TRADE_HANDS"))p({type:7,payload:{playerId:(s==null?void 0:s.uid)??"",targetPlayerId:B[0].user.uid,upload:l}});else if(w.effects.includes("KEEPERS_TO_HAND"))f.forEach(N=>{p({type:1,payload:{playerId:N.user.uid,cards:[...N.keepers.slice(0)],upload:l}}),p({type:4,payload:{playerId:N.user.uid,cards:[],upload:l}})});else if(w.effects.includes("KEEPER_EXCHANGE_CHOOSE"))p({type:5,payload:{playerId:"",keepersToExchange:[...ee.slice(0,2)],cards:[ee[0].state,ee[1].state],upload:l}});else if(w.effects.includes("KEEPER_STEAL_CHOOSE")){p({type:3,payload:{playerId:(s==null?void 0:s.uid)??"",cards:[ee[0].state],upload:l}});const N=Se(f[ee[0].playerIndex].keepers,ee[0].index);p({type:4,payload:{playerId:f[ee[0].playerIndex].user.uid,cards:N,upload:l}})}else if(w.effects.includes("DRAW_2_PLAY_2"))Ii(2);else if(w.effects.includes("DRAW_5_PLAY_3"))Ii(3,2);else if(w.effects.includes("DRAW_3_PLAY_2"))Ii(2,1);else if(w.effects.includes("DISCARD_1"))f.forEach(N=>{const W=Math.floor(Math.random()*N.hand.length);wh(W,N.user.uid)});else if(w.effects.includes("DRAW_1"))f.forEach((N,W)=>{_l(N.user.uid,1,W)});else if(w.effects.includes("DESTROY_1")){const N=Se(f[ee[0].playerIndex].keepers,ee[0].index);p({type:4,payload:{playerId:f[ee[0].playerIndex].user.uid,cards:[...N],upload:l}})}else if(w.effects.includes("STEAL_RUNE_CROSSBOW")){const N=Yp(f,"KE04");if(!N.keeper)return;const W=Se(f[N.playerIndex].keepers,N.index);p({type:4,payload:{playerId:f[N.playerIndex].user.uid,cards:W,upload:l}}),p({type:3,payload:{playerId:(s==null?void 0:s.uid)??"",cards:[N.keeper],upload:l}})}else w.effects.includes("SUMMON_GHOST")&&p({type:3,payload:{playerId:(s==null?void 0:s.uid)??"",cards:[lu("KL02")],upload:l}});He()},Ih=()=>{h({type:6,payload:{upload:l}})},Qv=(w,N)=>{const W=Ke(f,(s==null?void 0:s.uid)??"");if(w==="KL06"){const z=Math.ceil(Math.random()*2),Z=Math.ceil(Math.random()*2);if(z===1)_l(W.state.user.uid,Z,0);else for(let wt=0;wt<Z;wt++)Ri(Math.floor(Math.random()*W.state.hand.length))}else if(w==="K01")_l(W.state.user.uid,1,0);else if(w==="CR01")h({type:5,payload:{location:"CRANDOR",upload:l}});else if(w==="KR08")Ih();else if(w==="KR02")Ii(1,0);else if(w==="KE05"){const z=Math.floor(Math.random()*B[0].hand.length),Z=B[0].hand[z];p({type:1,payload:{playerId:(s==null?void 0:s.uid)??"",cards:[Z],upload:l}});const wt=Se(B[0].hand,z);p({type:2,payload:{playerId:B[0].user.uid,cards:[...wt],upload:l}})}else w==="KL07"||w==="KR07"||w==="KE04"?ki({id:"AF01",type:"ACTION",subtype:"",name:"DESTROY",effects:["DESTROY_1"],text:"DESTROY!"},-1):w==="KL10"?ki({id:"AF02",type:"ACTION",subtype:"",name:"STEAL RCB",effects:["STEAL_RUNE_CROSSBOW"],text:"STEAL!, STEAL!, STEAL!"},-1):w==="KE01"&&ki(lu("A14"),-1);p({type:6,payload:{playerId:(s==null?void 0:s.uid)??"",cooldown:!0,cardIndex:N,upload:l}}),He(),pt(null)},Xv=()=>{const w=Yp(f,"KL12");if(!w.keeper)return;const N=Math.floor(Math.random()*f.length);if(N===w.playerIndex)return;p({type:3,payload:{playerId:f[N].user.uid,cards:[w.keeper],upload:l}});const W=Se(f[w.playerIndex].keepers,w.index);p({type:4,payload:{playerId:f[w.playerIndex].user.uid,cards:[...W],upload:l}})},El=()=>(s==null?void 0:s.uid)===E.player,Jv=()=>{y.length&&Zv(),Xv(),T(()=>!1);const w=Ke(f,(s==null?void 0:s.uid)??"");if(d.location==="CRANDOR"){const W=Math.floor(Math.random()*w.state.hand.length);Ri(W,!0)}d.location==="MORYTANIA"&&Math.floor(Math.random()*101)<=20&&p({type:3,payload:{playerId:(s==null?void 0:s.uid)??"",cards:[lu("KL02")],upload:l}}),E.duel.cooldown&&C({type:ue.DUEL_COOLDOWN,payload:{upload:l}}),w.state.keepers.forEach((W,z)=>{W.cooldown&&p({type:6,payload:{playerId:(s==null?void 0:s.uid)??"",cooldown:!1,cardIndex:z,upload:l}})}),BN(i,u.players,u.turn,C,o)&&(c(W=>({...W,round:W.round++})),Y("ROUND",i,{roundState:u.round+1},o))},Zv=()=>{const w=wo(f,y[0],d.location);let N;d.location==="ASGARNIA"&&(N=wo(f,y[1],d.location)),(w||N)&&Y("WIN",i,{},o)},e0=()=>u.players.map((w,N)=>m.jsx(Er,{isSideBox:!0,player:w,isTurn:u.turn.player===w.user.uid,selectedPlayerGroup:B,selectPlayerGroup:Dv},`player_bar__${N}`));return m.jsxs("div",{className:"game_container",children:[m.jsx(bN,{table:u,inspectKeeper:pt,selectKeeperGroup:Rr,selectedKeeperGroup:ee,selectGoalGroup:bv,selectedGoalGroup:$}),m.jsx(Er,{}),m.jsx("div",{className:"user_bars__container",children:e0()}),m.jsx(ON,{rules:u.rules,selectRuleGroup:Bt,selectedRuleGroup:L,wormhole:Ii,isTurn:El(),cooldown:A,setCooldown:T}),E.duel.player1.id&&E.duel.player2.id&&m.jsx(jN,{turn:E,players:f,rollForDuel:Fv,endDuel:Wv}),(s==null?void 0:s.uid)===u.turn.player&&u.turn.drawn<u.rules.drawAmount&&m.jsx(AN,{drawCards:Gv}),M&&m.jsx(PN,{cardState:M,table:u,localPlayer:v,playCard:E.temporary.hand.length?Ch:ki,discardCard:E.temporary.hand.length?Eh:Ri,fromWormhole:!!E.temporary.hand.length,selectedKeeperGroup:ee,selectedPlayerGroup:B,selectedRuleGroup:L}),P&&m.jsx(UN,{cardState:P,table:u,localPlayer:v,playEffect:Qv,startDuel:jv,discardKeeper:$v,inspectKeeper:pt,selectedKeeperGroup:ee,selectedPlayerGroup:B}),v.hand.length&&!E.temporary.hand.length||!El()?m.jsx(Tc,{selectCard:te,hand:v.hand}):null,E.temporary.hand.length>0&&El()&&m.jsx(Tc,{selectCard:te,hand:E.temporary.hand}),m.jsx(LN,{table:u,localPlayer:v,endTurn:Jv}),u.pending!==!1&&u.pending!==!0&&m.jsx(Gt,{position:"PENDING",cardState:{state:u.pending,index:0}}),u.counter!==!1&&u.counter!==!0&&m.jsx(Gt,{position:"PENDING",cardState:{state:u.counter,index:0}})]})}function JN(){const{setUser:t}=x.useContext(Je),e=ln(),n=x.useRef(null),r=x.useRef(null);return m.jsx("div",{className:"main_menu",children:m.jsxs("form",{className:"menu",method:"",children:[m.jsxs("div",{className:"form_container__inner",children:[m.jsx("label",{htmlFor:"username",children:"Username"}),m.jsx("input",{id:"username",ref:n,className:"form_input",type:"text",name:"username",placeholder:"Enter Username.."})]}),m.jsxs("div",{className:"form_container__inner",children:[m.jsx("label",{htmlFor:"password",children:"Password"}),m.jsx("input",{id:"password",ref:r,className:"form_input",type:"password",name:"password",placeholder:"Enter Password.."})]}),m.jsx("hr",{}),m.jsxs("div",{className:"form_container__inner",children:[m.jsx("button",{className:"menu_link",type:"button",onClick:()=>{var a;const i=n.current,s=r.current;if(!i||!s)return;Xs.testUserSignIn(n==null?void 0:n.current.value,(a=r.current)==null?void 0:a.value,t)&&e("/lobby")},children:"Sign In"}),m.jsx("p",{style:{alignSelf:"center"},children:"Or"}),m.jsx("button",{className:"menu_link",type:"button",children:"Create Account"})]})]})})}const{destroyRoom:Qp,leaveRoom:ZN}=yl,{uploadStats:Co}=Xs;function ex({winGameStats:t}){const{winner:e,round:n,goal:r}=t,{joinedGameID:i,setJoinedGameID:s,db:o,user:a,setUser:l}=x.useContext(Je),u=ln(),[c,d]=x.useState(!1);x.useEffect(()=>{if(!a||!e||!n||!r)return u("/account");h()},[]),NC(()=>{g(),(a==null?void 0:a.uid)===i&&Qp(o,i,s)});const h=async()=>{a&&(g(),(a==null?void 0:a.uid)===i?await Qp(o,i,s):ZN(o,i,a,s),d(()=>!0))},g=()=>{if(!a||!r)return;if((e==null?void 0:e.user.uid)===a.uid){const C=(a==null?void 0:a.cardCatalog[`${r==null?void 0:r.id}`])+1,f=a.stats.wins+1;Co("GOALWON",o,{cardKey:r==null?void 0:r.id,cardNum:C},a.uid),Co("WINS",o,{amount:f},a.uid),l(p=>{if(p)return{...p,cardCatalog:Object.assign({},p.cardCatalog,{[`${r.id}`]:C}),stats:Object.assign({},p.stats,{wins:f})}})}const _=a.stats.totalRounds+n,E=a.stats.played+1;Co("ROUNDS",o,{amount:_},a.uid),Co("PLAYED",o,{amount:E},a.uid),l(C=>{if(C)return{...C,stats:Object.assign({},C.stats,{played:E,totalRounds:_})}})};return m.jsxs(m.Fragment,{children:[m.jsx(Er,{}),m.jsx("div",{className:"popup",children:m.jsxs("div",{className:"duel_group",children:[m.jsx(Gt,{cardState:{state:r??{},index:0},position:"SELECT"}),m.jsxs("div",{className:"duel_group__middle flex_j",children:[m.jsxs("div",{children:[m.jsxs("h1",{children:[e==null?void 0:e.user.username," Wins!"]}),m.jsxs("h2",{children:["in ",n," rounds"]})]}),m.jsx("button",{className:`play_btn__card flipped ${c?"":"disabled"}`,onClick:()=>{c&&u("/account")},children:"Continue"})]})]})}),m.jsx(Tc,{hand:(e==null?void 0:e.keepers)??[],selectCard:()=>null})]})}const tx=["living_subtype","rune_subtype","equipment_subtype"],{changeName:nx,changeIcon:rx}=Xs;function ix(){const{user:t,db:e,setUser:n}=x.useContext(Je),r=ln(),i=x.useRef(null),[s,o]=x.useState(!1);x.useEffect(()=>{if(!t)return r("/")},[]);const a=(h,g)=>{if(!t)return;const _=h/g;return isNaN(_)?0:_.toFixed(2)},l=()=>{if(!t)return;const h=t.stats.wins/t.stats.played;return isNaN(h)?0:h.toFixed(2)},u=()=>{if(!t)return;const h=[];for(const g in t.cardCatalog)h.push(t.cardCatalog[g]);return h.reduce((g,_)=>g+_,0)},c=()=>{if(!t)return;let h=0;for(const g in t==null?void 0:t.cardCatalog)(t==null?void 0:t.cardCatalog[g])>0&&h++;return h},d=()=>tx.map((h,g)=>m.jsx("button",{className:"icon_pick",onClick:async()=>{t&&(await rx(e,h,t==null?void 0:t.uid),n(_=>{if(_)return{..._,icon:h}}))},children:m.jsx("div",{className:`${h} ready_mark icon`})},`icon__${g}`));return m.jsxs("div",{className:"main_menu",style:{flexDirection:"row",gap:"5rem"},children:[m.jsx(yh,{pageType:"ACCOUNT"}),m.jsx(Er,{}),m.jsx("div",{className:"menu",children:m.jsxs("div",{children:[m.jsxs("h2",{style:{textAlign:"center"},children:[t==null?void 0:t.username,m.jsx("span",{className:`icon ${t==null?void 0:t.icon} ready_mark`})]}),m.jsx("hr",{className:"card_hr__thick"}),m.jsxs("ul",{className:"stat_list",children:[m.jsxs("div",{className:"stat_list",children:[m.jsxs("div",{className:"li_header stat_list",children:[m.jsx("li",{children:"Games"}),m.jsx("hr",{className:"card_hr__thin"})]}),m.jsxs("li",{children:["Won: ",m.jsx("span",{children:t==null?void 0:t.stats.wins})]}),m.jsxs("li",{children:["Played: ",m.jsx("span",{children:t==null?void 0:t.stats.played})]}),m.jsxs("li",{children:["Win Ratio: ",m.jsx("span",{children:l()})]})]}),m.jsxs("div",{className:"stat_list",children:[m.jsxs("div",{className:"stat_list li_header",children:[m.jsx("li",{children:"Rounds"}),m.jsx("hr",{className:"card_hr__thin"})]}),m.jsxs("li",{children:["Average: ",m.jsx("span",{children:a((t==null?void 0:t.stats.totalRounds)??0,(t==null?void 0:t.stats.played)??0)})]}),m.jsxs("li",{children:["Total: ",m.jsx("span",{children:t==null?void 0:t.stats.totalRounds})]})]}),m.jsxs("div",{className:"stat_list",children:[m.jsxs("div",{className:"stat_list li_header",children:[m.jsx("li",{children:"Cards Played"}),m.jsx("hr",{className:"card_hr__thin"})]}),m.jsxs("li",{children:["Unique: ",m.jsx("span",{children:c()})]}),m.jsxs("li",{children:["Average: ",m.jsx("span",{children:a(u()??0,(t==null?void 0:t.stats.played)??0)})]}),m.jsxs("li",{children:["Total: ",m.jsx("span",{children:u()})]})]})]})]})}),m.jsxs("div",{className:"menu account_options",children:[m.jsxs("div",{children:[m.jsx("h2",{style:{textAlign:"center",marginBottom:"1rem"},children:"Choose Icon"}),m.jsx("div",{className:"icon_picker",children:d()})]}),m.jsxs("div",{className:"username_form",children:[s&&m.jsx("input",{ref:i,style:{padding:"0.25rem"},className:"form_input",type:"text",maxLength:16,placeholder:"Username.."}),m.jsx("button",{className:"menu_link",onClick:()=>{var h;if(!s)return o(()=>!0);!i.current||!t||i.current.value.length<3||(nx(e,(h=i.current)==null?void 0:h.value,t==null?void 0:t.uid),o(()=>!1),n(g=>{var _;if(g)return{...g,username:((_=i.current)==null?void 0:_.value)??"Anon"}}))},children:"Change Name"})]})]})]})}function sx({filterByType:t,filter:e,completionPercentage:n}){return m.jsx("div",{className:"sidebar_container",children:m.jsxs("ul",{children:[m.jsxs("li",{className:`maintype_li ${e?"":"selected"}`,onClick:()=>t(""),children:[n,"% Completion"]}),m.jsxs("section",{className:"keeper_section",children:[m.jsx("li",{className:`maintype_li ${e==="KEEPER"?"selected":""}`,onClick:()=>t("KEEPER"),children:"Keepers"}),m.jsx("li",{className:`subtype_li ${e==="LIVING"?"selected":""}`,onClick:()=>t("LIVING"),children:"- Living"}),m.jsx("li",{className:`subtype_li ${e==="RUNE"?"selected":""}`,onClick:()=>t("RUNE"),children:"- Rune"}),m.jsx("li",{className:`subtype_li ${e==="EQUIPMENT"?"selected":""}`,onClick:()=>t("EQUIPMENT"),children:"- Equipment"})]}),m.jsx("section",{className:"goal_section",children:m.jsx("li",{className:`maintype_li ${e==="GOAL"?"selected":""}`,onClick:()=>t("GOAL"),children:"Goals"})}),m.jsxs("section",{className:"rule_section",children:[m.jsx("li",{className:`maintype_li ${e==="RULE"?"selected":""}`,onClick:()=>t("RULE"),children:"Rules"}),m.jsx("li",{className:`subtype_li ${e==="LOCATION"?"selected":""}`,onClick:()=>t("LOCATION"),children:"- Location"}),m.jsx("li",{className:`subtype_li ${e==="BASIC"?"selected":""}`,onClick:()=>t("BASIC"),children:"- Basic"})]}),m.jsx("section",{className:"action_section",children:m.jsx("li",{className:`maintype_li ${e==="ACTION"?"selected":""}`,onClick:()=>t("ACTION"),children:"Actions"})}),m.jsx("section",{className:"counter_section",children:m.jsx("li",{className:`maintype_li ${e==="COUNTER"?"selected":""}`,onClick:()=>t("COUNTER"),children:"Counters"})}),m.jsx("section",{className:"creeper_section",children:m.jsx("li",{className:`maintype_li ${e==="CREEPER"?"selected":""}`,onClick:()=>t("CREEPER"),children:"Creepers"})})]})})}function ox({isLocked:t}){return m.jsx("div",{className:`card_back card ${t?"card_fade":""}`,children:m.jsx("p",{className:"card_back__title",children:"Runeflux"})})}function ax(){const{user:t}=x.useContext(Je),e=ln(),[n,r]=x.useState("");x.useEffect(()=>{if(!t)return e("/")},[]);const i=a=>{r(()=>a)},s=()=>{if(!t)return 0;let a=0;for(const l in t==null?void 0:t.cardCatalog)(t==null?void 0:t.cardCatalog[l])>0&&a++;return a?Math.round(a/Ma.length*100):0},o=()=>{if(t)return Ma.map((a,l)=>{if(!(n&&a.type!==n&&a.subtype!==n))return t.cardCatalog[`${a.id}`]>0?m.jsx(Gt,{position:"CATALOG",cardState:{state:a,index:l}},`catalog_card__${l}`):m.jsx(ox,{isLocked:!0},`catalog_card__locked_${l}`)})};return m.jsxs("div",{className:"main_menu",children:[m.jsx(Er,{}),m.jsx(yh,{pageType:"CATALOG"}),m.jsx(sx,{filter:n,filterByType:i,completionPercentage:s()}),m.jsx("div",{className:"catalog",children:o()})]})}const lx=Ly(fN);function ux(){const[t,e]=x.useState(),[n,r]=x.useState(""),[i,s]=x.useState({winner:null,round:0,goal:null}),o=l1(lx,"https://flux-bbbdc-default-rtdb.europe-west1.firebasedatabase.app/"),a=hN();return m.jsx(SC,{basename:"runeflux",children:m.jsx(Je.Provider,{value:{user:t,setUser:e,db:o,auth:a,joinedGameID:n,setJoinedGameID:r},children:m.jsxs(yC,{children:[m.jsx(fn,{path:"/",element:m.jsx(yN,{})}),m.jsx(fn,{path:"/lobby",element:m.jsx(IN,{})}),m.jsx(fn,{path:"/game",element:m.jsx(XN,{setWinGameStats:s})}),m.jsx(fn,{path:"/login",element:m.jsx(JN,{})}),m.jsx(fn,{path:"/gameover",element:m.jsx(ex,{winGameStats:i})}),m.jsx(fn,{path:"/account",element:m.jsx(ix,{})}),m.jsx(fn,{path:"/catalog",element:m.jsx(ax,{})})]})})})}du.createRoot(document.getElementById("root")).render(m.jsx(om.StrictMode,{children:m.jsx(ux,{})}));
