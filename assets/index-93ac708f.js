function AE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function NE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vm={exports:{}},nl={},Em={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qs=Symbol.for("react.element"),xE=Symbol.for("react.portal"),PE=Symbol.for("react.fragment"),LE=Symbol.for("react.strict_mode"),OE=Symbol.for("react.profiler"),DE=Symbol.for("react.provider"),bE=Symbol.for("react.context"),ME=Symbol.for("react.forward_ref"),jE=Symbol.for("react.suspense"),UE=Symbol.for("react.memo"),FE=Symbol.for("react.lazy"),Bf=Symbol.iterator;function WE(t){return t===null||typeof t!="object"?null:(t=Bf&&t[Bf]||t["@@iterator"],typeof t=="function"?t:null)}var Cm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wm=Object.assign,Rm={};function Ni(t,e,n){this.props=t,this.context=e,this.refs=Rm,this.updater=n||Cm}Ni.prototype.isReactComponent={};Ni.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ni.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Sm(){}Sm.prototype=Ni.prototype;function Yc(t,e,n){this.props=t,this.context=e,this.refs=Rm,this.updater=n||Cm}var qc=Yc.prototype=new Sm;qc.constructor=Yc;wm(qc,Ni.prototype);qc.isPureReactComponent=!0;var zf=Array.isArray,Im=Object.prototype.hasOwnProperty,Qc={current:null},km={key:!0,ref:!0,__self:!0,__source:!0};function Tm(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Im.call(e,r)&&!km.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Qs,type:t,key:s,ref:o,props:i,_owner:Qc.current}}function GE(t,e){return{$$typeof:Qs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Xc(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qs}function KE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Vf=/\/+/g;function Gl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?KE(""+t.key):e.toString(36)}function Ko(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Qs:case xE:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Gl(o,0):r,zf(i)?(n="",t!=null&&(n=t.replace(Vf,"$&/")+"/"),Ko(i,e,n,"",function(u){return u})):i!=null&&(Xc(i)&&(i=GE(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Vf,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",zf(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Gl(s,a);o+=Ko(s,e,n,l,i)}else if(l=WE(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Gl(s,a++),o+=Ko(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function vo(t,e,n){if(t==null)return t;var r=[],i=0;return Ko(t,r,"","",function(s){return e.call(n,s,i++)}),r}function HE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ot={current:null},Ho={transition:null},$E={ReactCurrentDispatcher:ot,ReactCurrentBatchConfig:Ho,ReactCurrentOwner:Qc};se.Children={map:vo,forEach:function(t,e,n){vo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return vo(t,function(){e++}),e},toArray:function(t){return vo(t,function(e){return e})||[]},only:function(t){if(!Xc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=Ni;se.Fragment=PE;se.Profiler=OE;se.PureComponent=Yc;se.StrictMode=LE;se.Suspense=jE;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$E;se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=wm({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Qc.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Im.call(e,l)&&!km.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Qs,type:t.type,key:i,ref:s,props:r,_owner:o}};se.createContext=function(t){return t={$$typeof:bE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:DE,_context:t},t.Consumer=t};se.createElement=Tm;se.createFactory=function(t){var e=Tm.bind(null,t);return e.type=t,e};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:ME,render:t}};se.isValidElement=Xc;se.lazy=function(t){return{$$typeof:FE,_payload:{_status:-1,_result:t},_init:HE}};se.memo=function(t,e){return{$$typeof:UE,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=Ho.transition;Ho.transition={};try{t()}finally{Ho.transition=e}};se.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};se.useCallback=function(t,e){return ot.current.useCallback(t,e)};se.useContext=function(t){return ot.current.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t){return ot.current.useDeferredValue(t)};se.useEffect=function(t,e){return ot.current.useEffect(t,e)};se.useId=function(){return ot.current.useId()};se.useImperativeHandle=function(t,e,n){return ot.current.useImperativeHandle(t,e,n)};se.useInsertionEffect=function(t,e){return ot.current.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return ot.current.useLayoutEffect(t,e)};se.useMemo=function(t,e){return ot.current.useMemo(t,e)};se.useReducer=function(t,e,n){return ot.current.useReducer(t,e,n)};se.useRef=function(t){return ot.current.useRef(t)};se.useState=function(t){return ot.current.useState(t)};se.useSyncExternalStore=function(t,e,n){return ot.current.useSyncExternalStore(t,e,n)};se.useTransition=function(){return ot.current.useTransition()};se.version="18.2.0";Em.exports=se;var x=Em.exports;const Am=NE(x),BE=AE({__proto__:null,default:Am},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zE=x,VE=Symbol.for("react.element"),YE=Symbol.for("react.fragment"),qE=Object.prototype.hasOwnProperty,QE=zE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,XE={key:!0,ref:!0,__self:!0,__source:!0};function Nm(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)qE.call(e,r)&&!XE.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:VE,type:t,key:s,ref:o,props:i,_owner:QE.current}}nl.Fragment=YE;nl.jsx=Nm;nl.jsxs=Nm;vm.exports=nl;var m=vm.exports,Pu={},xm={exports:{}},kt={},Pm={exports:{}},Lm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,B){var Q=H.length;H.push(B);e:for(;0<Q;){var X=Q-1>>>1,w=H[X];if(0<i(w,B))H[X]=B,H[Q]=w,Q=X;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var B=H[0],Q=H.pop();if(Q!==B){H[0]=Q;e:for(var X=0,w=H.length,N=w>>>1;X<N;){var L=2*(X+1)-1,D=H[L],W=L+1,K=H[W];if(0>i(D,Q))W<w&&0>i(K,D)?(H[X]=K,H[W]=Q,X=W):(H[X]=D,H[L]=Q,X=L);else if(W<w&&0>i(K,Q))H[X]=K,H[W]=Q,X=W;else break e}}return B}function i(H,B){var Q=H.sortIndex-B.sortIndex;return Q!==0?Q:H.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,c=null,d=3,_=!1,v=!1,C=!1,R=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(H){for(var B=n(u);B!==null;){if(B.callback===null)r(u);else if(B.startTime<=H)r(u),B.sortIndex=B.expirationTime,e(l,B);else break;B=n(u)}}function k(H){if(C=!1,E(H),!v)if(n(l)!==null)v=!0,Dt(O);else{var B=n(u);B!==null&&tt(k,B.startTime-H)}}function O(H,B){v=!1,C&&(C=!1,f(A),A=-1),_=!0;var Q=d;try{for(E(B),c=n(l);c!==null&&(!(c.expirationTime>B)||H&&!Y());){var X=c.callback;if(typeof X=="function"){c.callback=null,d=c.priorityLevel;var w=X(c.expirationTime<=B);B=t.unstable_now(),typeof w=="function"?c.callback=w:c===n(l)&&r(l),E(B)}else r(l);c=n(l)}if(c!==null)var N=!0;else{var L=n(u);L!==null&&tt(k,L.startTime-B),N=!1}return N}finally{c=null,d=Q,_=!1}}var M=!1,P=null,A=-1,j=5,F=-1;function Y(){return!(t.unstable_now()-F<j)}function Re(){if(P!==null){var H=t.unstable_now();F=H;var B=!0;try{B=P(!0,H)}finally{B?xe():(M=!1,P=null)}}else M=!1}var xe;if(typeof p=="function")xe=function(){p(Re)};else if(typeof MessageChannel<"u"){var Et=new MessageChannel,on=Et.port2;Et.port1.onmessage=Re,xe=function(){on.postMessage(null)}}else xe=function(){R(Re,0)};function Dt(H){P=H,M||(M=!0,xe())}function tt(H,B){A=R(function(){H(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){v||_||(v=!0,Dt(O))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(H){switch(d){case 1:case 2:case 3:var B=3;break;default:B=d}var Q=d;d=B;try{return H()}finally{d=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,B){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Q=d;d=H;try{return B()}finally{d=Q}},t.unstable_scheduleCallback=function(H,B,Q){var X=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?X+Q:X):Q=X,H){case 1:var w=-1;break;case 2:w=250;break;case 5:w=1073741823;break;case 4:w=1e4;break;default:w=5e3}return w=Q+w,H={id:h++,callback:B,priorityLevel:H,startTime:Q,expirationTime:w,sortIndex:-1},Q>X?(H.sortIndex=Q,e(u,H),n(l)===null&&H===n(u)&&(C?(f(A),A=-1):C=!0,tt(k,Q-X))):(H.sortIndex=w,e(l,H),v||_||(v=!0,Dt(O))),H},t.unstable_shouldYield=Y,t.unstable_wrapCallback=function(H){var B=d;return function(){var Q=d;d=B;try{return H.apply(this,arguments)}finally{d=Q}}}})(Lm);Pm.exports=Lm;var JE=Pm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Om=x,It=JE;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Dm=new Set,Cs={};function jr(t,e){mi(t,e),mi(t+"Capture",e)}function mi(t,e){for(Cs[t]=e,t=0;t<e.length;t++)Dm.add(e[t])}var gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lu=Object.prototype.hasOwnProperty,ZE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yf={},qf={};function e0(t){return Lu.call(qf,t)?!0:Lu.call(Yf,t)?!1:ZE.test(t)?qf[t]=!0:(Yf[t]=!0,!1)}function t0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function n0(t,e,n,r){if(e===null||typeof e>"u"||t0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function at(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ze[t]=new at(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ze[e]=new at(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ze[t]=new at(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ze[t]=new at(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ze[t]=new at(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ze[t]=new at(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ze[t]=new at(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ze[t]=new at(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ze[t]=new at(t,5,!1,t.toLowerCase(),null,!1,!1)});var Jc=/[\-:]([a-z])/g;function Zc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Jc,Zc);ze[e]=new at(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Jc,Zc);ze[e]=new at(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Jc,Zc);ze[e]=new at(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ze[t]=new at(t,1,!1,t.toLowerCase(),null,!1,!1)});ze.xlinkHref=new at("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ze[t]=new at(t,1,!1,t.toLowerCase(),null,!0,!0)});function ed(t,e,n,r){var i=ze.hasOwnProperty(e)?ze[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(n0(e,n,i,r)&&(n=null),r||i===null?e0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Sn=Om.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Eo=Symbol.for("react.element"),$r=Symbol.for("react.portal"),Br=Symbol.for("react.fragment"),td=Symbol.for("react.strict_mode"),Ou=Symbol.for("react.profiler"),bm=Symbol.for("react.provider"),Mm=Symbol.for("react.context"),nd=Symbol.for("react.forward_ref"),Du=Symbol.for("react.suspense"),bu=Symbol.for("react.suspense_list"),rd=Symbol.for("react.memo"),xn=Symbol.for("react.lazy"),jm=Symbol.for("react.offscreen"),Qf=Symbol.iterator;function $i(t){return t===null||typeof t!="object"?null:(t=Qf&&t[Qf]||t["@@iterator"],typeof t=="function"?t:null)}var ke=Object.assign,Kl;function ns(t){if(Kl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Kl=e&&e[1]||""}return`
`+Kl+t}var Hl=!1;function $l(t,e){if(!t||Hl)return"";Hl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Hl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ns(t):""}function r0(t){switch(t.tag){case 5:return ns(t.type);case 16:return ns("Lazy");case 13:return ns("Suspense");case 19:return ns("SuspenseList");case 0:case 2:case 15:return t=$l(t.type,!1),t;case 11:return t=$l(t.type.render,!1),t;case 1:return t=$l(t.type,!0),t;default:return""}}function Mu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Br:return"Fragment";case $r:return"Portal";case Ou:return"Profiler";case td:return"StrictMode";case Du:return"Suspense";case bu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Mm:return(t.displayName||"Context")+".Consumer";case bm:return(t._context.displayName||"Context")+".Provider";case nd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case rd:return e=t.displayName||null,e!==null?e:Mu(t.type)||"Memo";case xn:e=t._payload,t=t._init;try{return Mu(t(e))}catch{}}return null}function i0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mu(e);case 8:return e===td?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function nr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Um(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function s0(t){var e=Um(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Co(t){t._valueTracker||(t._valueTracker=s0(t))}function Fm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Um(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function sa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ju(t,e){var n=e.checked;return ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Xf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=nr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Wm(t,e){e=e.checked,e!=null&&ed(t,"checked",e,!1)}function Uu(t,e){Wm(t,e);var n=nr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Fu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Fu(t,e.type,nr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Jf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Fu(t,e,n){(e!=="number"||sa(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var rs=Array.isArray;function ii(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+nr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Wu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Zf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(rs(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:nr(n)}}function Gm(t,e){var n=nr(e.value),r=nr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function eh(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Km(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Km(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wo,Hm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wo=wo||document.createElement("div"),wo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ws(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var as={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},o0=["Webkit","ms","Moz","O"];Object.keys(as).forEach(function(t){o0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),as[e]=as[t]})});function $m(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||as.hasOwnProperty(t)&&as[t]?(""+e).trim():e+"px"}function Bm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=$m(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var a0=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ku(t,e){if(e){if(a0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Hu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $u=null;function id(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bu=null,si=null,oi=null;function th(t){if(t=Zs(t)){if(typeof Bu!="function")throw Error(U(280));var e=t.stateNode;e&&(e=al(e),Bu(t.stateNode,t.type,e))}}function zm(t){si?oi?oi.push(t):oi=[t]:si=t}function Vm(){if(si){var t=si,e=oi;if(oi=si=null,th(t),e)for(t=0;t<e.length;t++)th(e[t])}}function Ym(t,e){return t(e)}function qm(){}var Bl=!1;function Qm(t,e,n){if(Bl)return t(e,n);Bl=!0;try{return Ym(t,e,n)}finally{Bl=!1,(si!==null||oi!==null)&&(qm(),Vm())}}function Rs(t,e){var n=t.stateNode;if(n===null)return null;var r=al(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var zu=!1;if(gn)try{var Bi={};Object.defineProperty(Bi,"passive",{get:function(){zu=!0}}),window.addEventListener("test",Bi,Bi),window.removeEventListener("test",Bi,Bi)}catch{zu=!1}function l0(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var ls=!1,oa=null,aa=!1,Vu=null,u0={onError:function(t){ls=!0,oa=t}};function c0(t,e,n,r,i,s,o,a,l){ls=!1,oa=null,l0.apply(u0,arguments)}function d0(t,e,n,r,i,s,o,a,l){if(c0.apply(this,arguments),ls){if(ls){var u=oa;ls=!1,oa=null}else throw Error(U(198));aa||(aa=!0,Vu=u)}}function Ur(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Xm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function nh(t){if(Ur(t)!==t)throw Error(U(188))}function f0(t){var e=t.alternate;if(!e){if(e=Ur(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return nh(i),t;if(s===r)return nh(i),e;s=s.sibling}throw Error(U(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function Jm(t){return t=f0(t),t!==null?Zm(t):null}function Zm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Zm(t);if(e!==null)return e;t=t.sibling}return null}var e_=It.unstable_scheduleCallback,rh=It.unstable_cancelCallback,h0=It.unstable_shouldYield,p0=It.unstable_requestPaint,Ne=It.unstable_now,m0=It.unstable_getCurrentPriorityLevel,sd=It.unstable_ImmediatePriority,t_=It.unstable_UserBlockingPriority,la=It.unstable_NormalPriority,_0=It.unstable_LowPriority,n_=It.unstable_IdlePriority,rl=null,Jt=null;function g0(t){if(Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(rl,t,void 0,(t.current.flags&128)===128)}catch{}}var $t=Math.clz32?Math.clz32:E0,y0=Math.log,v0=Math.LN2;function E0(t){return t>>>=0,t===0?32:31-(y0(t)/v0|0)|0}var Ro=64,So=4194304;function is(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ua(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=is(a):(s&=o,s!==0&&(r=is(s)))}else o=n&~i,o!==0?r=is(o):s!==0&&(r=is(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-$t(e),i=1<<n,r|=t[n],e&=~i;return r}function C0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function w0(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-$t(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=C0(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Yu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function r_(){var t=Ro;return Ro<<=1,!(Ro&4194240)&&(Ro=64),t}function zl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Xs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-$t(e),t[e]=n}function R0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-$t(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function od(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-$t(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var fe=0;function i_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var s_,ad,o_,a_,l_,qu=!1,Io=[],Kn=null,Hn=null,$n=null,Ss=new Map,Is=new Map,Ln=[],S0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ih(t,e){switch(t){case"focusin":case"focusout":Kn=null;break;case"dragenter":case"dragleave":Hn=null;break;case"mouseover":case"mouseout":$n=null;break;case"pointerover":case"pointerout":Ss.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Is.delete(e.pointerId)}}function zi(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Zs(e),e!==null&&ad(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function I0(t,e,n,r,i){switch(e){case"focusin":return Kn=zi(Kn,t,e,n,r,i),!0;case"dragenter":return Hn=zi(Hn,t,e,n,r,i),!0;case"mouseover":return $n=zi($n,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ss.set(s,zi(Ss.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Is.set(s,zi(Is.get(s)||null,t,e,n,r,i)),!0}return!1}function u_(t){var e=_r(t.target);if(e!==null){var n=Ur(e);if(n!==null){if(e=n.tag,e===13){if(e=Xm(n),e!==null){t.blockedOn=e,l_(t.priority,function(){o_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $o(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Qu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);$u=r,n.target.dispatchEvent(r),$u=null}else return e=Zs(n),e!==null&&ad(e),t.blockedOn=n,!1;e.shift()}return!0}function sh(t,e,n){$o(t)&&n.delete(e)}function k0(){qu=!1,Kn!==null&&$o(Kn)&&(Kn=null),Hn!==null&&$o(Hn)&&(Hn=null),$n!==null&&$o($n)&&($n=null),Ss.forEach(sh),Is.forEach(sh)}function Vi(t,e){t.blockedOn===e&&(t.blockedOn=null,qu||(qu=!0,It.unstable_scheduleCallback(It.unstable_NormalPriority,k0)))}function ks(t){function e(i){return Vi(i,t)}if(0<Io.length){Vi(Io[0],t);for(var n=1;n<Io.length;n++){var r=Io[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Kn!==null&&Vi(Kn,t),Hn!==null&&Vi(Hn,t),$n!==null&&Vi($n,t),Ss.forEach(e),Is.forEach(e),n=0;n<Ln.length;n++)r=Ln[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ln.length&&(n=Ln[0],n.blockedOn===null);)u_(n),n.blockedOn===null&&Ln.shift()}var ai=Sn.ReactCurrentBatchConfig,ca=!0;function T0(t,e,n,r){var i=fe,s=ai.transition;ai.transition=null;try{fe=1,ld(t,e,n,r)}finally{fe=i,ai.transition=s}}function A0(t,e,n,r){var i=fe,s=ai.transition;ai.transition=null;try{fe=4,ld(t,e,n,r)}finally{fe=i,ai.transition=s}}function ld(t,e,n,r){if(ca){var i=Qu(t,e,n,r);if(i===null)nu(t,e,r,da,n),ih(t,r);else if(I0(i,t,e,n,r))r.stopPropagation();else if(ih(t,r),e&4&&-1<S0.indexOf(t)){for(;i!==null;){var s=Zs(i);if(s!==null&&s_(s),s=Qu(t,e,n,r),s===null&&nu(t,e,r,da,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else nu(t,e,r,null,n)}}var da=null;function Qu(t,e,n,r){if(da=null,t=id(r),t=_r(t),t!==null)if(e=Ur(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Xm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return da=t,null}function c_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(m0()){case sd:return 1;case t_:return 4;case la:case _0:return 16;case n_:return 536870912;default:return 16}default:return 16}}var Fn=null,ud=null,Bo=null;function d_(){if(Bo)return Bo;var t,e=ud,n=e.length,r,i="value"in Fn?Fn.value:Fn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Bo=i.slice(t,1<r?1-r:void 0)}function zo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ko(){return!0}function oh(){return!1}function Tt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ko:oh,this.isPropagationStopped=oh,this}return ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ko)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ko)},persist:function(){},isPersistent:ko}),e}var xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cd=Tt(xi),Js=ke({},xi,{view:0,detail:0}),N0=Tt(Js),Vl,Yl,Yi,il=ke({},Js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Yi&&(Yi&&t.type==="mousemove"?(Vl=t.screenX-Yi.screenX,Yl=t.screenY-Yi.screenY):Yl=Vl=0,Yi=t),Vl)},movementY:function(t){return"movementY"in t?t.movementY:Yl}}),ah=Tt(il),x0=ke({},il,{dataTransfer:0}),P0=Tt(x0),L0=ke({},Js,{relatedTarget:0}),ql=Tt(L0),O0=ke({},xi,{animationName:0,elapsedTime:0,pseudoElement:0}),D0=Tt(O0),b0=ke({},xi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),M0=Tt(b0),j0=ke({},xi,{data:0}),lh=Tt(j0),U0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},F0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},W0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function G0(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=W0[t])?!!e[t]:!1}function dd(){return G0}var K0=ke({},Js,{key:function(t){if(t.key){var e=U0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=zo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?F0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dd,charCode:function(t){return t.type==="keypress"?zo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),H0=Tt(K0),$0=ke({},il,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uh=Tt($0),B0=ke({},Js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dd}),z0=Tt(B0),V0=ke({},xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Y0=Tt(V0),q0=ke({},il,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Q0=Tt(q0),X0=[9,13,27,32],fd=gn&&"CompositionEvent"in window,us=null;gn&&"documentMode"in document&&(us=document.documentMode);var J0=gn&&"TextEvent"in window&&!us,f_=gn&&(!fd||us&&8<us&&11>=us),ch=String.fromCharCode(32),dh=!1;function h_(t,e){switch(t){case"keyup":return X0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function p_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zr=!1;function Z0(t,e){switch(t){case"compositionend":return p_(e);case"keypress":return e.which!==32?null:(dh=!0,ch);case"textInput":return t=e.data,t===ch&&dh?null:t;default:return null}}function eC(t,e){if(zr)return t==="compositionend"||!fd&&h_(t,e)?(t=d_(),Bo=ud=Fn=null,zr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return f_&&e.locale!=="ko"?null:e.data;default:return null}}var tC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tC[t.type]:e==="textarea"}function m_(t,e,n,r){zm(r),e=fa(e,"onChange"),0<e.length&&(n=new cd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var cs=null,Ts=null;function nC(t){k_(t,0)}function sl(t){var e=qr(t);if(Fm(e))return t}function rC(t,e){if(t==="change")return e}var __=!1;if(gn){var Ql;if(gn){var Xl="oninput"in document;if(!Xl){var hh=document.createElement("div");hh.setAttribute("oninput","return;"),Xl=typeof hh.oninput=="function"}Ql=Xl}else Ql=!1;__=Ql&&(!document.documentMode||9<document.documentMode)}function ph(){cs&&(cs.detachEvent("onpropertychange",g_),Ts=cs=null)}function g_(t){if(t.propertyName==="value"&&sl(Ts)){var e=[];m_(e,Ts,t,id(t)),Qm(nC,e)}}function iC(t,e,n){t==="focusin"?(ph(),cs=e,Ts=n,cs.attachEvent("onpropertychange",g_)):t==="focusout"&&ph()}function sC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sl(Ts)}function oC(t,e){if(t==="click")return sl(e)}function aC(t,e){if(t==="input"||t==="change")return sl(e)}function lC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yt=typeof Object.is=="function"?Object.is:lC;function As(t,e){if(Yt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Lu.call(e,i)||!Yt(t[i],e[i]))return!1}return!0}function mh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _h(t,e){var n=mh(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mh(n)}}function y_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?y_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function v_(){for(var t=window,e=sa();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=sa(t.document)}return e}function hd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function uC(t){var e=v_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&y_(n.ownerDocument.documentElement,n)){if(r!==null&&hd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=_h(n,s);var o=_h(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var cC=gn&&"documentMode"in document&&11>=document.documentMode,Vr=null,Xu=null,ds=null,Ju=!1;function gh(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ju||Vr==null||Vr!==sa(r)||(r=Vr,"selectionStart"in r&&hd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ds&&As(ds,r)||(ds=r,r=fa(Xu,"onSelect"),0<r.length&&(e=new cd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Vr)))}function To(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Yr={animationend:To("Animation","AnimationEnd"),animationiteration:To("Animation","AnimationIteration"),animationstart:To("Animation","AnimationStart"),transitionend:To("Transition","TransitionEnd")},Jl={},E_={};gn&&(E_=document.createElement("div").style,"AnimationEvent"in window||(delete Yr.animationend.animation,delete Yr.animationiteration.animation,delete Yr.animationstart.animation),"TransitionEvent"in window||delete Yr.transitionend.transition);function ol(t){if(Jl[t])return Jl[t];if(!Yr[t])return t;var e=Yr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in E_)return Jl[t]=e[n];return t}var C_=ol("animationend"),w_=ol("animationiteration"),R_=ol("animationstart"),S_=ol("transitionend"),I_=new Map,yh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function lr(t,e){I_.set(t,e),jr(e,[t])}for(var Zl=0;Zl<yh.length;Zl++){var eu=yh[Zl],dC=eu.toLowerCase(),fC=eu[0].toUpperCase()+eu.slice(1);lr(dC,"on"+fC)}lr(C_,"onAnimationEnd");lr(w_,"onAnimationIteration");lr(R_,"onAnimationStart");lr("dblclick","onDoubleClick");lr("focusin","onFocus");lr("focusout","onBlur");lr(S_,"onTransitionEnd");mi("onMouseEnter",["mouseout","mouseover"]);mi("onMouseLeave",["mouseout","mouseover"]);mi("onPointerEnter",["pointerout","pointerover"]);mi("onPointerLeave",["pointerout","pointerover"]);jr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));jr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));jr("onBeforeInput",["compositionend","keypress","textInput","paste"]);jr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));jr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));jr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ss="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hC=new Set("cancel close invalid load scroll toggle".split(" ").concat(ss));function vh(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,d0(r,e,void 0,t),t.currentTarget=null}function k_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;vh(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;vh(i,a,u),s=l}}}if(aa)throw t=Vu,aa=!1,Vu=null,t}function ve(t,e){var n=e[rc];n===void 0&&(n=e[rc]=new Set);var r=t+"__bubble";n.has(r)||(T_(e,t,2,!1),n.add(r))}function tu(t,e,n){var r=0;e&&(r|=4),T_(n,t,r,e)}var Ao="_reactListening"+Math.random().toString(36).slice(2);function Ns(t){if(!t[Ao]){t[Ao]=!0,Dm.forEach(function(n){n!=="selectionchange"&&(hC.has(n)||tu(n,!1,t),tu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ao]||(e[Ao]=!0,tu("selectionchange",!1,e))}}function T_(t,e,n,r){switch(c_(e)){case 1:var i=T0;break;case 4:i=A0;break;default:i=ld}n=i.bind(null,e,n,t),i=void 0,!zu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function nu(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=_r(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Qm(function(){var u=s,h=id(n),c=[];e:{var d=I_.get(t);if(d!==void 0){var _=cd,v=t;switch(t){case"keypress":if(zo(n)===0)break e;case"keydown":case"keyup":_=H0;break;case"focusin":v="focus",_=ql;break;case"focusout":v="blur",_=ql;break;case"beforeblur":case"afterblur":_=ql;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=ah;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=P0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=z0;break;case C_:case w_:case R_:_=D0;break;case S_:_=Y0;break;case"scroll":_=N0;break;case"wheel":_=Q0;break;case"copy":case"cut":case"paste":_=M0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=uh}var C=(e&4)!==0,R=!C&&t==="scroll",f=C?d!==null?d+"Capture":null:d;C=[];for(var p=u,E;p!==null;){E=p;var k=E.stateNode;if(E.tag===5&&k!==null&&(E=k,f!==null&&(k=Rs(p,f),k!=null&&C.push(xs(p,k,E)))),R)break;p=p.return}0<C.length&&(d=new _(d,v,null,n,h),c.push({event:d,listeners:C}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",d&&n!==$u&&(v=n.relatedTarget||n.fromElement)&&(_r(v)||v[yn]))break e;if((_||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,_?(v=n.relatedTarget||n.toElement,_=u,v=v?_r(v):null,v!==null&&(R=Ur(v),v!==R||v.tag!==5&&v.tag!==6)&&(v=null)):(_=null,v=u),_!==v)){if(C=ah,k="onMouseLeave",f="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(C=uh,k="onPointerLeave",f="onPointerEnter",p="pointer"),R=_==null?d:qr(_),E=v==null?d:qr(v),d=new C(k,p+"leave",_,n,h),d.target=R,d.relatedTarget=E,k=null,_r(h)===u&&(C=new C(f,p+"enter",v,n,h),C.target=E,C.relatedTarget=R,k=C),R=k,_&&v)t:{for(C=_,f=v,p=0,E=C;E;E=Kr(E))p++;for(E=0,k=f;k;k=Kr(k))E++;for(;0<p-E;)C=Kr(C),p--;for(;0<E-p;)f=Kr(f),E--;for(;p--;){if(C===f||f!==null&&C===f.alternate)break t;C=Kr(C),f=Kr(f)}C=null}else C=null;_!==null&&Eh(c,d,_,C,!1),v!==null&&R!==null&&Eh(c,R,v,C,!0)}}e:{if(d=u?qr(u):window,_=d.nodeName&&d.nodeName.toLowerCase(),_==="select"||_==="input"&&d.type==="file")var O=rC;else if(fh(d))if(__)O=aC;else{O=sC;var M=iC}else(_=d.nodeName)&&_.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(O=oC);if(O&&(O=O(t,u))){m_(c,O,n,h);break e}M&&M(t,d,u),t==="focusout"&&(M=d._wrapperState)&&M.controlled&&d.type==="number"&&Fu(d,"number",d.value)}switch(M=u?qr(u):window,t){case"focusin":(fh(M)||M.contentEditable==="true")&&(Vr=M,Xu=u,ds=null);break;case"focusout":ds=Xu=Vr=null;break;case"mousedown":Ju=!0;break;case"contextmenu":case"mouseup":case"dragend":Ju=!1,gh(c,n,h);break;case"selectionchange":if(cC)break;case"keydown":case"keyup":gh(c,n,h)}var P;if(fd)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else zr?h_(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(f_&&n.locale!=="ko"&&(zr||A!=="onCompositionStart"?A==="onCompositionEnd"&&zr&&(P=d_()):(Fn=h,ud="value"in Fn?Fn.value:Fn.textContent,zr=!0)),M=fa(u,A),0<M.length&&(A=new lh(A,t,null,n,h),c.push({event:A,listeners:M}),P?A.data=P:(P=p_(n),P!==null&&(A.data=P)))),(P=J0?Z0(t,n):eC(t,n))&&(u=fa(u,"onBeforeInput"),0<u.length&&(h=new lh("onBeforeInput","beforeinput",null,n,h),c.push({event:h,listeners:u}),h.data=P))}k_(c,e)})}function xs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function fa(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Rs(t,n),s!=null&&r.unshift(xs(t,s,i)),s=Rs(t,e),s!=null&&r.push(xs(t,s,i))),t=t.return}return r}function Kr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Eh(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Rs(n,s),l!=null&&o.unshift(xs(n,l,a))):i||(l=Rs(n,s),l!=null&&o.push(xs(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var pC=/\r\n?/g,mC=/\u0000|\uFFFD/g;function Ch(t){return(typeof t=="string"?t:""+t).replace(pC,`
`).replace(mC,"")}function No(t,e,n){if(e=Ch(e),Ch(t)!==e&&n)throw Error(U(425))}function ha(){}var Zu=null,ec=null;function tc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var nc=typeof setTimeout=="function"?setTimeout:void 0,_C=typeof clearTimeout=="function"?clearTimeout:void 0,wh=typeof Promise=="function"?Promise:void 0,gC=typeof queueMicrotask=="function"?queueMicrotask:typeof wh<"u"?function(t){return wh.resolve(null).then(t).catch(yC)}:nc;function yC(t){setTimeout(function(){throw t})}function ru(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ks(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ks(e)}function Bn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Rh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Pi=Math.random().toString(36).slice(2),Xt="__reactFiber$"+Pi,Ps="__reactProps$"+Pi,yn="__reactContainer$"+Pi,rc="__reactEvents$"+Pi,vC="__reactListeners$"+Pi,EC="__reactHandles$"+Pi;function _r(t){var e=t[Xt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[yn]||n[Xt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Rh(t);t!==null;){if(n=t[Xt])return n;t=Rh(t)}return e}t=n,n=t.parentNode}return null}function Zs(t){return t=t[Xt]||t[yn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function al(t){return t[Ps]||null}var ic=[],Qr=-1;function ur(t){return{current:t}}function Ce(t){0>Qr||(t.current=ic[Qr],ic[Qr]=null,Qr--)}function ye(t,e){Qr++,ic[Qr]=t.current,t.current=e}var rr={},Ze=ur(rr),pt=ur(!1),Ir=rr;function _i(t,e){var n=t.type.contextTypes;if(!n)return rr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function mt(t){return t=t.childContextTypes,t!=null}function pa(){Ce(pt),Ce(Ze)}function Sh(t,e,n){if(Ze.current!==rr)throw Error(U(168));ye(Ze,e),ye(pt,n)}function A_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(U(108,i0(t)||"Unknown",i));return ke({},n,r)}function ma(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||rr,Ir=Ze.current,ye(Ze,t),ye(pt,pt.current),!0}function Ih(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=A_(t,e,Ir),r.__reactInternalMemoizedMergedChildContext=t,Ce(pt),Ce(Ze),ye(Ze,t)):Ce(pt),ye(pt,n)}var un=null,ll=!1,iu=!1;function N_(t){un===null?un=[t]:un.push(t)}function CC(t){ll=!0,N_(t)}function cr(){if(!iu&&un!==null){iu=!0;var t=0,e=fe;try{var n=un;for(fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}un=null,ll=!1}catch(i){throw un!==null&&(un=un.slice(t+1)),e_(sd,cr),i}finally{fe=e,iu=!1}}return null}var Xr=[],Jr=0,_a=null,ga=0,At=[],Nt=0,kr=null,cn=1,dn="";function fr(t,e){Xr[Jr++]=ga,Xr[Jr++]=_a,_a=t,ga=e}function x_(t,e,n){At[Nt++]=cn,At[Nt++]=dn,At[Nt++]=kr,kr=t;var r=cn;t=dn;var i=32-$t(r)-1;r&=~(1<<i),n+=1;var s=32-$t(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,cn=1<<32-$t(e)+i|n<<i|r,dn=s+t}else cn=1<<s|n<<i|r,dn=t}function pd(t){t.return!==null&&(fr(t,1),x_(t,1,0))}function md(t){for(;t===_a;)_a=Xr[--Jr],Xr[Jr]=null,ga=Xr[--Jr],Xr[Jr]=null;for(;t===kr;)kr=At[--Nt],At[Nt]=null,dn=At[--Nt],At[Nt]=null,cn=At[--Nt],At[Nt]=null}var St=null,Rt=null,we=!1,Ft=null;function P_(t,e){var n=xt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function kh(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,St=t,Rt=Bn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,St=t,Rt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=kr!==null?{id:cn,overflow:dn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=xt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,St=t,Rt=null,!0):!1;default:return!1}}function sc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function oc(t){if(we){var e=Rt;if(e){var n=e;if(!kh(t,e)){if(sc(t))throw Error(U(418));e=Bn(n.nextSibling);var r=St;e&&kh(t,e)?P_(r,n):(t.flags=t.flags&-4097|2,we=!1,St=t)}}else{if(sc(t))throw Error(U(418));t.flags=t.flags&-4097|2,we=!1,St=t}}}function Th(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;St=t}function xo(t){if(t!==St)return!1;if(!we)return Th(t),we=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!tc(t.type,t.memoizedProps)),e&&(e=Rt)){if(sc(t))throw L_(),Error(U(418));for(;e;)P_(t,e),e=Bn(e.nextSibling)}if(Th(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Rt=Bn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Rt=null}}else Rt=St?Bn(t.stateNode.nextSibling):null;return!0}function L_(){for(var t=Rt;t;)t=Bn(t.nextSibling)}function gi(){Rt=St=null,we=!1}function _d(t){Ft===null?Ft=[t]:Ft.push(t)}var wC=Sn.ReactCurrentBatchConfig;function jt(t,e){if(t&&t.defaultProps){e=ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var ya=ur(null),va=null,Zr=null,gd=null;function yd(){gd=Zr=va=null}function vd(t){var e=ya.current;Ce(ya),t._currentValue=e}function ac(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function li(t,e){va=t,gd=Zr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ft=!0),t.firstContext=null)}function Lt(t){var e=t._currentValue;if(gd!==t)if(t={context:t,memoizedValue:e,next:null},Zr===null){if(va===null)throw Error(U(308));Zr=t,va.dependencies={lanes:0,firstContext:t}}else Zr=Zr.next=t;return e}var gr=null;function Ed(t){gr===null?gr=[t]:gr.push(t)}function O_(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ed(e)):(n.next=i.next,i.next=n),e.interleaved=n,vn(t,r)}function vn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Pn=!1;function Cd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function D_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function mn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function zn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ae&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,vn(t,n)}return i=r.interleaved,i===null?(e.next=e,Ed(r)):(e.next=i.next,i.next=e),r.interleaved=e,vn(t,n)}function Vo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,od(t,n)}}function Ah(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ea(t,e,n,r){var i=t.updateQueue;Pn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var c=i.baseState;o=0,h=u=l=null,a=s;do{var d=a.lane,_=a.eventTime;if((r&d)===d){h!==null&&(h=h.next={eventTime:_,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,C=a;switch(d=e,_=n,C.tag){case 1:if(v=C.payload,typeof v=="function"){c=v.call(_,c,d);break e}c=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=C.payload,d=typeof v=="function"?v.call(_,c,d):v,d==null)break e;c=ke({},c,d);break e;case 2:Pn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else _={eventTime:_,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=_,l=c):h=h.next=_,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(1);if(h===null&&(l=c),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ar|=o,t.lanes=o,t.memoizedState=c}}function Nh(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(U(191,i));i.call(r)}}}var b_=new Om.Component().refs;function lc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ul={isMounted:function(t){return(t=t._reactInternals)?Ur(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=st(),i=Yn(t),s=mn(r,i);s.payload=e,n!=null&&(s.callback=n),e=zn(t,s,i),e!==null&&(Bt(e,t,i,r),Vo(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=st(),i=Yn(t),s=mn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=zn(t,s,i),e!==null&&(Bt(e,t,i,r),Vo(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=st(),r=Yn(t),i=mn(n,r);i.tag=2,e!=null&&(i.callback=e),e=zn(t,i,r),e!==null&&(Bt(e,t,r,n),Vo(e,t,r))}};function xh(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!As(n,r)||!As(i,s):!0}function M_(t,e,n){var r=!1,i=rr,s=e.contextType;return typeof s=="object"&&s!==null?s=Lt(s):(i=mt(e)?Ir:Ze.current,r=e.contextTypes,s=(r=r!=null)?_i(t,i):rr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ul,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Ph(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ul.enqueueReplaceState(e,e.state,null)}function uc(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=b_,Cd(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Lt(s):(s=mt(e)?Ir:Ze.current,i.context=_i(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(lc(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ul.enqueueReplaceState(i,i.state,null),Ea(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function qi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===b_&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Po(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Lh(t){var e=t._init;return e(t._payload)}function j_(t){function e(f,p){if(t){var E=f.deletions;E===null?(f.deletions=[p],f.flags|=16):E.push(p)}}function n(f,p){if(!t)return null;for(;p!==null;)e(f,p),p=p.sibling;return null}function r(f,p){for(f=new Map;p!==null;)p.key!==null?f.set(p.key,p):f.set(p.index,p),p=p.sibling;return f}function i(f,p){return f=qn(f,p),f.index=0,f.sibling=null,f}function s(f,p,E){return f.index=E,t?(E=f.alternate,E!==null?(E=E.index,E<p?(f.flags|=2,p):E):(f.flags|=2,p)):(f.flags|=1048576,p)}function o(f){return t&&f.alternate===null&&(f.flags|=2),f}function a(f,p,E,k){return p===null||p.tag!==6?(p=du(E,f.mode,k),p.return=f,p):(p=i(p,E),p.return=f,p)}function l(f,p,E,k){var O=E.type;return O===Br?h(f,p,E.props.children,k,E.key):p!==null&&(p.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===xn&&Lh(O)===p.type)?(k=i(p,E.props),k.ref=qi(f,p,E),k.return=f,k):(k=Zo(E.type,E.key,E.props,null,f.mode,k),k.ref=qi(f,p,E),k.return=f,k)}function u(f,p,E,k){return p===null||p.tag!==4||p.stateNode.containerInfo!==E.containerInfo||p.stateNode.implementation!==E.implementation?(p=fu(E,f.mode,k),p.return=f,p):(p=i(p,E.children||[]),p.return=f,p)}function h(f,p,E,k,O){return p===null||p.tag!==7?(p=wr(E,f.mode,k,O),p.return=f,p):(p=i(p,E),p.return=f,p)}function c(f,p,E){if(typeof p=="string"&&p!==""||typeof p=="number")return p=du(""+p,f.mode,E),p.return=f,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Eo:return E=Zo(p.type,p.key,p.props,null,f.mode,E),E.ref=qi(f,null,p),E.return=f,E;case $r:return p=fu(p,f.mode,E),p.return=f,p;case xn:var k=p._init;return c(f,k(p._payload),E)}if(rs(p)||$i(p))return p=wr(p,f.mode,E,null),p.return=f,p;Po(f,p)}return null}function d(f,p,E,k){var O=p!==null?p.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return O!==null?null:a(f,p,""+E,k);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Eo:return E.key===O?l(f,p,E,k):null;case $r:return E.key===O?u(f,p,E,k):null;case xn:return O=E._init,d(f,p,O(E._payload),k)}if(rs(E)||$i(E))return O!==null?null:h(f,p,E,k,null);Po(f,E)}return null}function _(f,p,E,k,O){if(typeof k=="string"&&k!==""||typeof k=="number")return f=f.get(E)||null,a(p,f,""+k,O);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Eo:return f=f.get(k.key===null?E:k.key)||null,l(p,f,k,O);case $r:return f=f.get(k.key===null?E:k.key)||null,u(p,f,k,O);case xn:var M=k._init;return _(f,p,E,M(k._payload),O)}if(rs(k)||$i(k))return f=f.get(E)||null,h(p,f,k,O,null);Po(p,k)}return null}function v(f,p,E,k){for(var O=null,M=null,P=p,A=p=0,j=null;P!==null&&A<E.length;A++){P.index>A?(j=P,P=null):j=P.sibling;var F=d(f,P,E[A],k);if(F===null){P===null&&(P=j);break}t&&P&&F.alternate===null&&e(f,P),p=s(F,p,A),M===null?O=F:M.sibling=F,M=F,P=j}if(A===E.length)return n(f,P),we&&fr(f,A),O;if(P===null){for(;A<E.length;A++)P=c(f,E[A],k),P!==null&&(p=s(P,p,A),M===null?O=P:M.sibling=P,M=P);return we&&fr(f,A),O}for(P=r(f,P);A<E.length;A++)j=_(P,f,A,E[A],k),j!==null&&(t&&j.alternate!==null&&P.delete(j.key===null?A:j.key),p=s(j,p,A),M===null?O=j:M.sibling=j,M=j);return t&&P.forEach(function(Y){return e(f,Y)}),we&&fr(f,A),O}function C(f,p,E,k){var O=$i(E);if(typeof O!="function")throw Error(U(150));if(E=O.call(E),E==null)throw Error(U(151));for(var M=O=null,P=p,A=p=0,j=null,F=E.next();P!==null&&!F.done;A++,F=E.next()){P.index>A?(j=P,P=null):j=P.sibling;var Y=d(f,P,F.value,k);if(Y===null){P===null&&(P=j);break}t&&P&&Y.alternate===null&&e(f,P),p=s(Y,p,A),M===null?O=Y:M.sibling=Y,M=Y,P=j}if(F.done)return n(f,P),we&&fr(f,A),O;if(P===null){for(;!F.done;A++,F=E.next())F=c(f,F.value,k),F!==null&&(p=s(F,p,A),M===null?O=F:M.sibling=F,M=F);return we&&fr(f,A),O}for(P=r(f,P);!F.done;A++,F=E.next())F=_(P,f,A,F.value,k),F!==null&&(t&&F.alternate!==null&&P.delete(F.key===null?A:F.key),p=s(F,p,A),M===null?O=F:M.sibling=F,M=F);return t&&P.forEach(function(Re){return e(f,Re)}),we&&fr(f,A),O}function R(f,p,E,k){if(typeof E=="object"&&E!==null&&E.type===Br&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Eo:e:{for(var O=E.key,M=p;M!==null;){if(M.key===O){if(O=E.type,O===Br){if(M.tag===7){n(f,M.sibling),p=i(M,E.props.children),p.return=f,f=p;break e}}else if(M.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===xn&&Lh(O)===M.type){n(f,M.sibling),p=i(M,E.props),p.ref=qi(f,M,E),p.return=f,f=p;break e}n(f,M);break}else e(f,M);M=M.sibling}E.type===Br?(p=wr(E.props.children,f.mode,k,E.key),p.return=f,f=p):(k=Zo(E.type,E.key,E.props,null,f.mode,k),k.ref=qi(f,p,E),k.return=f,f=k)}return o(f);case $r:e:{for(M=E.key;p!==null;){if(p.key===M)if(p.tag===4&&p.stateNode.containerInfo===E.containerInfo&&p.stateNode.implementation===E.implementation){n(f,p.sibling),p=i(p,E.children||[]),p.return=f,f=p;break e}else{n(f,p);break}else e(f,p);p=p.sibling}p=fu(E,f.mode,k),p.return=f,f=p}return o(f);case xn:return M=E._init,R(f,p,M(E._payload),k)}if(rs(E))return v(f,p,E,k);if($i(E))return C(f,p,E,k);Po(f,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,p!==null&&p.tag===6?(n(f,p.sibling),p=i(p,E),p.return=f,f=p):(n(f,p),p=du(E,f.mode,k),p.return=f,f=p),o(f)):n(f,p)}return R}var yi=j_(!0),U_=j_(!1),eo={},Zt=ur(eo),Ls=ur(eo),Os=ur(eo);function yr(t){if(t===eo)throw Error(U(174));return t}function wd(t,e){switch(ye(Os,e),ye(Ls,t),ye(Zt,eo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Gu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Gu(e,t)}Ce(Zt),ye(Zt,e)}function vi(){Ce(Zt),Ce(Ls),Ce(Os)}function F_(t){yr(Os.current);var e=yr(Zt.current),n=Gu(e,t.type);e!==n&&(ye(Ls,t),ye(Zt,n))}function Rd(t){Ls.current===t&&(Ce(Zt),Ce(Ls))}var Se=ur(0);function Ca(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var su=[];function Sd(){for(var t=0;t<su.length;t++)su[t]._workInProgressVersionPrimary=null;su.length=0}var Yo=Sn.ReactCurrentDispatcher,ou=Sn.ReactCurrentBatchConfig,Tr=0,Ie=null,Oe=null,Fe=null,wa=!1,fs=!1,Ds=0,RC=0;function Ye(){throw Error(U(321))}function Id(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Yt(t[n],e[n]))return!1;return!0}function kd(t,e,n,r,i,s){if(Tr=s,Ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yo.current=t===null||t.memoizedState===null?TC:AC,t=n(r,i),fs){s=0;do{if(fs=!1,Ds=0,25<=s)throw Error(U(301));s+=1,Fe=Oe=null,e.updateQueue=null,Yo.current=NC,t=n(r,i)}while(fs)}if(Yo.current=Ra,e=Oe!==null&&Oe.next!==null,Tr=0,Fe=Oe=Ie=null,wa=!1,e)throw Error(U(300));return t}function Td(){var t=Ds!==0;return Ds=0,t}function Qt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?Ie.memoizedState=Fe=t:Fe=Fe.next=t,Fe}function Ot(){if(Oe===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=Oe.next;var e=Fe===null?Ie.memoizedState:Fe.next;if(e!==null)Fe=e,Oe=t;else{if(t===null)throw Error(U(310));Oe=t,t={memoizedState:Oe.memoizedState,baseState:Oe.baseState,baseQueue:Oe.baseQueue,queue:Oe.queue,next:null},Fe===null?Ie.memoizedState=Fe=t:Fe=Fe.next=t}return Fe}function bs(t,e){return typeof e=="function"?e(t):e}function au(t){var e=Ot(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Oe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((Tr&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var c={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=c,o=r):l=l.next=c,Ie.lanes|=h,Ar|=h}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Yt(r,e.memoizedState)||(ft=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ie.lanes|=s,Ar|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function lu(t){var e=Ot(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Yt(s,e.memoizedState)||(ft=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function W_(){}function G_(t,e){var n=Ie,r=Ot(),i=e(),s=!Yt(r.memoizedState,i);if(s&&(r.memoizedState=i,ft=!0),r=r.queue,Ad($_.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Fe!==null&&Fe.memoizedState.tag&1){if(n.flags|=2048,Ms(9,H_.bind(null,n,r,i,e),void 0,null),Ke===null)throw Error(U(349));Tr&30||K_(n,e,i)}return i}function K_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function H_(t,e,n,r){e.value=n,e.getSnapshot=r,B_(e)&&z_(t)}function $_(t,e,n){return n(function(){B_(e)&&z_(t)})}function B_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Yt(t,n)}catch{return!0}}function z_(t){var e=vn(t,1);e!==null&&Bt(e,t,1,-1)}function Oh(t){var e=Qt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:t},e.queue=t,t=t.dispatch=kC.bind(null,Ie,t),[e.memoizedState,t]}function Ms(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function V_(){return Ot().memoizedState}function qo(t,e,n,r){var i=Qt();Ie.flags|=t,i.memoizedState=Ms(1|e,n,void 0,r===void 0?null:r)}function cl(t,e,n,r){var i=Ot();r=r===void 0?null:r;var s=void 0;if(Oe!==null){var o=Oe.memoizedState;if(s=o.destroy,r!==null&&Id(r,o.deps)){i.memoizedState=Ms(e,n,s,r);return}}Ie.flags|=t,i.memoizedState=Ms(1|e,n,s,r)}function Dh(t,e){return qo(8390656,8,t,e)}function Ad(t,e){return cl(2048,8,t,e)}function Y_(t,e){return cl(4,2,t,e)}function q_(t,e){return cl(4,4,t,e)}function Q_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function X_(t,e,n){return n=n!=null?n.concat([t]):null,cl(4,4,Q_.bind(null,e,t),n)}function Nd(){}function J_(t,e){var n=Ot();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Id(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Z_(t,e){var n=Ot();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Id(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function eg(t,e,n){return Tr&21?(Yt(n,e)||(n=r_(),Ie.lanes|=n,Ar|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ft=!0),t.memoizedState=n)}function SC(t,e){var n=fe;fe=n!==0&&4>n?n:4,t(!0);var r=ou.transition;ou.transition={};try{t(!1),e()}finally{fe=n,ou.transition=r}}function tg(){return Ot().memoizedState}function IC(t,e,n){var r=Yn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ng(t))rg(e,n);else if(n=O_(t,e,n,r),n!==null){var i=st();Bt(n,t,r,i),ig(n,e,r)}}function kC(t,e,n){var r=Yn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ng(t))rg(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Yt(a,o)){var l=e.interleaved;l===null?(i.next=i,Ed(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=O_(t,e,i,r),n!==null&&(i=st(),Bt(n,t,r,i),ig(n,e,r))}}function ng(t){var e=t.alternate;return t===Ie||e!==null&&e===Ie}function rg(t,e){fs=wa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ig(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,od(t,n)}}var Ra={readContext:Lt,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useInsertionEffect:Ye,useLayoutEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useMutableSource:Ye,useSyncExternalStore:Ye,useId:Ye,unstable_isNewReconciler:!1},TC={readContext:Lt,useCallback:function(t,e){return Qt().memoizedState=[t,e===void 0?null:e],t},useContext:Lt,useEffect:Dh,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,qo(4194308,4,Q_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return qo(4194308,4,t,e)},useInsertionEffect:function(t,e){return qo(4,2,t,e)},useMemo:function(t,e){var n=Qt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Qt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=IC.bind(null,Ie,t),[r.memoizedState,t]},useRef:function(t){var e=Qt();return t={current:t},e.memoizedState=t},useState:Oh,useDebugValue:Nd,useDeferredValue:function(t){return Qt().memoizedState=t},useTransition:function(){var t=Oh(!1),e=t[0];return t=SC.bind(null,t[1]),Qt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ie,i=Qt();if(we){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Ke===null)throw Error(U(349));Tr&30||K_(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Dh($_.bind(null,r,s,t),[t]),r.flags|=2048,Ms(9,H_.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Qt(),e=Ke.identifierPrefix;if(we){var n=dn,r=cn;n=(r&~(1<<32-$t(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ds++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=RC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},AC={readContext:Lt,useCallback:J_,useContext:Lt,useEffect:Ad,useImperativeHandle:X_,useInsertionEffect:Y_,useLayoutEffect:q_,useMemo:Z_,useReducer:au,useRef:V_,useState:function(){return au(bs)},useDebugValue:Nd,useDeferredValue:function(t){var e=Ot();return eg(e,Oe.memoizedState,t)},useTransition:function(){var t=au(bs)[0],e=Ot().memoizedState;return[t,e]},useMutableSource:W_,useSyncExternalStore:G_,useId:tg,unstable_isNewReconciler:!1},NC={readContext:Lt,useCallback:J_,useContext:Lt,useEffect:Ad,useImperativeHandle:X_,useInsertionEffect:Y_,useLayoutEffect:q_,useMemo:Z_,useReducer:lu,useRef:V_,useState:function(){return lu(bs)},useDebugValue:Nd,useDeferredValue:function(t){var e=Ot();return Oe===null?e.memoizedState=t:eg(e,Oe.memoizedState,t)},useTransition:function(){var t=lu(bs)[0],e=Ot().memoizedState;return[t,e]},useMutableSource:W_,useSyncExternalStore:G_,useId:tg,unstable_isNewReconciler:!1};function Ei(t,e){try{var n="",r=e;do n+=r0(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function uu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function cc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var xC=typeof WeakMap=="function"?WeakMap:Map;function sg(t,e,n){n=mn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ia||(Ia=!0,Ec=r),cc(t,e)},n}function og(t,e,n){n=mn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){cc(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){cc(t,e),typeof r!="function"&&(Vn===null?Vn=new Set([this]):Vn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function bh(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new xC;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=$C.bind(null,t,e,n),e.then(t,t))}function Mh(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jh(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=mn(-1,1),e.tag=2,zn(n,e,1))),n.lanes|=1),t)}var PC=Sn.ReactCurrentOwner,ft=!1;function rt(t,e,n,r){e.child=t===null?U_(e,null,n,r):yi(e,t.child,n,r)}function Uh(t,e,n,r,i){n=n.render;var s=e.ref;return li(e,i),r=kd(t,e,n,r,s,i),n=Td(),t!==null&&!ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,En(t,e,i)):(we&&n&&pd(e),e.flags|=1,rt(t,e,r,i),e.child)}function Fh(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!jd(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,ag(t,e,s,r,i)):(t=Zo(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:As,n(o,r)&&t.ref===e.ref)return En(t,e,i)}return e.flags|=1,t=qn(s,r),t.ref=e.ref,t.return=e,e.child=t}function ag(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(As(s,r)&&t.ref===e.ref)if(ft=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ft=!0);else return e.lanes=t.lanes,En(t,e,i)}return dc(t,e,n,r,i)}function lg(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(ti,wt),wt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ye(ti,wt),wt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ye(ti,wt),wt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ye(ti,wt),wt|=r;return rt(t,e,i,n),e.child}function ug(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function dc(t,e,n,r,i){var s=mt(n)?Ir:Ze.current;return s=_i(e,s),li(e,i),n=kd(t,e,n,r,s,i),r=Td(),t!==null&&!ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,En(t,e,i)):(we&&r&&pd(e),e.flags|=1,rt(t,e,n,i),e.child)}function Wh(t,e,n,r,i){if(mt(n)){var s=!0;ma(e)}else s=!1;if(li(e,i),e.stateNode===null)Qo(t,e),M_(e,n,r),uc(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Lt(u):(u=mt(n)?Ir:Ze.current,u=_i(e,u));var h=n.getDerivedStateFromProps,c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";c||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Ph(e,o,r,u),Pn=!1;var d=e.memoizedState;o.state=d,Ea(e,r,o,i),l=e.memoizedState,a!==r||d!==l||pt.current||Pn?(typeof h=="function"&&(lc(e,n,h,r),l=e.memoizedState),(a=Pn||xh(e,n,a,r,d,l,u))?(c||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,D_(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:jt(e.type,a),o.props=u,c=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Lt(l):(l=mt(n)?Ir:Ze.current,l=_i(e,l));var _=n.getDerivedStateFromProps;(h=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==c||d!==l)&&Ph(e,o,r,l),Pn=!1,d=e.memoizedState,o.state=d,Ea(e,r,o,i);var v=e.memoizedState;a!==c||d!==v||pt.current||Pn?(typeof _=="function"&&(lc(e,n,_,r),v=e.memoizedState),(u=Pn||xh(e,n,u,r,d,v,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return fc(t,e,n,r,s,i)}function fc(t,e,n,r,i,s){ug(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Ih(e,n,!1),En(t,e,s);r=e.stateNode,PC.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=yi(e,t.child,null,s),e.child=yi(e,null,a,s)):rt(t,e,a,s),e.memoizedState=r.state,i&&Ih(e,n,!0),e.child}function cg(t){var e=t.stateNode;e.pendingContext?Sh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Sh(t,e.context,!1),wd(t,e.containerInfo)}function Gh(t,e,n,r,i){return gi(),_d(i),e.flags|=256,rt(t,e,n,r),e.child}var hc={dehydrated:null,treeContext:null,retryLane:0};function pc(t){return{baseLanes:t,cachePool:null,transitions:null}}function dg(t,e,n){var r=e.pendingProps,i=Se.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ye(Se,i&1),t===null)return oc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=hl(o,r,0,null),t=wr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=pc(n),e.memoizedState=hc,t):xd(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return LC(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=qn(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=qn(a,s):(s=wr(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?pc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=hc,r}return s=t.child,t=s.sibling,r=qn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function xd(t,e){return e=hl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Lo(t,e,n,r){return r!==null&&_d(r),yi(e,t.child,null,n),t=xd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function LC(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=uu(Error(U(422))),Lo(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=hl({mode:"visible",children:r.children},i,0,null),s=wr(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&yi(e,t.child,null,o),e.child.memoizedState=pc(o),e.memoizedState=hc,s);if(!(e.mode&1))return Lo(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(U(419)),r=uu(s,r,void 0),Lo(t,e,o,r)}if(a=(o&t.childLanes)!==0,ft||a){if(r=Ke,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,vn(t,i),Bt(r,t,i,-1))}return Md(),r=uu(Error(U(421))),Lo(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=BC.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Rt=Bn(i.nextSibling),St=e,we=!0,Ft=null,t!==null&&(At[Nt++]=cn,At[Nt++]=dn,At[Nt++]=kr,cn=t.id,dn=t.overflow,kr=e),e=xd(e,r.children),e.flags|=4096,e)}function Kh(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ac(t.return,e,n)}function cu(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function fg(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(rt(t,e,r.children,n),r=Se.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Kh(t,n,e);else if(t.tag===19)Kh(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ye(Se,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ca(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),cu(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ca(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}cu(e,!0,n,null,s);break;case"together":cu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Qo(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function En(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ar|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=qn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=qn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function OC(t,e,n){switch(e.tag){case 3:cg(e),gi();break;case 5:F_(e);break;case 1:mt(e.type)&&ma(e);break;case 4:wd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ye(ya,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ye(Se,Se.current&1),e.flags|=128,null):n&e.child.childLanes?dg(t,e,n):(ye(Se,Se.current&1),t=En(t,e,n),t!==null?t.sibling:null);ye(Se,Se.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return fg(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ye(Se,Se.current),r)break;return null;case 22:case 23:return e.lanes=0,lg(t,e,n)}return En(t,e,n)}var hg,mc,pg,mg;hg=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};mc=function(){};pg=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,yr(Zt.current);var s=null;switch(n){case"input":i=ju(t,i),r=ju(t,r),s=[];break;case"select":i=ke({},i,{value:void 0}),r=ke({},r,{value:void 0}),s=[];break;case"textarea":i=Wu(t,i),r=Wu(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ha)}Ku(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Cs.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Cs.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ve("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};mg=function(t,e,n,r){n!==r&&(e.flags|=4)};function Qi(t,e){if(!we)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function qe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function DC(t,e,n){var r=e.pendingProps;switch(md(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(e),null;case 1:return mt(e.type)&&pa(),qe(e),null;case 3:return r=e.stateNode,vi(),Ce(pt),Ce(Ze),Sd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(xo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ft!==null&&(Rc(Ft),Ft=null))),mc(t,e),qe(e),null;case 5:Rd(e);var i=yr(Os.current);if(n=e.type,t!==null&&e.stateNode!=null)pg(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return qe(e),null}if(t=yr(Zt.current),xo(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Xt]=e,r[Ps]=s,t=(e.mode&1)!==0,n){case"dialog":ve("cancel",r),ve("close",r);break;case"iframe":case"object":case"embed":ve("load",r);break;case"video":case"audio":for(i=0;i<ss.length;i++)ve(ss[i],r);break;case"source":ve("error",r);break;case"img":case"image":case"link":ve("error",r),ve("load",r);break;case"details":ve("toggle",r);break;case"input":Xf(r,s),ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ve("invalid",r);break;case"textarea":Zf(r,s),ve("invalid",r)}Ku(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&No(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&No(r.textContent,a,t),i=["children",""+a]):Cs.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ve("scroll",r)}switch(n){case"input":Co(r),Jf(r,s,!0);break;case"textarea":Co(r),eh(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ha)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Km(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Xt]=e,t[Ps]=r,hg(t,e,!1,!1),e.stateNode=t;e:{switch(o=Hu(n,r),n){case"dialog":ve("cancel",t),ve("close",t),i=r;break;case"iframe":case"object":case"embed":ve("load",t),i=r;break;case"video":case"audio":for(i=0;i<ss.length;i++)ve(ss[i],t);i=r;break;case"source":ve("error",t),i=r;break;case"img":case"image":case"link":ve("error",t),ve("load",t),i=r;break;case"details":ve("toggle",t),i=r;break;case"input":Xf(t,r),i=ju(t,r),ve("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ke({},r,{value:void 0}),ve("invalid",t);break;case"textarea":Zf(t,r),i=Wu(t,r),ve("invalid",t);break;default:i=r}Ku(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Bm(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Hm(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ws(t,l):typeof l=="number"&&ws(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Cs.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ve("scroll",t):l!=null&&ed(t,s,l,o))}switch(n){case"input":Co(t),Jf(t,r,!1);break;case"textarea":Co(t),eh(t);break;case"option":r.value!=null&&t.setAttribute("value",""+nr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ii(t,!!r.multiple,s,!1):r.defaultValue!=null&&ii(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ha)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return qe(e),null;case 6:if(t&&e.stateNode!=null)mg(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=yr(Os.current),yr(Zt.current),xo(e)){if(r=e.stateNode,n=e.memoizedProps,r[Xt]=e,(s=r.nodeValue!==n)&&(t=St,t!==null))switch(t.tag){case 3:No(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&No(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Xt]=e,e.stateNode=r}return qe(e),null;case 13:if(Ce(Se),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(we&&Rt!==null&&e.mode&1&&!(e.flags&128))L_(),gi(),e.flags|=98560,s=!1;else if(s=xo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[Xt]=e}else gi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qe(e),s=!1}else Ft!==null&&(Rc(Ft),Ft=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Se.current&1?Me===0&&(Me=3):Md())),e.updateQueue!==null&&(e.flags|=4),qe(e),null);case 4:return vi(),mc(t,e),t===null&&Ns(e.stateNode.containerInfo),qe(e),null;case 10:return vd(e.type._context),qe(e),null;case 17:return mt(e.type)&&pa(),qe(e),null;case 19:if(Ce(Se),s=e.memoizedState,s===null)return qe(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Qi(s,!1);else{if(Me!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ca(t),o!==null){for(e.flags|=128,Qi(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ye(Se,Se.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ne()>Ci&&(e.flags|=128,r=!0,Qi(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ca(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Qi(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!we)return qe(e),null}else 2*Ne()-s.renderingStartTime>Ci&&n!==1073741824&&(e.flags|=128,r=!0,Qi(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ne(),e.sibling=null,n=Se.current,ye(Se,r?n&1|2:n&1),e):(qe(e),null);case 22:case 23:return bd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wt&1073741824&&(qe(e),e.subtreeFlags&6&&(e.flags|=8192)):qe(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function bC(t,e){switch(md(e),e.tag){case 1:return mt(e.type)&&pa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return vi(),Ce(pt),Ce(Ze),Sd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Rd(e),null;case 13:if(Ce(Se),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));gi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ce(Se),null;case 4:return vi(),null;case 10:return vd(e.type._context),null;case 22:case 23:return bd(),null;case 24:return null;default:return null}}var Oo=!1,Xe=!1,MC=typeof WeakSet=="function"?WeakSet:Set,$=null;function ei(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Te(t,e,r)}else n.current=null}function _c(t,e,n){try{n()}catch(r){Te(t,e,r)}}var Hh=!1;function jC(t,e){if(Zu=ca,t=v_(),hd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,c=t,d=null;t:for(;;){for(var _;c!==n||i!==0&&c.nodeType!==3||(a=o+i),c!==s||r!==0&&c.nodeType!==3||(l=o+r),c.nodeType===3&&(o+=c.nodeValue.length),(_=c.firstChild)!==null;)d=c,c=_;for(;;){if(c===t)break t;if(d===n&&++u===i&&(a=o),d===s&&++h===r&&(l=o),(_=c.nextSibling)!==null)break;c=d,d=c.parentNode}c=_}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ec={focusedElem:t,selectionRange:n},ca=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var C=v.memoizedProps,R=v.memoizedState,f=e.stateNode,p=f.getSnapshotBeforeUpdate(e.elementType===e.type?C:jt(e.type,C),R);f.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(k){Te(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return v=Hh,Hh=!1,v}function hs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&_c(e,n,s)}i=i.next}while(i!==r)}}function dl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function gc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function _g(t){var e=t.alternate;e!==null&&(t.alternate=null,_g(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Xt],delete e[Ps],delete e[rc],delete e[vC],delete e[EC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function gg(t){return t.tag===5||t.tag===3||t.tag===4}function $h(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||gg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ha));else if(r!==4&&(t=t.child,t!==null))for(yc(t,e,n),t=t.sibling;t!==null;)yc(t,e,n),t=t.sibling}function vc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(vc(t,e,n),t=t.sibling;t!==null;)vc(t,e,n),t=t.sibling}var $e=null,Ut=!1;function An(t,e,n){for(n=n.child;n!==null;)yg(t,e,n),n=n.sibling}function yg(t,e,n){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(rl,n)}catch{}switch(n.tag){case 5:Xe||ei(n,e);case 6:var r=$e,i=Ut;$e=null,An(t,e,n),$e=r,Ut=i,$e!==null&&(Ut?(t=$e,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):$e.removeChild(n.stateNode));break;case 18:$e!==null&&(Ut?(t=$e,n=n.stateNode,t.nodeType===8?ru(t.parentNode,n):t.nodeType===1&&ru(t,n),ks(t)):ru($e,n.stateNode));break;case 4:r=$e,i=Ut,$e=n.stateNode.containerInfo,Ut=!0,An(t,e,n),$e=r,Ut=i;break;case 0:case 11:case 14:case 15:if(!Xe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&_c(n,e,o),i=i.next}while(i!==r)}An(t,e,n);break;case 1:if(!Xe&&(ei(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Te(n,e,a)}An(t,e,n);break;case 21:An(t,e,n);break;case 22:n.mode&1?(Xe=(r=Xe)||n.memoizedState!==null,An(t,e,n),Xe=r):An(t,e,n);break;default:An(t,e,n)}}function Bh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new MC),e.forEach(function(r){var i=zC.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Mt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:$e=a.stateNode,Ut=!1;break e;case 3:$e=a.stateNode.containerInfo,Ut=!0;break e;case 4:$e=a.stateNode.containerInfo,Ut=!0;break e}a=a.return}if($e===null)throw Error(U(160));yg(s,o,i),$e=null,Ut=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Te(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)vg(e,t),e=e.sibling}function vg(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mt(e,t),qt(t),r&4){try{hs(3,t,t.return),dl(3,t)}catch(C){Te(t,t.return,C)}try{hs(5,t,t.return)}catch(C){Te(t,t.return,C)}}break;case 1:Mt(e,t),qt(t),r&512&&n!==null&&ei(n,n.return);break;case 5:if(Mt(e,t),qt(t),r&512&&n!==null&&ei(n,n.return),t.flags&32){var i=t.stateNode;try{ws(i,"")}catch(C){Te(t,t.return,C)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Wm(i,s),Hu(a,o);var u=Hu(a,s);for(o=0;o<l.length;o+=2){var h=l[o],c=l[o+1];h==="style"?Bm(i,c):h==="dangerouslySetInnerHTML"?Hm(i,c):h==="children"?ws(i,c):ed(i,h,c,u)}switch(a){case"input":Uu(i,s);break;case"textarea":Gm(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var _=s.value;_!=null?ii(i,!!s.multiple,_,!1):d!==!!s.multiple&&(s.defaultValue!=null?ii(i,!!s.multiple,s.defaultValue,!0):ii(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ps]=s}catch(C){Te(t,t.return,C)}}break;case 6:if(Mt(e,t),qt(t),r&4){if(t.stateNode===null)throw Error(U(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(C){Te(t,t.return,C)}}break;case 3:if(Mt(e,t),qt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ks(e.containerInfo)}catch(C){Te(t,t.return,C)}break;case 4:Mt(e,t),qt(t);break;case 13:Mt(e,t),qt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Od=Ne())),r&4&&Bh(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Xe=(u=Xe)||h,Mt(e,t),Xe=u):Mt(e,t),qt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for($=t,h=t.child;h!==null;){for(c=$=h;$!==null;){switch(d=$,_=d.child,d.tag){case 0:case 11:case 14:case 15:hs(4,d,d.return);break;case 1:ei(d,d.return);var v=d.stateNode;if(typeof v.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(C){Te(r,n,C)}}break;case 5:ei(d,d.return);break;case 22:if(d.memoizedState!==null){Vh(c);continue}}_!==null?(_.return=d,$=_):Vh(c)}h=h.sibling}e:for(h=null,c=t;;){if(c.tag===5){if(h===null){h=c;try{i=c.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=c.stateNode,l=c.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=$m("display",o))}catch(C){Te(t,t.return,C)}}}else if(c.tag===6){if(h===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(C){Te(t,t.return,C)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===t)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:Mt(e,t),qt(t),r&4&&Bh(t);break;case 21:break;default:Mt(e,t),qt(t)}}function qt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(gg(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ws(i,""),r.flags&=-33);var s=$h(t);vc(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=$h(t);yc(t,a,o);break;default:throw Error(U(161))}}catch(l){Te(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function UC(t,e,n){$=t,Eg(t)}function Eg(t,e,n){for(var r=(t.mode&1)!==0;$!==null;){var i=$,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Oo;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Xe;a=Oo;var u=Xe;if(Oo=o,(Xe=l)&&!u)for($=i;$!==null;)o=$,l=o.child,o.tag===22&&o.memoizedState!==null?Yh(i):l!==null?(l.return=o,$=l):Yh(i);for(;s!==null;)$=s,Eg(s),s=s.sibling;$=i,Oo=a,Xe=u}zh(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,$=s):zh(t)}}function zh(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Xe||dl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Xe)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:jt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Nh(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Nh(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var c=h.dehydrated;c!==null&&ks(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}Xe||e.flags&512&&gc(e)}catch(d){Te(e,e.return,d)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function Vh(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function Yh(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{dl(4,e)}catch(l){Te(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Te(e,i,l)}}var s=e.return;try{gc(e)}catch(l){Te(e,s,l)}break;case 5:var o=e.return;try{gc(e)}catch(l){Te(e,o,l)}}}catch(l){Te(e,e.return,l)}if(e===t){$=null;break}var a=e.sibling;if(a!==null){a.return=e.return,$=a;break}$=e.return}}var FC=Math.ceil,Sa=Sn.ReactCurrentDispatcher,Pd=Sn.ReactCurrentOwner,Pt=Sn.ReactCurrentBatchConfig,ae=0,Ke=null,Pe=null,Be=0,wt=0,ti=ur(0),Me=0,js=null,Ar=0,fl=0,Ld=0,ps=null,dt=null,Od=0,Ci=1/0,ln=null,Ia=!1,Ec=null,Vn=null,Do=!1,Wn=null,ka=0,ms=0,Cc=null,Xo=-1,Jo=0;function st(){return ae&6?Ne():Xo!==-1?Xo:Xo=Ne()}function Yn(t){return t.mode&1?ae&2&&Be!==0?Be&-Be:wC.transition!==null?(Jo===0&&(Jo=r_()),Jo):(t=fe,t!==0||(t=window.event,t=t===void 0?16:c_(t.type)),t):1}function Bt(t,e,n,r){if(50<ms)throw ms=0,Cc=null,Error(U(185));Xs(t,n,r),(!(ae&2)||t!==Ke)&&(t===Ke&&(!(ae&2)&&(fl|=n),Me===4&&On(t,Be)),_t(t,r),n===1&&ae===0&&!(e.mode&1)&&(Ci=Ne()+500,ll&&cr()))}function _t(t,e){var n=t.callbackNode;w0(t,e);var r=ua(t,t===Ke?Be:0);if(r===0)n!==null&&rh(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&rh(n),e===1)t.tag===0?CC(qh.bind(null,t)):N_(qh.bind(null,t)),gC(function(){!(ae&6)&&cr()}),n=null;else{switch(i_(r)){case 1:n=sd;break;case 4:n=t_;break;case 16:n=la;break;case 536870912:n=n_;break;default:n=la}n=Ag(n,Cg.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Cg(t,e){if(Xo=-1,Jo=0,ae&6)throw Error(U(327));var n=t.callbackNode;if(ui()&&t.callbackNode!==n)return null;var r=ua(t,t===Ke?Be:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ta(t,r);else{e=r;var i=ae;ae|=2;var s=Rg();(Ke!==t||Be!==e)&&(ln=null,Ci=Ne()+500,Cr(t,e));do try{KC();break}catch(a){wg(t,a)}while(1);yd(),Sa.current=s,ae=i,Pe!==null?e=0:(Ke=null,Be=0,e=Me)}if(e!==0){if(e===2&&(i=Yu(t),i!==0&&(r=i,e=wc(t,i))),e===1)throw n=js,Cr(t,0),On(t,r),_t(t,Ne()),n;if(e===6)On(t,r);else{if(i=t.current.alternate,!(r&30)&&!WC(i)&&(e=Ta(t,r),e===2&&(s=Yu(t),s!==0&&(r=s,e=wc(t,s))),e===1))throw n=js,Cr(t,0),On(t,r),_t(t,Ne()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:hr(t,dt,ln);break;case 3:if(On(t,r),(r&130023424)===r&&(e=Od+500-Ne(),10<e)){if(ua(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){st(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=nc(hr.bind(null,t,dt,ln),e);break}hr(t,dt,ln);break;case 4:if(On(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-$t(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ne()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*FC(r/1960))-r,10<r){t.timeoutHandle=nc(hr.bind(null,t,dt,ln),r);break}hr(t,dt,ln);break;case 5:hr(t,dt,ln);break;default:throw Error(U(329))}}}return _t(t,Ne()),t.callbackNode===n?Cg.bind(null,t):null}function wc(t,e){var n=ps;return t.current.memoizedState.isDehydrated&&(Cr(t,e).flags|=256),t=Ta(t,e),t!==2&&(e=dt,dt=n,e!==null&&Rc(e)),t}function Rc(t){dt===null?dt=t:dt.push.apply(dt,t)}function WC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Yt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function On(t,e){for(e&=~Ld,e&=~fl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-$t(e),r=1<<n;t[n]=-1,e&=~r}}function qh(t){if(ae&6)throw Error(U(327));ui();var e=ua(t,0);if(!(e&1))return _t(t,Ne()),null;var n=Ta(t,e);if(t.tag!==0&&n===2){var r=Yu(t);r!==0&&(e=r,n=wc(t,r))}if(n===1)throw n=js,Cr(t,0),On(t,e),_t(t,Ne()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,hr(t,dt,ln),_t(t,Ne()),null}function Dd(t,e){var n=ae;ae|=1;try{return t(e)}finally{ae=n,ae===0&&(Ci=Ne()+500,ll&&cr())}}function Nr(t){Wn!==null&&Wn.tag===0&&!(ae&6)&&ui();var e=ae;ae|=1;var n=Pt.transition,r=fe;try{if(Pt.transition=null,fe=1,t)return t()}finally{fe=r,Pt.transition=n,ae=e,!(ae&6)&&cr()}}function bd(){wt=ti.current,Ce(ti)}function Cr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,_C(n)),Pe!==null)for(n=Pe.return;n!==null;){var r=n;switch(md(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&pa();break;case 3:vi(),Ce(pt),Ce(Ze),Sd();break;case 5:Rd(r);break;case 4:vi();break;case 13:Ce(Se);break;case 19:Ce(Se);break;case 10:vd(r.type._context);break;case 22:case 23:bd()}n=n.return}if(Ke=t,Pe=t=qn(t.current,null),Be=wt=e,Me=0,js=null,Ld=fl=Ar=0,dt=ps=null,gr!==null){for(e=0;e<gr.length;e++)if(n=gr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}gr=null}return t}function wg(t,e){do{var n=Pe;try{if(yd(),Yo.current=Ra,wa){for(var r=Ie.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}wa=!1}if(Tr=0,Fe=Oe=Ie=null,fs=!1,Ds=0,Pd.current=null,n===null||n.return===null){Me=1,js=e,Pe=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Be,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,c=h.tag;if(!(h.mode&1)&&(c===0||c===11||c===15)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var _=Mh(o);if(_!==null){_.flags&=-257,jh(_,o,a,s,e),_.mode&1&&bh(s,u,e),e=_,l=u;var v=e.updateQueue;if(v===null){var C=new Set;C.add(l),e.updateQueue=C}else v.add(l);break e}else{if(!(e&1)){bh(s,u,e),Md();break e}l=Error(U(426))}}else if(we&&a.mode&1){var R=Mh(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),jh(R,o,a,s,e),_d(Ei(l,a));break e}}s=l=Ei(l,a),Me!==4&&(Me=2),ps===null?ps=[s]:ps.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var f=sg(s,l,e);Ah(s,f);break e;case 1:a=l;var p=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof p.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Vn===null||!Vn.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=og(s,a,e);Ah(s,k);break e}}s=s.return}while(s!==null)}Ig(n)}catch(O){e=O,Pe===n&&n!==null&&(Pe=n=n.return);continue}break}while(1)}function Rg(){var t=Sa.current;return Sa.current=Ra,t===null?Ra:t}function Md(){(Me===0||Me===3||Me===2)&&(Me=4),Ke===null||!(Ar&268435455)&&!(fl&268435455)||On(Ke,Be)}function Ta(t,e){var n=ae;ae|=2;var r=Rg();(Ke!==t||Be!==e)&&(ln=null,Cr(t,e));do try{GC();break}catch(i){wg(t,i)}while(1);if(yd(),ae=n,Sa.current=r,Pe!==null)throw Error(U(261));return Ke=null,Be=0,Me}function GC(){for(;Pe!==null;)Sg(Pe)}function KC(){for(;Pe!==null&&!h0();)Sg(Pe)}function Sg(t){var e=Tg(t.alternate,t,wt);t.memoizedProps=t.pendingProps,e===null?Ig(t):Pe=e,Pd.current=null}function Ig(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=bC(n,e),n!==null){n.flags&=32767,Pe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Me=6,Pe=null;return}}else if(n=DC(n,e,wt),n!==null){Pe=n;return}if(e=e.sibling,e!==null){Pe=e;return}Pe=e=t}while(e!==null);Me===0&&(Me=5)}function hr(t,e,n){var r=fe,i=Pt.transition;try{Pt.transition=null,fe=1,HC(t,e,n,r)}finally{Pt.transition=i,fe=r}return null}function HC(t,e,n,r){do ui();while(Wn!==null);if(ae&6)throw Error(U(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(R0(t,s),t===Ke&&(Pe=Ke=null,Be=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Do||(Do=!0,Ag(la,function(){return ui(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Pt.transition,Pt.transition=null;var o=fe;fe=1;var a=ae;ae|=4,Pd.current=null,jC(t,n),vg(n,t),uC(ec),ca=!!Zu,ec=Zu=null,t.current=n,UC(n),p0(),ae=a,fe=o,Pt.transition=s}else t.current=n;if(Do&&(Do=!1,Wn=t,ka=i),s=t.pendingLanes,s===0&&(Vn=null),g0(n.stateNode),_t(t,Ne()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ia)throw Ia=!1,t=Ec,Ec=null,t;return ka&1&&t.tag!==0&&ui(),s=t.pendingLanes,s&1?t===Cc?ms++:(ms=0,Cc=t):ms=0,cr(),null}function ui(){if(Wn!==null){var t=i_(ka),e=Pt.transition,n=fe;try{if(Pt.transition=null,fe=16>t?16:t,Wn===null)var r=!1;else{if(t=Wn,Wn=null,ka=0,ae&6)throw Error(U(331));var i=ae;for(ae|=4,$=t.current;$!==null;){var s=$,o=s.child;if($.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for($=u;$!==null;){var h=$;switch(h.tag){case 0:case 11:case 15:hs(8,h,s)}var c=h.child;if(c!==null)c.return=h,$=c;else for(;$!==null;){h=$;var d=h.sibling,_=h.return;if(_g(h),h===u){$=null;break}if(d!==null){d.return=_,$=d;break}$=_}}}var v=s.alternate;if(v!==null){var C=v.child;if(C!==null){v.child=null;do{var R=C.sibling;C.sibling=null,C=R}while(C!==null)}}$=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,$=o;else e:for(;$!==null;){if(s=$,s.flags&2048)switch(s.tag){case 0:case 11:case 15:hs(9,s,s.return)}var f=s.sibling;if(f!==null){f.return=s.return,$=f;break e}$=s.return}}var p=t.current;for($=p;$!==null;){o=$;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,$=E;else e:for(o=p;$!==null;){if(a=$,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:dl(9,a)}}catch(O){Te(a,a.return,O)}if(a===o){$=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,$=k;break e}$=a.return}}if(ae=i,cr(),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(rl,t)}catch{}r=!0}return r}finally{fe=n,Pt.transition=e}}return!1}function Qh(t,e,n){e=Ei(n,e),e=sg(t,e,1),t=zn(t,e,1),e=st(),t!==null&&(Xs(t,1,e),_t(t,e))}function Te(t,e,n){if(t.tag===3)Qh(t,t,n);else for(;e!==null;){if(e.tag===3){Qh(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vn===null||!Vn.has(r))){t=Ei(n,t),t=og(e,t,1),e=zn(e,t,1),t=st(),e!==null&&(Xs(e,1,t),_t(e,t));break}}e=e.return}}function $C(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=st(),t.pingedLanes|=t.suspendedLanes&n,Ke===t&&(Be&n)===n&&(Me===4||Me===3&&(Be&130023424)===Be&&500>Ne()-Od?Cr(t,0):Ld|=n),_t(t,e)}function kg(t,e){e===0&&(t.mode&1?(e=So,So<<=1,!(So&130023424)&&(So=4194304)):e=1);var n=st();t=vn(t,e),t!==null&&(Xs(t,e,n),_t(t,n))}function BC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),kg(t,n)}function zC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),kg(t,n)}var Tg;Tg=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||pt.current)ft=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ft=!1,OC(t,e,n);ft=!!(t.flags&131072)}else ft=!1,we&&e.flags&1048576&&x_(e,ga,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Qo(t,e),t=e.pendingProps;var i=_i(e,Ze.current);li(e,n),i=kd(null,e,r,t,i,n);var s=Td();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mt(r)?(s=!0,ma(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Cd(e),i.updater=ul,e.stateNode=i,i._reactInternals=e,uc(e,r,t,n),e=fc(null,e,r,!0,s,n)):(e.tag=0,we&&s&&pd(e),rt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Qo(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=YC(r),t=jt(r,t),i){case 0:e=dc(null,e,r,t,n);break e;case 1:e=Wh(null,e,r,t,n);break e;case 11:e=Uh(null,e,r,t,n);break e;case 14:e=Fh(null,e,r,jt(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jt(r,i),dc(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jt(r,i),Wh(t,e,r,i,n);case 3:e:{if(cg(e),t===null)throw Error(U(387));r=e.pendingProps,s=e.memoizedState,i=s.element,D_(t,e),Ea(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ei(Error(U(423)),e),e=Gh(t,e,r,n,i);break e}else if(r!==i){i=Ei(Error(U(424)),e),e=Gh(t,e,r,n,i);break e}else for(Rt=Bn(e.stateNode.containerInfo.firstChild),St=e,we=!0,Ft=null,n=U_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(gi(),r===i){e=En(t,e,n);break e}rt(t,e,r,n)}e=e.child}return e;case 5:return F_(e),t===null&&oc(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,tc(r,i)?o=null:s!==null&&tc(r,s)&&(e.flags|=32),ug(t,e),rt(t,e,o,n),e.child;case 6:return t===null&&oc(e),null;case 13:return dg(t,e,n);case 4:return wd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=yi(e,null,r,n):rt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jt(r,i),Uh(t,e,r,i,n);case 7:return rt(t,e,e.pendingProps,n),e.child;case 8:return rt(t,e,e.pendingProps.children,n),e.child;case 12:return rt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ye(ya,r._currentValue),r._currentValue=o,s!==null)if(Yt(s.value,o)){if(s.children===i.children&&!pt.current){e=En(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=mn(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),ac(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),ac(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}rt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,li(e,n),i=Lt(i),r=r(i),e.flags|=1,rt(t,e,r,n),e.child;case 14:return r=e.type,i=jt(r,e.pendingProps),i=jt(r.type,i),Fh(t,e,r,i,n);case 15:return ag(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jt(r,i),Qo(t,e),e.tag=1,mt(r)?(t=!0,ma(e)):t=!1,li(e,n),M_(e,r,i),uc(e,r,i,n),fc(null,e,r,!0,t,n);case 19:return fg(t,e,n);case 22:return lg(t,e,n)}throw Error(U(156,e.tag))};function Ag(t,e){return e_(t,e)}function VC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xt(t,e,n,r){return new VC(t,e,n,r)}function jd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function YC(t){if(typeof t=="function")return jd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===nd)return 11;if(t===rd)return 14}return 2}function qn(t,e){var n=t.alternate;return n===null?(n=xt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Zo(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")jd(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Br:return wr(n.children,i,s,e);case td:o=8,i|=8;break;case Ou:return t=xt(12,n,e,i|2),t.elementType=Ou,t.lanes=s,t;case Du:return t=xt(13,n,e,i),t.elementType=Du,t.lanes=s,t;case bu:return t=xt(19,n,e,i),t.elementType=bu,t.lanes=s,t;case jm:return hl(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bm:o=10;break e;case Mm:o=9;break e;case nd:o=11;break e;case rd:o=14;break e;case xn:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=xt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function wr(t,e,n,r){return t=xt(7,t,r,e),t.lanes=n,t}function hl(t,e,n,r){return t=xt(22,t,r,e),t.elementType=jm,t.lanes=n,t.stateNode={isHidden:!1},t}function du(t,e,n){return t=xt(6,t,null,e),t.lanes=n,t}function fu(t,e,n){return e=xt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function qC(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zl(0),this.expirationTimes=zl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zl(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ud(t,e,n,r,i,s,o,a,l){return t=new qC(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=xt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cd(s),t}function QC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$r,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Ng(t){if(!t)return rr;t=t._reactInternals;e:{if(Ur(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(mt(n))return A_(t,n,e)}return e}function xg(t,e,n,r,i,s,o,a,l){return t=Ud(n,r,!0,t,i,s,o,a,l),t.context=Ng(null),n=t.current,r=st(),i=Yn(n),s=mn(r,i),s.callback=e??null,zn(n,s,i),t.current.lanes=i,Xs(t,i,r),_t(t,r),t}function pl(t,e,n,r){var i=e.current,s=st(),o=Yn(i);return n=Ng(n),e.context===null?e.context=n:e.pendingContext=n,e=mn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=zn(i,e,o),t!==null&&(Bt(t,i,o,s),Vo(t,i,o)),o}function Aa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Xh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Fd(t,e){Xh(t,e),(t=t.alternate)&&Xh(t,e)}function XC(){return null}var Pg=typeof reportError=="function"?reportError:function(t){console.error(t)};function Wd(t){this._internalRoot=t}ml.prototype.render=Wd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));pl(t,e,null,null)};ml.prototype.unmount=Wd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Nr(function(){pl(null,t,null,null)}),e[yn]=null}};function ml(t){this._internalRoot=t}ml.prototype.unstable_scheduleHydration=function(t){if(t){var e=a_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ln.length&&e!==0&&e<Ln[n].priority;n++);Ln.splice(n,0,t),n===0&&u_(t)}};function Gd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function _l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Jh(){}function JC(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Aa(o);s.call(u)}}var o=xg(e,r,t,0,null,!1,!1,"",Jh);return t._reactRootContainer=o,t[yn]=o.current,Ns(t.nodeType===8?t.parentNode:t),Nr(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Aa(l);a.call(u)}}var l=Ud(t,0,!1,null,null,!1,!1,"",Jh);return t._reactRootContainer=l,t[yn]=l.current,Ns(t.nodeType===8?t.parentNode:t),Nr(function(){pl(e,l,n,r)}),l}function gl(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Aa(o);a.call(l)}}pl(e,o,t,i)}else o=JC(n,e,t,i,r);return Aa(o)}s_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=is(e.pendingLanes);n!==0&&(od(e,n|1),_t(e,Ne()),!(ae&6)&&(Ci=Ne()+500,cr()))}break;case 13:Nr(function(){var r=vn(t,1);if(r!==null){var i=st();Bt(r,t,1,i)}}),Fd(t,1)}};ad=function(t){if(t.tag===13){var e=vn(t,134217728);if(e!==null){var n=st();Bt(e,t,134217728,n)}Fd(t,134217728)}};o_=function(t){if(t.tag===13){var e=Yn(t),n=vn(t,e);if(n!==null){var r=st();Bt(n,t,e,r)}Fd(t,e)}};a_=function(){return fe};l_=function(t,e){var n=fe;try{return fe=t,e()}finally{fe=n}};Bu=function(t,e,n){switch(e){case"input":if(Uu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=al(r);if(!i)throw Error(U(90));Fm(r),Uu(r,i)}}}break;case"textarea":Gm(t,n);break;case"select":e=n.value,e!=null&&ii(t,!!n.multiple,e,!1)}};Ym=Dd;qm=Nr;var ZC={usingClientEntryPoint:!1,Events:[Zs,qr,al,zm,Vm,Dd]},Xi={findFiberByHostInstance:_r,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ew={bundleType:Xi.bundleType,version:Xi.version,rendererPackageName:Xi.rendererPackageName,rendererConfig:Xi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Jm(t),t===null?null:t.stateNode},findFiberByHostInstance:Xi.findFiberByHostInstance||XC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bo.isDisabled&&bo.supportsFiber)try{rl=bo.inject(ew),Jt=bo}catch{}}kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZC;kt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gd(e))throw Error(U(200));return QC(t,e,null,n)};kt.createRoot=function(t,e){if(!Gd(t))throw Error(U(299));var n=!1,r="",i=Pg;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Ud(t,1,!1,null,null,n,!1,r,i),t[yn]=e.current,Ns(t.nodeType===8?t.parentNode:t),new Wd(e)};kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=Jm(e),t=t===null?null:t.stateNode,t};kt.flushSync=function(t){return Nr(t)};kt.hydrate=function(t,e,n){if(!_l(e))throw Error(U(200));return gl(null,t,e,!0,n)};kt.hydrateRoot=function(t,e,n){if(!Gd(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Pg;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=xg(e,null,t,1,n??null,i,!1,s,o),t[yn]=e.current,Ns(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ml(e)};kt.render=function(t,e,n){if(!_l(e))throw Error(U(200));return gl(null,t,e,!1,n)};kt.unmountComponentAtNode=function(t){if(!_l(t))throw Error(U(40));return t._reactRootContainer?(Nr(function(){gl(null,null,t,!1,function(){t._reactRootContainer=null,t[yn]=null})}),!0):!1};kt.unstable_batchedUpdates=Dd;kt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!_l(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return gl(t,e,n,!1,r)};kt.version="18.2.0-next-9e3b772b8-20220608";function Lg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Lg)}catch(t){console.error(t)}}Lg(),xm.exports=kt;var tw=xm.exports,Zh=tw;Pu.createRoot=Zh.createRoot,Pu.hydrateRoot=Zh.hydrateRoot;/**
 * @remix-run/router v1.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Us(){return Us=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Us.apply(this,arguments)}var Gn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Gn||(Gn={}));const ep="popstate";function nw(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Sc("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Na(i)}return iw(e,n,null,t)}function Le(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Kd(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rw(){return Math.random().toString(36).substr(2,8)}function tp(t,e){return{usr:t.state,key:t.key,idx:e}}function Sc(t,e,n,r){return n===void 0&&(n=null),Us({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Li(e):e,{state:n,key:e&&e.key||r||rw()})}function Na(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Li(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function iw(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Gn.Pop,l=null,u=h();u==null&&(u=0,o.replaceState(Us({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function c(){a=Gn.Pop;let R=h(),f=R==null?null:R-u;u=R,l&&l({action:a,location:C.location,delta:f})}function d(R,f){a=Gn.Push;let p=Sc(C.location,R,f);n&&n(p,R),u=h()+1;let E=tp(p,u),k=C.createHref(p);try{o.pushState(E,"",k)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(k)}s&&l&&l({action:a,location:C.location,delta:1})}function _(R,f){a=Gn.Replace;let p=Sc(C.location,R,f);n&&n(p,R),u=h();let E=tp(p,u),k=C.createHref(p);o.replaceState(E,"",k),s&&l&&l({action:a,location:C.location,delta:0})}function v(R){let f=i.location.origin!=="null"?i.location.origin:i.location.href,p=typeof R=="string"?R:Na(R);return Le(f,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,f)}let C={get action(){return a},get location(){return t(i,o)},listen(R){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(ep,c),l=R,()=>{i.removeEventListener(ep,c),l=null}},createHref(R){return e(i,R)},createURL:v,encodeLocation(R){let f=v(R);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:d,replace:_,go(R){return o.go(R)}};return C}var np;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(np||(np={}));function sw(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Li(e):e,i=Hd(r.pathname||"/",n);if(i==null)return null;let s=Og(t);ow(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=mw(s[a],yw(i));return o}function Og(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Le(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Qn([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(Le(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Og(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:hw(u,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of Dg(s.path))i(s,o,l)}),e}function Dg(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Dg(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function ow(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:pw(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const aw=/^:\w+$/,lw=3,uw=2,cw=1,dw=10,fw=-2,rp=t=>t==="*";function hw(t,e){let n=t.split("/"),r=n.length;return n.some(rp)&&(r+=fw),e&&(r+=uw),n.filter(i=>!rp(i)).reduce((i,s)=>i+(aw.test(s)?lw:s===""?cw:dw),r)}function pw(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function mw(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",h=_w({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!h)return null;Object.assign(r,h.params);let c=a.route;s.push({params:r,pathname:Qn([i,h.pathname]),pathnameBase:ww(Qn([i,h.pathnameBase])),route:c}),h.pathnameBase!=="/"&&(i=Qn([i,h.pathnameBase]))}return s}function _w(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=gw(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,h,c)=>{if(h==="*"){let d=a[c]||"";o=s.slice(0,s.length-d.length).replace(/(.)\/+$/,"$1")}return u[h]=vw(a[c]||"",h),u},{}),pathname:s,pathnameBase:o,pattern:t}}function gw(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Kd(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function yw(t){try{return decodeURI(t)}catch(e){return Kd(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function vw(t,e){try{return decodeURIComponent(t)}catch(n){return Kd(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Hd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Ew(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Li(t):t;return{pathname:n?n.startsWith("/")?n:Cw(n,e):e,search:Rw(r),hash:Sw(i)}}function Cw(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function hu(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function bg(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Mg(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Li(t):(i=Us({},t),Le(!i.pathname||!i.pathname.includes("?"),hu("?","pathname","search",i)),Le(!i.pathname||!i.pathname.includes("#"),hu("#","pathname","hash",i)),Le(!i.search||!i.search.includes("#"),hu("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(r||o==null)a=n;else{let c=e.length-1;if(o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),c-=1;i.pathname=d.join("/")}a=c>=0?e[c]:"/"}let l=Ew(i,a),u=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const Qn=t=>t.join("/").replace(/\/\/+/g,"/"),ww=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Rw=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Sw=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Iw(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const jg=["post","put","patch","delete"];new Set(jg);const kw=["get",...jg];new Set(kw);/**
 * React Router v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xa(){return xa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xa.apply(this,arguments)}const $d=x.createContext(null),Tw=x.createContext(null),Oi=x.createContext(null),yl=x.createContext(null),Fr=x.createContext({outlet:null,matches:[],isDataRoute:!1}),Ug=x.createContext(null);function Aw(t,e){let{relative:n}=e===void 0?{}:e;to()||Le(!1);let{basename:r,navigator:i}=x.useContext(Oi),{hash:s,pathname:o,search:a}=Wg(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Qn([r,o])),i.createHref({pathname:l,search:a,hash:s})}function to(){return x.useContext(yl)!=null}function vl(){return to()||Le(!1),x.useContext(yl).location}function Fg(t){x.useContext(Oi).static||x.useLayoutEffect(t)}function rn(){let{isDataRoute:t}=x.useContext(Fr);return t?Gw():Nw()}function Nw(){to()||Le(!1);let t=x.useContext($d),{basename:e,navigator:n}=x.useContext(Oi),{matches:r}=x.useContext(Fr),{pathname:i}=vl(),s=JSON.stringify(bg(r).map(l=>l.pathnameBase)),o=x.useRef(!1);return Fg(()=>{o.current=!0}),x.useCallback(function(l,u){if(u===void 0&&(u={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let h=Mg(l,JSON.parse(s),i,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Qn([e,h.pathname])),(u.replace?n.replace:n.push)(h,u.state,u)},[e,n,s,i,t])}function Wg(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=x.useContext(Fr),{pathname:i}=vl(),s=JSON.stringify(bg(r).map(o=>o.pathnameBase));return x.useMemo(()=>Mg(t,JSON.parse(s),i,n==="path"),[t,s,i,n])}function xw(t,e){return Pw(t,e)}function Pw(t,e,n){to()||Le(!1);let{navigator:r}=x.useContext(Oi),{matches:i}=x.useContext(Fr),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let l=vl(),u;if(e){var h;let C=typeof e=="string"?Li(e):e;a==="/"||(h=C.pathname)!=null&&h.startsWith(a)||Le(!1),u=C}else u=l;let c=u.pathname||"/",d=a==="/"?c:c.slice(a.length)||"/",_=sw(t,{pathname:d}),v=Mw(_&&_.map(C=>Object.assign({},C,{params:Object.assign({},o,C.params),pathname:Qn([a,r.encodeLocation?r.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?a:Qn([a,r.encodeLocation?r.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),i,n);return e&&v?x.createElement(yl.Provider,{value:{location:xa({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Gn.Pop}},v):v}function Lw(){let t=Ww(),e=Iw(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),n?x.createElement("pre",{style:i},n):null,s)}const Ow=x.createElement(Lw,null);class Dw extends x.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?x.createElement(Fr.Provider,{value:this.props.routeContext},x.createElement(Ug.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function bw(t){let{routeContext:e,match:n,children:r}=t,i=x.useContext($d);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),x.createElement(Fr.Provider,{value:e},r)}function Mw(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let s=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let a=s.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||Le(!1),s=s.slice(0,Math.min(s.length,a+1))}return s.reduceRight((a,l,u)=>{let h=l.route.id?o==null?void 0:o[l.route.id]:null,c=null;n&&(c=l.route.errorElement||Ow);let d=e.concat(s.slice(0,u+1)),_=()=>{let v;return h?v=c:l.route.Component?v=x.createElement(l.route.Component,null):l.route.element?v=l.route.element:v=a,x.createElement(bw,{match:l,routeContext:{outlet:a,matches:d,isDataRoute:n!=null},children:v})};return n&&(l.route.ErrorBoundary||l.route.errorElement||u===0)?x.createElement(Dw,{location:n.location,revalidation:n.revalidation,component:c,error:h,children:_(),routeContext:{outlet:null,matches:d,isDataRoute:!0}}):_()},null)}var Gg=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Gg||{}),Pa=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Pa||{});function jw(t){let e=x.useContext($d);return e||Le(!1),e}function Uw(t){let e=x.useContext(Tw);return e||Le(!1),e}function Fw(t){let e=x.useContext(Fr);return e||Le(!1),e}function Kg(t){let e=Fw(),n=e.matches[e.matches.length-1];return n.route.id||Le(!1),n.route.id}function Ww(){var t;let e=x.useContext(Ug),n=Uw(Pa.UseRouteError),r=Kg(Pa.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function Gw(){let{router:t}=jw(Gg.UseNavigateStable),e=Kg(Pa.UseNavigateStable),n=x.useRef(!1);return Fg(()=>{n.current=!0}),x.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,xa({fromRouteId:e},s)))},[t,e])}function an(t){Le(!1)}function Kw(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Gn.Pop,navigator:s,static:o=!1}=t;to()&&Le(!1);let a=e.replace(/^\/*/,"/"),l=x.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof r=="string"&&(r=Li(r));let{pathname:u="/",search:h="",hash:c="",state:d=null,key:_="default"}=r,v=x.useMemo(()=>{let C=Hd(u,a);return C==null?null:{location:{pathname:C,search:h,hash:c,state:d,key:_},navigationType:i}},[a,u,h,c,d,_,i]);return v==null?null:x.createElement(Oi.Provider,{value:l},x.createElement(yl.Provider,{children:n,value:v}))}function Hw(t){let{children:e,location:n}=t;return xw(Ic(e),n)}new Promise(()=>{});function Ic(t,e){e===void 0&&(e=[]);let n=[];return x.Children.forEach(t,(r,i)=>{if(!x.isValidElement(r))return;let s=[...e,i];if(r.type===x.Fragment){n.push.apply(n,Ic(r.props.children,s));return}r.type!==an&&Le(!1),!r.props.index||!r.props.children||Le(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ic(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kc(){return kc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kc.apply(this,arguments)}function $w(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Bw(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function zw(t,e){return t.button===0&&(!e||e==="_self")&&!Bw(t)}const Vw=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],Yw="startTransition",ip=BE[Yw];function qw(t){let{basename:e,children:n,future:r,window:i}=t,s=x.useRef();s.current==null&&(s.current=nw({window:i,v5Compat:!0}));let o=s.current,[a,l]=x.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},h=x.useCallback(c=>{u&&ip?ip(()=>l(c)):l(c)},[l,u]);return x.useLayoutEffect(()=>o.listen(h),[o,h]),x.createElement(Kw,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o})}const Qw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Xw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jw=x.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:h}=e,c=$w(e,Vw),{basename:d}=x.useContext(Oi),_,v=!1;if(typeof u=="string"&&Xw.test(u)&&(_=u,Qw))try{let p=new URL(window.location.href),E=u.startsWith("//")?new URL(p.protocol+u):new URL(u),k=Hd(E.pathname,d);E.origin===p.origin&&k!=null?u=k+E.search+E.hash:v=!0}catch{}let C=Aw(u,{relative:i}),R=Zw(u,{replace:o,state:a,target:l,preventScrollReset:h,relative:i});function f(p){r&&r(p),p.defaultPrevented||R(p)}return x.createElement("a",kc({},c,{href:_||C,onClick:v||s?r:f,ref:n,target:l}))});var sp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(sp||(sp={}));var op;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(op||(op={}));function Zw(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o}=e===void 0?{}:e,a=rn(),l=vl(),u=Wg(t,{relative:o});return x.useCallback(h=>{if(zw(h,n)){h.preventDefault();let c=r!==void 0?r:Na(l)===Na(u);a(t,{replace:c,state:i,preventScrollReset:s,relative:o})}},[l,a,u,r,i,n,t,s,o])}function eR(t,e){let{capture:n}=e||{};x.useEffect(()=>{let r=n!=null?{capture:n}:void 0;return window.addEventListener("beforeunload",t,r),()=>{window.removeEventListener("beforeunload",t,r)}},[t,n])}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G=function(t,e){if(!t)throw Di(e)},Di=function(t){return new Error("Firebase Database ("+Hg.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},tR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Bd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,h=s>>2,c=(s&3)<<4|a>>4;let d=(a&15)<<2|u>>6,_=u&63;l||(_=64,o||(d=64)),r.push(n[h],n[c],n[d],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($g(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):tR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const c=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||c==null)throw new nR;const d=s<<2|a>>4;if(r.push(d),u!==64){const _=a<<4&240|u>>2;if(r.push(_),c!==64){const v=u<<6&192|c;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class nR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Bg=function(t){const e=$g(t);return Bd.encodeByteArray(e,!0)},La=function(t){return Bg(t).replace(/\./g,"")},Oa=function(t){try{return Bd.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(t){return zg(void 0,t)}function zg(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!iR(n)||(t[n]=zg(t[n],e[n]));return t}function iR(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=()=>sR().__FIREBASE_DEFAULTS__,aR=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Oa(t[1]);return e&&JSON.parse(e)},zd=()=>{try{return oR()||aR()||lR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Vg=t=>{var e,n;return(n=(e=zd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},uR=t=>{const e=Vg(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Yg=()=>{var t;return(t=zd())===null||t===void 0?void 0:t.config},qg=t=>{var e;return(e=zd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[La(JSON.stringify(n)),La(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Vd(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(et())}function dR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Qg(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fR(){const t=et();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Xg(){return Hg.NODE_ADMIN===!0}function hR(){try{return typeof indexedDB=="object"}catch{return!1}}function pR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR="FirebaseError";class dr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=mR,Object.setPrototypeOf(this,dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,no.prototype.create)}}class no{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?_R(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new dr(i,a,r)}}function _R(t,e){return t.replace(gR,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const gR=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(t){return JSON.parse(t)}function De(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Fs(Oa(s[0])||""),n=Fs(Oa(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},yR=function(t){const e=Jg(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},vR=function(t){const e=Jg(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function wi(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Tc(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Da(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function ba(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(ap(s)&&ap(o)){if(!ba(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ap(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let c=0;c<16;c++)r[c]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let c=0;c<16;c++)r[c]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let c=16;c<80;c++){const d=r[c-3]^r[c-8]^r[c-14]^r[c-16];r[c]=(d<<1|d>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],u,h;for(let c=0;c<80;c++){c<40?c<20?(u=a^s&(o^a),h=1518500249):(u=s^o^a,h=1859775393):c<60?(u=s&o|a&(s|o),h=2400959708):(u=s^o^a,h=3395469782);const d=(i<<5|i>>>27)+u+l+h+r[c]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=d}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function CR(t,e){const n=new wR(t,e);return n.subscribe.bind(n)}class wR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");RR(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=pu),i.error===void 0&&(i.error=pu),i.complete===void 0&&(i.complete=pu);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function RR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function pu(){}function Yd(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,G(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Cl=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(t){return t&&t._delegate?t._delegate:t}class xr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new El;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TR(e))try{this.getOrInitializeService({instanceIdentifier:pr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=pr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pr){return this.instances.has(e)}getOptions(e=pr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:kR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=pr){return this.component?this.component.multipleInstances?e:pr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kR(t){return t===pr?void 0:t}function TR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new IR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const NR={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},xR=pe.INFO,PR={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},LR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=PR[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qd{constructor(e){this.name=e,this._logLevel=xR,this._logHandler=LR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}const OR=(t,e)=>e.some(n=>t instanceof n);let lp,up;function DR(){return lp||(lp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bR(){return up||(up=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Zg=new WeakMap,Ac=new WeakMap,ey=new WeakMap,mu=new WeakMap,Qd=new WeakMap;function MR(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Xn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Zg.set(n,t)}).catch(()=>{}),Qd.set(e,t),e}function jR(t){if(Ac.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Ac.set(t,e)}let Nc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ac.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ey.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function UR(t){Nc=t(Nc)}function FR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(_u(this),e,...n);return ey.set(r,e.sort?e.sort():[e]),Xn(r)}:bR().includes(t)?function(...e){return t.apply(_u(this),e),Xn(Zg.get(this))}:function(...e){return Xn(t.apply(_u(this),e))}}function WR(t){return typeof t=="function"?FR(t):(t instanceof IDBTransaction&&jR(t),OR(t,DR())?new Proxy(t,Nc):t)}function Xn(t){if(t instanceof IDBRequest)return MR(t);if(mu.has(t))return mu.get(t);const e=WR(t);return e!==t&&(mu.set(t,e),Qd.set(e,t)),e}const _u=t=>Qd.get(t);function GR(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Xn(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Xn(o.result),l.oldVersion,l.newVersion,Xn(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const KR=["get","getKey","getAll","getAllKeys","count"],HR=["put","add","delete","clear"],gu=new Map;function cp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gu.get(e))return gu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=HR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||KR.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return gu.set(e,s),s}UR(t=>({...t,get:(e,n,r)=>cp(e,n)||t.get(e,n,r),has:(e,n)=>!!cp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(BR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function BR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xc="@firebase/app",dp="0.9.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr=new qd("@firebase/app"),zR="@firebase/app-compat",VR="@firebase/analytics-compat",YR="@firebase/analytics",qR="@firebase/app-check-compat",QR="@firebase/app-check",XR="@firebase/auth",JR="@firebase/auth-compat",ZR="@firebase/database",eS="@firebase/database-compat",tS="@firebase/functions",nS="@firebase/functions-compat",rS="@firebase/installations",iS="@firebase/installations-compat",sS="@firebase/messaging",oS="@firebase/messaging-compat",aS="@firebase/performance",lS="@firebase/performance-compat",uS="@firebase/remote-config",cS="@firebase/remote-config-compat",dS="@firebase/storage",fS="@firebase/storage-compat",hS="@firebase/firestore",pS="@firebase/firestore-compat",mS="firebase",_S="10.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc="[DEFAULT]",gS={[xc]:"fire-core",[zR]:"fire-core-compat",[YR]:"fire-analytics",[VR]:"fire-analytics-compat",[QR]:"fire-app-check",[qR]:"fire-app-check-compat",[XR]:"fire-auth",[JR]:"fire-auth-compat",[ZR]:"fire-rtdb",[eS]:"fire-rtdb-compat",[tS]:"fire-fn",[nS]:"fire-fn-compat",[rS]:"fire-iid",[iS]:"fire-iid-compat",[sS]:"fire-fcm",[oS]:"fire-fcm-compat",[aS]:"fire-perf",[lS]:"fire-perf-compat",[uS]:"fire-rc",[cS]:"fire-rc-compat",[dS]:"fire-gcs",[fS]:"fire-gcs-compat",[hS]:"fire-fst",[pS]:"fire-fst-compat","fire-js":"fire-js",[mS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma=new Map,Lc=new Map;function yS(t,e){try{t.container.addComponent(e)}catch(n){Pr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ri(t){const e=t.name;if(Lc.has(e))return Pr.debug(`There were multiple attempts to register component ${e}.`),!1;Lc.set(e,t);for(const n of Ma.values())yS(n,t);return!0}function Xd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Jn=new no("app","Firebase",vS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Jn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi=_S;function ty(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Pc,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Jn.create("bad-app-name",{appName:String(i)});if(n||(n=Yg()),!n)throw Jn.create("no-options");const s=Ma.get(i);if(s){if(ba(n,s.options)&&ba(r,s.config))return s;throw Jn.create("duplicate-app",{appName:i})}const o=new AR(i);for(const l of Lc.values())o.addComponent(l);const a=new ES(n,r,o);return Ma.set(i,a),a}function ny(t=Pc){const e=Ma.get(t);if(!e&&t===Pc&&Yg())return ty();if(!e)throw Jn.create("no-app",{appName:t});return e}function Zn(t,e,n){var r;let i=(r=gS[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pr.warn(a.join(" "));return}Ri(new xr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="firebase-heartbeat-database",wS=1,Ws="firebase-heartbeat-store";let yu=null;function ry(){return yu||(yu=GR(CS,wS,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ws)}}}).catch(t=>{throw Jn.create("idb-open",{originalErrorMessage:t.message})})),yu}async function RS(t){try{return await(await ry()).transaction(Ws).objectStore(Ws).get(iy(t))}catch(e){if(e instanceof dr)Pr.warn(e.message);else{const n=Jn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Pr.warn(n.message)}}}async function fp(t,e){try{const r=(await ry()).transaction(Ws,"readwrite");await r.objectStore(Ws).put(e,iy(t)),await r.done}catch(n){if(n instanceof dr)Pr.warn(n.message);else{const r=Jn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Pr.warn(r.message)}}}function iy(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS=1024,IS=30*24*60*60*1e3;class kS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new AS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=hp();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=IS}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=hp(),{heartbeatsToSend:n,unsentEntries:r}=TS(this._heartbeatsCache.heartbeats),i=La(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function hp(){return new Date().toISOString().substring(0,10)}function TS(t,e=SS){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),pp(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),pp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class AS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hR()?pR().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await RS(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return fp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return fp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function pp(t){return La(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(t){Ri(new xr("platform-logger",e=>new $R(e),"PRIVATE")),Ri(new xr("heartbeat",e=>new kS(e),"PRIVATE")),Zn(xc,dp,t),Zn(xc,dp,"esm2017"),Zn("fire-js","")}NS("");var xS="firebase",PS="10.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zn(xS,PS,"app");const mp="@firebase/database",_p="1.0.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sy="";function LS(t){sy=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),De(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Fs(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return In(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new OS(e)}}catch{}return new DS},vr=oy("localStorage"),Oc=oy("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci=new qd("@firebase/database"),bS=function(){let t=1;return function(){return t++}}(),ay=function(t){const e=SR(t),n=new ER;n.update(e);const r=n.digest();return Bd.encodeByteArray(r)},ro=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=ro.apply(null,r):typeof r=="object"?e+=De(r):e+=r,e+=" "}return e};let Rr=null,gp=!0;const MS=function(t,e){G(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(ci.logLevel=pe.VERBOSE,Rr=ci.log.bind(ci),e&&Oc.set("logging_enabled",!0)):typeof t=="function"?Rr=t:(Rr=null,Oc.remove("logging_enabled"))},Je=function(...t){if(gp===!0&&(gp=!1,Rr===null&&Oc.get("logging_enabled")===!0&&MS(!0)),Rr){const e=ro.apply(null,t);Rr(e)}},io=function(t){return function(...e){Je(t,...e)}},Dc=function(...t){const e="FIREBASE INTERNAL ERROR: "+ro(...t);ci.error(e)},Cn=function(...t){const e=`FIREBASE FATAL ERROR: ${ro(...t)}`;throw ci.error(e),new Error(e)},gt=function(...t){const e="FIREBASE WARNING: "+ro(...t);ci.warn(e)},jS=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&gt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ly=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},US=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Si="[MIN_NAME]",Lr="[MAX_NAME]",ji=function(t,e){if(t===e)return 0;if(t===Si||e===Lr)return-1;if(e===Si||t===Lr)return 1;{const n=yp(t),r=yp(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},FS=function(t,e){return t===e?0:t<e?-1:1},Ji=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+De(e))},Jd=function(t){if(typeof t!="object"||t===null)return De(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=De(e[r]),n+=":",n+=Jd(t[e[r]]);return n+="}",n},uy=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function yt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const cy=function(t){G(!ly(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(l=n;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const h=u.join("");let c="";for(l=0;l<64;l+=8){let d=parseInt(h.substr(l,8),2).toString(16);d.length===1&&(d="0"+d),c=c+d}return c.toLowerCase()},WS=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},GS=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function KS(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const HS=new RegExp("^-?(0*)\\d{1,10}$"),$S=-2147483648,BS=2147483647,yp=function(t){if(HS.test(t)){const e=Number(t);if(e>=$S&&e<=BS)return e}return null},Ui=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw gt("Exception was thrown by user callback.",n),e},Math.floor(0))}},zS=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},_s=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){gt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Je("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',gt(e)}}class di{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}di.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd="5",dy="v",fy="s",hy="r",py="f",my=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,_y="ls",gy="p",bc="ac",yy="websocket",vy="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=vr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&vr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function qS(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Cy(t,e,n){G(typeof e=="string","typeof type must == string"),G(typeof n=="object","typeof params must == object");let r;if(e===yy)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===vy)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);qS(t)&&(n.ns=t.namespace);const i=[];return yt(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(){this.counters_={}}incrementCounter(e,n=1){In(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return rR(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu={},Eu={};function ef(t){const e=t.toString();return vu[e]||(vu[e]=new QS),vu[e]}function XS(t,e){const n=t.toString();return Eu[n]||(Eu[n]=e()),Eu[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ui(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vp="start",ZS="close",eI="pLPCommand",tI="pRTLPCB",wy="id",Ry="pw",Sy="ser",nI="cb",rI="seg",iI="ts",sI="d",oI="dframe",Iy=1870,ky=30,aI=Iy-ky,lI=25e3,uI=3e4;class ni{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=io(e),this.stats_=ef(n),this.urlFn=l=>(this.appCheckToken&&(l[bc]=this.appCheckToken),Cy(n,vy,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new JS(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(uI)),US(()=>{if(this.isClosed_)return;this.scriptTagHolder=new tf((...s)=>{const[o,a,l,u,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===vp)this.id=a,this.password=l;else if(o===ZS)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[vp]="t",r[Sy]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[nI]=this.scriptTagHolder.uniqueCallbackIdentifier),r[dy]=Zd,this.transportSessionId&&(r[fy]=this.transportSessionId),this.lastSessionId&&(r[_y]=this.lastSessionId),this.applicationId&&(r[gy]=this.applicationId),this.appCheckToken&&(r[bc]=this.appCheckToken),typeof location<"u"&&location.hostname&&my.test(location.hostname)&&(r[hy]=py);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ni.forceAllow_=!0}static forceDisallow(){ni.forceDisallow_=!0}static isAvailable(){return ni.forceAllow_?!0:!ni.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!WS()&&!GS()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=De(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Bg(n),i=uy(r,aI);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[oI]="t",r[wy]=e,r[Ry]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=De(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class tf{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=bS(),window[eI+this.uniqueCallbackIdentifier]=e,window[tI+this.uniqueCallbackIdentifier]=n,this.myIFrame=tf.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Je("frame writing exception"),a.stack&&Je(a.stack),Je(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Je("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[wy]=this.myID,e[Ry]=this.myPW,e[Sy]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+ky+r.length<=Iy;){const o=this.pendingSegs.shift();r=r+"&"+rI+i+"="+o.seg+"&"+iI+i+"="+o.ts+"&"+sI+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(lI)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Je("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=16384,dI=45e3;let ja=null;typeof MozWebSocket<"u"?ja=MozWebSocket:typeof WebSocket<"u"&&(ja=WebSocket);class Wt{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=io(this.connId),this.stats_=ef(n),this.connURL=Wt.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[dy]=Zd,typeof location<"u"&&location.hostname&&my.test(location.hostname)&&(o[hy]=py),n&&(o[fy]=n),r&&(o[_y]=r),i&&(o[bc]=i),s&&(o[gy]=s),Cy(e,yy,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,vr.set("previous_websocket_failure",!0);try{let r;Xg(),this.mySock=new ja(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Wt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&ja!==null&&!Wt.forceDisallow_}static previouslyFailed(){return vr.isInMemoryStorage||vr.get("previous_websocket_failure")===!0}markConnectionHealthy(){vr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Fs(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(G(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=De(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=uy(n,cI);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(dI))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Wt.responsesRequiredToBeHealthy=2;Wt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ni,Wt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Wt&&Wt.isAvailable();let r=n&&!Wt.previouslyFailed();if(e.webSocketOnly&&(n||gt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Wt];else{const i=this.transports_=[];for(const s of Gs.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Gs.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Gs.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI=6e4,hI=5e3,pI=10*1024,mI=100*1024,Cu="t",Ep="d",_I="s",Cp="r",gI="e",wp="o",Rp="a",Sp="n",Ip="p",yI="h";class vI{constructor(e,n,r,i,s,o,a,l,u,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=io("c:"+this.id+":"),this.transportManager_=new Gs(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=_s(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>mI?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>pI?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Cu in e){const n=e[Cu];n===Rp?this.upgradeIfSecondaryHealthy_():n===Cp?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===wp&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Ji("t",e),r=Ji("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Ip,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Rp,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Sp,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Ji("t",e),r=Ji("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Ji(Cu,e);if(Ep in e){const r=e[Ep];if(n===yI){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===Sp){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===_I?this.onConnectionShutdown_(r):n===Cp?this.onReset_(r):n===gI?Dc("Server Error: "+r):n===wp?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Dc("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Zd!==r&&gt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),_s(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(fI))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):_s(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(hI))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Ip,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(vr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e){this.allowedEvents_=e,this.listeners_={},G(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){G(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua extends Ay{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Vd()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ua}getInitialEvent(e){return G(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp=32,Tp=768;class me{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function le(){return new me("")}function ne(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ir(t){return t.pieces_.length-t.pieceNum_}function ge(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new me(t.pieces_,e)}function Ny(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function EI(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function xy(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Py(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new me(e,0)}function be(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof me)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new me(n,0)}function ie(t){return t.pieceNum_>=t.pieces_.length}function it(t,e){const n=ne(t),r=ne(e);if(n===null)return e;if(n===r)return it(ge(t),ge(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function nf(t,e){if(ir(t)!==ir(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Kt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(ir(t)>ir(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class CI{constructor(e,n){this.errorPrefix_=n,this.parts_=xy(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Cl(this.parts_[r]);Ly(this)}}function wI(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Cl(e),Ly(t)}function RI(t){const e=t.parts_.pop();t.byteLength_-=Cl(e),t.parts_.length>0&&(t.byteLength_-=1)}function Ly(t){if(t.byteLength_>Tp)throw new Error(t.errorPrefix_+"has a key path longer than "+Tp+" bytes ("+t.byteLength_+").");if(t.parts_.length>kp)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+kp+") or object contains a cycle "+mr(t))}function mr(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf extends Ay{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new rf}getInitialEvent(e){return G(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi=1e3,SI=60*5*1e3,Ap=30*1e3,II=1.3,kI=3e4,TI="server_kill",Np=3;class _n extends Ty{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=_n.nextPersistentConnectionId_++,this.log_=io("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Zi,this.maxReconnectDelay_=SI,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Xg())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");rf.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Ua.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(De(s)),G(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new El,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),G(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),G(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,u=a.s;_n.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&In(e,"w")){const r=wi(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();gt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||vR(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Ap)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=yR(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),G(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+De(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Dc("Unrecognized action received from server: "+De(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){G(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Zi,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Zi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>kI&&(this.reconnectDelay_=Zi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*II)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+_n.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},u=function(c){G(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(c)};this.realtime_={close:l,sendRequest:u};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[c,d]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?Je("getToken() completed but was canceled"):(Je("getToken() completed. Creating connection."),this.authToken_=c&&c.accessToken,this.appCheckToken_=d&&d.token,a=new vI(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,_=>{gt(_+" ("+this.repoInfo_.toString()+")"),this.interrupt(TI)},s))}catch(c){this.log_("Failed to get token: "+c),o||(this.repoInfo_.nodeAdmin&&gt(c),l())}}}interrupt(e){Je("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Je("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Tc(this.interruptReasons_)&&(this.reconnectDelay_=Zi,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>Jd(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new me(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Je("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Np&&(this.reconnectDelay_=Ap,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Je("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Np&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+sy.replace(/\./g,"-")]=1,Vd()?e["framework.cordova"]=1:Qg()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ua.getInstance().currentlyOnline();return Tc(this.interruptReasons_)&&e}}_n.nextPersistentConnectionId_=0;_n.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new re(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new re(Si,e),i=new re(Si,n);return this.compare(r,i)!==0}minPost(){return re.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mo;class Oy extends wl{static get __EMPTY_NODE(){return Mo}static set __EMPTY_NODE(e){Mo=e}compare(e,n){return ji(e.name,n.name)}isDefinedOn(e){throw Di("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return re.MIN}maxPost(){return new re(Lr,Mo)}makePost(e,n){return G(typeof e=="string","KeyIndex indexValue must always be a string."),new re(e,Mo)}toString(){return".key"}}const fi=new Oy;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class We{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??We.RED,this.left=i??ht.EMPTY_NODE,this.right=s??ht.EMPTY_NODE}copy(e,n,r,i,s){return new We(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return ht.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return ht.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,We.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,We.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}We.RED=!0;We.BLACK=!1;class AI{copy(e,n,r,i,s){return this}insert(e,n,r){return new We(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ht{constructor(e,n=ht.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new ht(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,We.BLACK,null,null))}remove(e){return new ht(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,We.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new jo(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new jo(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new jo(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new jo(this.root_,null,this.comparator_,!0,e)}}ht.EMPTY_NODE=new AI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(t,e){return ji(t.name,e.name)}function sf(t,e){return ji(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mc;function xI(t){Mc=t}const Dy=function(t){return typeof t=="number"?"number:"+cy(t):"string:"+t},by=function(t){if(t.isLeafNode()){const e=t.val();G(typeof e=="string"||typeof e=="number"||typeof e=="object"&&In(e,".sv"),"Priority must be a string or number.")}else G(t===Mc||t.isEmpty(),"priority of unexpected type.");G(t===Mc||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xp;class Ue{constructor(e,n=Ue.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,G(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),by(this.priorityNode_)}static set __childrenNodeConstructor(e){xp=e}static get __childrenNodeConstructor(){return xp}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Ue(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Ue.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ie(e)?this:ne(e)===".priority"?this.priorityNode_:Ue.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Ue.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=ne(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(G(r!==".priority"||ir(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Ue.__childrenNodeConstructor.EMPTY_NODE.updateChild(ge(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Dy(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=cy(this.value_):e+=this.value_,this.lazyHash_=ay(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Ue.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ue.__childrenNodeConstructor?-1:(G(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Ue.VALUE_TYPE_ORDER.indexOf(n),s=Ue.VALUE_TYPE_ORDER.indexOf(r);return G(i>=0,"Unknown leaf type: "+n),G(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Ue.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let My,jy;function PI(t){My=t}function LI(t){jy=t}class OI extends wl{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?ji(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return re.MIN}maxPost(){return new re(Lr,new Ue("[PRIORITY-POST]",jy))}makePost(e,n){const r=My(e);return new re(n,new Ue("[PRIORITY-POST]",r))}toString(){return".priority"}}const Ae=new OI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI=Math.log(2);class bI{constructor(e){const n=s=>parseInt(Math.log(s)/DI,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Fa=function(t,e,n,r){t.sort(e);const i=function(l,u){const h=u-l;let c,d;if(h===0)return null;if(h===1)return c=t[l],d=n?n(c):c,new We(d,c.node,We.BLACK,null,null);{const _=parseInt(h/2,10)+l,v=i(l,_),C=i(_+1,u);return c=t[_],d=n?n(c):c,new We(d,c.node,We.BLACK,v,C)}},s=function(l){let u=null,h=null,c=t.length;const d=function(v,C){const R=c-v,f=c;c-=v;const p=i(R+1,f),E=t[R],k=n?n(E):E;_(new We(k,E.node,C,null,p))},_=function(v){u?(u.left=v,u=v):(h=v,u=v)};for(let v=0;v<l.count;++v){const C=l.nextBitIsOne(),R=Math.pow(2,l.count-(v+1));C?d(R,We.BLACK):(d(R,We.BLACK),d(R,We.RED))}return h},o=new bI(t.length),a=s(o);return new ht(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wu;const Hr={};class fn{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return G(Hr&&Ae,"ChildrenNode.ts has not been loaded"),wu=wu||new fn({".priority":Hr},{".priority":Ae}),wu}get(e){const n=wi(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof ht?n:null}hasIndex(e){return In(this.indexSet_,e.toString())}addIndex(e,n){G(e!==fi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(re.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Fa(r,e.getCompare()):a=Hr;const l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;const h=Object.assign({},this.indexes_);return h[l]=a,new fn(h,u)}addToIndexes(e,n){const r=Da(this.indexes_,(i,s)=>{const o=wi(this.indexSet_,s);if(G(o,"Missing index implementation for "+s),i===Hr)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(re.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),Fa(a,o.getCompare())}else return Hr;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new re(e.name,a))),l.insert(e,e.node)}});return new fn(r,this.indexSet_)}removeFromIndexes(e,n){const r=Da(this.indexes_,i=>{if(i===Hr)return i;{const s=n.get(e.name);return s?i.remove(new re(e.name,s)):i}});return new fn(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let es;class q{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&by(this.priorityNode_),this.children_.isEmpty()&&G(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return es||(es=new q(new ht(sf),null,fn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||es}updatePriority(e){return this.children_.isEmpty()?this:new q(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?es:n}}getChild(e){const n=ne(e);return n===null?this:this.getImmediateChild(n).getChild(ge(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(G(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new re(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?es:this.priorityNode_;return new q(i,o,s)}}updateChild(e,n){const r=ne(e);if(r===null)return n;{G(ne(e)!==".priority"||ir(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(ge(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(Ae,(o,a)=>{n[o]=a.val(e),r++,s&&q.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Dy(this.getPriority().val())+":"),this.forEachChild(Ae,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":ay(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new re(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new re(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new re(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,re.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,re.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===so?-1:0}withIndex(e){if(e===fi||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new q(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===fi||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Ae),i=n.getIterator(Ae);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===fi?null:this.indexMap_.get(e.toString())}}q.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class MI extends q{constructor(){super(new ht(sf),q.EMPTY_NODE,fn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return q.EMPTY_NODE}isEmpty(){return!1}}const so=new MI;Object.defineProperties(re,{MIN:{value:new re(Si,q.EMPTY_NODE)},MAX:{value:new re(Lr,so)}});Oy.__EMPTY_NODE=q.EMPTY_NODE;Ue.__childrenNodeConstructor=q;xI(so);LI(so);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI=!0;function Ge(t,e=null){if(t===null)return q.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),G(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Ue(n,Ge(e))}if(!(t instanceof Array)&&jI){const n=[];let r=!1;if(yt(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=Ge(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new re(o,l)))}}),n.length===0)return q.EMPTY_NODE;const s=Fa(n,NI,o=>o.name,sf);if(r){const o=Fa(n,Ae.getCompare());return new q(s,Ge(e),new fn({".priority":o},{".priority":Ae}))}else return new q(s,Ge(e),fn.Default)}else{let n=q.EMPTY_NODE;return yt(t,(r,i)=>{if(In(t,r)&&r.substring(0,1)!=="."){const s=Ge(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Ge(e))}}PI(Ge);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI extends wl{constructor(e){super(),this.indexPath_=e,G(!ie(e)&&ne(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?ji(e.name,n.name):s}makePost(e,n){const r=Ge(e),i=q.EMPTY_NODE.updateChild(this.indexPath_,r);return new re(n,i)}maxPost(){const e=q.EMPTY_NODE.updateChild(this.indexPath_,so);return new re(Lr,e)}toString(){return xy(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI extends wl{compare(e,n){const r=e.node.compareTo(n.node);return r===0?ji(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return re.MIN}maxPost(){return re.MAX}makePost(e,n){const r=Ge(e);return new re(n,r)}toString(){return".value"}}const WI=new FI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy(t){return{type:"value",snapshotNode:t}}function Ii(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Ks(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Hs(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function GI(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){G(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Ks(n,a)):G(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Ii(n,r)):o.trackChildChange(Hs(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Ae,(i,s)=>{n.hasChild(i)||r.trackChildChange(Ks(i,s))}),n.isLeafNode()||n.forEachChild(Ae,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Hs(i,s,o))}else r.trackChildChange(Ii(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?q.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e){this.indexedFilter_=new of(e.getIndex()),this.index_=e.getIndex(),this.startPost_=$s.getStartPost_(e),this.endPost_=$s.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new re(n,r))||(r=q.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=q.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(q.EMPTY_NODE);const s=this;return n.forEachChild(Ae,(o,a)=>{s.matches(new re(o,a))||(i=i.updateImmediateChild(o,q.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new $s(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new re(n,r))||(r=q.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=q.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=q.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(q.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,q.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const c=this.index_.getCompare();o=(d,_)=>c(_,d)}else o=this.index_.getCompare();const a=e;G(a.numChildren()===this.limit_,"");const l=new re(n,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(a.hasChild(n)){const c=a.getImmediateChild(n);let d=i.getChildAfterChild(this.index_,u,this.reverse_);for(;d!=null&&(d.name===n||a.hasChild(d.name));)d=i.getChildAfterChild(this.index_,d,this.reverse_);const _=d==null?1:o(d,l);if(h&&!r.isEmpty()&&_>=0)return s!=null&&s.trackChildChange(Hs(n,r,c)),a.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(Ks(n,c));const C=a.updateImmediateChild(n,q.EMPTY_NODE);return d!=null&&this.rangedFilter_.matches(d)?(s!=null&&s.trackChildChange(Ii(d.name,d.node)),C.updateImmediateChild(d.name,d.node)):C}}else return r.isEmpty()?e:h&&o(u,l)>=0?(s!=null&&(s.trackChildChange(Ks(u.name,u.node)),s.trackChildChange(Ii(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(u.name,q.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ae}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return G(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return G(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Si}hasEnd(){return this.endSet_}getIndexEndValue(){return G(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return G(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Lr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return G(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ae}copy(){const e=new af;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function HI(t){return t.loadsAllData()?new of(t.getIndex()):t.hasLimit()?new KI(t):new $s(t)}function Pp(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Ae?n="$priority":t.index_===WI?n="$value":t.index_===fi?n="$key":(G(t.index_ instanceof UI,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=De(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=De(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+De(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=De(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+De(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Lp(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Ae&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa extends Ty{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=io("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(G(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Wa.getListenId_(e,r),a={};this.listens_[o]=a;const l=Pp(e._queryParams);this.restRequest_(s+".json",l,(u,h)=>{let c=h;if(u===404&&(c=null,u=null),u===null&&this.onDataUpdate_(s,c,!1,r),wi(this.listens_,o)===a){let d;u?u===401?d="permission_denied":d="rest_error:"+u:d="ok",i(d,null)}})}unlisten(e,n){const r=Wa.getListenId_(e,n);delete this.listens_[r]}get(e){const n=Pp(e._queryParams),r=e._path.toString(),i=new El;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+bi(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Fs(a.responseText)}catch{gt("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&gt("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(){this.rootNode_=q.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ga(){return{value:null,children:new Map}}function Fy(t,e,n){if(ie(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=ne(e);t.children.has(r)||t.children.set(r,Ga());const i=t.children.get(r);e=ge(e),Fy(i,e,n)}}function jc(t,e,n){t.value!==null?n(e,t.value):BI(t,(r,i)=>{const s=new me(e.toString()+"/"+r);jc(i,s,n)})}function BI(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&yt(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op=10*1e3,VI=30*1e3,YI=5*60*1e3;class qI{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new zI(e);const r=Op+(VI-Op)*Math.random();_s(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;yt(e,(i,s)=>{s>0&&In(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),_s(this.reportStats_.bind(this),Math.floor(Math.random()*2*YI))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Ht||(Ht={}));function Wy(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function lf(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function uf(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Ht.ACK_USER_WRITE,this.source=Wy()}operationForChild(e){if(ie(this.path)){if(this.affectedTree.value!=null)return G(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new me(e));return new Ka(le(),n,this.revert)}}else return G(ne(this.path)===e,"operationForChild called for unrelated child."),new Ka(ge(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n){this.source=e,this.path=n,this.type=Ht.LISTEN_COMPLETE}operationForChild(e){return ie(this.path)?new Bs(this.source,le()):new Bs(this.source,ge(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Ht.OVERWRITE}operationForChild(e){return ie(this.path)?new Or(this.source,le(),this.snap.getImmediateChild(e)):new Or(this.source,ge(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Ht.MERGE}operationForChild(e){if(ie(this.path)){const n=this.children.subtree(new me(e));return n.isEmpty()?null:n.value?new Or(this.source,le(),n.value):new zs(this.source,le(),n)}else return G(ne(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new zs(this.source,ge(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ie(e))return this.isFullyInitialized()&&!this.filtered_;const n=ne(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function XI(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(GI(o.childName,o.snapshotNode))}),ts(t,i,"child_removed",e,r,n),ts(t,i,"child_added",e,r,n),ts(t,i,"child_moved",s,r,n),ts(t,i,"child_changed",e,r,n),ts(t,i,"value",e,r,n),i}function ts(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>ZI(t,a,l)),o.forEach(a=>{const l=JI(t,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function JI(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function ZI(t,e,n){if(e.childName==null||n.childName==null)throw Di("Should only compare child_ events.");const r=new re(e.childName,e.snapshotNode),i=new re(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(t,e){return{eventCache:t,serverCache:e}}function gs(t,e,n,r){return Rl(new sr(e,n,r),t.serverCache)}function Gy(t,e,n,r){return Rl(t.eventCache,new sr(e,n,r))}function Ha(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Dr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ru;const e1=()=>(Ru||(Ru=new ht(FS)),Ru);class Ee{constructor(e,n=e1()){this.value=e,this.children=n}static fromObject(e){let n=new Ee(null);return yt(e,(r,i)=>{n=n.set(new me(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:le(),value:this.value};if(ie(e))return null;{const r=ne(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(ge(e),n);return s!=null?{path:be(new me(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ie(e))return this;{const n=ne(e),r=this.children.get(n);return r!==null?r.subtree(ge(e)):new Ee(null)}}set(e,n){if(ie(e))return new Ee(n,this.children);{const r=ne(e),s=(this.children.get(r)||new Ee(null)).set(ge(e),n),o=this.children.insert(r,s);return new Ee(this.value,o)}}remove(e){if(ie(e))return this.children.isEmpty()?new Ee(null):new Ee(null,this.children);{const n=ne(e),r=this.children.get(n);if(r){const i=r.remove(ge(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new Ee(null):new Ee(this.value,s)}else return this}}get(e){if(ie(e))return this.value;{const n=ne(e),r=this.children.get(n);return r?r.get(ge(e)):null}}setTree(e,n){if(ie(e))return n;{const r=ne(e),s=(this.children.get(r)||new Ee(null)).setTree(ge(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new Ee(this.value,o)}}fold(e){return this.fold_(le(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(be(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,le(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(ie(e))return null;{const s=ne(e),o=this.children.get(s);return o?o.findOnPath_(ge(e),be(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,le(),n)}foreachOnPath_(e,n,r){if(ie(e))return this;{this.value&&r(n,this.value);const i=ne(e),s=this.children.get(i);return s?s.foreachOnPath_(ge(e),be(n,i),r):new Ee(null)}}foreach(e){this.foreach_(le(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(be(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.writeTree_=e}static empty(){return new zt(new Ee(null))}}function ys(t,e,n){if(ie(e))return new zt(new Ee(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=it(i,e);return s=s.updateChild(o,n),new zt(t.writeTree_.set(i,s))}else{const i=new Ee(n),s=t.writeTree_.setTree(e,i);return new zt(s)}}}function Dp(t,e,n){let r=t;return yt(n,(i,s)=>{r=ys(r,be(e,i),s)}),r}function bp(t,e){if(ie(e))return zt.empty();{const n=t.writeTree_.setTree(e,new Ee(null));return new zt(n)}}function Uc(t,e){return Wr(t,e)!=null}function Wr(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(it(n.path,e)):null}function Mp(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ae,(r,i)=>{e.push(new re(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new re(r,i.value))}),e}function er(t,e){if(ie(e))return t;{const n=Wr(t,e);return n!=null?new zt(new Ee(n)):new zt(t.writeTree_.subtree(e))}}function Fc(t){return t.writeTree_.isEmpty()}function ki(t,e){return Ky(le(),t.writeTree_,e)}function Ky(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(G(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=Ky(be(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(be(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(t,e){return zy(e,t)}function t1(t,e,n,r,i){G(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=ys(t.visibleWrites,e,n)),t.lastWriteId=r}function n1(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function r1(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);G(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&i1(a,r.path)?i=!1:Kt(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return s1(t),!0;if(r.snap)t.visibleWrites=bp(t.visibleWrites,r.path);else{const a=r.children;yt(a,l=>{t.visibleWrites=bp(t.visibleWrites,be(r.path,l))})}return!0}else return!1}function i1(t,e){if(t.snap)return Kt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Kt(be(t.path,n),e))return!0;return!1}function s1(t){t.visibleWrites=Hy(t.allWrites,o1,le()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function o1(t){return t.visible}function Hy(t,e,n){let r=zt.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)Kt(n,o)?(a=it(n,o),r=ys(r,a,s.snap)):Kt(o,n)&&(a=it(o,n),r=ys(r,le(),s.snap.getChild(a)));else if(s.children){if(Kt(n,o))a=it(n,o),r=Dp(r,a,s.children);else if(Kt(o,n))if(a=it(o,n),ie(a))r=Dp(r,le(),s.children);else{const l=wi(s.children,ne(a));if(l){const u=l.getChild(ge(a));r=ys(r,le(),u)}}}else throw Di("WriteRecord should have .snap or .children")}}return r}function $y(t,e,n,r,i){if(!r&&!i){const s=Wr(t.visibleWrites,e);if(s!=null)return s;{const o=er(t.visibleWrites,e);if(Fc(o))return n;if(n==null&&!Uc(o,le()))return null;{const a=n||q.EMPTY_NODE;return ki(o,a)}}}else{const s=er(t.visibleWrites,e);if(!i&&Fc(s))return n;if(!i&&n==null&&!Uc(s,le()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(Kt(u.path,e)||Kt(e,u.path))},a=Hy(t.allWrites,o,e),l=n||q.EMPTY_NODE;return ki(a,l)}}}function a1(t,e,n){let r=q.EMPTY_NODE;const i=Wr(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ae,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=er(t.visibleWrites,e);return n.forEachChild(Ae,(o,a)=>{const l=ki(er(s,new me(o)),a);r=r.updateImmediateChild(o,l)}),Mp(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=er(t.visibleWrites,e);return Mp(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function l1(t,e,n,r,i){G(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=be(e,n);if(Uc(t.visibleWrites,s))return null;{const o=er(t.visibleWrites,s);return Fc(o)?i.getChild(n):ki(o,i.getChild(n))}}function u1(t,e,n,r){const i=be(e,n),s=Wr(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=er(t.visibleWrites,i);return ki(o,r.getNode().getImmediateChild(n))}else return null}function c1(t,e){return Wr(t.visibleWrites,e)}function d1(t,e,n,r,i,s,o){let a;const l=er(t.visibleWrites,e),u=Wr(l,le());if(u!=null)a=u;else if(n!=null)a=ki(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],c=o.getCompare(),d=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let _=d.getNext();for(;_&&h.length<i;)c(_,r)!==0&&h.push(_),_=d.getNext();return h}else return[]}function f1(){return{visibleWrites:zt.empty(),allWrites:[],lastWriteId:-1}}function $a(t,e,n,r){return $y(t.writeTree,t.treePath,e,n,r)}function cf(t,e){return a1(t.writeTree,t.treePath,e)}function jp(t,e,n,r){return l1(t.writeTree,t.treePath,e,n,r)}function Ba(t,e){return c1(t.writeTree,be(t.treePath,e))}function h1(t,e,n,r,i,s){return d1(t.writeTree,t.treePath,e,n,r,i,s)}function df(t,e,n){return u1(t.writeTree,t.treePath,e,n)}function By(t,e){return zy(be(t.treePath,e),t.writeTree)}function zy(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;G(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),G(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Hs(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Ks(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Ii(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Hs(r,e.snapshotNode,i.oldSnap));else throw Di("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Vy=new m1;class ff{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new sr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return df(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Dr(this.viewCache_),s=h1(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(t){return{filter:t}}function g1(t,e){G(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),G(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function y1(t,e,n,r,i){const s=new p1;let o,a;if(n.type===Ht.OVERWRITE){const u=n;u.source.fromUser?o=Wc(t,e,u.path,u.snap,r,i,s):(G(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!ie(u.path),o=za(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===Ht.MERGE){const u=n;u.source.fromUser?o=E1(t,e,u.path,u.children,r,i,s):(G(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=Gc(t,e,u.path,u.children,r,i,a,s))}else if(n.type===Ht.ACK_USER_WRITE){const u=n;u.revert?o=R1(t,e,u.path,r,i,s):o=C1(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===Ht.LISTEN_COMPLETE)o=w1(t,e,n.path,r,s);else throw Di("Unknown operation type: "+n.type);const l=s.getChanges();return v1(e,o,l),{viewCache:o,changes:l}}function v1(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Ha(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(Uy(Ha(e)))}}function Yy(t,e,n,r,i,s){const o=e.eventCache;if(Ba(r,n)!=null)return e;{let a,l;if(ie(n))if(G(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Dr(e),h=u instanceof q?u:q.EMPTY_NODE,c=cf(r,h);a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const u=$a(r,Dr(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=ne(n);if(u===".priority"){G(ir(n)===1,"Can't have a priority with additional path components");const h=o.getNode();l=e.serverCache.getNode();const c=jp(r,n,h,l);c!=null?a=t.filter.updatePriority(h,c):a=o.getNode()}else{const h=ge(n);let c;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const d=jp(r,n,o.getNode(),l);d!=null?c=o.getNode().getImmediateChild(u).updateChild(h,d):c=o.getNode().getImmediateChild(u)}else c=df(r,u,e.serverCache);c!=null?a=t.filter.updateChild(o.getNode(),u,c,h,i,s):a=o.getNode()}}return gs(e,a,o.isFullyInitialized()||ie(n),t.filter.filtersNodes())}}function za(t,e,n,r,i,s,o,a){const l=e.serverCache;let u;const h=o?t.filter:t.filter.getIndexedFilter();if(ie(n))u=h.updateFullNode(l.getNode(),r,null);else if(h.filtersNodes()&&!l.isFiltered()){const _=l.getNode().updateChild(n,r);u=h.updateFullNode(l.getNode(),_,null)}else{const _=ne(n);if(!l.isCompleteForPath(n)&&ir(n)>1)return e;const v=ge(n),R=l.getNode().getImmediateChild(_).updateChild(v,r);_===".priority"?u=h.updatePriority(l.getNode(),R):u=h.updateChild(l.getNode(),_,R,v,Vy,null)}const c=Gy(e,u,l.isFullyInitialized()||ie(n),h.filtersNodes()),d=new ff(i,c,s);return Yy(t,c,n,i,d,a)}function Wc(t,e,n,r,i,s,o){const a=e.eventCache;let l,u;const h=new ff(i,e,s);if(ie(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=gs(e,u,!0,t.filter.filtersNodes());else{const c=ne(n);if(c===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),l=gs(e,u,a.isFullyInitialized(),a.isFiltered());else{const d=ge(n),_=a.getNode().getImmediateChild(c);let v;if(ie(d))v=r;else{const C=h.getCompleteChild(c);C!=null?Ny(d)===".priority"&&C.getChild(Py(d)).isEmpty()?v=C:v=C.updateChild(d,r):v=q.EMPTY_NODE}if(_.equals(v))l=e;else{const C=t.filter.updateChild(a.getNode(),c,v,d,h,o);l=gs(e,C,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function Up(t,e){return t.eventCache.isCompleteForChild(e)}function E1(t,e,n,r,i,s,o){let a=e;return r.foreach((l,u)=>{const h=be(n,l);Up(e,ne(h))&&(a=Wc(t,a,h,u,i,s,o))}),r.foreach((l,u)=>{const h=be(n,l);Up(e,ne(h))||(a=Wc(t,a,h,u,i,s,o))}),a}function Fp(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Gc(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;ie(n)?u=r:u=new Ee(null).setTree(n,r);const h=e.serverCache.getNode();return u.children.inorderTraversal((c,d)=>{if(h.hasChild(c)){const _=e.serverCache.getNode().getImmediateChild(c),v=Fp(t,_,d);l=za(t,l,new me(c),v,i,s,o,a)}}),u.children.inorderTraversal((c,d)=>{const _=!e.serverCache.isCompleteForChild(c)&&d.value===null;if(!h.hasChild(c)&&!_){const v=e.serverCache.getNode().getImmediateChild(c),C=Fp(t,v,d);l=za(t,l,new me(c),C,i,s,o,a)}}),l}function C1(t,e,n,r,i,s,o){if(Ba(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(ie(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return za(t,e,n,l.getNode().getChild(n),i,s,a,o);if(ie(n)){let u=new Ee(null);return l.getNode().forEachChild(fi,(h,c)=>{u=u.set(new me(h),c)}),Gc(t,e,n,u,i,s,a,o)}else return e}else{let u=new Ee(null);return r.foreach((h,c)=>{const d=be(n,h);l.isCompleteForPath(d)&&(u=u.set(h,l.getNode().getChild(d)))}),Gc(t,e,n,u,i,s,a,o)}}function w1(t,e,n,r,i){const s=e.serverCache,o=Gy(e,s.getNode(),s.isFullyInitialized()||ie(n),s.isFiltered());return Yy(t,o,n,r,Vy,i)}function R1(t,e,n,r,i,s){let o;if(Ba(r,n)!=null)return e;{const a=new ff(r,e,i),l=e.eventCache.getNode();let u;if(ie(n)||ne(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=$a(r,Dr(e));else{const c=e.serverCache.getNode();G(c instanceof q,"serverChildren would be complete if leaf node"),h=cf(r,c)}h=h,u=t.filter.updateFullNode(l,h,s)}else{const h=ne(n);let c=df(r,h,e.serverCache);c==null&&e.serverCache.isCompleteForChild(h)&&(c=l.getImmediateChild(h)),c!=null?u=t.filter.updateChild(l,h,c,ge(n),a,s):e.eventCache.getNode().hasChild(h)?u=t.filter.updateChild(l,h,q.EMPTY_NODE,ge(n),a,s):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=$a(r,Dr(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||Ba(r,le())!=null,gs(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new of(r.getIndex()),s=HI(r);this.processor_=_1(s);const o=n.serverCache,a=n.eventCache,l=i.updateFullNode(q.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(q.EMPTY_NODE,a.getNode(),null),h=new sr(l,o.isFullyInitialized(),i.filtersNodes()),c=new sr(u,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Rl(c,h),this.eventGenerator_=new QI(this.query_)}get query(){return this.query_}}function I1(t){return t.viewCache_.serverCache.getNode()}function k1(t){return Ha(t.viewCache_)}function T1(t,e){const n=Dr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ie(e)&&!n.getImmediateChild(ne(e)).isEmpty())?n.getChild(e):null}function Wp(t){return t.eventRegistrations_.length===0}function A1(t,e){t.eventRegistrations_.push(e)}function Gp(t,e,n){const r=[];if(n){G(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function Kp(t,e,n,r){e.type===Ht.MERGE&&e.source.queryId!==null&&(G(Dr(t.viewCache_),"We should always have a full cache before handling merges"),G(Ha(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=y1(t.processor_,i,e,n,r);return g1(t.processor_,s.viewCache),G(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,qy(t,s.changes,s.viewCache.eventCache.getNode(),null)}function N1(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ae,(s,o)=>{r.push(Ii(s,o))}),n.isFullyInitialized()&&r.push(Uy(n.getNode())),qy(t,r,n.getNode(),e)}function qy(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return XI(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Va;class Qy{constructor(){this.views=new Map}}function x1(t){G(!Va,"__referenceConstructor has already been defined"),Va=t}function P1(){return G(Va,"Reference.ts has not been loaded"),Va}function L1(t){return t.views.size===0}function hf(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return G(s!=null,"SyncTree gave us an op for an invalid query."),Kp(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(Kp(o,e,n,r));return s}}function Xy(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=$a(n,i?r:null),l=!1;a?l=!0:r instanceof q?(a=cf(n,r),l=!1):(a=q.EMPTY_NODE,l=!1);const u=Rl(new sr(a,l,!1),new sr(r,i,!1));return new S1(e,u)}return o}function O1(t,e,n,r,i,s){const o=Xy(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),A1(o,n),N1(o,n)}function D1(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const a=or(t);if(i==="default")for(const[l,u]of t.views.entries())o=o.concat(Gp(u,n,r)),Wp(u)&&(t.views.delete(l),u.query._queryParams.loadsAllData()||s.push(u.query));else{const l=t.views.get(i);l&&(o=o.concat(Gp(l,n,r)),Wp(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!or(t)&&s.push(new(P1())(e._repo,e._path)),{removed:s,events:o}}function Jy(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function tr(t,e){let n=null;for(const r of t.views.values())n=n||T1(r,e);return n}function Zy(t,e){if(e._queryParams.loadsAllData())return Il(t);{const r=e._queryIdentifier;return t.views.get(r)}}function ev(t,e){return Zy(t,e)!=null}function or(t){return Il(t)!=null}function Il(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ya;function b1(t){G(!Ya,"__referenceConstructor has already been defined"),Ya=t}function M1(){return G(Ya,"Reference.ts has not been loaded"),Ya}let j1=1;class Hp{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ee(null),this.pendingWriteTree_=f1(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function tv(t,e,n,r,i){return t1(t.pendingWriteTree_,e,n,r,i),i?ao(t,new Or(Wy(),e,n)):[]}function Er(t,e,n=!1){const r=n1(t.pendingWriteTree_,e);if(r1(t.pendingWriteTree_,e)){let s=new Ee(null);return r.snap!=null?s=s.set(le(),!0):yt(r.children,o=>{s=s.set(new me(o),!0)}),ao(t,new Ka(r.path,s,n))}else return[]}function oo(t,e,n){return ao(t,new Or(lf(),e,n))}function U1(t,e,n){const r=Ee.fromObject(n);return ao(t,new zs(lf(),e,r))}function F1(t,e){return ao(t,new Bs(lf(),e))}function W1(t,e,n){const r=mf(t,n);if(r){const i=_f(r),s=i.path,o=i.queryId,a=it(s,e),l=new Bs(uf(o),a);return gf(t,s,l)}else return[]}function qa(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let a=[];if(o&&(e._queryIdentifier==="default"||ev(o,e))){const l=D1(o,e,n,r);L1(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const u=l.removed;if(a=l.events,!i){const h=u.findIndex(d=>d._queryParams.loadsAllData())!==-1,c=t.syncPointTree_.findOnPath(s,(d,_)=>or(_));if(h&&!c){const d=t.syncPointTree_.subtree(s);if(!d.isEmpty()){const _=H1(d);for(let v=0;v<_.length;++v){const C=_[v],R=C.query,f=sv(t,C);t.listenProvider_.startListening(vs(R),Vs(t,R),f.hashFn,f.onComplete)}}}!c&&u.length>0&&!r&&(h?t.listenProvider_.stopListening(vs(e),null):u.forEach(d=>{const _=t.queryToTagMap.get(kl(d));t.listenProvider_.stopListening(vs(d),_)}))}$1(t,u)}return a}function nv(t,e,n,r){const i=mf(t,r);if(i!=null){const s=_f(i),o=s.path,a=s.queryId,l=it(o,e),u=new Or(uf(a),l,n);return gf(t,o,u)}else return[]}function G1(t,e,n,r){const i=mf(t,r);if(i){const s=_f(i),o=s.path,a=s.queryId,l=it(o,e),u=Ee.fromObject(n),h=new zs(uf(a),l,u);return gf(t,o,h)}else return[]}function Kc(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(d,_)=>{const v=it(d,i);s=s||tr(_,v),o=o||or(_)});let a=t.syncPointTree_.get(i);a?(o=o||or(a),s=s||tr(a,le())):(a=new Qy,t.syncPointTree_=t.syncPointTree_.set(i,a));let l;s!=null?l=!0:(l=!1,s=q.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((_,v)=>{const C=tr(v,le());C&&(s=s.updateImmediateChild(_,C))}));const u=ev(a,e);if(!u&&!e._queryParams.loadsAllData()){const d=kl(e);G(!t.queryToTagMap.has(d),"View does not exist, but we have a tag");const _=B1();t.queryToTagMap.set(d,_),t.tagToQueryMap.set(_,d)}const h=Sl(t.pendingWriteTree_,i);let c=O1(a,e,n,h,s,l);if(!u&&!o&&!r){const d=Zy(a,e);c=c.concat(z1(t,e,d))}return c}function pf(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=it(o,e),u=tr(a,l);if(u)return u});return $y(i,e,s,n,!0)}function K1(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,h)=>{const c=it(u,n);r=r||tr(h,c)});let i=t.syncPointTree_.get(n);i?r=r||tr(i,le()):(i=new Qy,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new sr(r,!0,!1):null,a=Sl(t.pendingWriteTree_,e._path),l=Xy(i,e,a,s?o.getNode():q.EMPTY_NODE,s);return k1(l)}function ao(t,e){return rv(e,t.syncPointTree_,null,Sl(t.pendingWriteTree_,le()))}function rv(t,e,n,r){if(ie(t.path))return iv(t,e,n,r);{const i=e.get(le());n==null&&i!=null&&(n=tr(i,le()));let s=[];const o=ne(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const u=n?n.getImmediateChild(o):null,h=By(r,o);s=s.concat(rv(a,l,u,h))}return i&&(s=s.concat(hf(i,t,r,n))),s}}function iv(t,e,n,r){const i=e.get(le());n==null&&i!=null&&(n=tr(i,le()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,u=By(r,o),h=t.operationForChild(o);h&&(s=s.concat(iv(h,a,l,u)))}),i&&(s=s.concat(hf(i,t,r,n))),s}function sv(t,e){const n=e.query,r=Vs(t,n);return{hashFn:()=>(I1(e)||q.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?W1(t,n._path,r):F1(t,n._path);{const s=KS(i,n);return qa(t,n,null,s)}}}}function Vs(t,e){const n=kl(e);return t.queryToTagMap.get(n)}function kl(t){return t._path.toString()+"$"+t._queryIdentifier}function mf(t,e){return t.tagToQueryMap.get(e)}function _f(t){const e=t.indexOf("$");return G(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new me(t.substr(0,e))}}function gf(t,e,n){const r=t.syncPointTree_.get(e);G(r,"Missing sync point for query tag that we're tracking");const i=Sl(t.pendingWriteTree_,e);return hf(r,n,i,null)}function H1(t){return t.fold((e,n,r)=>{if(n&&or(n))return[Il(n)];{let i=[];return n&&(i=Jy(n)),yt(r,(s,o)=>{i=i.concat(o)}),i}})}function vs(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(M1())(t._repo,t._path):t}function $1(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=kl(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function B1(){return j1++}function z1(t,e,n){const r=e._path,i=Vs(t,e),s=sv(t,n),o=t.listenProvider_.startListening(vs(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)G(!or(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((u,h,c)=>{if(!ie(u)&&h&&or(h))return[Il(h).query];{let d=[];return h&&(d=d.concat(Jy(h).map(_=>_.query))),yt(c,(_,v)=>{d=d.concat(v)}),d}});for(let u=0;u<l.length;++u){const h=l[u];t.listenProvider_.stopListening(vs(h),Vs(t,h))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new yf(n)}node(){return this.node_}}class vf{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=be(this.path_,e);return new vf(this.syncTree_,n)}node(){return pf(this.syncTree_,this.path_)}}const V1=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},$p=function(t,e,n){if(!t||typeof t!="object")return t;if(G(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Y1(t[".sv"],e,n);if(typeof t[".sv"]=="object")return q1(t[".sv"],e);G(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Y1=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:G(!1,"Unexpected server value: "+t)}},q1=function(t,e,n){t.hasOwnProperty("increment")||G(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&G(!1,"Unexpected increment value: "+r);const i=e.node();if(G(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},Q1=function(t,e,n,r){return Ef(e,new vf(n,t),r)},ov=function(t,e,n){return Ef(t,new yf(e),n)};function Ef(t,e,n){const r=t.getPriority().val(),i=$p(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=$p(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Ue(a,Ge(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Ue(i))),o.forEachChild(Ae,(a,l)=>{const u=Ef(l,e.getImmediateChild(a),n);u!==l&&(s=s.updateImmediateChild(a,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function wf(t,e){let n=e instanceof me?e:new me(e),r=t,i=ne(n);for(;i!==null;){const s=wi(r.node.children,i)||{children:{},childCount:0};r=new Cf(i,r,s),n=ge(n),i=ne(n)}return r}function Fi(t){return t.node.value}function av(t,e){t.node.value=e,Hc(t)}function lv(t){return t.node.childCount>0}function X1(t){return Fi(t)===void 0&&!lv(t)}function Tl(t,e){yt(t.node.children,(n,r)=>{e(new Cf(n,t,r))})}function uv(t,e,n,r){n&&!r&&e(t),Tl(t,i=>{uv(i,e,!0,r)}),n&&r&&e(t)}function J1(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function lo(t){return new me(t.parent===null?t.name:lo(t.parent)+"/"+t.name)}function Hc(t){t.parent!==null&&Z1(t.parent,t.name,t)}function Z1(t,e,n){const r=X1(n),i=In(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Hc(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Hc(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek=/[\[\].#$\/\u0000-\u001F\u007F]/,tk=/[\[\].#$\u0000-\u001F\u007F]/,Su=10*1024*1024,cv=function(t){return typeof t=="string"&&t.length!==0&&!ek.test(t)},dv=function(t){return typeof t=="string"&&t.length!==0&&!tk.test(t)},nk=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),dv(t)},rk=function(t,e,n,r){r&&e===void 0||Rf(Yd(t,"value"),e,n)},Rf=function(t,e,n){const r=n instanceof me?new CI(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+mr(r));if(typeof e=="function")throw new Error(t+"contains a function "+mr(r)+" with contents = "+e.toString());if(ly(e))throw new Error(t+"contains "+e.toString()+" "+mr(r));if(typeof e=="string"&&e.length>Su/3&&Cl(e)>Su)throw new Error(t+"contains a string greater than "+Su+" utf8 bytes "+mr(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(yt(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!cv(o)))throw new Error(t+" contains an invalid key ("+o+") "+mr(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);wI(r,o),Rf(t,a,r),RI(r)}),i&&s)throw new Error(t+' contains ".value" child '+mr(r)+" in addition to actual children.")}},fv=function(t,e,n,r){if(!(r&&n===void 0)&&!dv(n))throw new Error(Yd(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},ik=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),fv(t,e,n,r)},hv=function(t,e){if(ne(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},sk=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!cv(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!nk(n))throw new Error(Yd(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Sf(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!nf(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function pv(t,e,n){Sf(t,n),mv(t,r=>nf(r,e))}function nn(t,e,n){Sf(t,n),mv(t,r=>Kt(r,e)||Kt(e,r))}function mv(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(ak(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function ak(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Rr&&Je("event: "+n.toString()),Ui(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk="repo_interrupt",uk=25;class ck{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ok,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ga(),this.transactionQueueTree_=new Cf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function dk(t,e,n){if(t.stats_=ef(t.repoInfo_),t.forceRestClient_||zS())t.server_=new Wa(t.repoInfo_,(r,i,s,o)=>{Bp(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>zp(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{De(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new _n(t.repoInfo_,e,(r,i,s,o)=>{Bp(t,r,i,s,o)},r=>{zp(t,r)},r=>{hk(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=XS(t.repoInfo_,()=>new qI(t.stats_,t.server_)),t.infoData_=new $I,t.infoSyncTree_=new Hp({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=oo(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),kf(t,"connected",!1),t.serverSyncTree_=new Hp({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const u=o(a,l);nn(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function fk(t){const n=t.infoData_.getNode(new me(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function If(t){return V1({timestamp:fk(t)})}function Bp(t,e,n,r,i){t.dataUpdateCount++;const s=new me(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=Da(n,u=>Ge(u));o=G1(t.serverSyncTree_,s,l,i)}else{const l=Ge(n);o=nv(t.serverSyncTree_,s,l,i)}else if(r){const l=Da(n,u=>Ge(u));o=U1(t.serverSyncTree_,s,l)}else{const l=Ge(n);o=oo(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=Nl(t,s)),nn(t.eventQueue_,a,o)}function zp(t,e){kf(t,"connected",e),e===!1&&_k(t)}function hk(t,e){yt(e,(n,r)=>{kf(t,n,r)})}function kf(t,e,n){const r=new me("/.info/"+e),i=Ge(n);t.infoData_.updateSnapshot(r,i);const s=oo(t.infoSyncTree_,r,i);nn(t.eventQueue_,r,s)}function _v(t){return t.nextWriteId_++}function pk(t,e,n){const r=K1(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=Ge(i).withIndex(e._queryParams.getIndex());Kc(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=oo(t.serverSyncTree_,e._path,s);else{const a=Vs(t.serverSyncTree_,e);o=nv(t.serverSyncTree_,e._path,s,a)}return nn(t.eventQueue_,e._path,o),qa(t.serverSyncTree_,e,n,null,!0),s},i=>(Al(t,"get for query "+De(e)+" failed: "+i),Promise.reject(new Error(i))))}function mk(t,e,n,r,i){Al(t,"set",{path:e.toString(),value:n,priority:r});const s=If(t),o=Ge(n,r),a=pf(t.serverSyncTree_,e),l=ov(o,a,s),u=_v(t),h=tv(t.serverSyncTree_,e,l,u,!0);Sf(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(d,_)=>{const v=d==="ok";v||gt("set at "+e+" failed: "+d);const C=Er(t.serverSyncTree_,u,!v);nn(t.eventQueue_,e,C),vk(t,i,d,_)});const c=Cv(t,e);Nl(t,c),nn(t.eventQueue_,c,[])}function _k(t){Al(t,"onDisconnectEvents");const e=If(t),n=Ga();jc(t.onDisconnect_,le(),(i,s)=>{const o=Q1(i,s,t.serverSyncTree_,e);Fy(n,i,o)});let r=[];jc(n,le(),(i,s)=>{r=r.concat(oo(t.serverSyncTree_,i,s));const o=Cv(t,i);Nl(t,o)}),t.onDisconnect_=Ga(),nn(t.eventQueue_,le(),r)}function gk(t,e,n){let r;ne(e._path)===".info"?r=Kc(t.infoSyncTree_,e,n):r=Kc(t.serverSyncTree_,e,n),pv(t.eventQueue_,e._path,r)}function Vp(t,e,n){let r;ne(e._path)===".info"?r=qa(t.infoSyncTree_,e,n):r=qa(t.serverSyncTree_,e,n),pv(t.eventQueue_,e._path,r)}function yk(t){t.persistentConnection_&&t.persistentConnection_.interrupt(lk)}function Al(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Je(n,...e)}function vk(t,e,n,r){e&&Ui(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function gv(t,e,n){return pf(t.serverSyncTree_,e,n)||q.EMPTY_NODE}function Tf(t,e=t.transactionQueueTree_){if(e||xl(t,e),Fi(e)){const n=vv(t,e);G(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&Ek(t,lo(e),n)}else lv(e)&&Tl(e,n=>{Tf(t,n)})}function Ek(t,e,n){const r=n.map(u=>u.currentWriteId),i=gv(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const h=n[u];G(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const c=it(e,h.path);s=s.updateChild(c,h.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,u=>{Al(t,"transaction put response",{path:l.toString(),status:u});let h=[];if(u==="ok"){const c=[];for(let d=0;d<n.length;d++)n[d].status=2,h=h.concat(Er(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&c.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();xl(t,wf(t.transactionQueueTree_,e)),Tf(t,t.transactionQueueTree_),nn(t.eventQueue_,e,h);for(let d=0;d<c.length;d++)Ui(c[d])}else{if(u==="datastale")for(let c=0;c<n.length;c++)n[c].status===3?n[c].status=4:n[c].status=0;else{gt("transaction at "+l.toString()+" failed: "+u);for(let c=0;c<n.length;c++)n[c].status=4,n[c].abortReason=u}Nl(t,e)}},o)}function Nl(t,e){const n=yv(t,e),r=lo(n),i=vv(t,n);return Ck(t,i,r),r}function Ck(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],u=it(n,l.path);let h=!1,c;if(G(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)h=!0,c=l.abortReason,i=i.concat(Er(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=uk)h=!0,c="maxretry",i=i.concat(Er(t.serverSyncTree_,l.currentWriteId,!0));else{const d=gv(t,l.path,o);l.currentInputSnapshot=d;const _=e[a].update(d.val());if(_!==void 0){Rf("transaction failed: Data returned ",_,l.path);let v=Ge(_);typeof _=="object"&&_!=null&&In(_,".priority")||(v=v.updatePriority(d.getPriority()));const R=l.currentWriteId,f=If(t),p=ov(v,d,f);l.currentOutputSnapshotRaw=v,l.currentOutputSnapshotResolved=p,l.currentWriteId=_v(t),o.splice(o.indexOf(R),1),i=i.concat(tv(t.serverSyncTree_,l.path,p,l.currentWriteId,l.applyLocally)),i=i.concat(Er(t.serverSyncTree_,R,!0))}else h=!0,c="nodata",i=i.concat(Er(t.serverSyncTree_,l.currentWriteId,!0))}nn(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,function(d){setTimeout(d,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(c==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(c),!1,null))))}xl(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Ui(r[a]);Tf(t,t.transactionQueueTree_)}function yv(t,e){let n,r=t.transactionQueueTree_;for(n=ne(e);n!==null&&Fi(r)===void 0;)r=wf(r,n),e=ge(e),n=ne(e);return r}function vv(t,e){const n=[];return Ev(t,e,n),n.sort((r,i)=>r.order-i.order),n}function Ev(t,e,n){const r=Fi(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Tl(e,i=>{Ev(t,i,n)})}function xl(t,e){const n=Fi(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,av(e,n.length>0?n:void 0)}Tl(e,r=>{xl(t,r)})}function Cv(t,e){const n=lo(yv(t,e)),r=wf(t.transactionQueueTree_,e);return J1(r,i=>{Iu(t,i)}),Iu(t,r),uv(r,i=>{Iu(t,i)}),n}function Iu(t,e){const n=Fi(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(G(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(G(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Er(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?av(e,void 0):n.length=s+1,nn(t.eventQueue_,lo(e),i);for(let o=0;o<r.length;o++)Ui(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function Rk(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):gt(`Invalid query segment '${n}' in query '${t}'`)}return e}const Yp=function(t,e){const n=Sk(t),r=n.namespace;n.domain==="firebase.com"&&Cn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Cn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||jS();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Ey(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new me(n.pathString)}},Sk=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let h=t.indexOf("/");h===-1&&(h=t.length);let c=t.indexOf("?");c===-1&&(c=t.length),e=t.substring(0,Math.min(h,c)),h<c&&(i=wk(t.substring(h,c)));const d=Rk(t.substring(Math.min(t.length,c)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;const _=e.slice(0,u);if(_.toLowerCase()==="localhost")n="localhost";else if(_.split(".").length<=2)n=_;else{const v=e.indexOf(".");r=e.substring(0,v).toLowerCase(),n=e.substring(v+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+De(this.snapshot.exportVal())}}class Rv{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return G(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return ie(this._path)?null:Ny(this._path)}get ref(){return new sn(this._repo,this._path)}get _queryIdentifier(){const e=Lp(this._queryParams),n=Jd(e);return n==="{}"?"default":n}get _queryObject(){return Lp(this._queryParams)}isEqual(e){if(e=vt(e),!(e instanceof Af))return!1;const n=this._repo===e._repo,r=nf(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+EI(this._path)}}class sn extends Af{constructor(e,n){super(e,n,new af,!1)}get parent(){const e=Py(this._path);return e===null?null:new sn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Ti{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new me(e),r=je(this.ref,e);return new Ti(this._node.getChild(n),r,Ae)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new Ti(i,je(this.ref,r),Ae)))}hasChild(e){const n=new me(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function oe(t,e){return t=vt(t),t._checkNotDeleted("ref"),e!==void 0?je(t._root,e):t._root}function je(t,e){return t=vt(t),ne(t._path)===null?ik("child","path",e,!1):fv("child","path",e,!1),new sn(t._repo,be(t._path,e))}function Ik(t){return hv("remove",t._path),ce(t,null)}function ce(t,e){t=vt(t),hv("set",t._path),rk("set",e,t._path,!1);const n=new El;return mk(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Dn(t){t=vt(t);const e=new Sv(()=>{}),n=new Pl(e);return pk(t._repo,t,n).then(r=>new Ti(r,new sn(t._repo,t._path),t._queryParams.getIndex()))}class Pl{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new wv("value",this,new Ti(e.snapshotNode,new sn(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Rv(this,e,n):null}matches(e){return e instanceof Pl?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Nf{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Rv(this,e,n):null}createEvent(e,n){G(e.childName!=null,"Child events should have a childName.");const r=je(new sn(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new wv(e.type,this,new Ti(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Nf?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function kk(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const l=n,u=(h,c)=>{Vp(t._repo,t,a),l(h,c)};u.userCallback=n.userCallback,u.context=n.context,n=u}const o=new Sv(n,s||void 0),a=e==="value"?new Pl(o):new Nf(e,o);return gk(t._repo,t,a),()=>Vp(t._repo,t,a)}function Iv(t,e,n,r){return kk(t,"value",e,n,r)}x1(sn);b1(sn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk="FIREBASE_DATABASE_EMULATOR_HOST",$c={};let Ak=!1;function Nk(t,e,n,r){t.repoInfo_=new Ey(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function xk(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Cn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Je("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Yp(s,i),a=o.repoInfo,l,u;typeof process<"u"&&process.env&&(u=process.env[Tk]),u?(l=!0,s=`http://${u}?ns=${a.namespace}`,o=Yp(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const h=i&&l?new di(di.OWNER):new YS(t.name,t.options,e);sk("Invalid Firebase Database URL",o),ie(o.path)||Cn("Database URL must point to the root of a Firebase Database (not including a child path).");const c=Lk(a,t,h,new VS(t.name,n));return new Ok(c,t)}function Pk(t,e){const n=$c[e];(!n||n[t.key]!==t)&&Cn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),yk(t),delete n[t.key]}function Lk(t,e,n,r){let i=$c[e.name];i||(i={},$c[e.name]=i);let s=i[t.toURLString()];return s&&Cn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new ck(t,Ak,n,r),i[t.toURLString()]=s,s}class Ok{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(dk(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new sn(this._repo,le())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Pk(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Cn("Cannot call "+e+" on a deleted database.")}}function Dk(t=ny(),e){const n=Xd(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=uR("database");r&&bk(n,...r)}return n}function bk(t,e,n,r={}){t=vt(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Cn("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Cn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new di(di.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:cR(r.mockUserToken,t.app.options.projectId);s=new di(o)}Nk(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(t){LS(Mi),Ri(new xr("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return xk(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Zn(mp,_p,t),Zn(mp,_p,"esm2017")}_n.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};_n.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Mk();function xf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function kv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jk=kv,Tv=new no("auth","Firebase",kv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa=new qd("@firebase/auth");function Uk(t,...e){Qa.logLevel<=pe.WARN&&Qa.warn(`Auth (${Mi}): ${t}`,...e)}function ea(t,...e){Qa.logLevel<=pe.ERROR&&Qa.error(`Auth (${Mi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(t,...e){throw Pf(t,...e)}function en(t,...e){return Pf(t,...e)}function Fk(t,e,n){const r=Object.assign(Object.assign({},jk()),{[e]:n});return new no("auth","Firebase",r).create(e,{appName:t.name})}function Pf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Tv.create(t,...e)}function J(t,e,...n){if(!t)throw Pf(e,...n)}function hn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ea(e),new Error(e)}function Rn(t,e){t||hn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bc(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Wk(){return qp()==="http:"||qp()==="https:"}function qp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Wk()||dR()||"connection"in navigator)?navigator.onLine:!0}function Kk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,n){this.shortDelay=e,this.longDelay=n,Rn(n>e,"Short delay should be less than long delay!"),this.isMobile=Vd()||Qg()}get(){return Gk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(t,e){Rn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;hn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;hn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;hn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k=new uo(3e4,6e4);function Of(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function co(t,e,n,r,i={}){return Nv(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=bi(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),Av.fetch()(Pv(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function Nv(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Hk),e);try{const i=new Bk(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Uo(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Uo(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Uo(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Uo(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Fk(t,h,u);wn(t,h)}}catch(i){if(i instanceof dr)throw i;wn(t,"network-request-failed",{message:String(i)})}}async function xv(t,e,n,r,i={}){const s=await co(t,e,n,r,i);return"mfaPendingCredential"in s&&wn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function Pv(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Lf(t.config,i):`${t.config.apiScheme}://${i}`}class Bk{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(en(this.auth,"network-request-failed")),$k.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Uo(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=en(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zk(t,e){return co(t,"POST","/v1/accounts:delete",e)}async function Vk(t,e){return co(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Yk(t,e=!1){const n=vt(t),r=await n.getIdToken(e),i=Df(r);J(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Es(ku(i.auth_time)),issuedAtTime:Es(ku(i.iat)),expirationTime:Es(ku(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function ku(t){return Number(t)*1e3}function Df(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ea("JWT malformed, contained fewer than 3 sections"),null;try{const i=Oa(n);return i?JSON.parse(i):(ea("Failed to decode base64 JWT payload"),null)}catch(i){return ea("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function qk(t){const e=Df(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ys(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof dr&&Qk(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Qk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Es(this.lastLoginAt),this.creationTime=Es(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xa(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Ys(t,Vk(n,{idToken:r}));J(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?eT(s.providerUserInfo):[],a=Zk(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Lv(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,c)}async function Jk(t){const e=vt(t);await Xa(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Zk(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function eT(t){return t.map(e=>{var{providerId:n}=e,r=xf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tT(t,e){const n=await Nv(t,{},async()=>{const r=bi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Pv(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Av.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return J(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await tT(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new qs;return r&&(J(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(J(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(J(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qs,this.toJSON())}_performRefresh(){return hn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Sr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=xf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Lv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ys(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Yk(this,e)}reload(){return Jk(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Sr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Xa(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Ys(this,zk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,h;const c=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,C=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,f=(u=n.createdAt)!==null&&u!==void 0?u:void 0,p=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:E,emailVerified:k,isAnonymous:O,providerData:M,stsTokenManager:P}=n;J(E&&P,e,"internal-error");const A=qs.fromJSON(this.name,P);J(typeof E=="string",e,"internal-error"),Nn(c,e.name),Nn(d,e.name),J(typeof k=="boolean",e,"internal-error"),J(typeof O=="boolean",e,"internal-error"),Nn(_,e.name),Nn(v,e.name),Nn(C,e.name),Nn(R,e.name),Nn(f,e.name),Nn(p,e.name);const j=new Sr({uid:E,auth:e,email:d,emailVerified:k,displayName:c,isAnonymous:O,photoURL:v,phoneNumber:_,tenantId:C,stsTokenManager:A,createdAt:f,lastLoginAt:p});return M&&Array.isArray(M)&&(j.providerData=M.map(F=>Object.assign({},F))),R&&(j._redirectEventId=R),j}static async _fromIdTokenResponse(e,n,r=!1){const i=new qs;i.updateFromServerResponse(n);const s=new Sr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Xa(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp=new Map;function pn(t){Rn(t instanceof Function,"Expected a class definition");let e=Qp.get(t);return e?(Rn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Qp.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Ov.type="NONE";const Xp=Ov;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(t,e,n){return`firebase:${t}:${e}:${n}`}class hi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ta(this.userKey,i.apiKey,s),this.fullPersistenceKey=ta("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Sr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new hi(pn(Xp),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||pn(Xp);const o=ta(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){const c=Sr._fromJSON(e,h);u!==s&&(a=c),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new hi(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new hi(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Mv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Dv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Uv(e))return"Blackberry";if(Fv(e))return"Webos";if(bf(e))return"Safari";if((e.includes("chrome/")||bv(e))&&!e.includes("edge/"))return"Chrome";if(jv(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Dv(t=et()){return/firefox\//i.test(t)}function bf(t=et()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bv(t=et()){return/crios\//i.test(t)}function Mv(t=et()){return/iemobile/i.test(t)}function jv(t=et()){return/android/i.test(t)}function Uv(t=et()){return/blackberry/i.test(t)}function Fv(t=et()){return/webos/i.test(t)}function Ll(t=et()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function nT(t=et()){var e;return Ll(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function rT(){return fR()&&document.documentMode===10}function Wv(t=et()){return Ll(t)||jv(t)||Fv(t)||Uv(t)||/windows phone/i.test(t)||Mv(t)}function iT(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(t,e=[]){let n;switch(t){case"Browser":n=Jp(et());break;case"Worker":n=`${Jp(et())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Mi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oT(t,e={}){return co(t,"GET","/v2/passwordPolicy",Of(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT=6;class lT{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:aT,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zp(this),this.idTokenSubscription=new Zp(this),this.beforeStateQueue=new sT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Tv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=pn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await hi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Xa(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Kk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?vt(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(pn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await oT(this),n=new lT(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new no("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&pn(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await hi.create(this,[pn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Gv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Uk(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ol(t){return vt(t)}class Zp{constructor(e){this.auth=e,this.observer=null,this.addObserver=CR(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function dT(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=en("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",cT().appendChild(r)})}function fT(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(t,e){const n=Xd(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(ba(s,e??{}))return i;wn(i,"already-initialized")}return n.initialize({options:e})}function pT(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(pn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function mT(t,e,n){const r=Ol(t);J(r._canInitEmulator,r,"emulator-config-failed"),J(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=Kv(e),{host:o,port:a}=_T(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||gT()}function Kv(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _T(t){const e=Kv(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:em(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:em(o)}}}function em(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function gT(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hn("not implemented")}_getIdTokenResponse(e){return hn("not implemented")}_linkToIdToken(e,n){return hn("not implemented")}_getReauthenticationResolver(e){return hn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pi(t,e){return xv(t,"POST","/v1/accounts:signInWithIdp",Of(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT="http://localhost";class br extends Hv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new br(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):wn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=xf(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new br(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return pi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,pi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,pi(e,n)}buildRequest(){const e={requestUri:yT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=bi(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo extends $v{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn extends fo{constructor(){super("facebook.com")}static credential(e){return br._fromParams({providerId:bn.PROVIDER_ID,signInMethod:bn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bn.credentialFromTaggedObject(e)}static credentialFromError(e){return bn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bn.credential(e.oauthAccessToken)}catch{return null}}}bn.FACEBOOK_SIGN_IN_METHOD="facebook.com";bn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn extends fo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return br._fromParams({providerId:Mn.PROVIDER_ID,signInMethod:Mn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Mn.credentialFromTaggedObject(e)}static credentialFromError(e){return Mn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Mn.credential(n,r)}catch{return null}}}Mn.GOOGLE_SIGN_IN_METHOD="google.com";Mn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn extends fo{constructor(){super("github.com")}static credential(e){return br._fromParams({providerId:jn.PROVIDER_ID,signInMethod:jn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jn.credentialFromTaggedObject(e)}static credentialFromError(e){return jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jn.credential(e.oauthAccessToken)}catch{return null}}}jn.GITHUB_SIGN_IN_METHOD="github.com";jn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un extends fo{constructor(){super("twitter.com")}static credential(e,n){return br._fromParams({providerId:Un.PROVIDER_ID,signInMethod:Un.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Un.credentialFromTaggedObject(e)}static credentialFromError(e){return Un.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Un.credential(n,r)}catch{return null}}}Un.TWITTER_SIGN_IN_METHOD="twitter.com";Un.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vT(t,e){return xv(t,"POST","/v1/accounts:signUp",Of(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Sr._fromIdTokenResponse(e,r,i),o=tm(r);return new ar({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=tm(r);return new ar({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function tm(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ET(t){var e;const n=Ol(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new ar({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await vT(n,{returnSecureToken:!0}),i=await ar._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja extends dr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ja.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Ja(e,n,r,i)}}function Bv(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ja._fromErrorAndOperation(t,s,e,r):s})}async function CT(t,e,n=!1){const r=await Ys(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ar._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wT(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await Ys(t,Bv(r,i,e,t),n);J(s.idToken,r,"internal-error");const o=Df(s.idToken);J(o,r,"internal-error");const{sub:a}=o;return J(t.uid===a,r,"user-mismatch"),ar._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&wn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RT(t,e,n=!1){const r="signIn",i=await Bv(t,r,e),s=await ar._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function ST(t,e,n,r){return vt(t).onIdTokenChanged(e,n,r)}function IT(t,e,n){return vt(t).beforeAuthStateChanged(e,n)}function kT(t,e,n,r){return vt(t).onAuthStateChanged(e,n,r)}function nm(t){return vt(t).signOut()}const Za="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Za,"1"),this.storage.removeItem(Za),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(){const t=et();return bf(t)||Ll(t)}const AT=1e3,NT=10;class Vv extends zv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=TT()&&iT(),this.fallbackToPolling=Wv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);rT()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,NT):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},AT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Vv.type="LOCAL";const xT=Vv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv extends zv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Yv.type="SESSION";const qv=Yv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Dl(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await PT(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Dl.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Mf("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(c){const d=c;if(d.data.eventId===u)switch(d.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(){return window}function OT(t){tn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(){return typeof tn().WorkerGlobalScope<"u"&&typeof tn().importScripts=="function"}async function DT(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function bT(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function MT(){return Qv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="firebaseLocalStorageDb",jT=1,el="firebaseLocalStorage",Jv="fbase_key";class ho{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function bl(t,e){return t.transaction([el],e?"readwrite":"readonly").objectStore(el)}function UT(){const t=indexedDB.deleteDatabase(Xv);return new ho(t).toPromise()}function zc(){const t=indexedDB.open(Xv,jT);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(el,{keyPath:Jv})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(el)?e(r):(r.close(),await UT(),e(await zc()))})})}async function rm(t,e,n){const r=bl(t,!0).put({[Jv]:e,value:n});return new ho(r).toPromise()}async function FT(t,e){const n=bl(t,!1).get(e),r=await new ho(n).toPromise();return r===void 0?null:r.value}function im(t,e){const n=bl(t,!0).delete(e);return new ho(n).toPromise()}const WT=800,GT=3;class Zv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zc(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>GT)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Qv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Dl._getInstance(MT()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await DT(),!this.activeServiceWorker)return;this.sender=new LT(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||bT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zc();return await rm(e,Za,"1"),await im(e,Za),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>rm(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>FT(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>im(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=bl(i,!1).getAll();return new ho(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),WT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Zv.type="LOCAL";const KT=Zv;new uo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(t,e){return e?pn(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf extends Hv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return pi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return pi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return pi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function $T(t){return RT(t.auth,new jf(t),t.bypassAuthState)}function BT(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),wT(n,new jf(t),t.bypassAuthState)}async function zT(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),CT(n,new jf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $T;case"linkViaPopup":case"linkViaRedirect":return zT;case"reauthViaPopup":case"reauthViaRedirect":return BT;default:wn(this.auth,"internal-error")}}resolve(e){Rn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=new uo(2e3,1e4);class ri extends eE{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ri.currentPopupAction&&ri.currentPopupAction.cancel(),ri.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return J(e,this.auth,"internal-error"),e}async onExecution(){Rn(this.filter.length===1,"Popup operations only handle one event");const e=Mf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(en(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(en(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ri.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(en(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,VT.get())};e()}}ri.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT="pendingRedirect",na=new Map;class qT extends eE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=na.get(this.auth._key());if(!e){try{const r=await QT(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}na.set(this.auth._key(),e)}return this.bypassAuthState||na.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function QT(t,e){const n=ZT(e),r=JT(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function XT(t,e){na.set(t._key(),e)}function JT(t){return pn(t._redirectPersistence)}function ZT(t){return ta(YT,t.config.apiKey,t.name)}async function eA(t,e,n=!1){const r=Ol(t),i=HT(r,e),o=await new qT(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=10*60*1e3;class nA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rA(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!tE(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(en(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tA&&this.cachedEventUids.clear(),this.cachedEventUids.has(sm(e))}saveEventToCache(e){this.cachedEventUids.add(sm(e)),this.lastProcessedEventTime=Date.now()}}function sm(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function tE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function rA(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iA(t,e={}){return co(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oA=/^https?/;async function aA(t){if(t.config.emulator)return;const{authorizedDomains:e}=await iA(t);for(const n of e)try{if(lA(n))return}catch{}wn(t,"unauthorized-domain")}function lA(t){const e=Bc(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!oA.test(n))return!1;if(sA.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA=new uo(3e4,6e4);function om(){const t=tn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function cA(t){return new Promise((e,n)=>{var r,i,s;function o(){om(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{om(),n(en(t,"network-request-failed"))},timeout:uA.get()})}if(!((i=(r=tn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=tn().gapi)===null||s===void 0)&&s.load)o();else{const a=fT("iframefcb");return tn()[a]=()=>{gapi.load?o():n(en(t,"network-request-failed"))},dT(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw ra=null,e})}let ra=null;function dA(t){return ra=ra||cA(t),ra}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA=new uo(5e3,15e3),hA="__/auth/iframe",pA="emulator/auth/iframe",mA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_A=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gA(t){const e=t.config;J(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Lf(e,pA):`https://${t.config.authDomain}/${hA}`,r={apiKey:e.apiKey,appName:t.name,v:Mi},i=_A.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${bi(r).slice(1)}`}async function yA(t){const e=await dA(t),n=tn().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:gA(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mA,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=en(t,"network-request-failed"),a=tn().setTimeout(()=>{s(o)},fA.get());function l(){tn().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},EA=500,CA=600,wA="_blank",RA="http://localhost";class am{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function SA(t,e,n,r=EA,i=CA){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},vA),{width:r.toString(),height:i.toString(),top:s,left:o}),u=et().toLowerCase();n&&(a=bv(u)?wA:n),Dv(u)&&(e=e||RA,l.scrollbars="yes");const h=Object.entries(l).reduce((d,[_,v])=>`${d}${_}=${v},`,"");if(nT(u)&&a!=="_self")return IA(e||"",a),new am(null);const c=window.open(e||"",a,h);J(c,t,"popup-blocked");try{c.focus()}catch{}return new am(c)}function IA(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA="__/auth/handler",TA="emulator/auth/handler",AA=encodeURIComponent("fac");async function lm(t,e,n,r,i,s){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Mi,eventId:i};if(e instanceof $v){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Tc(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,c]of Object.entries(s||{}))o[h]=c}if(e instanceof fo){const h=e.getScopes().filter(c=>c!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${AA}=${encodeURIComponent(l)}`:"";return`${NA(t)}?${bi(a).slice(1)}${u}`}function NA({config:t}){return t.emulator?Lf(t,TA):`https://${t.authDomain}/${kA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu="webStorageSupport";class xA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qv,this._completeRedirectFn=eA,this._overrideRedirectResult=XT}async _openPopup(e,n,r,i){var s;Rn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await lm(e,n,r,Bc(),i);return SA(e,o,Mf())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await lm(e,n,r,Bc(),i);return OT(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Rn(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await yA(e),r=new nA(e);return n.register("authEvent",i=>(J(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Tu,{type:Tu},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Tu];o!==void 0&&n(!!o),wn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=aA(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Wv()||bf()||Ll()}}const PA=xA;var um="@firebase/auth",cm="1.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function DA(t){Ri(new xr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gv(t)},u=new uT(r,i,s,l);return pT(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ri(new xr("auth-internal",e=>{const n=Ol(e.getProvider("auth").getImmediate());return(r=>new LA(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zn(um,cm,OA(t)),Zn(um,cm,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA=5*60,MA=qg("authIdTokenMaxAge")||bA;let dm=null;const jA=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>MA)return;const i=n==null?void 0:n.token;dm!==i&&(dm=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function UA(t=ny()){const e=Xd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=hT(t,{popupRedirectResolver:PA,persistence:[KT,xT,qv]}),r=qg("authTokenSyncURL");if(r){const s=jA(r);IT(n,s,()=>s(n.currentUser)),ST(n,o=>s(o))}const i=Vg("auth");return i&&mT(n,`http://${i}`),n}DA("Browser");const FA={apiKey:"AIzaSyDe0ZfHtpKXrg0-UOjsBfVYx10YMBkT7pA",authDomain:"flux-bbbdc.firebaseapp.com",projectId:"flux-bbbdc",storageBucket:"flux-bbbdc.appspot.com",messagingSenderId:"322357398073",appId:"1:322357398073:web:ee4403314c949f43be1be8"},lt=x.createContext({}),WA=[{name:"tsuki",pass:"kitsu"},{name:"werly",pass:"yew"},{name:"arin",pass:"levi"}],GA="http://localhost:5173/runeflux",nE={users:WA,domain:GA},Ai=[{id:"KL01",type:"KEEPER",subtype:"LIVING",name:"Ernest",effects:[],text:""},{id:"KL02",type:"KEEPER",subtype:"LIVING",name:"Ghost",effects:["LOCATION_MORYTANIA__CHANGE_BROTHERS"],text:"Reveals its origins when in a specific location."},{id:"KL03",type:"KEEPER",subtype:"LIVING",name:"Duke Horacio",effects:[],text:""},{id:"KL04",type:"KEEPER",subtype:"LIVING",name:"Father Aereck",effects:[],text:""},{id:"KL05",type:"KEEPER",subtype:"LIVING",name:"Cook",effects:[],text:""},{id:"KL06",type:"KEEPER",subtype:"LIVING",name:"Drunken Dwarf",effects:["DISCARD_OR_DRAW_RANDOM_1_2"],text:"Once per turn, randomly draw or discard between 1 - 2 cards"},{id:"KL07",type:"KEEPER",subtype:"LIVING",name:"Archmage Sedridor",effects:["DESTROY_1"],text:"Once per turn, choose one rune keeper to destroy."},{id:"KL08",type:"KEEPER",subtype:"LIVING",name:"King Roald",effects:[],text:""},{id:"KL09",type:"KEEPER",subtype:"LIVING",name:"Ava",effects:[],text:""},{id:"KL10",type:"KEEPER",subtype:"LIVING",name:"Vampyre Juvinate",effects:["STEAL_RUNE_CROSSBOW"],text:"Once per turn, steal the rune crossbow from another player."},{id:"KL11",type:"KEEPER",subtype:"LIVING",name:"Goblin",effects:[],text:""},{id:"KL12",type:"KEEPER",subtype:"LIVING",name:"Imp",effects:[],text:"At the end of a players turn or when discarded teleport to another player."},{id:"KL13",type:"KEEPER",subtype:"LIVING",name:"Aris Maye",effects:[],text:"When using the Scry and Acquire card, don't discard it."},{id:"KL14",type:"KEEPER",subtype:"LIVING",name:"Reldo",effects:[],text:"When using the Historical Records card, don't discard it."},{id:"KLM01",type:"KEEPER",subtype:"LIVING",name:"Torag",effects:["STEAL_KEEPER"],text:"Once per turn, steal Dharok or Karil."},{id:"KLM02",type:"KEEPER",subtype:"LIVING",name:"Verac",effects:["STEAL_KEEPER"],text:"Once per turn, steal Guthan or Ahrim"},{id:"KLM03",type:"KEEPER",subtype:"LIVING",name:"Guthan",effects:["STEAL_KEEPER"],text:"Once per turn, steal Torag or Karil"},{id:"KLM04",type:"KEEPER",subtype:"LIVING",name:"Dharok",effects:["STEAL_KEEPER"],text:"Once per turn, steal Verac or Ahrim"},{id:"KLM05",type:"KEEPER",subtype:"LIVING",name:"Karil",effects:["STEAL_KEEPER"],text:"Once per turn, steal Verac or Dharok"},{id:"KLM06",type:"KEEPER",subtype:"LIVING",name:"Ahrim",effects:["STEAL_KEEPER"],text:"Once per turn, steal Torag or Guthan"},{id:"KR01",type:"KEEPER",subtype:"RUNE",name:"Mind Rune",effects:[],text:""},{id:"KR02",type:"KEEPER",subtype:"RUNE",name:"Chaos Rune",effects:["WORMHOLE"],text:"Once per turn, choose to draw 1 and play it."},{id:"KR03",type:"KEEPER",subtype:"RUNE",name:"Air Rune",effects:[],text:""},{id:"KR04",type:"KEEPER",subtype:"RUNE",name:"Water Rune",effects:[],text:""},{id:"KR05",type:"KEEPER",subtype:"RUNE",name:"Earth Rune",effects:[],text:""},{id:"KR06",type:"KEEPER",subtype:"RUNE",name:"Fire Rune",effects:[],text:""},{id:"KR07",type:"KEEPER",subtype:"RUNE",name:"Nature Rune",effects:["DESTROY_1"],text:"Once per turn, choose one equipment keeper to destroy"},{id:"KR08",type:"KEEPER",subtype:"RUNE",name:"Law Rune",effects:["TELEPORT"],text:"Once per turn, teleport to a random location."},{id:"KR09",type:"KEEPER",subtype:"RUNE",name:"Cosmic Rune",effects:["RULE_RANDOM"],text:"Once per turn, randomize one non location rule."},{id:"KE01",type:"KEEPER",subtype:"EQUIPMENT",name:"Ghostspeak Amulet",effects:["SUMMON_GHOST"],text:"Once per turn, choose to summon a ghost."},{id:"KE02",type:"KEEPER",subtype:"EQUIPMENT",name:"Anti Dragonfire Shield",effects:["DESTROY_1"],text:"Once per turn, can destroy elvarg creeper."},{id:"KE03",type:"KEEPER",subtype:"EQUIPMENT",name:"Air Staff",effects:[],text:""},{id:"KE04",type:"KEEPER",subtype:"EQUIPMENT",name:"Rune Crossbow",effects:["DESTROY_1"],text:"Once per turn, choose one living keeper to destroy"},{id:"KE05",type:"KEEPER",subtype:"EQUIPMENT",name:"Avas Attractor",effects:["STEAL_1_FROM_HAND"],text:"Once per turn, attract a card to your hand from an opposing player of your choice."},{id:"KE06",type:"KEEPER",subtype:"EQUIPMENT",name:"Dramen Staff",effects:["TELEPORT"],text:"Once per turn, teleport to Zanaris."},{id:"KE07",type:"KEEPER",subtype:"EQUIPMENT",name:"Rune Scimitar",effects:[],text:""},{id:"K01",type:"KEEPER",subtype:"",name:"Cake",effects:["DRAW_1"],text:"Once per turn, choose to draw 1 card."},{id:"K02",type:"KEEPER",subtype:"",name:"Anti Poison",effects:["DESTROY_1"],text:"Once per turn, can destroy the poison creeper."},{id:"CR01",type:"CREEPER",subtype:"EQUIPMENT_CREEPER",name:"Elvarg",effects:["LOCATION_CRANDOR"],text:"A creeper that attaches to equipment disabling any use effects and preventing that player from winning."},{id:"CR02",type:"CREEPER",subtype:"LIVING_CREEPER",name:"Poison",effects:[],text:"A creeper that attaches to a living keeper disabling any use effects and preventing that player from winning."},{id:"CR03",type:"CREEPER",subtype:"LIVING_CREEPER",name:"Wizard Mind Bomb",effects:[],text:"Attaches to living keepers disabling, effects and prevents winning."},{id:"G01",type:"GOAL",subtype:"",name:"Your First Spell",effects:[],text:"To cast your first spell you must acquire the following reagents: |air rune| or |air staff|, |mind rune|."},{id:"G02",type:"GOAL",subtype:"",name:"Restless Ghost",effects:[],text:"In the cemetary of lumbridge you must put the ghost to rest. QUEST REQUIREMENTS: |ghost|, |ghostspeak amulet|, |father aereck|"},{id:"G03",type:"GOAL",subtype:"",name:"Ready To Slay A Dragon",effects:[],text:"Speak to |Duke Horacio| to get your |anti dragonfire shield|, then you can believe you can fight a dragon."},{id:"G04",type:"GOAL",subtype:"",name:"Dragon Slayer",effects:[],text:"Find your way to |crandor|, off the coast of misthalin and fight the dragon known as |Elvarg|. |anti dragonfire shield| is required."},{id:"G05",type:"GOAL",subtype:"",name:"Cook's Assistant",effects:[],text:"For most new adventurers, they end up helping |Cook| get ingredients for his |Cake| for the eternal duke's birthday."},{id:"G06",type:"GOAL",subtype:"",name:"Lumbridge Citizens",effects:[],text:"Collection type: lumbridge residents including the likes of |Duke Horacio|, |Cook| and |Father Aereck|"},{id:"G07",type:"GOAL",subtype:"",name:"Elemental Runes",effects:[],text:"Collection type: any 3 of |Air rune|, |Water rune|, |Earth rune| or |Fire rune|"},{id:"G08",type:"GOAL",subtype:"",name:"Rune Mysteries",effects:[],text:"The path to unlocking runecraft requires the power of Air, QUEST REQUIREMENTS: |Air Rune|, |Archmage Sedridor|, |Duke Horacio|"},{id:"G09",type:"GOAL",subtype:"",name:"How to become a Chaos Dwarf",effects:[],text:"Under the curse of zamorak dwarves that use magic end up becoming corrupt and turning into chaos dwarves, requirements: |Drunken Dwarf|, |Wizard Mind Bomb|"},{id:"G10",type:"GOAL",subtype:"",name:"Drunken Wizard",effects:[],text:"A wizards favourite drinks got to be a |wizard mind bomb| right, so bring one to |Archmage Sedridor| for reasons."},{id:"G11",type:"GOAL",subtype:"",name:"Rock Cake",effects:[],text:"A secret cake baked only by dwarfs, requirements: |Drunken Dwarf|, |Cake|"},{id:"G12",type:"GOAL",subtype:"",name:"Alchemy",effects:[],text:"To cast alchemy spell you must have a |Nature rune| and |Fire Rune|"},{id:"G13",type:"GOAL",subtype:"",name:"Cursed",effects:[],text:"Not the spell, but someone who gains all 3 creepers must have bad luck right well now they can win, |Elvarg|, |Wizard Mind Bomb|, |Poison|"},{id:"G14",type:"GOAL",subtype:"",name:"Regicide",effects:[],text:"Requirements: |King Roald|, |Poison|. Wait this isn't how regicide goes."},{id:"G15",type:"GOAL",subtype:"",name:"Animal Magnetism",effects:[],text:"The quest all aspiring newbie rangers rush to for some QoL ammo reservation, Requirements: |Ava|, |Ghostspeak Amulet|, |Ava's Attractor|"},{id:"G16",type:"GOAL",subtype:"",name:"Ranged Setup",effects:[],text:"The power houses of early game range. Requirements: |Rune Crossbow|, |Ava's Attractor|"},{id:"G17",type:"GOAL",subtype:"",name:"Draynor Manor",effects:[],text:"Collection type: residents of draynor manor |Ernest|, |Ava|, |Ghost|"},{id:"G18",type:"GOAL",subtype:"",name:"Swampmans Nightmares",effects:[],text:"|Rune Crossbow| and |Vampyre Juvinate|. You get the rest."},{id:"G19",type:"GOAL",subtype:"",name:"Entrana",effects:[],text:"Collection Type: |Law Rune|, |Dramen Staff|"},{id:"G20",type:"GOAL",subtype:"",name:"Smuggler",effects:[],text:"Since equipment isn't allowed on entrana, find a way to get them there. Requirements: |Entrana|, |equipment_subtype| and |equipment_subtype| keepers"},{id:"G21",type:"GOAL",subtype:"",name:"Misthalins Nobility",effects:[],text:"Collection Type: |King Roald|, |Duke Horacio|"},{id:"G22",type:"GOAL",subtype:"",name:"Mind Goblin",effects:[],text:"They exist. |Mind Rune|, |Goblin|"},{id:"G23",type:"GOAL",subtype:"",name:"Zanaris",effects:[],text:"Collection Type: |Cosmic Rune|, |Dramen Staff|"},{id:"G24",type:"GOAL",subtype:"",name:"Catalytic Runes",effects:[],text:"Collection Type: |Mind Rune|, |Chaos Rune|"},{id:"G25",type:"GOAL",subtype:"",name:"Utility Runes",effects:[],text:"Collection Type: |Law Rune|, |Nature Rune|, |Cosmic Rune|"},{id:"G26",type:"GOAL",subtype:"",name:"Misthalins Altars",effects:[],text:"Collection Type: |Water Rune|, |Earth Rune|"},{id:"G27",type:"GOAL",subtype:"",name:"Zamorak",effects:[],text:"Collection Type: |Wilderness|, |Imp|, |Chaos Rune|"},{id:"G28",type:"GOAL",subtype:"",name:"Starter Monsters",effects:[],text:"Collection Type: |Imp|, |Goblin|, |Ernest(he's a chicken right)|"},{id:"G29",type:"GOAL",subtype:"",name:"Morytania's Undead",effects:[],text:"Collection Type: |Morytania|, |Ghost|, |Vampyre Juvinate|"},{id:"G30",type:"GOAL",subtype:"",name:"Port Phasmatys",effects:[],text:"Collection Type: |Ghost|, |Ghost|, |Ghost|"},{id:"G31",type:"GOAL",subtype:"",name:"Chaos",effects:[],text:"Collection Type: |Abyss|, |Chaos Rune|"},{id:"G32",type:"GOAL",subtype:"",name:"Juvinile 'Rare Drop'",effects:[],text:"After defeating a |Vampyre juvinate|, you have been graced with the staff of utmost versatility the |Air Staff|."},{id:"G33",type:"GOAL",subtype:"",name:"Tribrid",effects:[],text:"Collection Type: |Rune Scimitar|, |Rune Crossbow|, |Air Staff|"},{id:"G34",type:"GOAL",subtype:"",name:"Melee Setup",effects:[],text:"Collection Type: |Rune Scimitar|, |Anti dragonfire shield|"},{id:"G35",type:"GOAL",subtype:"",name:"Chaos Dwarf",effects:[],text:"Collection Type: |Chaos Rune|, |Drunken Dwarf|"},{id:"G36",type:"GOAL",subtype:"",name:"Poison Removal",effects:[],text:"just gotta drink |Anti Poison| to cure |Poison|."},{id:"G37",type:"GOAL",subtype:"",name:"Prevent Toxicity?",effects:[],text:"Does a |Anti Poison| protect from being told to sit in the |Wilderness|."},{id:"G38",type:"GOAL",subtype:"",name:"Varrock",effects:[],text:"Collection type: |Aris Maye|, |Reldo|, |King Roald|"},{id:"G39",type:"GOAL",subtype:"",name:"Recipe for Disaster",effects:[],text:"A long journey begins after speaking to the |Cook|. Freeing the members of the banquet will require help from |Aris Maye|."},{id:"G40",type:"GOAL",subtype:"",name:"Plot Twisting Chicken",effects:[],text:"Didn't you know that |Ernest| the chicken was actually a astral projection from the evil chicken shrine in |Zanaris|."},{id:"GM01",type:"GOAL",subtype:"",name:"Spear and Shield",effects:[],text:"A spear that can pierce anything(|Verac|) and an impenetrable shield(|Torag|)."},{id:"GM02",type:"GOAL",subtype:"",name:"Risk and Safety",effects:[],text:"Stay close to 0 hitpoints(|Dharok|) and Heal up to full(|Guthan|)."},{id:"GM03",type:"GOAL",subtype:"",name:"Plash and Pierce",effects:[],text:"The sound of magic(|Ahrim|) and crossbows(|Karil|) resounds through the crypts."},{id:"RL01",type:"RULE",subtype:"LOCATION",name:"Misthalin",effects:["LOCATION","MISTHALIN"],text:"When this card is in play, draw 1 at the end of each turn."},{id:"RL02",type:"RULE",subtype:"LOCATION",name:"Abyss",effects:["LOCATION","ABYSS"],text:"Once per turn, choose whether to draw 1 and play it."},{id:"RL03",type:"RULE",subtype:"LOCATION",name:"Asgarnia",effects:["LOCATION","ASGARNIA"],text:"When this card is in play, there can be 2 different goals in play. Only 1 is required to win."},{id:"RL04",type:"RULE",subtype:"LOCATION",name:"Morytania",effects:["LOCATION","MORYTANIA"],text:"When this card is in play, Ghosts have a 10% chance to spawn at the end of turns."},{id:"RL05",type:"RULE",subtype:"LOCATION",name:"Wilderness",effects:["LOCATION","WILDERNESS"],text:"When this card is in play, once per turn, choose a keeper to challenge and steal."},{id:"RL06",type:"RULE",subtype:"LOCATION",name:"Entrana",effects:["LOCATION","ENTRANA"],text:"When this card is in play, on arrival everyone must discard all equipment keepers in play."},{id:"RL07",type:"RULE",subtype:"LOCATION",name:"Crandor",effects:["LOCATION","CRANDOR"],text:"When this card is in play, at the end of every turn discard one card."},{id:"RL08",type:"RULE",subtype:"LOCATION",name:"Zanaris",effects:["LOCATION","ZANARIS"],text:"When this card is in play, each turn one rule will randomize except location."},{id:"RB01",type:"RULE",subtype:"BASIC",name:"Draw 2",effects:["RULE_DRAW","2"],text:"When this card is in play, each player will draw 2 cards per turn."},{id:"RB02",type:"RULE",subtype:"BASIC",name:"Draw 3",effects:["RULE_DRAW","3"],text:"When this card is in play, each player will draw 3 cards per turn."},{id:"RB03",type:"RULE",subtype:"BASIC",name:"Draw 4",effects:["RULE_DRAW","4"],text:"When this card is in play, each player will draw 4 cards per turn."},{id:"RB04",type:"RULE",subtype:"BASIC",name:"Draw 5",effects:["RULE_DRAW","5"],text:"When this card is in play, each player will draw 5 cards per turn."},{id:"RB05",type:"RULE",subtype:"BASIC",name:"Play 2",effects:["RULE_PLAY","2"],text:"When this card is in play, each player will play 2 cards per turn."},{id:"RB06",type:"RULE",subtype:"BASIC",name:"Play 3",effects:["RULE_PLAY","3"],text:"When this card is in play, each player will play 3 cards per turn."},{id:"RB07",type:"RULE",subtype:"BASIC",name:"Play 4",effects:["RULE_PLAY","4"],text:"When this card is in play, each player will play 4 cards per turn."},{id:"RB08",type:"RULE",subtype:"BASIC",name:"Play All",effects:["RULE_PLAY","99"],text:"When this card is in play, each player will play all cards per turn."},{id:"RB09",type:"RULE",subtype:"BASIC",name:"Hand Limit 1",effects:["RULE_HAND_LIMIT","1"],text:"When this card is in play, each player has to discard down to 1 card to end their turn."},{id:"RB10",type:"RULE",subtype:"BASIC",name:"Hand Limit 2",effects:["RULE_HAND_LIMIT","2"],text:"When this card is in play, each player has to discard down to 2 card to end their turn."},{id:"RB11",type:"RULE",subtype:"BASIC",name:"Hand Limit 3",effects:["RULE_HAND_LIMIT","3"],text:"When this card is in play, each player has to discard down to 3 card to end their turn."},{id:"RB12",type:"RULE",subtype:"BASIC",name:"Keeper Limit 3",effects:["RULE_KEEPER_LIMIT","3"],text:"When this card is in play, each player can have 3 keepers in play."},{id:"RB13",type:"RULE",subtype:"BASIC",name:"Keeper Limit 4",effects:["RULE_KEEPER_LIMIT","4"],text:"When this card is in play, each player can have 4 keepers in play."},{id:"RB14",type:"RULE",subtype:"BASIC",name:"Keeper Limit 1",effects:["RULE_KEEPER_LIMIT","1"],text:"When this card is in play, each player can have 1 keepers in play."},{id:"RB15",type:"RULE",subtype:"BASIC",name:"Teleblock",effects:["TELEBLOCK"],text:"When this card is in play, location can not be changed."},{id:"A01",type:"ACTION",subtype:"",name:"Teleport",effects:["TELEPORT"],text:"teleport to a random location."},{id:"A02",type:"ACTION",subtype:"",name:"Rules Reset",effects:["RULES_RESET"],text:"When played, all rules will be returned to their base values from the start of the game."},{id:"A03",type:"ACTION",subtype:"",name:"Pick up all keepers",effects:["KEEPERS_TO_HAND"],text:"When played, all players must pick up all their keepers in play."},{id:"A04",type:"ACTION",subtype:"",name:"Trade Hands",effects:["TRADE_HANDS"],text:"When played, choose a player to trade hands with."},{id:"A05",type:"ACTION",subtype:"",name:"Reset One Rule",effects:["RULE_RESET_CHOOSE"],text:"When played, choose 1 rule to reset."},{id:"A06",type:"ACTION",subtype:"",name:"Reset half of rules(upto)",effects:["RULE_RESET_CHOOSE","HALF","OPTIONAL"],text:"When played, choose up to half the rules to reset."},{id:"A07",type:"ACTION",subtype:"",name:"Draw 3, Play 2",effects:["DRAW_3_PLAY_2"],text:"Draw 3 cards, out of those 3 cards you must choose 2 to play and finally discard the remaining card."},{id:"A08",type:"ACTION",subtype:"",name:"Draw 2, Use'em",effects:["DRAW_2_PLAY_2"],text:"Draw 2 cards and immediately use them."},{id:"A09",type:"ACTION",subtype:"",name:"Draw 5, discard 2",effects:["DRAW_5_PLAY_3"],text:"Draw 5 cards, out of those 5 cards you must choose 3 to play and finally discard the remaining cards."},{id:"A10",type:"ACTION",subtype:"",name:"Everyone draw 1",effects:["DRAW_1","ALL_PLAYERS"],text:"All players draw 1 card."},{id:"A11",type:"ACTION",subtype:"",name:"Steal A Keeper",effects:["KEEPER_STEAL_CHOOSE"],text:"Choose a keeper on field to take into your possession."},{id:"A12",type:"ACTION",subtype:"",name:"Exchange Keepers",effects:["KEEPER_EXCHANGE_CHOOSE"],text:"Choose 2 keepers on the field and swap their locations."},{id:"A13",type:"ACTION",subtype:"",name:"Everyone Discard 1",effects:["DISCARD_1","ALL_PLAYERS"],text:"Each player will immediately discard one card."},{id:"A14",type:"ACTION",subtype:"",name:"Summon Ghost",effects:["SUMMON_GHOST"],text:"Summon a ghost to add to your keepers."},{id:"A15",type:"ACTION",subtype:"",name:"Destroy Keeper",effects:["DESTROY_1"],text:"Choose a keeper/creeper to destroy."},{id:"A16",type:"ACTION",subtype:"",name:"Scry and Acquire",effects:["DRAW_SPECIFIC_PURE"],text:"See into the future and choose a card to acquire."},{id:"A17",type:"ACTION",subtype:"",name:"Historical Research",effects:["DRAW_SPECIFIC_DISCARD"],text:"Look through past records and find the location of a card to acquire."},{id:"A18",type:"ACTION",subtype:"",name:"Direct Teleport",effects:["TELEPORT_SPECIFIC"],text:"Choose any location to teleport to."},{id:"CO01",type:"COUNTER",subtype:"",name:"Telestop",effects:["TELESTOP_OR_LOCATION_MISTHALIN"],text:"Out of turn - Stop a teleport| During turn - Teleport to Misthalin."},{id:"CO02",type:"COUNTER",subtype:"",name:"Cancel Plans",effects:["GOALSTOP_OR_GOALS_NONE"],text:"Out of turn - Stop a goal card| During turn - Discard all goals in play."},{id:"CO03",type:"COUNTER",subtype:"",name:"Belay That",effects:["ACTIONSTOP_OR_DISCARD_1_ALL"],text:"Out of turn - Stop an action card| During turn - Everyone discards one."},{id:"CO04",type:"COUNTER",subtype:"",name:"That's Mine",effects:["KEEPER_STEALSTOP_OR_KEEPER_STEAL"],text:"Out of turn - Steal a keeper being stolen.| During turn - Choose a keeper to steal."},{id:"CO05",type:"COUNTER",subtype:"",name:"Veto",effects:["RULESTOP_OR_RULE_RESET_3"],text:"Out of turn - Stop another player while they are playing a rule card| During turn - Reset up to 3 rules."},{id:"CO06",type:"COUNTER",subtype:"",name:"It's a Trap",effects:["KEEPER_DISCARD_REFLECT_OR_KEEPER_DISCARD"],text:"Out of turn - Reflect a destroy card.| During turn - Choose a keeper to discard."}],ia={allCards:Ai},po=(()=>{const t=async v=>{const{auth:C,setUser:R,db:f}=v;await ET(C).then(p=>{console.log(p)}),await kT(C,async p=>{if(p){const E=p.uid,k=oe(f,`users/${E}`),O=await e(f,E);if(O){for(const M of Ai){let P=!1;for(const A in O.cardCatalog)A===M.id&&(P=!0);P||(O.cardCatalog[`${M.id}`]=0)}await ce(k,O),R(M=>Object.assign({},M,O?{...O}:{}))}else{const M={username:"Anon",uid:E,icon:"",goalImages:!1,isReady:!1,stats:{wins:0,played:0,totalRounds:0},cardCatalog:{},goalWins:{}};for(const P of Ai)M.cardCatalog[`${P.id}`]=0;await ce(k,M),R(P=>Object.assign({},P,M))}}else nm(C)})},e=async(v,C)=>{const R=oe(v,"/users/");let f=!1;return await Dn(je(R,`/${C}/`)).then(async p=>{const E=await p.val();E&&(f=E)}),f},n=(v,C,R,f)=>{const{cardNum:p,cardKey:E,amount:k}=R;switch(v){case"CARD":return r(C,E??"",p??NaN,f);case"WINS":return i(C,k??NaN,f);case"ROUNDS":return s(C,k??NaN,f);case"PLAYED":return o(C,k??NaN,f);case"GOALWON":return a(C,E??"",p??NaN,f)}},r=async(v,C,R,f)=>{try{const p=oe(v,`/users/${f}/cardCatalog/${C}`);await ce(p,R)}catch(p){return console.error(p)}},i=async(v,C,R)=>{try{const f=oe(v,`/users/${R}/stats/wins`);await ce(f,C)}catch(f){return console.error(f)}},s=async(v,C,R)=>{try{const f=oe(v,`/users/${R}/stats/totalRounds`);await ce(f,C)}catch(f){return console.error(f)}},o=async(v,C,R)=>{try{const f=oe(v,`/users/${R}/stats/played`);await ce(f,C)}catch(f){return console.error(f)}},a=async(v,C,R,f)=>{try{const p=oe(v,`/users/${f}/goalWins/${C}`);await ce(p,R)}catch(p){return console.error(p)}};return{createAccountAnon:t,uploadStats:n,changeName:async(v,C,R)=>{try{const f=oe(v,`users/${R}/username`);await ce(f,C)}catch(f){return console.error(f)}},changeIcon:async(v,C,R)=>{try{const f=oe(v,`/users/${R}/icon`);await ce(f,C)}catch(f){return console.error(f)}},changeGoalSetting:async(v,C,R)=>{try{const f=oe(v,`/users/${R}/goalImages`);await ce(f,C)}catch(f){return console.error(f)}},signout:async v=>{try{await nm(v)}catch(C){return console.error(C)}},testUserSignIn:(v,C,R)=>{let f=!1;for(const p of nE.users)p.name.toLowerCase()===v&&p.pass.toLowerCase()===C&&(f=!0);return f&&R(p=>({...p,username:v,uid:v,isReady:!1,goalImages:!0,cardCatalog:{},goalWins:{},icon:"",stats:{wins:0,played:0,totalRounds:0}})),f},combineUsers:async(v,C,R)=>{try{const f=oe(v,`/users/${C}`),p=oe(v,"/users/");await Dn(je(p,`${R}`)).then(async E=>{const k=await E.val();await ce(f,k)})}catch(f){console.error(f)}}}})();function KA(){const t=x.useContext(lt),e=rn(),[n,r]=x.useState(!1);return m.jsx("div",{className:"main_menu",children:m.jsxs("div",{className:"menu",children:[!t.user&&m.jsx(Jw,{className:"menu_link",to:"/login",children:"Log in"}),t.user?m.jsx("button",{className:"menu_link",onClick:()=>e("/account"),children:"Continue to Game"}):m.jsx("button",{className:`menu_link ${n?"disabled":""}`,onClick:async()=>{await po.createAccountAnon(t),r(()=>!0)},children:n?"Please Wait..":"Play as Guest"})]})})}function Mr({isSideBox:t,targets:e,player:n,isTurn:r,selectedPlayerGroup:i,selectPlayerGroup:s}){const{user:o}=x.useContext(lt),a=()=>{if(!i)return!1;for(const h of i)if(h.user.uid===(n==null?void 0:n.user.uid))return!0;return!1},l=()=>{if(!e||!e.length)return!1;for(const h of e)if(h===(n==null?void 0:n.user.uid))return!0;return!1},u=()=>{if(n!=null&&n.hand)return n==null?void 0:n.hand.map((h,c)=>m.jsx("span",{className:"mini_hand_card",style:{transform:`translate(calc(-50% * ${c}), 50px)`}},`${h.id}_small_hand__${c}`))};return t?m.jsx("div",{style:l()?{boxShadow:"inset 0px 0px 12px crimson"}:{},className:`user_bar ${r?"highlight":""} ${a()?"selected":""}`,onContextMenu:h=>{h.preventDefault(),s&&s(n??{})},children:m.jsxs("p",{children:[(n==null?void 0:n.user.username)??"Not Signed In!",m.jsx("span",{className:`${n==null?void 0:n.user.icon} ready_mark`}),u()]})}):m.jsxs("div",{className:"user_bar game_user__this_user",children:[m.jsx("p",{children:(o==null?void 0:o.username)??"Not Signed In!"}),m.jsx("p",{className:"user_bar__uid",children:(o==null?void 0:o.uid)??"000000000"})]})}const HA=["KL01","KL02","KL03","KL04","KL05","KL06","KL07","KL08","KL09","KL10","KL11","KL12","KL13","KL14","KR01","KR02","KR03","KR04","KR05","KR06","KR07","KR08","KR09","KE01","KE02","KE03","KE04","KE05","KE06","KE07","K01","K02","CR01","CR02","CR03","G01","G02","G03","G04","G05","G06","G07","G08","G09","G10","G11","G12","G13","G14","G15","G16","G17","G18","G19","G20","G21","G22","G23","G24","G25","G26","G27","G28","G29","G30","G31","G32","G33","G34","G35","G36","G37","G38","G39","G40","RL01","RL02","RL03","RL04","RL05","RL06","RL07","RL08","RB01","RB02","RB03","RB04","RB05","RB06","RB07","RB08","RB09","RB10","RB11","RB12","RB13","RB14","RB15","A01","A02","A03","A04","A05","A06","A07","A08","A09","A10","A11","A12","A13","A14","A15","A16","A17","A18","CO01","CO02","CO03","CO04","CO05","CO06"],rE={startDeck:HA},$A=1,BA=1,zA=5,VA=2,YA="MISTHALIN",qA=!1,os={drawAmount:$A,playAmount:BA,handLimit:zA,keeperLimit:VA,location:YA,teleblock:qA},Ml=(()=>{const t=R=>{Array.isArray(R.deck.discard)&&!R.deck.discard.length&&(R.deck.discard=!1),Array.isArray(R.goal)&&!R.goal.length&&(R.goal=!1);for(const f of R.players)Array.isArray(f.hand)&&!f.hand.length&&(f.hand=!1),Array.isArray(f.keepers)&&!f.keepers.length&&(f.keepers=!1);return R},e=R=>((!Array.isArray(R.hand)||!R.hand.length)&&(R.hand=!1),(!Array.isArray(R.keepers)||!R.keepers.length)&&(R.keepers=!1),R),n=(R,f=!1,p=!1)=>({user:R,hand:f,keepers:p}),r=(R,f,p)=>({uid:R,username:f,isReady:p,goalImages:!0,cardCatalog:{},goalWins:{},stats:{wins:0,played:0,totalRounds:0},icon:""}),i=(R,f)=>{for(let p=0;p<R.length;p++)if(f===R[p].user.uid)return{state:R[p],index:p,error:!1};return{state:R[0],index:0,error:!0}},s=(R,f)=>{for(let p=0;p<R.length;p++)if(f===R[p].uid)return{state:R[p],index:p,error:!1};return{state:R[0],index:0,error:!0}},o=(R,f,p,E,k)=>{const O=oe(R,`/games/${f==null?void 0:f.uid}`),M={deck:{pure:[],discard:!1},history:{played:!1,discarded:!1},players:[{user:f??r("00001","hally",!1),hand:!1,keepers:!1}],goal:!1,turn:{player:!1,drawn:0,played:0,temporary:{hand:[],play:0},duel:{cooldown:!1,player1:{id:"",num:0},player2:{id:"",num:0}}},phases:{morytania:0,abyss:0,wilderness:0},pending:!1,isWon:!1,round:0};for(const A of rE.startDeck)for(const j of ia.allCards)A===j.id&&M.deck.pure.push(j);const P={game:Object.assign({},M,{rules:os}),id:(f==null?void 0:f.uid)??"",displayName:(f==null?void 0:f.username)??"",inProgress:!1,users:[f??{uid:"0"}]};ce(O,P),p((f==null?void 0:f.uid)??""),d(R,(f==null?void 0:f.uid)??"",f??{},E,p,k)},a=async(R,f,p)=>{try{const E=oe(R,`/games/${f}`);await Ik(E),p(()=>"")}catch(E){return console.error(E)}},l=async(R,f,p,E)=>{try{const k=oe(R),O=[];await Dn(je(k,"/games")).then(async M=>{const P=await M.val();for(const A in P)O.push(P[A]),i(P[A].game.players,f).error||E(()=>P[A].id);p(O)})}catch{return"ERROR"}},u=(R,f,p,E,k,O)=>{const M=oe(R);Dn(je(M,`/games/${f}/`)).then(async P=>{const A=await P.val();if(A.game.players.length>=4)return console.error("Full Room");for(const Re of A.game.players)if(Re.user.uid===p.uid)return;const j=n(p),F=[...A.game.players];F.push(j),await ce(je(M,`/games/${f}/game/players`),F);const Y=[...A.users];Y.push(p),await ce(je(M,`/games/${f}/users`),Y),E(f),d(R,f,p,k,E,O)})},h=(R,f)=>{const p=R.slice(0,f),E=R.slice(f+1);return p.concat(E)},c=async(R,f,p,E)=>{const k=oe(R);await Dn(je(k,`/games/${f}/`)).then(async O=>{const M=await O.val(),P=[...M.game.players],A=P.findIndex(xe=>xe.user.uid===p.uid),j=h(P,A);await ce(je(k,`/games/${f}/game/players`),j);const F=[...M.users],Y=F.findIndex(xe=>xe.uid===p.uid),Re=h(F,Y);await ce(je(k,`/games/${f}/users`),Re),E(()=>"")})},d=(R,f,p,E,k,O)=>{const M=oe(R);Iv(je(M,`/games/${f}/users`),async P=>{const A=await P.val();await l(R,p.uid,E,k),console.log(A);const j=[];for(const F of A)F.isReady&&j.push(!0);O(F=>j.length===A.length?!0:F)})};return{convertGameToRoomGame:t,convertToRoomPlayer:e,createRoom:o,destroyRoom:a,getRooms:l,joinRoom:u,leaveRoom:c,connectRoom:d,readyUp:async(R,f,p,E)=>{try{const k=oe(R);await Dn(je(k,`/games/${f}/users`)).then(async O=>{const M=await O.val(),P=s(M,p.uid);console.log(M,P);const A=[...M];A[P.index].isReady=!0,await ce(je(k,`/games/${f}/users`),A),E(j=>{if(j)return{...j,isReady:!0}})})}catch(k){console.error(k)}},startGame:async(R,f)=>{const p=oe(R,`/games/${f}/inProgress`);await ce(p,!0)},checkGameInProgress:async(R,f)=>{try{const p=oe(R);let E=!1;return await Dn(je(p,`/games/${f}/inProgress`)).then(async k=>{await k.val()&&(E=!0)}),E}catch(p){console.error(p)}}}})();function Uf({pageType:t}){const{setUser:e}=x.useContext(lt),n=rn();return m.jsxs("div",{className:"lobby_header",children:[m.jsx("h1",{className:"header_title",children:"RuneFlux"}),m.jsxs("div",{children:[m.jsx("button",{className:`header_btn ${t==="ACCOUNT"?"selected":""}`,onClick:()=>{n("/account")},children:"Account"}),m.jsx("button",{className:`header_btn ${t==="CATALOG"?"selected":""}`,onClick:()=>{n("/catalog")},children:"Card Catalog"}),m.jsx("button",{className:`header_btn ${t==="LOBBY"?"selected":""}`,onClick:()=>{n("/lobby")},children:"Lobby"}),m.jsx("button",{className:"header_btn",onClick:async()=>{e(()=>{}),n("/")},children:"Log Out"})]})]})}function QA(){var A;const{createRoom:t,getRooms:e,joinRoom:n,leaveRoom:r,destroyRoom:i,readyUp:s,connectRoom:o}=Ml,{db:a,user:l,joinedGameID:u,setJoinedGameID:h,setUser:c}=x.useContext(lt),d=rn(),[_,v]=x.useState([]),[C,R]=x.useState(!1),[f,p]=x.useState(!1),[E,k]=x.useState(!1);x.useEffect(()=>{if(!l)return d("/");_.length||setTimeout(()=>{e(a,(l==null?void 0:l.uid)??"",v,h)},500),u&&l&&o(a,u,l,v,h,R),console.log(_)},[u,l]),x.useEffect(()=>{C&&d("/game")},[C]);const O=()=>{for(const j of _)if(j.id===u)return j;return null},M=()=>_.map((j,F)=>m.jsxs("div",{className:"room_link",onClick:()=>{n(a,j.id,l??{},h,v,R)},children:[m.jsx("p",{children:j.users[0].username}),m.jsxs("p",{children:[Array.isArray(j.game.players)&&j.game.players.length," / 4 Players"]})]},`room_${F}`)),P=()=>{let j;for(const F of _)F.id===u&&(j=F);if(j)return j.users.map((F,Y)=>m.jsxs("div",{className:"lobby_player",children:[m.jsxs("p",{children:[Y+1,"). ",F.username," ",F.isReady?m.jsx("span",{className:"check ready_mark"}):m.jsx("span",{className:"cross ready_mark"})]}),(l==null?void 0:l.uid)===F.uid&&m.jsx("button",{className:"lobby_link",onClick:()=>{l&&(l.uid===u?i(a,u,h):r(a,u,l,h))},children:"Leave"})]},`lobby_player__${Y}`))};return u?m.jsxs("div",{className:"main_menu",children:[m.jsx(Mr,{}),m.jsxs("div",{className:"menu lobby",children:[m.jsxs("h2",{children:["Current Session: ",(A=O())==null?void 0:A.users[0].username]}),P(),m.jsx("button",{style:{marginTop:"1rem"},className:`lobby_link ${E?"disabled":""}`,onClick:()=>{k(()=>!0),s(a,u,l??{},c)},children:"Ready"})]})]}):m.jsxs("div",{className:"main_menu",children:[m.jsx(Uf,{pageType:"LOBBY"}),m.jsx(Mr,{}),m.jsxs("div",{className:"menu lobby",children:[m.jsx("div",{className:"refresh_btn__container",children:m.jsx("button",{className:`refresh_btn ${f?"disabled":""}`,onClick:()=>{!l||f||(e(a,l==null?void 0:l.uid,v,h),p(()=>!0),setTimeout(()=>p(()=>!1),15e3))}})}),_.length?M():m.jsx("div",{children:m.jsx("h3",{style:{textAlign:"center"},children:"No Rooms"})}),m.jsx("button",{style:{width:"50%",alignSelf:"center"},className:"lobby_link",onClick:()=>t(a,l,h,v,R),children:"Create Game"})]})]})}const XA=[{id:"RLF01",type:"RULE",subtype:"LOCATION",name:"Location",effects:[],text:""},{id:"RBF02",type:"RULE",subtype:"BASIC",name:"Draw",effects:[],text:""},{id:"RBF03",type:"RULE",subtype:"BASIC",name:"Play",effects:[],text:""},{id:"RBF04",type:"RULE",subtype:"BASIC",name:"Hand Limit",effects:[],text:""},{id:"RBF05",type:"RULE",subtype:"BASIC",name:"Keeper Limit",effects:[],text:""},{id:"RBF06",type:"RULE",subtype:"BASIC",name:"Teleblock",effects:[],text:""}],fm={fakeCards:XA},JA=(()=>{const t=I=>{const g={airObj:!1,mindRune:!1};return I.forEach(S=>{S.id==="KR01"&&(g.mindRune=!0),(S.id==="KR03"||S.id==="KE03")&&(g.airObj=!0)}),g.airObj&&g.mindRune?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},e=I=>{const g={ghost:!1,ghostSpeak:!1,fatherAereck:!1};return I.forEach(S=>{S.id==="KL02"&&(g.ghost=!0),S.id==="KL04"&&(g.fatherAereck=!0),S.id==="KE01"&&(g.ghostSpeak=!0)}),g.ghost&&g.ghostSpeak&&g.fatherAereck?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},n=I=>{const g={dukeH:!1,antifireShield:!1};return I.forEach(S=>{S.id==="KL03"&&(g.dukeH=!0),S.id==="KE02"&&(g.antifireShield=!0)}),g.antifireShield&&g.dukeH?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},r=(I,g)=>{const S={crandor:!1,elvarg:!1,antifireShield:!1};return I.forEach(V=>{V.id==="CR01"&&(S.elvarg=!0),V.id==="KE02"&&(S.antifireShield=!0)}),g==="CRANDOR"&&(S.crandor=!0),S.crandor&&S.elvarg&&S.antifireShield?{hasWon:!0,bypassCreeper:!0}:{hasWon:!1,bypassCreeper:!1}},i=I=>{const g={cook:!1,cake:!1};return I.forEach(S=>{S.id==="K01"&&(g.cake=!0),S.id==="KL05"&&(g.cook=!0)}),g.cook&&g.cake?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},s=I=>{const g={dukeH:!1,cook:!1,fatherAereck:!1};I.forEach(V=>{V.id==="KL04"&&(g.fatherAereck=!0),V.id==="KL05"&&(g.cook=!0),V.id==="KL03"&&(g.dukeH=!0)});let S=0;return g.dukeH&&S++,g.cook&&S++,g.fatherAereck&&S++,S>=2?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},o=I=>{const g={airR:!1,fireR:!1,earthR:!1,waterR:!1};I.forEach(V=>{V.id==="KR03"&&(g.airR=!0),V.id==="KR06"&&(g.fireR=!0),V.id==="KR05"&&(g.earthR=!0),V.id==="KR04"&&(g.waterR=!0)});let S=0;return g.airR&&S++,g.earthR&&S++,g.fireR&&S++,g.waterR&&S++,S>=3?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},a=I=>{const g={airR:!1,archmage:!1,dukeH:!1};return I.forEach(S=>{S.id==="KR03"&&(g.airR=!0),S.id==="KL03"&&(g.dukeH=!0),S.id==="KL07"&&(g.archmage=!0)}),g.airR&&g.archmage&&g.dukeH?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},l=I=>{const g={drunkenDwarf:!1,wizardBeer:!1};return I.forEach(S=>{S.id==="KL06"&&(g.drunkenDwarf=!0),S.id==="CR03"&&(g.wizardBeer=!0)}),g.drunkenDwarf&&g.wizardBeer?{hasWon:!0,bypassCreeper:!0}:{hasWon:!1,bypassCreeper:!1}},u=I=>{const g={archmage:!1,wizardBeer:!1};return I.forEach(S=>{S.id==="KL07"&&(g.archmage=!0),S.id==="CR03"&&(g.wizardBeer=!0)}),g.archmage&&g.wizardBeer?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},h=I=>{const g={drunkenDwarf:!1,cake:!1};return I.forEach(S=>{S.id==="KL06"&&(g.drunkenDwarf=!0),S.id==="K01"&&(g.cake=!0)}),g.cake&&g.drunkenDwarf?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},c=I=>{const g={natureR:!1,fireR:!1};return I.forEach(S=>{S.id==="KR07"&&(g.natureR=!0),S.id==="KR06"&&(g.fireR=!0)}),g.fireR&&g.natureR?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},d=I=>{let g=0;return I.forEach(S=>{S.type==="CREEPER"&&g++}),g>=3?{hasWon:!0,bypassCreeper:!0}:{hasWon:!1,bypassCreeper:!1}},_=I=>{const g={kingRoald:!1,poison:!1};return I.forEach(S=>{S.id==="KL08"&&(g.kingRoald=!0),S.id==="CR02"&&(g.poison=!0)}),g.kingRoald&&g.poison?{hasWon:!0,bypassCreeper:!0}:{hasWon:!1,bypassCreeper:!1}},v=I=>{const g={ava:!1,ghostSpeak:!1,avaDevice:!1};return I.forEach(S=>{S.id==="KL09"&&(g.ava=!0),S.id==="KE05"&&(g.avaDevice=!0),S.id==="KE01"&&(g.ghostSpeak=!0)}),g.ava&&g.avaDevice&&g.ghostSpeak?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},C=I=>{const g={runeXbow:!1,avaDevice:!1};return I.forEach(S=>{S.id==="KE04"&&(g.runeXbow=!0),S.id==="KE05"&&(g.avaDevice=!0)}),g.avaDevice&&g.runeXbow?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},R=I=>{const g={ernest:!1,ava:!1,ghost:!1};return I.forEach(S=>{S.id==="KL01"&&(g.ernest=!0),S.id==="KL09"&&(g.ava=!0),S.id==="KL02"&&(g.ghost=!0)}),g.ava&&g.ernest&&g.ghost?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},f=I=>{const g={runeXbow:!1,vampyreJuvinate:!1};return I.forEach(S=>{S.id==="KE04"&&(g.runeXbow=!0),S.id==="KL10"&&(g.vampyreJuvinate=!0)}),g.runeXbow&&g.vampyreJuvinate?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},p=I=>{const g={lawR:!1,dramanStaff:!1};return I.forEach(S=>{S.id==="KE06"&&(g.dramanStaff=!0),S.id==="KR08"&&(g.lawR=!0)}),g.lawR&&g.dramanStaff?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},E=(I,g)=>{const S={entrana:!1,equipment:0};return I.forEach(V=>{V.subtype==="EQUIPMENT"&&(S.equipment+=1)}),g==="ENTRANA"&&(S.entrana=!0),S.entrana&&S.equipment>=2?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},k=I=>{const g={kingRoald:!1,dukeH:!1};return I.forEach(S=>{S.id==="KL03"&&(g.dukeH=!0),S.id==="KL08"&&(g.kingRoald=!0)}),g.dukeH&&g.kingRoald?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},O=I=>{const g={mindR:!1,goblin:!1};return I.forEach(S=>{S.id==="KR01"&&(g.mindR=!0),S.id==="KL11"&&(g.goblin=!0)}),g.goblin&&g.mindR?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},M=I=>{const g={cosmicR:!1,dramanStaff:!1};return I.forEach(S=>{S.id==="KE06"&&(g.dramanStaff=!0),S.id==="KR09"&&(g.cosmicR=!0)}),g.cosmicR&&g.dramanStaff?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},P=I=>{const g={mindR:!1,chaosR:!1};return I.forEach(S=>{S.id==="KR01"&&(g.mindR=!0),S.id==="KR02"&&(g.chaosR=!0)}),g.chaosR&&g.mindR?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},A=I=>{const g={lawR:!1,natureR:!1,cosmicR:!1};return I.forEach(S=>{S.id==="KE07"&&(g.natureR=!0),S.id==="KR08"&&(g.lawR=!0),S.id==="KR09"&&(g.cosmicR=!0)}),g.cosmicR&&g.lawR&&g.natureR?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},j=I=>{const g={waterR:!1,earthR:!1};return I.forEach(S=>{S.id==="KR05"&&(g.earthR=!0),S.id==="KR04"&&(g.waterR=!0)}),g.earthR&&g.waterR?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},F=(I,g)=>{const S={wilderness:!1,imp:!1,chaosR:!1};return I.forEach(V=>{V.id==="KL12"&&(S.imp=!0),V.id==="KR02"&&(S.chaosR=!0)}),g==="WILDERNESS"&&(S.wilderness=!0),S.chaosR&&S.wilderness&&S.imp?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},Y=I=>{const g={imp:!1,goblin:!1,ernest:!1};return I.forEach(S=>{S.id==="KL12"&&(g.imp=!0),S.id==="KL11"&&(g.goblin=!0),S.id==="KL01"&&(g.ernest=!0)}),g.ernest&&g.goblin&&g.imp?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},Re=(I,g)=>{const S={morytania:!1,ghost:!1,vampyreJuvinate:!1};return I.forEach(V=>{V.id==="KL02"&&(S.ghost=!0),V.id==="KL10"&&(S.vampyreJuvinate=!0)}),g==="MORYTANIA"&&(S.morytania=!0),S.ghost&&S.morytania&&S.vampyreJuvinate?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},xe=I=>{const g={ghost:0};return I.forEach(S=>{S.id==="KL02"&&(g.ghost+=1)}),g.ghost>=3?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},Et=(I,g)=>{const S={abyss:!1,chaosR:!1};return I.forEach(V=>{V.id==="KR02"&&(S.chaosR=!0)}),g==="ABYSS"&&(S.abyss=!0),S.abyss&&S.chaosR?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},on=I=>{const g={vampyreJuvinate:!1,airStaff:!1};return I.forEach(S=>{S.id==="KL10"&&(g.vampyreJuvinate=!0),S.id==="KE03"&&(g.airStaff=!0)}),g.airStaff&&g.vampyreJuvinate?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},Dt=I=>{const g={runeScimitar:!1,runeXbow:!1,airStaff:!1};return I.forEach(S=>{S.id==="KE07"&&(g.runeScimitar=!0),S.id==="KE04"&&(g.runeXbow=!0),S.id==="KE03"&&(g.airStaff=!0)}),g.airStaff&&g.runeScimitar&&g.runeXbow?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},tt=I=>{const g={runeScimitar:!1,antfireShield:!1};return I.forEach(S=>{S.id==="KE07"&&(g.runeScimitar=!0),S.id==="KE02"&&(g.antfireShield=!0)}),g.antfireShield&&g.runeScimitar?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},H=I=>{const g={chaosR:!1,drunkenDwarf:!1};return I.forEach(S=>{S.id==="KR02"&&(g.chaosR=!0),S.id==="KL06"&&(g.drunkenDwarf=!0)}),g.chaosR&&g.drunkenDwarf?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},B=I=>{const g={antiPoison:!1,poison:!1};return I.forEach(S=>{S.id==="CR02"&&(g.poison=!0),S.id==="K02"&&(g.antiPoison=!0)}),g.antiPoison&&g.poison?{hasWon:!0,bypassCreeper:!0}:{hasWon:!1,bypassCreeper:!1}},Q=(I,g)=>{const S={antiPoison:!1,wilderness:!1};return I.forEach(V=>{V.id==="K02"&&(S.antiPoison=!0)}),g==="WILDERNESS"&&(S.wilderness=!0),S.antiPoison&&S.wilderness?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},X=I=>{const g={arisMaye:!1,reldo:!1,kingRoald:!1};return I.forEach(S=>{S.id==="KL14"&&(g.reldo=!0),S.id==="KL13"&&(g.arisMaye=!0),S.id==="KL08"&&(g.kingRoald=!0)}),g.kingRoald&&g.arisMaye&&g.reldo?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},w=I=>{const g={arisMaye:!1,cook:!1};return I.forEach(S=>{S.id==="KL05"&&(g.cook=!0),S.id==="KL13"&&(g.arisMaye=!0)}),g.cook&&g.arisMaye?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},N=(I,g)=>{const S={ernest:!1,zanaris:!1};return I.forEach(V=>{V.id==="KL01"&&(S.ernest=!0)}),g==="ZANARIS"&&(S.zanaris=!0),S.ernest&&S.zanaris?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},L=I=>{const g={verac:!1,torag:!1};return I.forEach(S=>{S.id==="KLM02"&&(g.verac=!0),S.id==="KLM01"&&(g.torag=!0)}),g.torag&&g.verac?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},D=I=>{const g={guthan:!1,dharok:!1};return I.forEach(S=>{S.id==="KLM03"&&(g.guthan=!0),S.id==="KLM04"&&(g.dharok=!0)}),g.guthan&&g.dharok?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},W=I=>{const g={karil:!1,ahrim:!1};return I.forEach(S=>{S.id==="KLM05"&&(g.karil=!0),S.id==="KLM06"&&(g.ahrim=!0)}),g.karil&&g.ahrim?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}};return{compareKeepersToGoal:(I,g,S)=>{if(!g)return{hasWon:!1,bypassCreeper:!1};switch(g.id){case"G01":return t(I);case"G02":return e(I);case"G03":return n(I);case"G04":return r(I,S);case"G05":return i(I);case"G06":return s(I);case"G07":return o(I);case"G08":return a(I);case"G09":return l(I);case"G10":return u(I);case"G11":return h(I);case"G12":return c(I);case"G13":return d(I);case"G14":return _(I);case"G15":return v(I);case"G16":return C(I);case"G17":return R(I);case"G18":return f(I);case"G19":return p(I);case"G20":return E(I,S);case"G21":return k(I);case"G22":return O(I);case"G23":return M(I);case"G24":return P(I);case"G25":return A(I);case"G26":return j(I);case"G27":return F(I,S);case"G28":return Y(I);case"G29":return Re(I,S);case"G30":return xe(I);case"G31":return Et(I,S);case"G32":return on(I);case"G33":return Dt(I);case"G34":return tt(I);case"G35":return H(I);case"G36":return B(I);case"G37":return Q(I,S);case"G38":return X(I);case"G39":return w(I);case"G40":return N(I,S);case"GM01":return L(I);case"GM02":return D(I);case"GM03":return W(I)}return{hasWon:!1,bypassCreeper:!1}}}})();var _e=(t=>(t[t.INIT=0]="INIT",t[t.CHANGE_TURN=1]="CHANGE_TURN",t[t.DRAWN_ADD=2]="DRAWN_ADD",t[t.PLAYED_ADD=3]="PLAYED_ADD",t[t.TEMPORARY_HAND__BEGIN=4]="TEMPORARY_HAND__BEGIN",t[t.TEMPORARY_HAND__END=5]="TEMPORARY_HAND__END",t[t.TEMPORARY_HAND_CARD__ADD=6]="TEMPORARY_HAND_CARD__ADD",t[t.TEMPORARY_HAND_CARD__REMOVE=7]="TEMPORARY_HAND_CARD__REMOVE",t[t.TEMPORARY_PLAY_CHANGE=8]="TEMPORARY_PLAY_CHANGE",t[t.DUEL_BEGIN=9]="DUEL_BEGIN",t[t.DUEL_ROLL__PLAYER_1=10]="DUEL_ROLL__PLAYER_1",t[t.DUEL_ROLL__PLAYER_2=11]="DUEL_ROLL__PLAYER_2",t[t.DUEL_END=12]="DUEL_END",t[t.DUEL_COOLDOWN=13]="DUEL_COOLDOWN",t))(_e||{}),ue=(t=>(t[t.INIT=0]="INIT",t[t.DECK_REPLACE__PURE=1]="DECK_REPLACE__PURE",t[t.DECK_REPLACE__DISCARD_TO_PURE=2]="DECK_REPLACE__DISCARD_TO_PURE",t[t.DECK_REMOVE__PURE_TOP=3]="DECK_REMOVE__PURE_TOP",t[t.DECK_REMOVE__PURE_SPECIFIC=4]="DECK_REMOVE__PURE_SPECIFIC",t[t.DECK_REMOVE__DISCARD_SPECIFIC=5]="DECK_REMOVE__DISCARD_SPECIFIC",t[t.DECK_SHUFFLE__PURE=6]="DECK_SHUFFLE__PURE",t[t.DECK_ADD__DISCARD_BOT=7]="DECK_ADD__DISCARD_BOT",t))(ue||{}),he=(t=>(t[t.INIT=0]="INIT",t[t.RULE_CHANGE__DRAW=1]="RULE_CHANGE__DRAW",t[t.RULE_CHANGE__PLAY=2]="RULE_CHANGE__PLAY",t[t.RULE_CHANGE__KEEPER_LIMIT=3]="RULE_CHANGE__KEEPER_LIMIT",t[t.RULE_CHANGE__HAND_LIMIT=4]="RULE_CHANGE__HAND_LIMIT",t[t.RULE_CHANGE__LOCATION=5]="RULE_CHANGE__LOCATION",t[t.RULE_CHANGE__LOCATION_RANDOM=6]="RULE_CHANGE__LOCATION_RANDOM",t[t.RULE_CHANGE__TELEBLOCK=7]="RULE_CHANGE__TELEBLOCK",t[t.RULE_RESET__CHOICE=8]="RULE_RESET__CHOICE",t[t.RULE_RESET__ALL=9]="RULE_RESET__ALL",t))(he||{}),Z=(t=>(t[t.INIT=0]="INIT",t[t.HAND_CARDS__ADD=1]="HAND_CARDS__ADD",t[t.HAND_CARDS__REMOVE=2]="HAND_CARDS__REMOVE",t[t.KEEPER_CARDS__ADD=3]="KEEPER_CARDS__ADD",t[t.KEEPER_CARDS__REMOVE=4]="KEEPER_CARDS__REMOVE",t[t.KEEPER_CARDS__EXCHANGE=5]="KEEPER_CARDS__EXCHANGE",t[t.KEEPER_COOLDOWN__SET=6]="KEEPER_COOLDOWN__SET",t[t.TRADE_HANDS=7]="TRADE_HANDS",t))(Z||{}),Gt=(t=>(t[t.INIT=0]="INIT",t[t.GOAL_REPLACE__SINGLE=1]="GOAL_REPLACE__SINGLE",t[t.GOAL_ADD__MULTI=2]="GOAL_ADD__MULTI",t[t.GOAL_REPLACE__MULTI=3]="GOAL_REPLACE__MULTI",t[t.GOAL_RESET=4]="GOAL_RESET",t))(Gt||{});const{compareKeepersToGoal:ZA}=JA,{convertGameToRoomGame:eN,convertToRoomPlayer:tN}=Ml,mo=(()=>{const t=(w,N)=>{const{player:L,victim:D,amount:W,duelCard:K,cards:I,init:g}=N.payload,{db:S,gameId:V}=N.payload.upload,{temporary:de}=w,ee=Math.ceil(Math.random()*100);switch(N.type){case _e.INIT:return Object.assign({},w,{...g});case _e.CHANGE_TURN:return a("TURN",S,{turnState:Object.assign({},w,{player:L,drawn:0,played:0})},V),Object.assign({},w,{player:L,drawn:0,played:0});case _e.DRAWN_ADD:return a("TURN",S,{turnState:Object.assign({},w,{player:L,drawn:W})},V),Object.assign({},w,{player:L,drawn:W});case _e.PLAYED_ADD:return a("TURN",S,{turnState:Object.assign({},w,{played:W})},V),Object.assign({},w,{played:W});case _e.TEMPORARY_HAND__BEGIN:return a("TURN",S,{turnState:Object.assign({},w,{temporary:{...de,hand:I?[...I]:[],play:W??0}})},V),Object.assign({},w,{temporary:{...de,hand:I?[...I]:[]},play:W??0});case _e.TEMPORARY_HAND_CARD__REMOVE:return a("TURN",S,{turnState:Object.assign({},w,{temporary:{...de,hand:I?[...I]:[]}})},V),Object.assign({},w,{temporary:{...de,hand:I?[...I]:[]}});case _e.TEMPORARY_HAND_CARD__ADD:return a("TURN",S,{turnState:Object.assign({},w,{temporary:{...de,hand:de&&I?[...de.hand,...I]:[]}})},V),Object.assign({},w,{temporary:{...de,hand:de&&I?[...de.hand,...I]:[]}});case _e.TEMPORARY_PLAY_CHANGE:return a("TURN",S,{turnState:Object.assign({},w,{temporary:{...de,play:W}})},V),Object.assign({},w,{temporary:{...de,play:W}});case _e.DUEL_BEGIN:return a("TURN",S,{turnState:Object.assign({},w,{duel:{cooldown:!0,card:K,player1:{id:L,num:0},player2:{id:D,num:0}}})},V),Object.assign({},w,{duel:{cooldown:!0,card:K,player1:{id:L,num:0},player2:{id:D,num:0}}});case _e.DUEL_ROLL__PLAYER_1:return a("TURN",S,{turnState:Object.assign({},w,{duel:{...w.duel,player1:{...w.duel.player1,num:ee}}})},V),Object.assign({},w,{duel:{...w.duel,player1:{...w.duel.player1,num:ee}}});case _e.DUEL_ROLL__PLAYER_2:return a("TURN",S,{turnState:Object.assign({},w,{duel:{...w.duel,player2:{...w.duel.player2,num:ee}}})},V),Object.assign({},w,{duel:{...w.duel,player2:{...w.duel.player2,num:ee}}});case _e.DUEL_END:return a("TURN",S,{turnState:Object.assign({},w,{duel:{...w.duel,player1:{id:"",num:0},player2:{id:"",num:0}}})},V),Object.assign({},w,{duel:{...w.duel,player1:{id:"",num:0},player2:{id:"",num:0}}});case _e.DUEL_COOLDOWN:return a("TURN",S,{turnState:Object.assign({},w,{duel:{...w.duel,cooldown:!1}})},V),Object.assign({},w,{duel:{...w.duel,cooldown:!1}});default:return w}},e=(w,N)=>{const{init:L,ruleKey:D,amount:W,location:K,teleblock:I}=N.payload,{db:g,gameId:S}=N.payload.upload,V=["MISTHALIN","ASGARNIA","MORYTANIA","ABYSS","WILDERNESS"],de=Math.floor(Math.random()*V.length);switch(N.type){case he.INIT:return Object.assign({},w,{...L});case he.RULE_CHANGE__DRAW:return a("RULES",g,{ruleState:{...w,drawAmount:W??1}},S),Object.assign({},w,{drawAmount:W??1});case he.RULE_CHANGE__PLAY:return a("RULES",g,{ruleState:{...w,playAmount:W??1}},S),Object.assign({},w,{playAmount:W??1});case he.RULE_CHANGE__HAND_LIMIT:return a("RULES",g,{ruleState:{...w,handLimit:W??1}},S),Object.assign({},w,{handLimit:W??1});case he.RULE_CHANGE__KEEPER_LIMIT:return a("RULES",g,{ruleState:{...w,keeperLimit:W??1}},S),Object.assign({},w,{keeperLimit:W??1});case he.RULE_CHANGE__LOCATION:return a("RULES",g,{ruleState:{...w,location:K??"MISTHALIN"}},S),Object.assign({},w,{location:K??"MISTHALIN"});case he.RULE_CHANGE__LOCATION_RANDOM:return a("RULES",g,{ruleState:{...w,location:V[de]}},S),Object.assign({},w,{location:V[de]});case he.RULE_CHANGE__TELEBLOCK:return a("RULES",g,{ruleState:{...w,teleblock:I??!1}},S),Object.assign({},w,{teleblock:I??!1});case he.RULE_RESET__CHOICE:return a("RULES",g,{ruleState:{...w,[`${D}`]:j(D??"")}},S),Object.assign({},w,{[`${D}`]:j(D??"")});case he.RULE_RESET__ALL:return a("RULES",g,{ruleState:{...os}},S),Object.assign({},w,{...os});default:return w}},n=(w,N)=>{const{amount:L,cardIndex:D,init:W}=N.payload,{db:K,gameId:I}=N.payload.upload;let g=N.payload.pile;switch(g.length&&(g=Y(g),g=F(g)),N.type){case ue.INIT:return Object.assign({},w,{...W});case ue.DECK_REPLACE__PURE:return a("DECK_PURE",K,{deckState:g},I),Object.assign({},w,{pure:[...g]});case ue.DECK_REPLACE__DISCARD_TO_PURE:return a("DECK_PURE",K,{deckState:[...g]},I),a("DECK_DISCARD",K,{deckState:[]},I),Object.assign({},w,{pure:[...g],discard:[]});case ue.DECK_REMOVE__PURE_TOP:return a("DECK_PURE",K,{deckState:[...w.pure.slice(0,w.pure.length-(L??0))]},I),Object.assign({},w,{pure:[...w.pure.slice(0,w.pure.length-(L??0))]});case ue.DECK_REMOVE__PURE_SPECIFIC:return a("DECK_PURE",K,{deckState:[...B(w.pure,D??0)]},I),Object.assign({},w,{pure:[...B(w.pure,D??0)]});case ue.DECK_REMOVE__DISCARD_SPECIFIC:return a("DECK_DISCARD",K,{deckState:[...B(w.discard,D??0)]},I),Object.assign({},w,{discard:[...B(w.discard,D??0)]});case ue.DECK_ADD__DISCARD_BOT:return a("DECK_DISCARD",K,{deckState:g?[...g].concat([...w.discard]):[]},I),Object.assign({},w,{discard:g?[...g].concat([...w.discard]):[]});case ue.DECK_SHUFFLE__PURE:return a("DECK_PURE",K,{deckState:[...Q(w.pure)]},I),Object.assign({},w,{pure:[...Q(w.pure)]});default:return w}},r=(w,N)=>{const{playerId:L,init:D,cards:W,targetPlayerId:K,keepersToExchange:I,cardIndex:g,cooldown:S}=N.payload,{db:V,gameId:de}=N.payload.upload,ee=[...w],He=k(w,L),Ve=K?k(w,K):{state:{},index:0};switch(N.type){case Z.INIT:return D?[...D]:[];case Z.HAND_CARDS__ADD:return ee[He.index]=Object.assign({},He.state,{hand:[...He.state.hand,...W??[]]}),a("PLAYER",V,{playersState:ee,playerId:L},de),[...ee];case Z.HAND_CARDS__REMOVE:return ee[He.index].hand=W?[...W]:[],a("PLAYER",V,{playersState:ee,playerId:L},de),[...ee];case Z.KEEPER_CARDS__ADD:return ee[He.index]=Object.assign({},He.state,{keepers:He.state.keepers?[...He.state.keepers,...W??[]]:[...W??[]]}),a("PLAYER",V,{playersState:ee,playerId:L},de),[...ee];case Z.KEEPER_CARDS__REMOVE:return ee[He.index].keepers=W?[...W]:[],a("PLAYER",V,{playersState:ee,playerId:L},de),[...ee];case Z.KEEPER_CARDS__EXCHANGE:return I?(console.log(I),ee[I[0].playerIndex]=Object.assign({},ee[I[0].playerIndex],{keepers:[...B([...ee[I[0].playerIndex].keepers],I[0].index),W?W[1]:{}]}),ee[I[1].playerIndex]=Object.assign({},ee[I[1].playerIndex],{keepers:[...B([...ee[I[1].playerIndex].keepers],I[1].index),W?W[0]:{}]}),a("PLAYER",V,{playersState:ee,playerId:ee[I[0].playerIndex].user.uid},de),a("PLAYER",V,{playersState:ee,playerId:ee[I[1].playerIndex].user.uid},de),[...ee]):[...ee];case Z.KEEPER_COOLDOWN__SET:return ee[He.index].keepers[g??0].cooldown=S,a("PLAYER",V,{playersState:ee,playerId:L},de),[...ee];case Z.TRADE_HANDS:return ee[He.index]=Object.assign({},He.state,{hand:[...Ve.state.hand]}),ee[(Ve==null?void 0:Ve.index)??0]=Object.assign({},Ve==null?void 0:Ve.state,{hand:[...He.state.hand]}),a("PLAYER",V,{playersState:ee,playerId:L},de),a("PLAYER",V,{playersState:ee,playerId:K},de),[...ee];default:return w}},i=(w,N)=>{const{goals:L,replaceIndex:D}=N.payload,{db:W,gameId:K}=N.payload.upload;switch(N.type){case Gt.INIT:return L?[...L]:[];case Gt.GOAL_REPLACE__SINGLE:return a("GOAL",W,{goalState:L!=null&&L.length?[...L]:[]},K),[...L];case Gt.GOAL_ADD__MULTI:return a("GOAL",W,{goalState:L!=null&&L.length?[...w,...L]:[]},K),[...w,...L];case Gt.GOAL_REPLACE__MULTI:return a("GOAL",W,{goalState:D===0?[...L,w[1]]:[w[0],...L]},K),D===0?[...L,w[1]]:[w[0],...L];case Gt.GOAL_RESET:return a("GOAL",W,{goalState:[]},K),[];default:return w}},s=w=>{const N={deck:{pure:[],discard:[]},history:{played:[],discarded:[]},players:[{user:w??{username:"hal",uid:"000001",isReady:!0},hand:[],keepers:[],isReady:!1}],goal:[],round:0,pending:!1,counter:!1,isWon:!1,phases:{morytania:0,abyss:0,wilderness:0}};for(const D of rE.startDeck)for(const W of ia.allCards)D===W.id&&N.deck.pure.push(W);return Object.assign({},N,{rules:os,turn:{player:!1,drawn:0,played:0,temporary:{hand:[],play:0},duel:{cooldown:!1,card:null,player1:{id:"",num:0},player2:{id:"",num:0}}}})},o=async(w,N,L)=>{try{const D=oe(N,`/games/${w}/game`);await Dn(je(D,"/")).then(async W=>{const K=await W.val();L(K.deck,K.goal,K.rules,K.players,K.turn,K.round,K.pending,K.counter,K.isWon,K.phases,K.history)}),await Iv(D,async W=>{const K=await W.val();L(K.deck,K.goal,K.rules,K.players,K.turn,K.round,K.pending,K.counter,K.isWon,K.phases,K.history)})}catch(D){console.error(D)}},a=(w,N,L,D)=>{const{gameState:W,deckState:K,turnState:I,playersState:g,playerId:S,roundState:V,ruleState:de,cardState:ee,goalState:He,phaseState:Ve,historyState:_o}=L;switch(w){case"DECK_PURE":return u(N,K??[],D);case"DECK_DISCARD":return u(N,K??[],D,!0);case"RULES":return c(N,de??{},D);case"TURN":return h(N,I??{},D);case"PLAYER":return d(N,g??[],S??"",D);case"ROUND":return _(N,V??0,D);case"PENDING":return v(N,ee??!1,D);case"COUNTER":return C(N,ee??!1,D);case"GOAL":return R(N,He??[],D);case"WIN":return f(N,D);case"PHASE":return p(N,(Ve==null?void 0:Ve.location)??"",(Ve==null?void 0:Ve.amount)??0,D);case"HISTORY_PLAYED":return E(N,"played",_o??[],D);case"HISTORY_DISCARDED":return E(N,"discarded",_o??[],D);default:return l(N,W??{},D)}},l=async(w,N,L)=>{try{const D=eN(N),W=oe(w,`/games/${L}/game`);await ce(W,D)}catch(D){return console.error(D)}},u=async(w,N,L,D=!1)=>{try{const K=oe(w,`/games/${L}/game/deck/${D?"discard":"pure"}`);await ce(K,N.length?N:!1)}catch(W){return console.error(W)}},h=async(w,N,L)=>{try{const D=oe(w,`/games/${L}/game/turn`);await ce(D,Object.assign({},N,{temporary:{...N.temporary,hand:N.temporary.hand.length?N.temporary.hand:!1}}))}catch(D){return console.error(D)}},c=async(w,N,L)=>{try{const D=oe(w,`/games/${L}/game/rules`);await ce(D,N)}catch(D){return console.error(D)}},d=async(w,N,L,D)=>{try{const{state:W,index:K}=k(N,L),I=tN(W),g=oe(w,`/games/${D}/game/players/${K}`);await ce(g,I)}catch(W){return console.error(W)}},_=async(w,N,L)=>{try{const D=oe(w,`/games/${L}/game/round`);await ce(D,N)}catch(D){return console.error(D)}},v=async(w,N,L)=>{try{const D=oe(w,`/games/${L}/game/pending`);await ce(D,N)}catch(D){return console.error(D)}},C=async(w,N,L)=>{try{const D=oe(w,`/games/${L}/game/counter`);await ce(D,N)}catch(D){return console.error(D)}},R=async(w,N,L)=>{try{const D=oe(w,`/games/${L}/game/goal`);await ce(D,N!=null&&N.length?N:!1)}catch(D){return console.error(D)}},f=async(w,N)=>{try{const L=oe(w,`/games/${N}/game/isWon`);await ce(L,!0)}catch(L){return console.error(L)}},p=async(w,N,L,D)=>{try{const W=oe(w,`/games/${D}/game/phases/${N}`);await ce(W,L??0)}catch(W){return console.error(W)}},E=async(w,N,L,D)=>{try{const W=oe(w,`/games/${D}/game/history/${N}`);await ce(W,L.length?L:!1)}catch(W){return console.error(W)}},k=(w,N)=>{for(let L=0;L<w.length;L++)if(N===w[L].user.uid)return{state:w[L],index:L};return{state:w[0],index:0}},O=(w,N)=>{if(!w.keepers)return!1;for(const L of w.keepers)if(L.id===N)return L;return!1},M=w=>{for(const N of fm.fakeCards){if(w==="location"&&N.id==="RLF01")return{card:N,error:!1};if(w==="drawAmount"&&N.id==="RBF02")return{card:N,error:!1};if(w==="playAmount"&&N.id==="RBF03")return{card:N,error:!1};if(w==="handLimit"&&N.id==="RBF04")return{card:N,error:!1};if(w==="keeperLimit"&&N.id==="RBF05")return{card:N,error:!1};if(w==="teleblock"&&N.id==="RBF06")return{card:N,error:!1}}return{card:fm.fakeCards[0],error:!0}},P=w=>{if(w==="playAmount"||w==="drawAmount"||w==="handLimit"||w==="keeperLimit"||w==="location"||w==="teleblock")return M(w).card;for(const N of ia.allCards)if(w===N.id)return N;return ia.allCards[0]},A=(w,N)=>{for(let L=0;L<N.length;L++)if(w===N[L].id)return{state:N[L],index:L};return{state:N[0],index:0}},j=w=>{const N=os;for(const L in N)if(w===L)return N[L];return 0},F=w=>{for(const N of w)N.cooldown=!1;return w},Y=w=>{for(const N of w)N.attachment&&(w.push(N.attachment),N.attachment=null);return w},Re=w=>{const N=[],L=[];return w.forEach(D=>{D.type==="CREEPER"?N.push(D):L.push(D)}),{keepers:L,creepers:N}},xe=w=>{const N=Math.floor(Math.random()*w.length);return w[N].user.uid},Et=w=>{switch(w){case"GOAL":case"KEEPER":case"CREEPER":return!1;case"ACTION":case"COUNTER":case"RULE":return!0;default:return!0}},on=w=>{const N=[];for(const L of w)L.type==="CREEPER"&&N.push(L);return N},Dt=(w,N)=>{const L={keeper:null,index:0,playerIndex:0};return w.forEach((D,W)=>{D.keepers&&D.keepers.forEach((K,I)=>{K.id===N&&(L.keeper=K,L.index=I,L.playerIndex=W)})}),L},tt=(w,N,L)=>{const D={playerId:"",hasCreeper:!1,bypassCreeper:!1,hasWon:!1};return w.forEach(W=>{if(!W.keepers)return;const{hasWon:K,bypassCreeper:I}=ZA(W.keepers,N,L);K&&(W.keepers.forEach(g=>{g.type==="CREEPER"&&(D.hasCreeper=!0)}),D.hasWon=K,D.bypassCreeper=I,D.playerId=W.user.uid)}),console.log(D),D.playerId!==""&&!D.hasCreeper||D.hasCreeper&&D.bypassCreeper?D.playerId:!1},H=w=>w.round===0?3:w.rules.drawAmount-w.turn.drawn,B=(w,N)=>{if(!w.length)return w;const L=w.slice(0,N),D=w.slice(N+1);return L.concat(D)},Q=w=>{const N=[],L=[...w],D=w.length;for(let W=D;W>0;W--){const K=Math.floor(Math.random()*W);N.push(L[K]),L.splice(K,1)}return N};return{loadGame:s,connectGame:o,upload:a,uploadTable:l,getPlayer:k,getPlayerKeeper:O,getCardById:P,getFakeRuleCard:M,getDeckCardById:A,getInitRule:j,seperateCreepersAndKeepers:Re,chooseWhoGoesFirst:xe,checkShouldDiscard:Et,checkForCreepers:on,checkPlayersForKeeper:Dt,checkIfWon:tt,drawPhase:H,removeCard:B,shuffleDeck:Q,endTurn:(w,N,L,D,W)=>{const K=k(N,L.player.toString()),I=K.index<N.length-1?K.index+1:0;return D({type:1,payload:{player:N[I].user.uid,upload:{db:w,gameId:W}}}),!I},turnReducer:t,goalReducer:i,rulesReducer:e,playerReducer:r,deckReducer:n}})();function nN(){return m.jsx("div",{className:"deck_container",children:Array.from([0,1,2,3,4,5]).map(t=>m.jsx("div",{style:{transform:`rotateZ(-3deg) translate(calc(2px * ${t}), calc(-4px * ${t}))`},className:"card_back card deck_card"},`deck_card__${t}`))})}function rN({drawCards:t}){return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"underlay"}),m.jsxs("div",{className:"popup",children:[m.jsx(nN,{}),m.jsx("button",{className:"menu_link",onClick:t,children:"Draw Cards"})]})]})}function Vt({cardState:t,position:e,numberInLine:n,inspectKeeper:r,selectCard:i,selectedGoalGroup:s,selectGoalGroup:o}){const{user:a}=x.useContext(lt),[l,u]=x.useState(!1),[h,c]=x.useState(e==="HAND");x.useEffect(()=>{setTimeout(()=>{c(()=>!1)},300)},[]);const d=`translate(calc(-50% * ${n}), -250px)`,_=`translate(calc(-50% * ${n}), ${l?"-50px":"0"})`,v=()=>{if(!s)return!1;for(const k of s)if(k.state.id===t.state.id)return!0;return!1},C=()=>{if(a!=null&&a.cardCatalog&&(e==="HAND"||e==="SELECT"||e==="CATALOG")){const k=a==null?void 0:a.cardCatalog[`${t.state.id}`];if(!k)return"";if(k>999)return"gtrim twilight";if(k>499)return"gtrim";if(k>249)return"strim";if(k>49)return"btrim"}},R=k=>k.split("'").join("").split(" ").join("_").toLowerCase(),f=()=>t.state.text.split("|").map((k,O)=>m.jsx("span",{style:{color:O%2===1?"pink":"white"},children:k},`card_text__${O}`)),p=()=>t.state.text.split("|").map((k,O)=>{if(O%2===1)return m.jsx("div",{className:`${R(k)} goal_image`})}),E=()=>t.state.text.split("|").map((k,O)=>m.jsx("span",{className:"counter_p",children:k},`counter_text__${O}`));return t.state?m.jsxs("div",{className:`card ${C()} ${t.state.type.toLowerCase()} ${e==="PREVIOUS_PENDING"?"previous_pending":""} ${e==="PENDING"?"pending":""} ${e==="HAND"?"hand_card":""} ${v()?"goal_selected":""}`,style:e==="HAND"?{transform:h?d:_}:e==="CREEPER"?{transform:"scale(0.3) translate(-300px, -100px)"}:{},onMouseEnter:k=>{h||(k.stopPropagation(),u(!0))},onMouseLeave:k=>{k.stopPropagation(),u(!1)},onClick:r?()=>r({...t,playerIndex:0}):()=>i&&i(t),onContextMenu:k=>{k.preventDefault(),!(!o||t.state.type!=="GOAL")&&o(t)},children:[m.jsx("div",{className:"card_container__inner_left",children:m.jsx("div",{className:"card_header__background",children:m.jsx("h4",{className:"card_header__text",children:t.state.name.split(" ").join("_")})})}),m.jsxs("div",{className:"card_container__inner_right",children:[m.jsxs("h2",{children:[t.state.type,m.jsx("span",{className:`${t.state.subtype.toLowerCase()}_subtype icon card_subtype`})]}),m.jsx("h3",{className:"card_title",children:t.state.name}),m.jsx("hr",{className:"card_hr__thick"}),m.jsx("p",{children:t.state.type==="GOAL"?a!=null&&a.goalImages?"":f():t.state.type==="COUNTER"?E():t.state.text}),t.state.type!=="GOAL"&&m.jsx("div",{className:`${R(t.state.name)} card_image`}),(a==null?void 0:a.goalImages)&&t.state.type==="GOAL"&&m.jsx("div",{className:"goal_images",children:p()})]})]}):null}function Vc({hand:t,selectCard:e}){const n=()=>t.map((r,i)=>m.jsx(Vt,{cardState:{state:r,index:i},position:"HAND",numberInLine:i+1,selectCard:e},`hand_card_${i}`));return m.jsx("div",{className:"hand_container",children:n()})}function Ff({message:t,clearErrors:e}){return m.jsx("div",{className:"errors_container",onAnimationEnd:e,children:m.jsx("p",{className:"errors_message",children:t})})}function iN({cardState:t,table:e,localPlayer:n,playCard:r,discardCard:i,fromWormhole:s,selectedKeeperGroup:o,selectedPlayerGroup:a,selectedRuleGroup:l}){const[u,h]=x.useState([]),[c,d]=x.useState([]),{user:_}=x.useContext(lt),v=()=>{if(t.state.type==="COUNTER"&&e.turn.player!==(_==null?void 0:_.uid))return C();const{player:A,played:j,temporary:F}=e.turn;if(s){if(!F)return!1;const Y=(F==null?void 0:F.play)<1,Re=t.state.type==="ACTION"||t.state.type==="COUNTER"||t.state.subtype==="LOCATION"?f(t.state.id).error:!1;if(Y||Re)return[Y,!0,Re]}else{const Y=j>=e.rules.playAmount,Re=A===(_==null?void 0:_.uid),xe=t.state.type==="ACTION"||t.state.type==="COUNTER"||t.state.subtype==="LOCATION"?f(t.state.id).error:!1;if(Y||!Re||xe)return[Y,Re,xe]}return!1},C=()=>{const{type:A,subtype:j}=e.pending&&e.pending!==!0?e.pending:{type:"",subtype:""},F=!e.pending,Y=[];return t.state.id==="CO01"&&(j==="LOCATION"||R())&&Y.push(!1),t.state.id==="CO02"&&A==="GOAL"&&Y.push(!1),t.state.id==="CO03"&&A==="ACTION"&&Y.push(!1),t.state.id==="CO04"&&R()&&Y.push(!1),t.state.id==="CO05"&&j==="BASIC"&&Y.push(!1),t.state.id==="CO06"&&R()&&Y.push(!1),F||!Y.length?[F,!!Y.length]:!1},R=()=>{if(e.pending&&e.pending!==!0&&e.pending.effects&&e.pending.effects.length)return!!(t.state.id==="CO01"&&e.pending.effects.includes("TELEPORT")||t.state.id==="CO04"&&(e.pending.effects.includes("STEAL_RUNE_CROSSBOW")||e.pending.effects.includes("KEEPER_STEAL_CHOOSE")||e.pending.effects.includes("STEAL_KEEPER"))||t.state.id==="CO06"&&e.pending.effects.includes("DESTROY_1"))},f=A=>A==="A04"&&!a.length?{error:!1,warning:!0}:A==="A04"&&a[0].user.uid===(_==null?void 0:_.uid)?{error:!0,warning:!1}:A==="A05"&&!l.length?{error:!1,warning:!0}:A==="A06"&&!l.length?{error:!1,warning:!0}:A==="A11"&&!o.length?{error:!1,warning:!0}:A==="A11"&&e.players[o[0].playerIndex].user.uid===(_==null?void 0:_.uid)?{error:!0,warning:!1}:A==="A12"&&o.length<2?{warning:!0,error:!1}:A==="A15"&&!o.length?{warning:!0,error:!1}:A==="A15"&&e.players[o[0].playerIndex].user.uid===(_==null?void 0:_.uid)&&o[0].state.type!=="CREEPER"&&!o[0].state.attachment?{error:!0,warning:!1}:A==="CO04"&&!o.length?{warning:!0,error:!1}:A==="CO04"&&e.players[o[0].playerIndex].user.uid===(_==null?void 0:_.uid)?{error:!0,warning:!1}:A==="CO05"&&!l.length?{warning:!0,error:!1}:A==="CO06"&&!o.length?{warning:!0,error:!1}:A==="CO06"&&e.players[o[0].playerIndex].user.uid===(_==null?void 0:_.uid)&&o[0].state.type!=="CREEPER"&&!o[0].state.attachment?{error:!0,warning:!1}:t.state.subtype==="LOCATION"&&e.rules.teleblock?{warning:!0,error:!1}:{warning:!1,error:!1},p=A=>{const j=[];A[0]&&(!s&&(_==null?void 0:_.uid)===e.turn.player&&j.push("Play limit reached! End turn."),s&&j.push("Play limit reached! Discard down to 0."),(_==null?void 0:_.uid)!==e.turn.player&&t.state.type==="COUNTER"&&j.push("No card to counter.")),A[1]===!1&&(t.state.type==="COUNTER"?j.push("Doesn't counter that type of card."):j.push("Please wait for your turn.")),A[2]===!0&&j.push("Cannot select groups pertaining to yourself."),h(()=>[...j])},E=()=>h(()=>[]),k=()=>{if(s){const A=e.turn.temporary.play<1;if(!A)return[A]}else{const A=n.hand.length>e.rules.handLimit;if(!A)return[A]}return!1},O=A=>{const j=[];A[0]||(s?j.push(`Play ${e.turn.temporary.play} more.`):j.push("Hand limit has not been reached.")),d(()=>[...j])},M=()=>d(()=>[]),P=(A,j)=>A.map((F,Y)=>m.jsx(Ff,{message:F,clearErrors:j},`endturn_error__${Y}`));return m.jsxs("div",{className:"popup",children:[m.jsx(Vt,{cardState:t,position:"SELECT"}),m.jsxs("div",{className:"play_btn_group__card",children:[m.jsx("div",{className:"errors_container__play",children:u.length?P(u,E):null}),m.jsx("button",{className:`play_btn__card ${e.pending&&t.state.type!=="COUNTER"||v()?"disabled":""} ${f(t.state.id).warning?"warning":""}`,onClick:()=>{if(e.pending&&t.state.type!=="COUNTER")return;const A=v();if(A)return p(A);r(t.state,t.index)},children:"Play Card"}),m.jsx("div",{className:"errors_container__discard",children:c.length?P(c,M):null}),m.jsx("button",{className:`discard_btn__card ${e.pending||k()?"disabled":""}`,onClick:()=>{if(e.pending)return;const A=k();if(A)return O(A);i(t.index)},children:"Discard Card"})]})]})}function sN({rules:t,turn:e,targetedRule:n,selectedRuleGroup:r,selectRuleGroup:i,isTurn:s,cooldown:o,setCooldown:a,wormhole:l}){const[u,h]=x.useState(!1),c=["At the end of every turn draw 1 card.","Double agenda(two goals) is in play here.","At the end of every turn discard 1 random card","Once per turn, Challenge an other players keeper for the chance to steal them","Upon arriving here discard all current equipment keepers in play.","10% chance to summon a ghost at the end of your turn.","Once per turn, You have the option to draw 1 and play it.","Each turn a random rule will randomize. Locations not included."],d=_=>{if(!n.length)return{};for(const v of n)if(_===v)return{filter:"drop-shadow(0px 0px 2px var(--crimson))"}};return m.jsxs("div",{style:{zIndex:20},className:"rules_container box_border ",children:[m.jsx("h2",{children:"Rules"}),m.jsx("hr",{}),m.jsxs("ul",{children:[m.jsxs("li",{style:d("location"),className:`rule ${r.includes("location")?"highlight":""} ${t.location==="ABYSS"?`location_btn ${o||!s?"disabled":""}`:""}`,onClick:()=>{t.location!=="ABYSS"||o||!s||(l(1,0),a(()=>!0))},onContextMenu:_=>{_.preventDefault(),i("location")},children:["Location: ",t.location,m.jsx("span",{className:"location_tooltip__btn",onMouseEnter:()=>h(()=>!0),onMouseLeave:()=>h(()=>!1),children:"i"}),u&&m.jsxs("span",{className:"location_tooltip__text",children:[t.location==="MISTHALIN"?c[0]:"",t.location==="ASGARNIA"?c[1]:"",t.location==="CRANDOR"?c[2]:"",t.location==="WILDERNESS"?c[3]:"",t.location==="ENTRANA"?c[4]:"",t.location==="MORYTANIA"?c[5]:"",t.location==="ABYSS"?c[6]:"",t.location==="ZANARIS"?c[7]:""]})]}),m.jsxs("li",{style:d("drawAmount"),className:`rule ${r.includes("drawAmount")?"highlight":""}`,onContextMenu:_=>{_.preventDefault(),i("drawAmount")},children:["Draw: ",e.drawn," / ",t.drawAmount]}),m.jsxs("li",{style:d("playAmount"),className:`rule ${r.includes("playAmount")?"highlight":""}`,onContextMenu:_=>{_.preventDefault(),i("playAmount")},children:["Play: ",e.played," / ",t.playAmount]}),m.jsxs("li",{style:d("handLimit"),className:`rule ${r.includes("handLimit")?"highlight":""}`,onContextMenu:_=>{_.preventDefault(),i("handLimit")},children:["Hand Limit: ",t.handLimit]}),m.jsxs("li",{style:d("keeperLimit"),className:`rule ${r.includes("keeperLimit")?"highlight":""}`,onContextMenu:_=>{_.preventDefault(),i("keeperLimit")},children:["Keeper Limit: ",t.keeperLimit]}),m.jsx("li",{style:d("teleblock"),className:`rule ${r.includes("teleblock")?"highlight":""}`,onContextMenu:_=>{_.preventDefault(),i("teleblock")},children:t.teleblock?"Teleblocked":""})]})]})}function oN({table:t,localPlayer:e,showCardPiles:n,endTurn:r}){const[i,s]=x.useState([]),o=()=>{const c=t.turn.drawn>=t.rules.drawAmount,d=t.turn.played>=t.rules.playAmount||!e.hand.length,_=e.hand.length>t.rules.handLimit,v=e.keepers.length>t.rules.keeperLimit&&!a(),C=t.turn.player===e.user.uid,R=t.turn.temporary.hand.length>0,f=n.discard||n.pure;return!c||!d||_||v||!C||R||f?[c,d,_,v,C,R,f]:!1},a=()=>{if(!e.keepers)return;let c=0;for(const d of e.keepers)d.type==="CREEPER"&&c++;return c===e.keepers.length},l=c=>{const d=[];c[0]||d.push("Draw limit not reached!"),c[1]||d.push("Play limit not reached!"),c[2]&&d.push("Hand limit reached! Discard down."),c[3]&&d.push("Keeper limit reached! Discard a keeper."),c[4]||d.push("Please wait your turn."),c[5]&&d.push("Finish using all the cards in hand."),c[6]&&d.push("Finish choosing a card to draw."),s(()=>[...d])},u=()=>{s(()=>[])},h=()=>i.map((c,d)=>m.jsx(Ff,{message:c,clearErrors:u},`endturn_error__${d}`));return m.jsxs("div",{className:"endturn_btn_container",children:[m.jsx("button",{style:{whiteSpace:"nowrap"},className:`endturn_btn ${o()||t.pending?"disabled":""}`,onClick:()=>{if(t.pending)return;const c=o();if(c)return l([...c]);r()},children:"End Turn"}),i.length?h():null]})}const{getFakeRuleCard:aN}=mo;function tl({cardState:t,targets:e,isSideWays:n,inspectKeeper:r,selectKeeperGroup:i,selectedKeeperGroup:s,playerNum:o,drawSpecificCard:a,playCard:l}){const u=()=>{if(!s||!o)return!1;for(const d of s)if(d.playerIndex===o-1&&d.index===t.index)return!0;return!1},h=()=>{if(!(!e||!o)){for(const d of e)if(t.state.type==="RULE"&&!aN(d.id).error||d.id===t.state.id&&d.index===t.index&&d.playerIndex===o-1)return!0;return!1}},c=()=>t.state.text.split("|").map((d,_)=>{if(_%2===1)return m.jsx("div",{className:`${d.split(" ").join("_").toLowerCase()} mini_card_image sideways`})});return n?m.jsxs("div",{className:`card__mini ${t.state.type.toLowerCase()} ${u()?"selected":""}`,style:t.state.effects&&!t.state.cooldown?{background:"var(--black-shine)",boxShadow:h()?"inset 0px 0px 12px crimson":""}:{boxShadow:h()?"inset 0px 0px 12px crimson":""},onClick:t.state.attachment?d=>d.preventDefault():()=>{!o||!r||r({...t,playerIndex:o-1})},onContextMenu:d=>{d.preventDefault(),i&&i({state:t.state,index:t.index,playerIndex:o?o-1:0})},children:[m.jsx("div",{className:"card_container__inner_left",children:m.jsx("div",{className:"card_header__background",children:m.jsx("h4",{className:"card_header__text",style:t.state.name.length>10?{fontSize:"10px"}:{},children:t.state.name.split(" ").join("_")})})}),m.jsx("div",{className:"card_container__inner_right",children:m.jsx("div",{className:`${t.state.name.split("'").join("").split(" ").join("_").toLowerCase()} mini_card_image`})}),t.state.attachment&&m.jsx(Vt,{position:"CREEPER",cardState:{state:t.state.attachment??{},index:0},inspectKeeper:r})]}):m.jsxs("div",{className:`side_card__mini card__mini  ${t.state.type.toLowerCase()} ${u()?"selected":""}`,style:t.state.effects&&!t.state.cooldown?{background:"var(--black-shine)",boxShadow:h()?"inset 0px 0px 12px crimson":""}:{boxShadow:h()?"inset 0px 0px 12px crimson":""},onClick:t.state.attachment?d=>d.preventDefault():()=>{if(l)return l(t.state);if(a)return a(t.index);!o||!r||r({...t,playerIndex:o-1})},onContextMenu:d=>{d.preventDefault(),i&&i({state:t.state,index:t.index,playerIndex:o?o-1:0})},children:[m.jsx("div",{className:"side_card_container__inner_left",children:m.jsx("div",{className:"side_card_header__background",children:m.jsx("h4",{className:"side_card_header__text",children:t.state.name.split(" ").join("_")})})}),m.jsxs("div",{className:"side_card_container__inner_right",children:[m.jsx("div",{className:`${t.state.name.split("'").join("").split(" ").join("_").toLowerCase()} mini_card_image sideways`}),t.state.type==="GOAL"&&m.jsxs("div",{className:"mini_goal_images",children:[" ",c()]})]}),t.state.attachment&&m.jsx(Vt,{position:"CREEPER",cardState:{state:t.state.attachment??{},index:0},inspectKeeper:r})]})}function lN({table:t,inspectKeeper:e,selectKeeperGroup:n,selectedKeeperGroup:r,selectGoalGroup:i,selectedGoalGroup:s}){var v,C,R;const{players:o,goal:a}=t,{user:l}=x.useContext(lt),u=()=>{if(o[0].user.uid===(l==null?void 0:l.uid))return"180deg";if(o[1].user.uid===(l==null?void 0:l.uid))return"0deg";if(o[2].user.uid===(l==null?void 0:l.uid))return"270deg";if(o[3].user.uid===(l==null?void 0:l.uid))return"90deg"},h=()=>{if(o[0].user.uid===(l==null?void 0:l.uid))return"180deg";if(o[1].user.uid===(l==null?void 0:l.uid))return"0deg";if(o[2].user.uid===(l==null?void 0:l.uid))return"90deg";if(o[3].user.uid===(l==null?void 0:l.uid))return"270deg"},c=()=>{if(o.length>3){if(o[2].user.uid===(l==null?void 0:l.uid)||o[3].user.uid===(l==null?void 0:l.uid))return!0}else if(o.length>2&&o[2].user.uid===(l==null?void 0:l.uid))return!0;return!1},d=(f,p,E)=>f.map((k,O)=>m.jsx(tl,{isSideWays:p,targets:t.pending&&t.pending!==!0&&t.pending.targets?t.pending.targets:[],cardState:{state:k,index:O},inspectKeeper:e,selectKeeperGroup:n,selectedKeeperGroup:r,playerNum:E},`table_keepers__p${E}_${O}`)),_=()=>a.map((f,p)=>m.jsx(Vt,{position:"TABLE",cardState:{state:f,index:p},selectGoalGroup:i,selectedGoalGroup:s},`table_goals__${p}`));return m.jsxs("div",{className:"table_container",style:{width:c()?"660px":"",height:c()?"900px":"",transform:` ${c()?"translateY(-100px)":""} rotateZ(${u()})`},children:[m.jsx("div",{className:`player_1_keepers keeper_container ${o[0].keepers.length>1?"length_2plus":"length_1"}`,children:o[0].keepers.length?d(o[0].keepers,!0,1):m.jsx("div",{className:"mini_card_outline",children:m.jsx("p",{children:"No Keeper!"})})}),o.length>1&&m.jsx("div",{className:`player_2_keepers keeper_container ${((v=o[1])==null?void 0:v.keepers.length)>1?"length_2plus":"length_1"}`,children:(C=o[1])!=null&&C.keepers.length?d((R=o[1])==null?void 0:R.keepers,!0,2):m.jsx("div",{className:"mini_card_outline",children:m.jsx("p",{children:"No Keeper!"})})}),o.length>2&&m.jsx("div",{className:`player_3_keepers keeper_container ${o[2].keepers.length>1?"length_2plus":"length_1"}`,children:o[2].keepers.length?d(o[2].keepers,!1,3):m.jsx("div",{className:"mini_card_outline",children:m.jsx("p",{children:"No Keeper!"})})}),o.length>3&&m.jsx("div",{style:{transform:"translateX(-185px)"},className:`player_4_keepers keeper_container ${o[3].keepers.length>1?"length_2plus":"length_1"}`,children:o[3].keepers.length?d(o[3].keepers,!1,4):m.jsx("div",{className:"mini_card_outline",children:m.jsx("p",{children:"No Keeper!"})})}),m.jsx("div",{className:"table_goals",style:{transform:`${c()?"translateX(-92px)":""} rotateZ(${h()})`},children:a.length?_():m.jsx("div",{className:"card_outline",children:m.jsx("h2",{style:{color:"var(--light-pink)"},children:"No Goal !"})})})]})}const{getPlayer:uN}=mo;function cN({cardState:t,table:e,localPlayer:n,playEffect:r,startDuel:i,discardKeeper:s,inspectKeeper:o,selectedKeeperGroup:a,selectedPlayerGroup:l}){const{user:u}=x.useContext(lt),[h,c]=x.useState([]),[d,_]=x.useState([]),v=()=>c(()=>[]),C=()=>_(()=>[]),R=()=>{var A,j;const P=uN(e.players,(u==null?void 0:u.uid)??"");if(t.state.id==="KE04"){if(!a.length||a[0].state.subtype!=="LIVING"||a[0].playerIndex===P.index&&!a[0].state.attachment)return!1}else if(t.state.id==="KR07"){if(!a.length||a[0].state.subtype!=="EQUIPMENT"||a[0].playerIndex===P.index&&!a[0].state.attachment)return!1}else if(t.state.id==="KL07"){if(!a.length||a[0].state.subtype!=="RUNE"||a[0].playerIndex===P.index&&!a[0].state.attachment)return!1}else if(t.state.id==="KE05"){if(!l.length||l[0].user.uid===P.state.user.uid)return!1}else if(t.state.id==="K02"){if(!a.length||a[0].state.id!=="CR02"&&((A=a[0].state.attachment)==null?void 0:A.id)!=="CR02")return!1}else if(t.state.id==="KE02"){if(!a.length||a[0].state.id!=="CR01"&&((j=a[0].state.attachment)==null?void 0:j.id)!=="CR01")return!1}else if(t.state.id==="KLM01"){if(!a.length||a[0].state.id!=="KLM04"&&a[0].state.id!=="KLM05")return!1}else if(t.state.id==="KLM02"){if(!a.length||a[0].state.id!=="KLM03"&&a[0].state.id!=="KLM06")return!1}else if(t.state.id==="KLM03"){if(!a.length||a[0].state.id!=="KLM01"&&a[0].state.id!=="KLM05")return!1}else if(t.state.id==="KLM04"){if(!a.length||a[0].state.id!=="KLM02"&&a[0].state.id!=="KLM06")return!1}else if(t.state.id==="KLM05"){if(!a.length||a[0].state.id!=="KLM02"&&a[0].state.id!=="KLM04")return!1}else if(t.state.id==="KLM06"&&(!a.length||a[0].state.id!=="KLM01"&&a[0].state.id!=="KLM03"))return!1;return!0},f=()=>{const P=!!t.state.cooldown,A=!!t.state.effects,j=n.keepers.length>t.index?n.keepers[t.index].id===t.state.id:!1,F=e.turn.player===n.user.uid,Y=R();return P||!A||!j||!F||!Y?[P,A,j,F,Y]:!1},p=P=>{const A=[];P[0]&&A.push("On Cooldown."),P[1]===!1&&A.push("This Keeper has no effects."),P[2]===!1&&A.push("That Keeper is not yours!"),P[3]===!1&&A.push("Please wait your turn.."),P[4]===!1&&A.push("Select the correct kind of target."),c(()=>[...A])},E=()=>{const P=n.keepers.length>e.rules.keeperLimit,A=e.turn.player===n.user.uid,j=t.state.type==="CREEPER",F=!!t.state.attachment,Y=n.keepers.length>t.index?n.keepers[t.index].id===t.state.id:!1;return!P||!A||j||F||!Y?[P,A,j,F,Y]:!1},k=P=>{const A=[];P[0]===!1&&A.push("Keeper limit not reached. no point in discarding."),P[1]===!1&&A.push("Please wait your turn.."),P[2]&&A.push("Cannot discard creeper in a conventional manner."),P[3]&&A.push("Cannot discard a keeper with a creeper attached."),P[4]===!1&&A.push("That Keeper is not yours!"),_(()=>[...A])},O=()=>{const P=(u==null?void 0:u.uid)===e.turn.player,A=e.players[t.playerIndex].user.uid===(u==null?void 0:u.uid),j=e.turn.duel.cooldown,F=e.rules.location==="WILDERNESS";return console.log(P,A,j,F),!P||A||j||!F?[P,A,j,F]:!1},M=(P,A)=>P.map((j,F)=>m.jsx(Ff,{message:j,clearErrors:A},`inspect_keeper_error__${F}`));return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"underlay",onClick:()=>{o(null)}}),m.jsxs("div",{className:"popup",children:[m.jsx(Vt,{cardState:t,position:"SELECT"}),m.jsxs("div",{className:`play_btn_group__card length_${e.rules.location==="WILDERNESS"?"3":"2"}`,children:[m.jsx("div",{className:"errors_container__play",children:h.length?M(h,v):null}),m.jsx("button",{className:`play_btn__card ${e.pending||f()?"disabled":""}`,onClick:()=>{if(e.pending)return;const P=f();if(P)return p(P);r(t.state.id,t.index)},children:"Use Effect"}),e.rules.location==="WILDERNESS"&&m.jsx("button",{className:`challenge_btn__card ${e.pending||O()?"disabled":""}`,onClick:()=>{e.pending||O()||i(e.players[t.playerIndex].user.uid,t)},children:"Challenge"}),m.jsx("div",{className:"errors_container__discard",children:d.length?M(d,C):null}),m.jsx("button",{className:`discard_btn__card ${e.pending||E()?"disabled":""}`,onClick:()=>{if(e.pending)return;const P=E();if(P)return k(P);s(t.index)},children:"Discard Card"})]})]})]})}const{getPlayer:Fo}=mo;function dN({turn:t,players:e,rollForDuel:n,endDuel:r}){const{user:i}=x.useContext(lt),[s,o]=x.useState(Fo(e,t.duel.player1.id)),[a,l]=x.useState(Fo(e,t.duel.player2.id)),u=()=>(i==null?void 0:i.uid)===t.duel.player1.id&&t.duel.player1.num===0?1:(i==null?void 0:i.uid)===t.duel.player2.id&&t.duel.player2.num===0?2:0;x.useEffect(()=>{!t.duel.player1.id||!t.duel.player2.id||(o(()=>Fo(e,t.duel.player1.id)),l(()=>Fo(e,t.duel.player2.id)))},[t]);const h=()=>t.duel.player1.num>t.duel.player2.num&&t.duel.player1.num!==0&&t.duel.player2.num!==0?1:t.duel.player2.num>=t.duel.player1.num&&t.duel.player2.num!==0&&t.duel.player1.num!==0?2:0;return m.jsx("div",{className:"popup",children:m.jsxs("div",{className:"duel_group",children:[m.jsxs("div",{className:"duel_group__left",children:[m.jsx("h2",{children:s.state.user.username}),m.jsx("h2",{children:t.duel.player1.num}),m.jsx("button",{className:`play_btn__card ${u()!==1?"disabled":""}`,onClick:()=>{u()===1&&n()},children:"Roll Dice"})]}),m.jsxs("div",{className:"duel_group__middle",children:[m.jsx("h1",{children:h()===0?"V/S":h()===1?`${s.state.user.username}`:`${a.state.user.username} Wins!`}),h()>0&&m.jsxs("div",{className:"duel_group__left",children:[m.jsx("hr",{className:"card_hr__thick full_width"}),m.jsx("button",{className:"challenge_btn__card",onClick:()=>{const c=h()===1?t.duel.player1.id:t.duel.player2.id;r(c)},children:"Continue"})]})]}),m.jsxs("div",{className:"duel_group__right",children:[m.jsx("h2",{children:a.state.user.username}),m.jsx("h2",{children:t.duel.player2.num}),m.jsx("button",{className:`play_btn__card flipped ${u()!==2?"disabled":""}`,onClick:()=>{u()===2&&n()},children:"Roll Dice"})]})]})})}function Au({type:t,pile:e,drawSpecificCard:n,playCard:r}){const i=o=>{n(o,t==="DISCARD")},s=()=>e.map((o,a)=>{if(!(t==="DISCARD"&&o.id==="A17"||t==="PURE"&&o.id==="A16"))return m.jsx(tl,{isSideWays:!1,cardState:{state:o,index:a},drawSpecificCard:i,playCard:r},`card_pile__${o.id}_${a}`)});return m.jsxs("div",{className:"popup",children:[m.jsxs("h2",{children:["Select One To ",r?"Play":"Draw"]}),m.jsx("div",{className:"card_picker",children:s()})]})}const{getCardById:hm}=mo;function fN({history:t}){const e=x.useRef(null);x.useEffect(()=>{!e||!e.current||e.current.scrollTo(0,e.current.offsetHeight+t.played.length*100)});const n=()=>{if(t)return t.played.map((r,i)=>m.jsxs("div",{className:"history_play",children:[m.jsxs("div",{className:"history_inner_left",children:[m.jsx("h3",{children:r.player}),m.jsx(tl,{isSideWays:!1,cardState:{state:hm(r.id),index:i}})]}),r.target&&r.target.length?m.jsx("div",{className:"history_targets",children:r.target.map((s,o)=>m.jsx(tl,{isSideWays:!1,playerNum:1,targets:[{id:s,index:0,playerIndex:0}],cardState:{state:hm(s),index:0}},`play_history__target_${o}`))}):m.jsx("div",{style:{width:"150px",height:"75px"}})]},`play_history__${i}`))};return m.jsxs("div",{className:"popup",children:[m.jsx("h2",{children:"Play History"}),m.jsx("div",{ref:e,className:"card_picker history",children:n()})]})}const{loadGame:hN,getPlayer:Qe,getPlayerKeeper:pm,getCardById:ct,seperateCreepersAndKeepers:mm,connectGame:pN,chooseWhoGoesFirst:mN,checkShouldDiscard:Nu,checkForCreepers:_N,checkPlayersForKeeper:_m,checkIfWon:Wo,endTurn:gN,upload:nt,uploadTable:xu,shuffleDeck:yN,drawPhase:vN,removeCard:Ct,turnReducer:EN,deckReducer:CN,rulesReducer:wN,goalReducer:RN,playerReducer:SN}=mo,{uploadStats:gm}=po;function IN({setWinGameStats:t}){const{startGame:e,checkGameInProgress:n}=Ml,r=rn(),{db:i,user:s,joinedGameID:o,setUser:a}=x.useContext(lt),l={db:i,gameId:o},[u,h]=x.useState(hN(s)),[c,d]=x.useReducer(wN,u.rules),[_,v]=x.useReducer(CN,u.deck),[C,R]=x.useReducer(EN,u.turn),[f,p]=x.useReducer(SN,u.players),[E,k]=x.useReducer(RN,u.goal),[O,M]=x.useState(!0),[P,A]=x.useState(!1),[j,F]=x.useState({discard:!1,pure:!1,locations:!1}),[Y,Re]=x.useState(!1),[xe,Et]=x.useState(null),[on,Dt]=x.useState(null),[tt,H]=x.useState([]),[B,Q]=x.useState([]),[X,w]=x.useState([]),[N,L]=x.useState([]),[D,W]=x.useState(Qe(u.players,(s==null?void 0:s.uid)??"").state),K=y=>{Et(T=>T===null||y===null?y:T.state.name===y.state.name?null:y),on&&Dt(()=>null)},I=y=>{Dt(T=>T===null||y===null?y:T.state.name===y.state.name?null:y),xe&&Et(()=>null)},g=y=>{y!=="KEEPERS"&&w(()=>[]),y!=="PLAYERS"&&Q(()=>[]),y!=="RULES"&&H(()=>[]),y!=="GOALS"&&L(()=>[])},S=y=>{H(T=>T.includes(y)?[]:[...T,y]),g("RULES")},V=y=>{w(T=>{for(const b of T)if(b.index===y.index&&b.playerIndex===y.playerIndex)return[];return[...T,y]}),g("KEEPERS")},de=y=>{Q(T=>{for(const b of T)if(b.user.uid===y.user.uid)return[];return[...T,y]}),g("PLAYERS")},ee=y=>{L(T=>{for(const b of T)if(b.state.id===y.state.id)return[];return[...T,y]}),g("GOALS")};x.useEffect(()=>{h(y=>({...y,rules:c}))},[c]),x.useEffect(()=>{h(y=>({...y,deck:_}))},[_]),x.useEffect(()=>{if(u.isWon){let y={state:{},index:0},T=null;const b=Wo(f,E[0],c.location),z=E.length>1?Wo(f,E[1],c.location):null;b?y=Qe(f,b):z&&(y=Qe(f,z)),b?T=E[0]:z&&(T=E[1]),t(te=>({...te,winner:y.state??null,round:u.round,goal:T})),r("/gameover")}h(y=>(y.turn.player!==C.player&&Et(()=>null),{...y,turn:C}))},[C]),x.useEffect(()=>{if(h(T=>({...T,players:f})),W(T=>({...T,...Qe(f,(s==null?void 0:s.uid)??"").state})),(s==null?void 0:s.uid)!==C.player)return;const y=Qe(f,(s==null?void 0:s.uid)??"");y.state.hand.length&&y.state.hand.forEach((T,b)=>{if(T.type==="CREEPER"&&!u.pending)return bt(T,b)}),C.temporary.hand.forEach((T,b)=>{T.type==="CREEPER"&&!u.pending&&Kf(T,b)})},[f]),x.useEffect(()=>{h(y=>({...y,goal:E}))},[E]),x.useEffect(()=>{u.counter&&u.counter!==!0&&u.counter.id==="CO03"&&F(()=>({discard:!1,pure:!1,locations:!1}))},[u.counter]),x.useEffect(()=>{if(!s)return r("/");if(!O)return;Ve();const y=T=>{T.preventDefault(),T.key==="Escape"&&(g(),K(null),I(null),Re(()=>!1)),T.key==="Tab"&&Re(()=>!Y)};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[]);const He=(y,T,b,z,te,ut,kn,Ki,kE,TE,Hi)=>{y.discard||(y.discard=[]),y.pure||(y.pure=[]),Hi.played||(Hi.played=[]),Hi.discarded||(Hi.discarded=[]),T||(T=[]);for(const Tn of z)Tn.hand||(Tn.hand=[]),Tn.keepers||(Tn.keepers=[]);te.temporary.hand||(te.temporary.hand=[]),v({type:ue.INIT,payload:{init:{...y},pile:{...y.pure},upload:l}}),p({type:Z.INIT,payload:{init:[...z],playerId:z[0].user.uid,upload:l}}),R({type:_e.INIT,payload:{init:{...te},upload:l}}),d({type:he.INIT,payload:{init:{...b},amount:0,upload:l}}),k({type:Gt.INIT,payload:{goals:[...T],upload:l}}),h(Tn=>({...Tn,round:ut,pending:kn,counter:Ki,isWon:kE,phases:TE,history:Hi})),W(Tn=>({...Tn,...Qe(z,(s==null?void 0:s.uid)??"").state}))},Ve=async()=>{if(!s)return r("/");if(await pN(o,i,He),s.uid===o){if(await n(i,o))return;const y=mN(f);v({type:ue.DECK_SHUFFLE__PURE,payload:{pile:[],upload:{...l}}}),R({type:_e.CHANGE_TURN,payload:{player:y,upload:{...l}}}),await e(i,o)}M(()=>!1)},_o=(y,T)=>{R({type:_e.DUEL_BEGIN,payload:{player:s==null?void 0:s.uid,victim:y,duelCard:T,upload:l}})},iE=()=>{const y=(s==null?void 0:s.uid)===C.duel.player1.id;R({type:y?_e.DUEL_ROLL__PLAYER_1:_e.DUEL_ROLL__PLAYER_2,payload:{upload:l}})},sE=y=>{if(y===C.duel.player1.id){if(!C.duel.card)return;p({type:Z.KEEPER_CARDS__ADD,payload:{playerId:y,cards:[C.duel.card.state],upload:l}});const T=Ct(f[C.duel.card.playerIndex].keepers,C.duel.card.index);p({type:Z.KEEPER_CARDS__REMOVE,payload:{playerId:f[C.duel.card.playerIndex].user.uid,cards:[...T],upload:l}})}R({type:_e.DUEL_END,payload:{upload:l}})},oE=()=>{const y=vN(u);if(!_.pure||_.pure.length<c.drawAmount){const b=yN([..._.pure,..._.discard]);v({type:ue.DECK_REPLACE__DISCARD_TO_PURE,payload:{pile:[...b],upload:l}});return}const T=_N([..._.pure.slice(_.pure.length-y)]);if(v({type:ue.DECK_REMOVE__PURE_TOP,payload:{pile:[],amount:y,upload:l}}),p({type:Z.HAND_CARDS__ADD,payload:{playerId:(s==null?void 0:s.uid)??"",cards:T.length?[...T]:Array.from(_.pure.slice(_.pure.length-y)),upload:l}}),!T.length)R({type:_e.DRAWN_ADD,payload:{player:u.turn.player&&u.turn.player!==!0?u.turn.player:"a",amount:C.drawn+y,upload:l}});else{const b=mm(_.pure.slice(_.pure.length-y)).keepers;v({type:ue.DECK_ADD__DISCARD_BOT,payload:{pile:[...b],upload:l}})}},go=(y,T,b)=>{const z=Qe(f,y);let te=Array.from(_.pure.slice(_.pure.length-(T+b)));if(b>0){const ut=Ct(te,te.length-1);let kn,Ki;b>1&&(kn=Ct(ut,te.length-2),b>2&&(Ki=Ct(kn,te.length-3))),te=Ki||kn||ut}v({type:ue.DECK_REMOVE__PURE_TOP,payload:{pile:[],amount:T,upload:l}}),p({type:Z.HAND_CARDS__ADD,payload:{playerId:z.state.user.uid??"",cards:te,upload:l}})},Wi=(y=1,T=0)=>{const{creepers:b,keepers:z}=mm(_.pure.slice(_.pure.length-(y+T)));v({type:ue.DECK_REMOVE__PURE_TOP,payload:{pile:[],amount:y+T,upload:l}}),R({type:_e.TEMPORARY_HAND__BEGIN,payload:{cards:Array.from(_.pure.slice(_.pure.length-(y+T))),amount:y,upload:l}}),b.length&&v({type:ue.DECK_ADD__DISCARD_BOT,payload:{pile:[...z],upload:l}})},jl=(y,T=!1,b=(s==null?void 0:s.uid)??"")=>{const z=T?_.discard[y]:_.pure[y];v({type:T?ue.DECK_REMOVE__DISCARD_SPECIFIC:ue.DECK_REMOVE__PURE_SPECIFIC,payload:{pile:[],cardIndex:y,upload:l}}),p({type:Z.HAND_CARDS__ADD,payload:{playerId:b,cards:[z],upload:l}}),T||v({type:ue.DECK_SHUFFLE__PURE,payload:{pile:[],upload:l}}),F(te=>({...te,pure:!1,discard:!1}))},Gi=(y,T=!0)=>{const b=Ct(D.hand,y);T&&v({type:ue.DECK_ADD__DISCARD_BOT,payload:{pile:[D.hand[y]],upload:l}}),p({type:Z.HAND_CARDS__REMOVE,payload:{playerId:(s==null?void 0:s.uid)??"",cards:[...b],upload:l}}),Et(()=>null)},Wf=(y,T=!0)=>{if(!C.temporary)return;const{hand:b}=C.temporary,z=Ct(b,y);T&&v({type:ue.DECK_ADD__DISCARD_BOT,payload:{pile:[b[y]],upload:l}}),R({type:_e.TEMPORARY_HAND_CARD__REMOVE,payload:{cards:[...z],upload:l}}),Et(()=>null)},Gf=(y,T)=>{const b=Qe(f,T);v({type:ue.DECK_ADD__DISCARD_BOT,payload:{pile:[b.state.hand[y]],upload:l}});const z=Ct(b.state.hand,y);p({type:Z.HAND_CARDS__REMOVE,payload:{playerId:T,cards:[...z],upload:l}}),Et(()=>null)},aE=(y,T=!0)=>{const b=Ct(D.keepers,y);T&&v({type:ue.DECK_ADD__DISCARD_BOT,payload:{pile:[D.keepers[y]],upload:l}}),p({type:Z.KEEPER_CARDS__REMOVE,payload:{playerId:(s==null?void 0:s.uid)??"",cards:[...b],upload:l}}),Dt(()=>null)},Gr=(y,T,b=!0)=>{const z=Qe(f,T),te=Ct(z.state.keepers,y);b&&v({type:ue.DECK_ADD__DISCARD_BOT,payload:{pile:[f[z.index].keepers[y]],upload:l}}),p({type:Z.KEEPER_CARDS__REMOVE,payload:{playerId:T,cards:[...te],upload:l}})},lE=()=>{nt("PENDING",i,{cardState:!1},o)},uE=y=>!!(pm(Qe(f,(s==null?void 0:s.uid)??"").state,"KL13")&&y==="A16"),cE=y=>!!(pm(Qe(f,(s==null?void 0:s.uid)??"").state,"KL14")&&y==="A17"),Ul=y=>{switch(y.id){case"A04":return B.length?[{id:B[0].user.uid,index:0,playerIndex:0}]:[];case"A05":return tt.length?[{id:tt[0],index:0,playerIndex:0}]:[];case"A06":case"CO05":return Array.from(tt,(T,b)=>({id:T,index:b,playerIndex:b}));case"A11":case"A15":case"CO04":case"CO06":return X.length?[{id:X[0].state.id,index:X[0].index,playerIndex:X[0].playerIndex}]:[];case"A12":return Array.from(X,T=>({id:T.state.id,index:T.index,playerIndex:T.playerIndex}));default:return[]}},dE=(y,T,b)=>{const z=[...u.history.played,{id:y,target:T,player:b}];z.length>50&&z.shift(),nt("HISTORY_PLAYED",i,{historyState:z},o)},bt=(y,T)=>{if(!y)return;if(s){const z=s.cardCatalog[`${y.id}`]?s.cardCatalog[`${y.id}`]+1:1;a(te=>{if(te)return{...te,cardCatalog:Object.assign({},te==null?void 0:te.cardCatalog,{[`${y.id}`]:z})}}),gm("CARD",i,{cardKey:y.id,cardNum:z},s==null?void 0:s.uid)}const b=Ul(y);if(C.player!==(s==null?void 0:s.uid))return nt("COUNTER",i,{cardState:y},o),Gi(T,Nu(y.type)),Fl(y,b);nt("PENDING",i,{cardState:{...y,targets:b}},o),T>-1&&!uE(y.id)&&!cE(y.id)&&Gi(T,Nu(y.type)),C.player===(s==null?void 0:s.uid)&&y.type!=="CREEPER"&&T>-1&&R({type:_e.PLAYED_ADD,payload:{amount:C.played+1,upload:l}}),K(null),Fl(y,b)},Kf=(y,T)=>{if(!y||!u.turn.temporary||(s==null?void 0:s.uid)!==C.player)return;const b=Ul(y);nt("PENDING",i,{cardState:{...y,targets:Ul(y)}},o),Wf(T,Nu(y.type)),C.player===(s==null?void 0:s.uid)&&R({type:_e.TEMPORARY_PLAY_CHANGE,payload:{amount:u.turn.temporary.play-1,upload:l}}),Fl(y,b)},Fl=(y,T)=>{setTimeout(()=>{if(!u.counter)switch(lE(),dE(y.id,T.length?Array.from(T,b=>b.id):[],(s==null?void 0:s.username)??""),y.type){case"KEEPER":return yo(y);case"RULE":return mE(y);case"GOAL":return pE(y);case"ACTION":return gE(y);case"COUNTER":return hE(y);case"CREEPER":return fE(y)}},3e3)},Hf=y=>{const T=Qe(f,(s==null?void 0:s.uid)??""),b=Ct([...T.state.keepers],y.index);p({type:Z.KEEPER_CARDS__REMOVE,payload:{playerId:(s==null?void 0:s.uid)??"",cards:[...b],upload:l}}),p({type:Z.KEEPER_CARDS__ADD,payload:{playerId:(s==null?void 0:s.uid)??"",cards:[y.state],upload:l}})},fE=y=>{const T=Qe(f,(s==null?void 0:s.uid)??"");if(!T.state.keepers)return yo(y);if(y.subtype==="LIVING_CREEPER"){let b;if(T.state.keepers.forEach((z,te)=>{z.subtype==="LIVING"&&!z.attachment&&(b={state:{...z},index:te})}),!b)return yo(y);b.state.attachment=y,Hf(b)}else if(y.subtype==="EQUIPMENT_CREEPER"){let b;if(T.state.keepers.forEach((z,te)=>{z.subtype==="EQUIPMENT"&&!z.attachment&&(b={state:{...z},index:te})}),!b)return yo(y);b.state.attachment=y,Hf(b)}},hE=y=>{const T=(s==null?void 0:s.uid)===C.player;if(y.effects.includes("TELESTOP_OR_LOCATION_MISTHALIN"))if(T){if(c.teleblock)return;d({type:he.RULE_CHANGE__LOCATION,payload:{location:"MISTHALIN",upload:l}})}else nt("RULES",i,{ruleState:{...c,location:c.location}},o);else if(y.effects.includes("GOALSTOP_OR_GOALS_NONE"))T?k({type:Gt.GOAL_RESET,payload:{goals:[],upload:l}}):nt("GOAL",i,{goalState:E},o);else if(y.effects.includes("ACTIONSTOP_OR_DISCARD_1_ALL"))T?f.forEach(b=>{const z=Math.floor(Math.random()*b.hand.length);Gf(z,b.user.uid)}):(xu(i,u,o),nt("PENDING",i,{cardState:!1},o),v({type:ue.DECK_ADD__DISCARD_BOT,payload:{pile:[y],upload:l}}));else if(y.effects.includes("KEEPER_STEALSTOP_OR_KEEPER_STEAL"))if(T){p({type:Z.KEEPER_CARDS__ADD,payload:{playerId:s.uid,cards:[X[0].state],upload:l}});const b=Ct(f[X[0].playerIndex].keepers,X[0].index);p({type:Z.KEEPER_CARDS__REMOVE,payload:{playerId:f[X[0].playerIndex].user.uid,cards:[...b],upload:l}})}else xu(i,u,o),p({type:Z.KEEPER_CARDS__ADD,payload:{playerId:(s==null?void 0:s.uid)??"",cards:u.pending&&u.pending!==!0&&u.pending.targets?[ct(u.pending.targets[0].id)]:[],upload:l}}),nt("PENDING",i,{cardState:!1},o),v({type:ue.DECK_ADD__DISCARD_BOT,payload:{pile:[y],upload:l}});else if(y.effects.includes("RULESTOP_OR_RULE_RESET_3"))if(T)for(let b=0;b<=3;b++)d({type:he.RULE_RESET__CHOICE,payload:{ruleKey:tt[b],upload:l}});else nt("RULES",i,{ruleState:c},o);else if(y.effects.includes("KEEPER_DISCARD_REFLECT_OR_KEEPER_DISCARD"))if(T)Gr(X[0].index,f[X[0].playerIndex].user.uid);else{xu(i,u,o),nt("PENDING",i,{cardState:!1},o);const b=Qe(f,C.player!==!0&&C.player?C.player:""),z=Math.floor(Math.random()*b.state.keepers.length);Gr(z,b.state.user.uid),v({type:ue.DECK_ADD__DISCARD_BOT,payload:{pile:[y],upload:l}})}nt("COUNTER",i,{cardState:!1},o),g()},yo=y=>{p({type:Z.KEEPER_CARDS__ADD,payload:{playerId:(s==null?void 0:s.uid)??"",cards:[y],upload:l}})},pE=y=>{var b,z;const T=[];T.push(y),(E.length&&c.location!=="ASGARNIA"||c.location==="ASGARNIA"&&E.length>1)&&v({type:ue.DECK_ADD__DISCARD_BOT,payload:{pile:[E[((b=N[0])==null?void 0:b.index)??0]],upload:l}}),c.location==="ASGARNIA"?k({type:E.length<2?Gt.GOAL_ADD__MULTI:Gt.GOAL_REPLACE__MULTI,payload:{replaceIndex:((z=N[0])==null?void 0:z.index)??0,goals:T,upload:l}}):k({type:Gt.GOAL_REPLACE__SINGLE,payload:{goals:T,upload:l}}),g()},mE=y=>{if(y.effects.includes("RULE_PLAY")){const T=y.effects[1];d({type:he.RULE_CHANGE__PLAY,payload:{amount:Number(T),upload:l}})}else if(y.effects.includes("RULE_DRAW")){const T=y.effects[1];d({type:he.RULE_CHANGE__DRAW,payload:{amount:Number(T),upload:l}})}else if(y.effects.includes("RULE_HAND_LIMIT")){const T=y.effects[1];d({type:he.RULE_CHANGE__HAND_LIMIT,payload:{amount:Number(T),upload:l}})}else if(y.effects.includes("RULE_KEEPER_LIMIT")){const T=y.effects[1];d({type:he.RULE_CHANGE__KEEPER_LIMIT,payload:{amount:Number(T),upload:l}})}else if(y.effects.includes("LOCATION")){if(c.teleblock)return;const T=y.effects[1];d({type:he.RULE_CHANGE__LOCATION,payload:{location:T,upload:l}}),T==="ENTRANA"&&_E()}else y.effects.includes("TELEBLOCK")&&d({type:he.RULE_CHANGE__TELEBLOCK,payload:{teleblock:!0,upload:l}});g()},_E=()=>{f.forEach(y=>{const T=[],b=[];y.keepers.forEach(z=>{z.subtype==="EQUIPMENT"?b.push(z):T.push(z)}),p({type:Z.KEEPER_CARDS__REMOVE,payload:{playerId:y.user.uid,cards:[...T],upload:l}}),v({type:ue.DECK_ADD__DISCARD_BOT,payload:{pile:[...b],upload:l}})})},gE=y=>{if(y.effects.includes("RULES_RESET"))d({type:he.RULE_RESET__ALL,payload:{upload:l}});else if(y.effects.includes("TELEPORT"))yE();else if(y.effects.includes("TELEPORT_SPECIFIC"))F(T=>({...T,locations:!0}));else if(y.effects.includes("RULE_RESET_CHOOSE"))for(let T=0;T<=(y.effects.length>1?2:0);T++)d({type:he.RULE_RESET__CHOICE,payload:{ruleKey:tt[T],upload:l}});else if(y.effects.includes("TRADE_HANDS"))p({type:Z.TRADE_HANDS,payload:{playerId:(s==null?void 0:s.uid)??"",targetPlayerId:B[0].user.uid,upload:l}});else if(y.effects.includes("KEEPERS_TO_HAND"))f.forEach(T=>{const b=[],z=[];T.keepers.length&&(T.keepers.forEach(te=>{te.type==="CREEPER"||te.attachment?z.push(te):b.push(te)}),p({type:Z.HAND_CARDS__ADD,payload:{playerId:T.user.uid,cards:[...b],upload:l}}),p({type:Z.KEEPER_CARDS__REMOVE,payload:{playerId:T.user.uid,cards:[...z],upload:l}}))});else if(y.effects.includes("KEEPER_EXCHANGE_CHOOSE"))p({type:Z.KEEPER_CARDS__EXCHANGE,payload:{playerId:"",keepersToExchange:[...X.slice(0,2)],cards:[X[0].state,X[1].state],upload:l}});else if(y.effects.includes("KEEPER_STEAL_CHOOSE"))Gr(X[0].index,f[X[0].playerIndex].user.uid,!1),p({type:Z.KEEPER_CARDS__ADD,payload:{playerId:(s==null?void 0:s.uid)??"",cards:[X[0].state],upload:l}});else if(y.effects.includes("DRAW_2_PLAY_2"))Wi(2);else if(y.effects.includes("DRAW_5_PLAY_3"))Wi(3,2);else if(y.effects.includes("DRAW_3_PLAY_2"))Wi(2,1);else if(y.effects.includes("DISCARD_1"))f.forEach(T=>{const b=Math.floor(Math.random()*T.hand.length);Gf(b,T.user.uid)});else if(y.effects.includes("DRAW_1"))f.forEach((T,b)=>{go(T.user.uid,1,b)});else if(y.effects.includes("DESTROY_1"))Gr(X[0].index,f[X[0].playerIndex].user.uid);else if(y.effects.includes("STEAL_RUNE_CROSSBOW")){const T=_m(f,"KE04");if(!T.keeper)return;const b=Ct(f[T.playerIndex].keepers,T.index);p({type:Z.KEEPER_CARDS__REMOVE,payload:{playerId:f[T.playerIndex].user.uid,cards:b,upload:l}}),p({type:Z.KEEPER_CARDS__ADD,payload:{playerId:(s==null?void 0:s.uid)??"",cards:[T.keeper],upload:l}})}else y.effects.includes("SUMMON_GHOST")?p({type:Z.KEEPER_CARDS__ADD,payload:{playerId:(s==null?void 0:s.uid)??"",cards:[ct("KL02")],upload:l}}):y.effects.includes("DRAW_SPECIFIC_PURE")?F(T=>({...T,pure:!0})):y.effects.includes("DRAW_SPECIFIC_DISCARD")?F(T=>({...T,discard:!0})):y.effects.includes("RULE_RANDOM")&&$f();g()},yE=()=>{c.teleblock||d({type:he.RULE_CHANGE__LOCATION_RANDOM,payload:{upload:l}})},$f=()=>{const y=[he.RULE_CHANGE__DRAW,he.RULE_CHANGE__PLAY,he.RULE_CHANGE__HAND_LIMIT,he.RULE_CHANGE__KEEPER_LIMIT,he.RULE_CHANGE__TELEBLOCK],T=Math.floor(Math.random()*y.length),b=Math.ceil(Math.random()*5);d({type:y[T],payload:{amount:b,teleblock:b>2,upload:l}})},vE=(y,T)=>{const b=Qe(f,(s==null?void 0:s.uid)??"");if(y==="KL06"){const z=Math.ceil(Math.random()*2),te=Math.ceil(Math.random()*2);if(z===1)go(b.state.user.uid,te,0);else for(let ut=0;ut<te;ut++)Gi(Math.floor(Math.random()*b.state.hand.length))}else if(y==="K01")go(b.state.user.uid,1,0);else if(y==="CR01")bt(ct("RL07"),-1);else if(y==="KE06")bt(ct("RL08"),-1);else if(y==="KR08")bt(ct("A01"),-1);else if(y==="KR02")Wi(1,0);else if(y==="KE05"){const z=Math.floor(Math.random()*B[0].hand.length);if(!B[0].hand)return;const te=B[0].hand[z];p({type:Z.HAND_CARDS__ADD,payload:{playerId:(s==null?void 0:s.uid)??"",cards:[te],upload:l}});const ut=Ct(B[0].hand,z);p({type:Z.HAND_CARDS__REMOVE,payload:{playerId:B[0].user.uid,cards:[...ut],upload:l}})}else y==="KL07"||y==="KR07"||y==="KE04"||y==="K02"||y==="KE02"?bt(ct("A15"),-1):y==="KL10"?bt({id:"AF02",type:"ACTION",subtype:"",name:"STEAL RCB",effects:["STEAL_RUNE_CROSSBOW"],text:"STEAL!, STEAL!, STEAL!"},-1):y==="KLM01"||y==="KLM02"||y==="KLM03"||y==="KLM04"||y==="KLM05"||y==="KLM06"?bt(ct("A11"),-1):y==="KE01"?bt(ct("A14"),-1):y==="KR09"&&bt({id:"AF03",type:"ACTION",subtype:"",name:"RULE FLUX",effects:["RULE_RANDOM"],text:"Randomize a rule."},-1);p({type:Z.KEEPER_COOLDOWN__SET,payload:{playerId:(s==null?void 0:s.uid)??"",cooldown:!0,cardIndex:T,upload:l}}),g(),I(null)},EE=()=>{const y=_m(f,"KL12");if(!y.keeper)return;const T=Math.floor(Math.random()*f.length);T!==y.playerIndex&&(Gr(y.index,f[y.playerIndex].user.uid,!1),p({type:Z.KEEPER_CARDS__ADD,payload:{playerId:f[T].user.uid,cards:[y.keeper],upload:l}}))},Wl=()=>(s==null?void 0:s.uid)===C.player,CE=()=>{Math.floor(Math.random()*101)<=20&&p({type:Z.KEEPER_CARDS__ADD,payload:{playerId:(s==null?void 0:s.uid)??"",cards:[ct("KL02")],upload:l}})},wE=()=>{f.forEach(y=>{y.keepers&&y.keepers.forEach((T,b)=>{var te;if(T.id!=="KL02")return;if(Math.floor(Math.random()*101)<=76){const ut=Math.ceil(Math.random()*6);Gr(b,y.user.uid,!1),p({type:Z.KEEPER_CARDS__ADD,payload:{playerId:y.user.uid,cards:[ct(`KLM0${ut}`)],upload:l}});const kn=y.user.cardCatalog[`KLM0${ut}`]?y.user.cardCatalog[`KLM0${ut}`]+1:1;if(gm("CARD",i,{cardKey:`KLM0${ut}`,cardNum:kn},(te=y.user)==null?void 0:te.uid),nt("PHASE",i,{phaseState:{location:"morytania",amount:u.phases.morytania+1}},o),u.phases.morytania>0)return;v({type:ue.DECK_ADD__DISCARD_BOT,payload:{pile:[ct("GM01"),ct("GM02"),ct("GM03")],upload:l}})}})})},RE=()=>{E.length&&SE(),EE(),A(()=>!1);const y=Qe(f,(s==null?void 0:s.uid)??"");if(c.location==="MISTHALIN"&&go((s==null?void 0:s.uid)??"",1,0),c.location==="CRANDOR"){const b=Math.floor(Math.random()*y.state.hand.length);Gi(b,!0)}c.location==="MORYTANIA"&&(CE(),wE()),c.location==="ZANARIS"&&$f(),C.duel.cooldown&&R({type:_e.DUEL_COOLDOWN,payload:{upload:l}}),y.state.keepers.forEach((b,z)=>{b.cooldown&&p({type:Z.KEEPER_COOLDOWN__SET,payload:{playerId:(s==null?void 0:s.uid)??"",cooldown:!1,cardIndex:z,upload:l}})}),gN(i,u.players,u.turn,R,o)&&(h(b=>({...b,round:b.round++})),nt("ROUND",i,{roundState:u.round+1},o))},SE=()=>{const y=Wo(f,E[0],c.location);let T;c.location==="ASGARNIA"&&(T=Wo(f,E[1],c.location)),(y||T)&&nt("WIN",i,{},o)},IE=()=>u.players.map((y,T)=>m.jsx(Mr,{isSideBox:!0,targets:u.pending&&u.pending!==!0&&u.pending.targets?Array.from(u.pending.targets,b=>b.id):[],player:y,isTurn:u.turn.player===y.user.uid,selectedPlayerGroup:B,selectPlayerGroup:de},`player_bar__${T}`));return m.jsxs("div",{className:"game_container",children:[`${nE.domain}/game`===window.location.href&&m.jsxs("div",{children:[m.jsx("button",{className:"menu_link",onClick:()=>{p({type:Z.HAND_CARDS__ADD,payload:{playerId:(s==null?void 0:s.uid)??"",cards:[{id:"A16",type:"ACTION",subtype:"",name:"Scry and Acquire",effects:["DRAW_SPECIFIC_PURE"],text:"See into the future and choose a card to acquire."},{id:"A17",type:"ACTION",subtype:"",name:"Historical Research",effects:["DRAW_SPECIFIC_DISCARD"],text:"Look through past records and find the location of a card to acquire."},{id:"KL14",type:"KEEPER",subtype:"LIVING",name:"Reldo",effects:[],text:"When using the Historical Records card, don't discard it."}],upload:l}})},children:"action card function test"}),m.jsx("button",{onClick:()=>{p({type:Z.HAND_CARDS__ADD,payload:{playerId:(s==null?void 0:s.uid)??"",cards:[{id:"CO03",type:"COUNTER",subtype:"",name:"Belay That!",effects:["ACTIONSTOP_OR_DISCARD_1_ALL"],text:"Out of turn - stop another player while they are playing an action card| During turn every discards one."}],upload:l}})},children:"seocnd coming"})]}),m.jsx(lN,{table:u,inspectKeeper:I,selectKeeperGroup:V,selectedKeeperGroup:X,selectGoalGroup:ee,selectedGoalGroup:N}),m.jsx(Mr,{}),m.jsx("div",{className:"user_bars__container",children:IE()}),m.jsx(sN,{rules:u.rules,turn:C,targetedRule:u.pending&&u.pending!==!0&&u.pending.targets?Array.from(u.pending.targets,y=>y.id):[],selectRuleGroup:S,selectedRuleGroup:tt,wormhole:Wi,isTurn:Wl(),cooldown:P,setCooldown:A}),C.duel.player1.id&&C.duel.player2.id&&m.jsx(dN,{turn:C,players:f,rollForDuel:iE,endDuel:sE}),(s==null?void 0:s.uid)===u.turn.player&&u.turn.drawn<u.rules.drawAmount&&m.jsx(rN,{drawCards:oE}),xe&&m.jsx(iN,{cardState:xe,table:u,localPlayer:D,playCard:C.temporary.hand.length?Kf:bt,discardCard:C.temporary.hand.length?Wf:Gi,fromWormhole:!!C.temporary.hand.length,selectedKeeperGroup:X,selectedPlayerGroup:B,selectedRuleGroup:tt}),on&&m.jsx(cN,{cardState:on,table:u,localPlayer:D,playEffect:vE,startDuel:_o,discardKeeper:aE,inspectKeeper:I,selectedKeeperGroup:X,selectedPlayerGroup:B}),D.hand.length&&!C.temporary.hand.length||!Wl()?m.jsx(Vc,{selectCard:K,hand:D.hand}):null,C.temporary.hand.length>0&&Wl()&&m.jsx(Vc,{selectCard:K,hand:C.temporary.hand}),m.jsx(oN,{table:u,localPlayer:D,showCardPiles:j,endTurn:RE}),u.pending!==!1&&u.pending!==!0&&m.jsx(Vt,{position:"PENDING",cardState:{state:u.pending,index:0}}),u.counter!==!1&&u.counter!==!0&&m.jsx(Vt,{position:"PENDING",cardState:{state:u.counter,index:0}}),u.history.played&&u.history.played.length&&m.jsx("div",{className:"last_played",onClick:()=>Re(()=>!Y),children:m.jsx(Vt,{position:"PREVIOUS_PENDING",cardState:{state:ct(u.history.played[u.history.played.length-1].id),index:0}})}),j.pure&&m.jsx(Au,{type:"PURE",pile:_.pure,drawSpecificCard:jl}),j.discard&&m.jsx(Au,{type:"DISCARD",pile:_.discard,drawSpecificCard:jl}),j.locations&&m.jsx(Au,{type:"LOCATIONS",pile:Array.from(Ai.filter(y=>y.subtype==="LOCATION")),drawSpecificCard:jl,playCard:y=>{bt(y,-1),F(T=>({...T,locations:!1}))}}),Y&&m.jsx(fN,{history:u.history})]})}function kN(){const{setUser:t}=x.useContext(lt),e=rn(),n=x.useRef(null),r=x.useRef(null);return m.jsx("div",{className:"main_menu",children:m.jsxs("form",{className:"menu",method:"",children:[m.jsxs("div",{className:"form_container__inner",children:[m.jsx("label",{htmlFor:"username",children:"Username"}),m.jsx("input",{id:"username",ref:n,className:"form_input",type:"text",name:"username",placeholder:"Enter Username.."})]}),m.jsxs("div",{className:"form_container__inner",children:[m.jsx("label",{htmlFor:"password",children:"Password"}),m.jsx("input",{id:"password",ref:r,className:"form_input",type:"password",name:"password",placeholder:"Enter Password.."})]}),m.jsx("hr",{}),m.jsxs("div",{className:"form_container__inner",children:[m.jsx("button",{className:"menu_link",type:"button",onClick:()=>{var a;const i=n.current,s=r.current;if(!i||!s)return;po.testUserSignIn(n==null?void 0:n.current.value,(a=r.current)==null?void 0:a.value,t)&&e("/lobby")},children:"Sign In"}),m.jsx("p",{style:{alignSelf:"center"},children:"Or"}),m.jsx("button",{className:"menu_link",type:"button",children:"Create Account"})]})]})})}const{destroyRoom:ym,leaveRoom:TN}=Ml,{uploadStats:Go}=po;function AN({winGameStats:t}){const{winner:e,round:n,goal:r}=t,{joinedGameID:i,setJoinedGameID:s,db:o,user:a,setUser:l}=x.useContext(lt),u=rn(),[h,c]=x.useState(!1);eR(()=>{_(),(a==null?void 0:a.uid)===i&&ym(o,i,s)}),x.useEffect(()=>{if(!a||!e||!n||!r)return u("/account");d()},[]);const d=async()=>{a&&(_(),(a==null?void 0:a.uid)===i?await ym(o,i,s):TN(o,i,a,s),c(()=>!0))},_=()=>{if(!a||!r)return;if((e==null?void 0:e.user.uid)===a.uid){const R=a!=null&&a.goalWins[`${r.id}`]?(a==null?void 0:a.goalWins[`${r==null?void 0:r.id}`])+1:1,f=a.stats.wins+1;Go("GOALWON",o,{cardKey:r==null?void 0:r.id,cardNum:R},a.uid),Go("WINS",o,{amount:f},a.uid),l(p=>{if(p)return{...p,cardCatalog:Object.assign({},p.cardCatalog,{[`${r.id}`]:R}),goalWins:Object.assign({},p.goalWins,{[`${r.id}`]:R}),stats:Object.assign({},p.stats,{wins:f})}})}const v=a.stats.totalRounds+n,C=a.stats.played+1;Go("ROUNDS",o,{amount:v},a.uid),Go("PLAYED",o,{amount:C},a.uid),l(R=>{if(R)return{...R,stats:Object.assign({},R.stats,{played:C,totalRounds:v})}})};return m.jsxs(m.Fragment,{children:[m.jsx(Mr,{}),m.jsx("div",{className:"popup",children:m.jsxs("div",{className:"duel_group",children:[m.jsx(Vt,{cardState:{state:r??{},index:0},position:"SELECT"}),m.jsxs("div",{className:"duel_group__middle flex_j",children:[m.jsxs("div",{children:[m.jsxs("h1",{children:[e==null?void 0:e.user.username," Wins!"]}),m.jsxs("h2",{children:["in ",n," rounds"]})]}),m.jsx("button",{className:`play_btn__card flipped ${h?"":"disabled"}`,onClick:()=>{h&&u("/account")},children:"Continue"})]})]})}),m.jsx(Vc,{hand:(e==null?void 0:e.keepers)??[],selectCard:()=>null})]})}const NN=["living_subtype","rune_subtype","equipment_subtype","misthalin","asgarnia","morytania","abyss","wilderness","entrana","zanaris","ghost"],{changeName:xN,changeIcon:PN,changeGoalSetting:LN}=po;function ON(){const{user:t,db:e,setUser:n}=x.useContext(lt),r=rn(),i=x.useRef(null),[s,o]=x.useState(!1);x.useEffect(()=>{if(!t)return r("/")},[]);const a=(_,v)=>{if(!t)return;const C=_/v;return isNaN(C)?0:C.toFixed(2)},l=()=>{if(!t)return;const _=t.stats.wins/t.stats.played;return isNaN(_)?0:_.toFixed(2)},u=()=>{if(!t)return;const _=[];for(const v in t.cardCatalog)_.push(t.cardCatalog[v]);return _.reduce((v,C)=>v+C,0)},h=()=>{if(!t)return;let _=0;for(const v in t==null?void 0:t.cardCatalog)(t==null?void 0:t.cardCatalog[v])>0&&_++;return _},c=()=>{const{cardCatalog:_,goalWins:v}={cardCatalog:{RL04:0,RL02:0,RL03:0,RL05:0,RL06:0,RL08:0},goalWins:{G30:0}};return{cardCatalog:_,goalWins:v}},d=()=>NN.map((_,v)=>{let C=!1;const{goalWins:R,cardCatalog:f}=t??c();return _==="ghost"&&!R.G30&&(C=!0),_==="morytania"&&f.RL04<50&&(C=!0),_==="abyss"&&f.RL02<50&&(C=!0),_==="asgarnia"&&f.RL03<50&&(C=!0),_==="wilderness"&&f.RL05<50&&(C=!0),_==="entrana"&&f.RL06<50&&(C=!0),_==="zanaris"&&f.RL08<50&&(C=!0),m.jsx("button",{className:`icon_pick ${C?"locked":""}`,onClick:async()=>{!t||C||(await PN(e,_,t==null?void 0:t.uid),n(p=>{if(p)return{...p,icon:_}}))},children:m.jsx("div",{className:`${_} ready_mark icon`})},`icon__${v}`)});return m.jsxs("div",{className:"main_menu",style:{flexDirection:"row",gap:"5rem"},children:[m.jsx(Uf,{pageType:"ACCOUNT"}),m.jsx(Mr,{}),m.jsx("div",{className:"menu",children:m.jsxs("div",{children:[m.jsxs("h2",{style:{textAlign:"center"},children:[t==null?void 0:t.username,m.jsx("span",{className:`icon ${t==null?void 0:t.icon} ready_mark`})]}),m.jsx("hr",{className:"card_hr__thick"}),m.jsxs("ul",{className:"stat_list",children:[m.jsxs("div",{className:"stat_list",children:[m.jsxs("div",{className:"li_header stat_list",children:[m.jsx("li",{children:"Games"}),m.jsx("hr",{className:"card_hr__thin"})]}),m.jsxs("li",{children:["Won: ",m.jsx("span",{children:t==null?void 0:t.stats.wins})]}),m.jsxs("li",{children:["Played: ",m.jsx("span",{children:t==null?void 0:t.stats.played})]}),m.jsxs("li",{children:["Win Ratio: ",m.jsx("span",{children:l()})]})]}),m.jsxs("div",{className:"stat_list",children:[m.jsxs("div",{className:"stat_list li_header",children:[m.jsx("li",{children:"Rounds"}),m.jsx("hr",{className:"card_hr__thin"})]}),m.jsxs("li",{children:["Average: ",m.jsx("span",{children:a((t==null?void 0:t.stats.totalRounds)??0,(t==null?void 0:t.stats.played)??0)})]}),m.jsxs("li",{children:["Total: ",m.jsx("span",{children:t==null?void 0:t.stats.totalRounds})]})]}),m.jsxs("div",{className:"stat_list",children:[m.jsxs("div",{className:"stat_list li_header",children:[m.jsx("li",{children:"Cards Played"}),m.jsx("hr",{className:"card_hr__thin"})]}),m.jsxs("li",{children:["Unique: ",m.jsx("span",{children:h()})]}),m.jsxs("li",{children:["Average: ",m.jsx("span",{children:a(u()??0,(t==null?void 0:t.stats.played)??0)})]}),m.jsxs("li",{children:["Total: ",m.jsx("span",{children:u()})]})]})]})]})}),m.jsxs("div",{className:"menu account_options",children:[m.jsxs("div",{children:[m.jsx("h2",{style:{textAlign:"center",marginBottom:"1rem"},children:"Choose Icon"}),m.jsx("div",{className:"icon_picker",children:d()})]}),m.jsxs("div",{className:"username_form",children:[s&&m.jsx("input",{ref:i,style:{padding:"0.25rem"},className:"form_input",type:"text",maxLength:16,placeholder:"Username.."}),m.jsx("button",{className:"menu_link",onClick:()=>{var _;if(!s)return o(()=>!0);!i.current||!t||i.current.value.length<3||(xN(e,(_=i.current)==null?void 0:_.value,t==null?void 0:t.uid),o(()=>!1),n(v=>{var C;if(v)return{...v,username:((C=i.current)==null?void 0:C.value)??"Anon"}}))},children:"Change Name"}),m.jsx("button",{className:`discard_btn__card ${t!=null&&t.goalImages?"enabled":""}`,onClick:async()=>{t&&(await LN(e,!(t!=null&&t.goalImages),(t==null?void 0:t.uid)??""),n(_=>_&&{..._,goalImages:!t.goalImages}))},children:"Goal Image Mode"})]})]})]})}function DN({filterByType:t,filterByWin:e,filter:n,playOrWon:r,completionPercentage:i}){return m.jsx("div",{className:"sidebar_container",children:m.jsxs("ul",{children:[m.jsxs("li",{className:`maintype_li ${n?"":"selected"}`,onClick:()=>t(""),children:[i,"% Completion"]}),m.jsxs("section",{className:"keeper_section",children:[m.jsx("li",{className:`maintype_li ${n==="KEEPER"?"selected":""}`,onClick:()=>t("KEEPER"),children:"Keepers"}),m.jsx("li",{className:`subtype_li ${n==="LIVING"?"selected":""}`,onClick:()=>t("LIVING"),children:"- Living"}),m.jsx("li",{className:`subtype_li ${n==="RUNE"?"selected":""}`,onClick:()=>t("RUNE"),children:"- Rune"}),m.jsx("li",{className:`subtype_li ${n==="EQUIPMENT"?"selected":""}`,onClick:()=>t("EQUIPMENT"),children:"- Equipment"})]}),m.jsxs("section",{className:"goal_section",children:[m.jsx("li",{className:`maintype_li ${n==="GOAL"?"selected":""}`,onClick:()=>t("GOAL"),children:"Goals"}),m.jsx("li",{className:`subtype_li ${n==="GOAL"&&r==="PLAY"?"selected":""}`,onClick:()=>e(!1),children:"- Played"}),m.jsx("li",{className:`subtype_li ${n==="GOAL"&&r==="WON"?"selected":""}`,onClick:()=>e(!0),children:"- Won"})]}),m.jsxs("section",{className:"rule_section",children:[m.jsx("li",{className:`maintype_li ${n==="RULE"?"selected":""}`,onClick:()=>t("RULE"),children:"Rules"}),m.jsx("li",{className:`subtype_li ${n==="LOCATION"?"selected":""}`,onClick:()=>t("LOCATION"),children:"- Location"}),m.jsx("li",{className:`subtype_li ${n==="BASIC"?"selected":""}`,onClick:()=>t("BASIC"),children:"- Basic"})]}),m.jsx("section",{className:"action_section",children:m.jsx("li",{className:`maintype_li ${n==="ACTION"?"selected":""}`,onClick:()=>t("ACTION"),children:"Actions"})}),m.jsx("section",{className:"counter_section",children:m.jsx("li",{className:`maintype_li ${n==="COUNTER"?"selected":""}`,onClick:()=>t("COUNTER"),children:"Counters"})}),m.jsx("section",{className:"creeper_section",children:m.jsx("li",{className:`maintype_li ${n==="CREEPER"?"selected":""}`,onClick:()=>t("CREEPER"),children:"Creepers"})})]})})}function bN({isLocked:t}){return m.jsx("div",{className:`card_back card ${t?"card_fade":""}`,children:m.jsx("p",{className:"card_back__title",children:"Runeflux"})})}function MN(){const{user:t}=x.useContext(lt),e=rn(),[n,r]=x.useState(""),[i,s]=x.useState("PLAY");x.useEffect(()=>{if(!t)return e("/")},[]);const o=d=>{s(()=>"PLAY"),r(()=>d)},a=(d=!1)=>{d&&r(()=>"GOAL"),s(()=>d?"WON":"PLAY")},l=()=>{if(!t)return 0;let d=0;for(const _ in t==null?void 0:t.cardCatalog)(t==null?void 0:t.cardCatalog[_])>0&&d++;return d?Math.round(d/Ai.length*100):0},u=d=>{if(t){if((t==null?void 0:t.cardCatalog[`${d.id}`])>499)return"golden_highlight";if((t==null?void 0:t.cardCatalog[`${d.id}`])>249)return"silver";if((t==null?void 0:t.cardCatalog[`${d.id}`])>49)return"brown";if((t==null?void 0:t.cardCatalog[`${d.id}`])>0)return"black-tooltip"}},h=d=>t?i==="PLAY"?(t==null?void 0:t.cardCatalog[`${d.id}`])>0:t.goalWins[`${d.id}`]?(t==null?void 0:t.goalWins[`${d.id}`])>0:!1:0,c=()=>{if(t)return Ai.map((d,_)=>{if(!(n&&d.type!==n&&d.subtype!==n))return h(d)?m.jsxs("div",{children:[m.jsx(Vt,{position:"CATALOG",cardState:{state:d,index:_}}),i==="PLAY"?m.jsxs("p",{className:"played_amount",style:{backgroundColor:`var(--${u(d)})`},children:["Played: ",t==null?void 0:t.cardCatalog[`${d.id}`]]}):m.jsxs("p",{className:"played_amount",children:["Won: ",t.goalWins?t==null?void 0:t.goalWins[`${d.id}`]:0]})]},`catalog_card__${_}`):m.jsx(bN,{isLocked:!0},`catalog_card__locked_${_}`)})};return m.jsxs("div",{className:"main_menu",children:[m.jsx(Mr,{}),m.jsx(Uf,{pageType:"CATALOG"}),m.jsx(DN,{filter:n,playOrWon:i,filterByType:o,filterByWin:a,completionPercentage:l()}),m.jsx("div",{className:"catalog",children:c()})]})}function jN(){const t=rn();return x.useEffect(()=>{t("/")},[]),m.jsx("div",{children:"Error 404"})}const UN=ty(FA);function FN(){const[t,e]=x.useState(),[n,r]=x.useState(""),[i,s]=x.useState({winner:null,round:0,goal:null}),o=Dk(UN,"https://flux-bbbdc-default-rtdb.europe-west1.firebasedatabase.app/"),a=UA();return m.jsx(qw,{basename:"runeflux",children:m.jsx(lt.Provider,{value:{user:t,setUser:e,db:o,auth:a,joinedGameID:n,setJoinedGameID:r},children:m.jsxs(Hw,{children:[m.jsx(an,{path:"/",element:m.jsx(KA,{})}),m.jsx(an,{path:"/lobby",element:m.jsx(QA,{})}),m.jsx(an,{path:"/game",element:m.jsx(IN,{setWinGameStats:s})}),m.jsx(an,{path:"/login",element:m.jsx(kN,{})}),m.jsx(an,{path:"/gameover",element:m.jsx(AN,{winGameStats:i})}),m.jsx(an,{path:"/account",element:m.jsx(ON,{})}),m.jsx(an,{path:"/catalog",element:m.jsx(MN,{})}),m.jsx(an,{path:"*",element:m.jsx(jN,{})})]})})})}Pu.createRoot(document.getElementById("root")).render(m.jsx(Am.StrictMode,{children:m.jsx(FN,{})}));
