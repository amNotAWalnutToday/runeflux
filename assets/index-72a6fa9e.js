function CE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function wE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var am={exports:{}},Ba={},lm={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hi=Symbol.for("react.element"),RE=Symbol.for("react.portal"),SE=Symbol.for("react.fragment"),IE=Symbol.for("react.strict_mode"),AE=Symbol.for("react.profiler"),TE=Symbol.for("react.provider"),NE=Symbol.for("react.context"),kE=Symbol.for("react.forward_ref"),xE=Symbol.for("react.suspense"),LE=Symbol.for("react.memo"),PE=Symbol.for("react.lazy"),Df=Symbol.iterator;function OE(t){return t===null||typeof t!="object"?null:(t=Df&&t[Df]||t["@@iterator"],typeof t=="function"?t:null)}var um={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cm=Object.assign,dm={};function Rs(t,e,n){this.props=t,this.context=e,this.refs=dm,this.updater=n||um}Rs.prototype.isReactComponent={};Rs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Rs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function fm(){}fm.prototype=Rs.prototype;function Mc(t,e,n){this.props=t,this.context=e,this.refs=dm,this.updater=n||um}var Uc=Mc.prototype=new fm;Uc.constructor=Mc;cm(Uc,Rs.prototype);Uc.isPureReactComponent=!0;var bf=Array.isArray,hm=Object.prototype.hasOwnProperty,jc={current:null},pm={key:!0,ref:!0,__self:!0,__source:!0};function mm(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)hm.call(e,r)&&!pm.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Hi,type:t,key:i,ref:o,props:s,_owner:jc.current}}function DE(t,e){return{$$typeof:Hi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Fc(t){return typeof t=="object"&&t!==null&&t.$$typeof===Hi}function bE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Mf=/\/+/g;function Nl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?bE(""+t.key):e.toString(36)}function Po(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Hi:case RE:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Nl(o,0):r,bf(s)?(n="",t!=null&&(n=t.replace(Mf,"$&/")+"/"),Po(s,e,n,"",function(u){return u})):s!=null&&(Fc(s)&&(s=DE(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Mf,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",bf(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Nl(i,a);o+=Po(i,e,n,l,s)}else if(l=OE(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Nl(i,a++),o+=Po(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function lo(t,e,n){if(t==null)return t;var r=[],s=0;return Po(t,r,"","",function(i){return e.call(n,i,s++)}),r}function ME(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var tt={current:null},Oo={transition:null},UE={ReactCurrentDispatcher:tt,ReactCurrentBatchConfig:Oo,ReactCurrentOwner:jc};se.Children={map:lo,forEach:function(t,e,n){lo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return lo(t,function(){e++}),e},toArray:function(t){return lo(t,function(e){return e})||[]},only:function(t){if(!Fc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=Rs;se.Fragment=SE;se.Profiler=AE;se.PureComponent=Mc;se.StrictMode=IE;se.Suspense=xE;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UE;se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=cm({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=jc.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)hm.call(e,l)&&!pm.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Hi,type:t.type,key:s,ref:i,props:r,_owner:o}};se.createContext=function(t){return t={$$typeof:NE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:TE,_context:t},t.Consumer=t};se.createElement=mm;se.createFactory=function(t){var e=mm.bind(null,t);return e.type=t,e};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:kE,render:t}};se.isValidElement=Fc;se.lazy=function(t){return{$$typeof:PE,_payload:{_status:-1,_result:t},_init:ME}};se.memo=function(t,e){return{$$typeof:LE,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=Oo.transition;Oo.transition={};try{t()}finally{Oo.transition=e}};se.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};se.useCallback=function(t,e){return tt.current.useCallback(t,e)};se.useContext=function(t){return tt.current.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t){return tt.current.useDeferredValue(t)};se.useEffect=function(t,e){return tt.current.useEffect(t,e)};se.useId=function(){return tt.current.useId()};se.useImperativeHandle=function(t,e,n){return tt.current.useImperativeHandle(t,e,n)};se.useInsertionEffect=function(t,e){return tt.current.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return tt.current.useLayoutEffect(t,e)};se.useMemo=function(t,e){return tt.current.useMemo(t,e)};se.useReducer=function(t,e,n){return tt.current.useReducer(t,e,n)};se.useRef=function(t){return tt.current.useRef(t)};se.useState=function(t){return tt.current.useState(t)};se.useSyncExternalStore=function(t,e,n){return tt.current.useSyncExternalStore(t,e,n)};se.useTransition=function(){return tt.current.useTransition()};se.version="18.2.0";lm.exports=se;var P=lm.exports;const ym=wE(P),jE=CE({__proto__:null,default:ym},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FE=P,WE=Symbol.for("react.element"),GE=Symbol.for("react.fragment"),KE=Object.prototype.hasOwnProperty,HE=FE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,BE={key:!0,ref:!0,__self:!0,__source:!0};function _m(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)KE.call(e,r)&&!BE.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:WE,type:t,key:i,ref:o,props:s,_owner:HE.current}}Ba.Fragment=GE;Ba.jsx=_m;Ba.jsxs=_m;am.exports=Ba;var m=am.exports,_u={},gm={exports:{}},Et={},vm={exports:{}},Em={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(I,T){var L=I.length;I.push(T);e:for(;0<L;){var D=L-1>>>1,K=I[D];if(0<s(K,T))I[D]=T,I[L]=K,L=D;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var T=I[0],L=I.pop();if(L!==T){I[0]=L;e:for(var D=0,K=I.length,B=K>>>1;D<B;){var X=2*(D+1)-1,Q=I[X],Z=X+1,A=I[Z];if(0>s(Q,L))Z<K&&0>s(A,Q)?(I[D]=A,I[Z]=L,D=Z):(I[D]=Q,I[X]=L,D=X);else if(Z<K&&0>s(A,L))I[D]=A,I[Z]=L,D=Z;else break e}}return T}function s(I,T){var L=I.sortIndex-T.sortIndex;return L!==0?L:I.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,c=null,f=3,y=!1,v=!1,w=!1,C=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(I){for(var T=n(u);T!==null;){if(T.callback===null)r(u);else if(T.startTime<=I)r(u),T.sortIndex=T.expirationTime,e(l,T);else break;T=n(u)}}function N(I){if(w=!1,_(I),!v)if(n(l)!==null)v=!0,Kt(b);else{var T=n(u);T!==null&&S(N,T.startTime-I)}}function b(I,T){v=!1,w&&(w=!1,h(k),k=-1),y=!0;var L=f;try{for(_(T),c=n(l);c!==null&&(!(c.expirationTime>T)||I&&!z());){var D=c.callback;if(typeof D=="function"){c.callback=null,f=c.priorityLevel;var K=D(c.expirationTime<=T);T=t.unstable_now(),typeof K=="function"?c.callback=K:c===n(l)&&r(l),_(T)}else r(l);c=n(l)}if(c!==null)var B=!0;else{var X=n(u);X!==null&&S(N,X.startTime-T),B=!1}return B}finally{c=null,f=L,y=!1}}var M=!1,O=null,k=-1,j=5,W=-1;function z(){return!(t.unstable_now()-W<j)}function Ae(){if(O!==null){var I=t.unstable_now();W=I;var T=!0;try{T=O(!0,I)}finally{T?Ne():(M=!1,O=null)}}else M=!1}var Ne;if(typeof p=="function")Ne=function(){p(Ae)};else if(typeof MessageChannel<"u"){var Le=new MessageChannel,Nt=Le.port2;Le.port1.onmessage=Ae,Ne=function(){Nt.postMessage(null)}}else Ne=function(){C(Ae,0)};function Kt(I){O=I,M||(M=!0,Ne())}function S(I,T){k=C(function(){I(t.unstable_now())},T)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){v||y||(v=!0,Kt(b))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(I){switch(f){case 1:case 2:case 3:var T=3;break;default:T=f}var L=f;f=T;try{return I()}finally{f=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,T){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var L=f;f=I;try{return T()}finally{f=L}},t.unstable_scheduleCallback=function(I,T,L){var D=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?D+L:D):L=D,I){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=L+K,I={id:d++,callback:T,priorityLevel:I,startTime:L,expirationTime:K,sortIndex:-1},L>D?(I.sortIndex=L,e(u,I),n(l)===null&&I===n(u)&&(w?(h(k),k=-1):w=!0,S(N,L-D))):(I.sortIndex=K,e(l,I),v||y||(v=!0,Kt(b))),I},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(I){var T=f;return function(){var L=f;f=T;try{return I.apply(this,arguments)}finally{f=L}}}})(Em);vm.exports=Em;var $E=vm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cm=P,vt=$E;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wm=new Set,pi={};function Pr(t,e){cs(t,e),cs(t+"Capture",e)}function cs(t,e){for(pi[t]=e,t=0;t<e.length;t++)wm.add(e[t])}var dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gu=Object.prototype.hasOwnProperty,zE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Uf={},jf={};function VE(t){return gu.call(jf,t)?!0:gu.call(Uf,t)?!1:zE.test(t)?jf[t]=!0:(Uf[t]=!0,!1)}function YE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function qE(t,e,n,r){if(e===null||typeof e>"u"||YE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function nt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Be={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Be[t]=new nt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Be[e]=new nt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Be[t]=new nt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Be[t]=new nt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Be[t]=new nt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Be[t]=new nt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Be[t]=new nt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Be[t]=new nt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Be[t]=new nt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Wc=/[\-:]([a-z])/g;function Gc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Wc,Gc);Be[e]=new nt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Wc,Gc);Be[e]=new nt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Wc,Gc);Be[e]=new nt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Be[t]=new nt(t,1,!1,t.toLowerCase(),null,!1,!1)});Be.xlinkHref=new nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Be[t]=new nt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Kc(t,e,n,r){var s=Be.hasOwnProperty(e)?Be[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qE(e,n,s,r)&&(n=null),r||s===null?VE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var gn=Cm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,uo=Symbol.for("react.element"),Fr=Symbol.for("react.portal"),Wr=Symbol.for("react.fragment"),Hc=Symbol.for("react.strict_mode"),vu=Symbol.for("react.profiler"),Rm=Symbol.for("react.provider"),Sm=Symbol.for("react.context"),Bc=Symbol.for("react.forward_ref"),Eu=Symbol.for("react.suspense"),Cu=Symbol.for("react.suspense_list"),$c=Symbol.for("react.memo"),Sn=Symbol.for("react.lazy"),Im=Symbol.for("react.offscreen"),Ff=Symbol.iterator;function Us(t){return t===null||typeof t!="object"?null:(t=Ff&&t[Ff]||t["@@iterator"],typeof t=="function"?t:null)}var Re=Object.assign,kl;function qs(t){if(kl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);kl=e&&e[1]||""}return`
`+kl+t}var xl=!1;function Ll(t,e){if(!t||xl)return"";xl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{xl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?qs(t):""}function QE(t){switch(t.tag){case 5:return qs(t.type);case 16:return qs("Lazy");case 13:return qs("Suspense");case 19:return qs("SuspenseList");case 0:case 2:case 15:return t=Ll(t.type,!1),t;case 11:return t=Ll(t.type.render,!1),t;case 1:return t=Ll(t.type,!0),t;default:return""}}function wu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Wr:return"Fragment";case Fr:return"Portal";case vu:return"Profiler";case Hc:return"StrictMode";case Eu:return"Suspense";case Cu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Sm:return(t.displayName||"Context")+".Consumer";case Rm:return(t._context.displayName||"Context")+".Provider";case Bc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $c:return e=t.displayName||null,e!==null?e:wu(t.type)||"Memo";case Sn:e=t._payload,t=t._init;try{return wu(t(e))}catch{}}return null}function XE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wu(e);case 8:return e===Hc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Am(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function JE(t){var e=Am(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function co(t){t._valueTracker||(t._valueTracker=JE(t))}function Tm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Am(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Yo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ru(t,e){var n=e.checked;return Re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Wf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Qn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Nm(t,e){e=e.checked,e!=null&&Kc(t,"checked",e,!1)}function Su(t,e){Nm(t,e);var n=Qn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Iu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Iu(t,e.type,Qn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Gf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Iu(t,e,n){(e!=="number"||Yo(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Qs=Array.isArray;function Zr(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Qn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Au(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Kf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Qs(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Qn(n)}}function km(t,e){var n=Qn(e.value),r=Qn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Hf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function xm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?xm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var fo,Lm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(fo=fo||document.createElement("div"),fo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=fo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function mi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ei={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ZE=["Webkit","ms","Moz","O"];Object.keys(ei).forEach(function(t){ZE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ei[e]=ei[t]})});function Pm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ei.hasOwnProperty(t)&&ei[t]?(""+e).trim():e+"px"}function Om(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Pm(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var e0=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nu(t,e){if(e){if(e0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function ku(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xu=null;function zc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Lu=null,es=null,ts=null;function Bf(t){if(t=zi(t)){if(typeof Lu!="function")throw Error(U(280));var e=t.stateNode;e&&(e=qa(e),Lu(t.stateNode,t.type,e))}}function Dm(t){es?ts?ts.push(t):ts=[t]:es=t}function bm(){if(es){var t=es,e=ts;if(ts=es=null,Bf(t),e)for(t=0;t<e.length;t++)Bf(e[t])}}function Mm(t,e){return t(e)}function Um(){}var Pl=!1;function jm(t,e,n){if(Pl)return t(e,n);Pl=!0;try{return Mm(t,e,n)}finally{Pl=!1,(es!==null||ts!==null)&&(Um(),bm())}}function yi(t,e){var n=t.stateNode;if(n===null)return null;var r=qa(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Pu=!1;if(dn)try{var js={};Object.defineProperty(js,"passive",{get:function(){Pu=!0}}),window.addEventListener("test",js,js),window.removeEventListener("test",js,js)}catch{Pu=!1}function t0(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var ti=!1,qo=null,Qo=!1,Ou=null,n0={onError:function(t){ti=!0,qo=t}};function r0(t,e,n,r,s,i,o,a,l){ti=!1,qo=null,t0.apply(n0,arguments)}function s0(t,e,n,r,s,i,o,a,l){if(r0.apply(this,arguments),ti){if(ti){var u=qo;ti=!1,qo=null}else throw Error(U(198));Qo||(Qo=!0,Ou=u)}}function Or(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Fm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $f(t){if(Or(t)!==t)throw Error(U(188))}function i0(t){var e=t.alternate;if(!e){if(e=Or(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return $f(s),t;if(i===r)return $f(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function Wm(t){return t=i0(t),t!==null?Gm(t):null}function Gm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Gm(t);if(e!==null)return e;t=t.sibling}return null}var Km=vt.unstable_scheduleCallback,zf=vt.unstable_cancelCallback,o0=vt.unstable_shouldYield,a0=vt.unstable_requestPaint,Te=vt.unstable_now,l0=vt.unstable_getCurrentPriorityLevel,Vc=vt.unstable_ImmediatePriority,Hm=vt.unstable_UserBlockingPriority,Xo=vt.unstable_NormalPriority,u0=vt.unstable_LowPriority,Bm=vt.unstable_IdlePriority,$a=null,Vt=null;function c0(t){if(Vt&&typeof Vt.onCommitFiberRoot=="function")try{Vt.onCommitFiberRoot($a,t,void 0,(t.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:h0,d0=Math.log,f0=Math.LN2;function h0(t){return t>>>=0,t===0?32:31-(d0(t)/f0|0)|0}var ho=64,po=4194304;function Xs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Jo(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Xs(a):(i&=o,i!==0&&(r=Xs(i)))}else o=n&~s,o!==0?r=Xs(o):i!==0&&(r=Xs(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ut(e),s=1<<n,r|=t[n],e&=~s;return r}function p0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function m0(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ut(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=p0(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Du(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $m(){var t=ho;return ho<<=1,!(ho&4194240)&&(ho=64),t}function Ol(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Bi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ut(e),t[e]=n}function y0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ut(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Yc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ut(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ue=0;function zm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Vm,qc,Ym,qm,Qm,bu=!1,mo=[],Mn=null,Un=null,jn=null,_i=new Map,gi=new Map,An=[],_0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vf(t,e){switch(t){case"focusin":case"focusout":Mn=null;break;case"dragenter":case"dragleave":Un=null;break;case"mouseover":case"mouseout":jn=null;break;case"pointerover":case"pointerout":_i.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":gi.delete(e.pointerId)}}function Fs(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=zi(e),e!==null&&qc(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function g0(t,e,n,r,s){switch(e){case"focusin":return Mn=Fs(Mn,t,e,n,r,s),!0;case"dragenter":return Un=Fs(Un,t,e,n,r,s),!0;case"mouseover":return jn=Fs(jn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return _i.set(i,Fs(_i.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,gi.set(i,Fs(gi.get(i)||null,t,e,n,r,s)),!0}return!1}function Xm(t){var e=dr(t.target);if(e!==null){var n=Or(e);if(n!==null){if(e=n.tag,e===13){if(e=Fm(n),e!==null){t.blockedOn=e,Qm(t.priority,function(){Ym(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Do(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Mu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);xu=r,n.target.dispatchEvent(r),xu=null}else return e=zi(n),e!==null&&qc(e),t.blockedOn=n,!1;e.shift()}return!0}function Yf(t,e,n){Do(t)&&n.delete(e)}function v0(){bu=!1,Mn!==null&&Do(Mn)&&(Mn=null),Un!==null&&Do(Un)&&(Un=null),jn!==null&&Do(jn)&&(jn=null),_i.forEach(Yf),gi.forEach(Yf)}function Ws(t,e){t.blockedOn===e&&(t.blockedOn=null,bu||(bu=!0,vt.unstable_scheduleCallback(vt.unstable_NormalPriority,v0)))}function vi(t){function e(s){return Ws(s,t)}if(0<mo.length){Ws(mo[0],t);for(var n=1;n<mo.length;n++){var r=mo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Mn!==null&&Ws(Mn,t),Un!==null&&Ws(Un,t),jn!==null&&Ws(jn,t),_i.forEach(e),gi.forEach(e),n=0;n<An.length;n++)r=An[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<An.length&&(n=An[0],n.blockedOn===null);)Xm(n),n.blockedOn===null&&An.shift()}var ns=gn.ReactCurrentBatchConfig,Zo=!0;function E0(t,e,n,r){var s=ue,i=ns.transition;ns.transition=null;try{ue=1,Qc(t,e,n,r)}finally{ue=s,ns.transition=i}}function C0(t,e,n,r){var s=ue,i=ns.transition;ns.transition=null;try{ue=4,Qc(t,e,n,r)}finally{ue=s,ns.transition=i}}function Qc(t,e,n,r){if(Zo){var s=Mu(t,e,n,r);if(s===null)Hl(t,e,r,ea,n),Vf(t,r);else if(g0(s,t,e,n,r))r.stopPropagation();else if(Vf(t,r),e&4&&-1<_0.indexOf(t)){for(;s!==null;){var i=zi(s);if(i!==null&&Vm(i),i=Mu(t,e,n,r),i===null&&Hl(t,e,r,ea,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Hl(t,e,r,null,n)}}var ea=null;function Mu(t,e,n,r){if(ea=null,t=zc(r),t=dr(t),t!==null)if(e=Or(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Fm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ea=t,null}function Jm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(l0()){case Vc:return 1;case Hm:return 4;case Xo:case u0:return 16;case Bm:return 536870912;default:return 16}default:return 16}}var On=null,Xc=null,bo=null;function Zm(){if(bo)return bo;var t,e=Xc,n=e.length,r,s="value"in On?On.value:On.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return bo=s.slice(t,1<r?1-r:void 0)}function Mo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function yo(){return!0}function qf(){return!1}function Ct(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?yo:qf,this.isPropagationStopped=qf,this}return Re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=yo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=yo)},persist:function(){},isPersistent:yo}),e}var Ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jc=Ct(Ss),$i=Re({},Ss,{view:0,detail:0}),w0=Ct($i),Dl,bl,Gs,za=Re({},$i,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Gs&&(Gs&&t.type==="mousemove"?(Dl=t.screenX-Gs.screenX,bl=t.screenY-Gs.screenY):bl=Dl=0,Gs=t),Dl)},movementY:function(t){return"movementY"in t?t.movementY:bl}}),Qf=Ct(za),R0=Re({},za,{dataTransfer:0}),S0=Ct(R0),I0=Re({},$i,{relatedTarget:0}),Ml=Ct(I0),A0=Re({},Ss,{animationName:0,elapsedTime:0,pseudoElement:0}),T0=Ct(A0),N0=Re({},Ss,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),k0=Ct(N0),x0=Re({},Ss,{data:0}),Xf=Ct(x0),L0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},P0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},O0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function D0(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=O0[t])?!!e[t]:!1}function Zc(){return D0}var b0=Re({},$i,{key:function(t){if(t.key){var e=L0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Mo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?P0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zc,charCode:function(t){return t.type==="keypress"?Mo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Mo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),M0=Ct(b0),U0=Re({},za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jf=Ct(U0),j0=Re({},$i,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zc}),F0=Ct(j0),W0=Re({},Ss,{propertyName:0,elapsedTime:0,pseudoElement:0}),G0=Ct(W0),K0=Re({},za,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),H0=Ct(K0),B0=[9,13,27,32],ed=dn&&"CompositionEvent"in window,ni=null;dn&&"documentMode"in document&&(ni=document.documentMode);var $0=dn&&"TextEvent"in window&&!ni,ey=dn&&(!ed||ni&&8<ni&&11>=ni),Zf=String.fromCharCode(32),eh=!1;function ty(t,e){switch(t){case"keyup":return B0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ny(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Gr=!1;function z0(t,e){switch(t){case"compositionend":return ny(e);case"keypress":return e.which!==32?null:(eh=!0,Zf);case"textInput":return t=e.data,t===Zf&&eh?null:t;default:return null}}function V0(t,e){if(Gr)return t==="compositionend"||!ed&&ty(t,e)?(t=Zm(),bo=Xc=On=null,Gr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ey&&e.locale!=="ko"?null:e.data;default:return null}}var Y0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function th(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Y0[t.type]:e==="textarea"}function ry(t,e,n,r){Dm(r),e=ta(e,"onChange"),0<e.length&&(n=new Jc("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ri=null,Ei=null;function q0(t){py(t,0)}function Va(t){var e=Br(t);if(Tm(e))return t}function Q0(t,e){if(t==="change")return e}var sy=!1;if(dn){var Ul;if(dn){var jl="oninput"in document;if(!jl){var nh=document.createElement("div");nh.setAttribute("oninput","return;"),jl=typeof nh.oninput=="function"}Ul=jl}else Ul=!1;sy=Ul&&(!document.documentMode||9<document.documentMode)}function rh(){ri&&(ri.detachEvent("onpropertychange",iy),Ei=ri=null)}function iy(t){if(t.propertyName==="value"&&Va(Ei)){var e=[];ry(e,Ei,t,zc(t)),jm(q0,e)}}function X0(t,e,n){t==="focusin"?(rh(),ri=e,Ei=n,ri.attachEvent("onpropertychange",iy)):t==="focusout"&&rh()}function J0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Va(Ei)}function Z0(t,e){if(t==="click")return Va(e)}function eC(t,e){if(t==="input"||t==="change")return Va(e)}function tC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gt=typeof Object.is=="function"?Object.is:tC;function Ci(t,e){if(Gt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!gu.call(e,s)||!Gt(t[s],e[s]))return!1}return!0}function sh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ih(t,e){var n=sh(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sh(n)}}function oy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?oy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ay(){for(var t=window,e=Yo();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Yo(t.document)}return e}function td(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function nC(t){var e=ay(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&oy(n.ownerDocument.documentElement,n)){if(r!==null&&td(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=ih(n,i);var o=ih(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var rC=dn&&"documentMode"in document&&11>=document.documentMode,Kr=null,Uu=null,si=null,ju=!1;function oh(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ju||Kr==null||Kr!==Yo(r)||(r=Kr,"selectionStart"in r&&td(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),si&&Ci(si,r)||(si=r,r=ta(Uu,"onSelect"),0<r.length&&(e=new Jc("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Kr)))}function _o(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Hr={animationend:_o("Animation","AnimationEnd"),animationiteration:_o("Animation","AnimationIteration"),animationstart:_o("Animation","AnimationStart"),transitionend:_o("Transition","TransitionEnd")},Fl={},ly={};dn&&(ly=document.createElement("div").style,"AnimationEvent"in window||(delete Hr.animationend.animation,delete Hr.animationiteration.animation,delete Hr.animationstart.animation),"TransitionEvent"in window||delete Hr.transitionend.transition);function Ya(t){if(Fl[t])return Fl[t];if(!Hr[t])return t;var e=Hr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ly)return Fl[t]=e[n];return t}var uy=Ya("animationend"),cy=Ya("animationiteration"),dy=Ya("animationstart"),fy=Ya("transitionend"),hy=new Map,ah="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nr(t,e){hy.set(t,e),Pr(e,[t])}for(var Wl=0;Wl<ah.length;Wl++){var Gl=ah[Wl],sC=Gl.toLowerCase(),iC=Gl[0].toUpperCase()+Gl.slice(1);nr(sC,"on"+iC)}nr(uy,"onAnimationEnd");nr(cy,"onAnimationIteration");nr(dy,"onAnimationStart");nr("dblclick","onDoubleClick");nr("focusin","onFocus");nr("focusout","onBlur");nr(fy,"onTransitionEnd");cs("onMouseEnter",["mouseout","mouseover"]);cs("onMouseLeave",["mouseout","mouseover"]);cs("onPointerEnter",["pointerout","pointerover"]);cs("onPointerLeave",["pointerout","pointerover"]);Pr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Js="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Js));function lh(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,s0(r,e,void 0,t),t.currentTarget=null}function py(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;lh(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;lh(s,a,u),i=l}}}if(Qo)throw t=Ou,Qo=!1,Ou=null,t}function me(t,e){var n=e[Hu];n===void 0&&(n=e[Hu]=new Set);var r=t+"__bubble";n.has(r)||(my(e,t,2,!1),n.add(r))}function Kl(t,e,n){var r=0;e&&(r|=4),my(n,t,r,e)}var go="_reactListening"+Math.random().toString(36).slice(2);function wi(t){if(!t[go]){t[go]=!0,wm.forEach(function(n){n!=="selectionchange"&&(oC.has(n)||Kl(n,!1,t),Kl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[go]||(e[go]=!0,Kl("selectionchange",!1,e))}}function my(t,e,n,r){switch(Jm(e)){case 1:var s=E0;break;case 4:s=C0;break;default:s=Qc}n=s.bind(null,e,n,t),s=void 0,!Pu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Hl(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=dr(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}jm(function(){var u=i,d=zc(n),c=[];e:{var f=hy.get(t);if(f!==void 0){var y=Jc,v=t;switch(t){case"keypress":if(Mo(n)===0)break e;case"keydown":case"keyup":y=M0;break;case"focusin":v="focus",y=Ml;break;case"focusout":v="blur",y=Ml;break;case"beforeblur":case"afterblur":y=Ml;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Qf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=S0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=F0;break;case uy:case cy:case dy:y=T0;break;case fy:y=G0;break;case"scroll":y=w0;break;case"wheel":y=H0;break;case"copy":case"cut":case"paste":y=k0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Jf}var w=(e&4)!==0,C=!w&&t==="scroll",h=w?f!==null?f+"Capture":null:f;w=[];for(var p=u,_;p!==null;){_=p;var N=_.stateNode;if(_.tag===5&&N!==null&&(_=N,h!==null&&(N=yi(p,h),N!=null&&w.push(Ri(p,N,_)))),C)break;p=p.return}0<w.length&&(f=new y(f,v,null,n,d),c.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",f&&n!==xu&&(v=n.relatedTarget||n.fromElement)&&(dr(v)||v[fn]))break e;if((y||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,y?(v=n.relatedTarget||n.toElement,y=u,v=v?dr(v):null,v!==null&&(C=Or(v),v!==C||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=u),y!==v)){if(w=Qf,N="onMouseLeave",h="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(w=Jf,N="onPointerLeave",h="onPointerEnter",p="pointer"),C=y==null?f:Br(y),_=v==null?f:Br(v),f=new w(N,p+"leave",y,n,d),f.target=C,f.relatedTarget=_,N=null,dr(d)===u&&(w=new w(h,p+"enter",v,n,d),w.target=_,w.relatedTarget=C,N=w),C=N,y&&v)t:{for(w=y,h=v,p=0,_=w;_;_=Ur(_))p++;for(_=0,N=h;N;N=Ur(N))_++;for(;0<p-_;)w=Ur(w),p--;for(;0<_-p;)h=Ur(h),_--;for(;p--;){if(w===h||h!==null&&w===h.alternate)break t;w=Ur(w),h=Ur(h)}w=null}else w=null;y!==null&&uh(c,f,y,w,!1),v!==null&&C!==null&&uh(c,C,v,w,!0)}}e:{if(f=u?Br(u):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var b=Q0;else if(th(f))if(sy)b=eC;else{b=J0;var M=X0}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(b=Z0);if(b&&(b=b(t,u))){ry(c,b,n,d);break e}M&&M(t,f,u),t==="focusout"&&(M=f._wrapperState)&&M.controlled&&f.type==="number"&&Iu(f,"number",f.value)}switch(M=u?Br(u):window,t){case"focusin":(th(M)||M.contentEditable==="true")&&(Kr=M,Uu=u,si=null);break;case"focusout":si=Uu=Kr=null;break;case"mousedown":ju=!0;break;case"contextmenu":case"mouseup":case"dragend":ju=!1,oh(c,n,d);break;case"selectionchange":if(rC)break;case"keydown":case"keyup":oh(c,n,d)}var O;if(ed)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Gr?ty(t,n)&&(k="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(ey&&n.locale!=="ko"&&(Gr||k!=="onCompositionStart"?k==="onCompositionEnd"&&Gr&&(O=Zm()):(On=d,Xc="value"in On?On.value:On.textContent,Gr=!0)),M=ta(u,k),0<M.length&&(k=new Xf(k,t,null,n,d),c.push({event:k,listeners:M}),O?k.data=O:(O=ny(n),O!==null&&(k.data=O)))),(O=$0?z0(t,n):V0(t,n))&&(u=ta(u,"onBeforeInput"),0<u.length&&(d=new Xf("onBeforeInput","beforeinput",null,n,d),c.push({event:d,listeners:u}),d.data=O))}py(c,e)})}function Ri(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ta(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=yi(t,n),i!=null&&r.unshift(Ri(t,i,s)),i=yi(t,e),i!=null&&r.push(Ri(t,i,s))),t=t.return}return r}function Ur(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function uh(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=yi(n,i),l!=null&&o.unshift(Ri(n,l,a))):s||(l=yi(n,i),l!=null&&o.push(Ri(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var aC=/\r\n?/g,lC=/\u0000|\uFFFD/g;function ch(t){return(typeof t=="string"?t:""+t).replace(aC,`
`).replace(lC,"")}function vo(t,e,n){if(e=ch(e),ch(t)!==e&&n)throw Error(U(425))}function na(){}var Fu=null,Wu=null;function Gu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ku=typeof setTimeout=="function"?setTimeout:void 0,uC=typeof clearTimeout=="function"?clearTimeout:void 0,dh=typeof Promise=="function"?Promise:void 0,cC=typeof queueMicrotask=="function"?queueMicrotask:typeof dh<"u"?function(t){return dh.resolve(null).then(t).catch(dC)}:Ku;function dC(t){setTimeout(function(){throw t})}function Bl(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),vi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);vi(e)}function Fn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function fh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Is=Math.random().toString(36).slice(2),zt="__reactFiber$"+Is,Si="__reactProps$"+Is,fn="__reactContainer$"+Is,Hu="__reactEvents$"+Is,fC="__reactListeners$"+Is,hC="__reactHandles$"+Is;function dr(t){var e=t[zt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fn]||n[zt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=fh(t);t!==null;){if(n=t[zt])return n;t=fh(t)}return e}t=n,n=t.parentNode}return null}function zi(t){return t=t[zt]||t[fn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Br(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function qa(t){return t[Si]||null}var Bu=[],$r=-1;function rr(t){return{current:t}}function ge(t){0>$r||(t.current=Bu[$r],Bu[$r]=null,$r--)}function pe(t,e){$r++,Bu[$r]=t.current,t.current=e}var Xn={},Qe=rr(Xn),ct=rr(!1),Er=Xn;function ds(t,e){var n=t.type.contextTypes;if(!n)return Xn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function dt(t){return t=t.childContextTypes,t!=null}function ra(){ge(ct),ge(Qe)}function hh(t,e,n){if(Qe.current!==Xn)throw Error(U(168));pe(Qe,e),pe(ct,n)}function yy(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,XE(t)||"Unknown",s));return Re({},n,r)}function sa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xn,Er=Qe.current,pe(Qe,t),pe(ct,ct.current),!0}function ph(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=yy(t,e,Er),r.__reactInternalMemoizedMergedChildContext=t,ge(ct),ge(Qe),pe(Qe,t)):ge(ct),pe(ct,n)}var nn=null,Qa=!1,$l=!1;function _y(t){nn===null?nn=[t]:nn.push(t)}function pC(t){Qa=!0,_y(t)}function sr(){if(!$l&&nn!==null){$l=!0;var t=0,e=ue;try{var n=nn;for(ue=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}nn=null,Qa=!1}catch(s){throw nn!==null&&(nn=nn.slice(t+1)),Km(Vc,sr),s}finally{ue=e,$l=!1}}return null}var zr=[],Vr=0,ia=null,oa=0,wt=[],Rt=0,Cr=null,rn=1,sn="";function ar(t,e){zr[Vr++]=oa,zr[Vr++]=ia,ia=t,oa=e}function gy(t,e,n){wt[Rt++]=rn,wt[Rt++]=sn,wt[Rt++]=Cr,Cr=t;var r=rn;t=sn;var s=32-Ut(r)-1;r&=~(1<<s),n+=1;var i=32-Ut(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,rn=1<<32-Ut(e)+s|n<<s|r,sn=i+t}else rn=1<<i|n<<s|r,sn=t}function nd(t){t.return!==null&&(ar(t,1),gy(t,1,0))}function rd(t){for(;t===ia;)ia=zr[--Vr],zr[Vr]=null,oa=zr[--Vr],zr[Vr]=null;for(;t===Cr;)Cr=wt[--Rt],wt[Rt]=null,sn=wt[--Rt],wt[Rt]=null,rn=wt[--Rt],wt[Rt]=null}var gt=null,_t=null,Ee=!1,Pt=null;function vy(t,e){var n=St(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function mh(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,gt=t,_t=Fn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,gt=t,_t=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Cr!==null?{id:rn,overflow:sn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=St(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,gt=t,_t=null,!0):!1;default:return!1}}function $u(t){return(t.mode&1)!==0&&(t.flags&128)===0}function zu(t){if(Ee){var e=_t;if(e){var n=e;if(!mh(t,e)){if($u(t))throw Error(U(418));e=Fn(n.nextSibling);var r=gt;e&&mh(t,e)?vy(r,n):(t.flags=t.flags&-4097|2,Ee=!1,gt=t)}}else{if($u(t))throw Error(U(418));t.flags=t.flags&-4097|2,Ee=!1,gt=t}}}function yh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;gt=t}function Eo(t){if(t!==gt)return!1;if(!Ee)return yh(t),Ee=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Gu(t.type,t.memoizedProps)),e&&(e=_t)){if($u(t))throw Ey(),Error(U(418));for(;e;)vy(t,e),e=Fn(e.nextSibling)}if(yh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){_t=Fn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}_t=null}}else _t=gt?Fn(t.stateNode.nextSibling):null;return!0}function Ey(){for(var t=_t;t;)t=Fn(t.nextSibling)}function fs(){_t=gt=null,Ee=!1}function sd(t){Pt===null?Pt=[t]:Pt.push(t)}var mC=gn.ReactCurrentBatchConfig;function xt(t,e){if(t&&t.defaultProps){e=Re({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var aa=rr(null),la=null,Yr=null,id=null;function od(){id=Yr=la=null}function ad(t){var e=aa.current;ge(aa),t._currentValue=e}function Vu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function rs(t,e){la=t,id=Yr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(lt=!0),t.firstContext=null)}function At(t){var e=t._currentValue;if(id!==t)if(t={context:t,memoizedValue:e,next:null},Yr===null){if(la===null)throw Error(U(308));Yr=t,la.dependencies={lanes:0,firstContext:t}}else Yr=Yr.next=t;return e}var fr=null;function ld(t){fr===null?fr=[t]:fr.push(t)}function Cy(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,ld(e)):(n.next=s.next,s.next=n),e.interleaved=n,hn(t,r)}function hn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var In=!1;function ud(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function un(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Wn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ie&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,hn(t,n)}return s=r.interleaved,s===null?(e.next=e,ld(r)):(e.next=s.next,s.next=e),r.interleaved=e,hn(t,n)}function Uo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yc(t,n)}}function _h(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ua(t,e,n,r){var s=t.updateQueue;In=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(i!==null){var c=s.baseState;o=0,d=u=l=null,a=i;do{var f=a.lane,y=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,w=a;switch(f=e,y=n,w.tag){case 1:if(v=w.payload,typeof v=="function"){c=v.call(y,c,f);break e}c=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,f=typeof v=="function"?v.call(y,c,f):v,f==null)break e;c=Re({},c,f);break e;case 2:In=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else y={eventTime:y,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=y,l=c):d=d.next=y,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(1);if(d===null&&(l=c),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Rr|=o,t.lanes=o,t.memoizedState=c}}function gh(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var Ry=new Cm.Component().refs;function Yu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Xa={isMounted:function(t){return(t=t._reactInternals)?Or(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=et(),s=Kn(t),i=un(r,s);i.payload=e,n!=null&&(i.callback=n),e=Wn(t,i,s),e!==null&&(jt(e,t,s,r),Uo(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=et(),s=Kn(t),i=un(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Wn(t,i,s),e!==null&&(jt(e,t,s,r),Uo(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=et(),r=Kn(t),s=un(n,r);s.tag=2,e!=null&&(s.callback=e),e=Wn(t,s,r),e!==null&&(jt(e,t,r,n),Uo(e,t,r))}};function vh(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ci(n,r)||!Ci(s,i):!0}function Sy(t,e,n){var r=!1,s=Xn,i=e.contextType;return typeof i=="object"&&i!==null?i=At(i):(s=dt(e)?Er:Qe.current,r=e.contextTypes,i=(r=r!=null)?ds(t,s):Xn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Xa,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Eh(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Xa.enqueueReplaceState(e,e.state,null)}function qu(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs=Ry,ud(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=At(i):(i=dt(e)?Er:Qe.current,s.context=ds(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Yu(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Xa.enqueueReplaceState(s,s.state,null),ua(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ks(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;a===Ry&&(a=s.refs={}),o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Co(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ch(t){var e=t._init;return e(t._payload)}function Iy(t){function e(h,p){if(t){var _=h.deletions;_===null?(h.deletions=[p],h.flags|=16):_.push(p)}}function n(h,p){if(!t)return null;for(;p!==null;)e(h,p),p=p.sibling;return null}function r(h,p){for(h=new Map;p!==null;)p.key!==null?h.set(p.key,p):h.set(p.index,p),p=p.sibling;return h}function s(h,p){return h=Hn(h,p),h.index=0,h.sibling=null,h}function i(h,p,_){return h.index=_,t?(_=h.alternate,_!==null?(_=_.index,_<p?(h.flags|=2,p):_):(h.flags|=2,p)):(h.flags|=1048576,p)}function o(h){return t&&h.alternate===null&&(h.flags|=2),h}function a(h,p,_,N){return p===null||p.tag!==6?(p=Jl(_,h.mode,N),p.return=h,p):(p=s(p,_),p.return=h,p)}function l(h,p,_,N){var b=_.type;return b===Wr?d(h,p,_.props.children,N,_.key):p!==null&&(p.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Sn&&Ch(b)===p.type)?(N=s(p,_.props),N.ref=Ks(h,p,_),N.return=h,N):(N=Ho(_.type,_.key,_.props,null,h.mode,N),N.ref=Ks(h,p,_),N.return=h,N)}function u(h,p,_,N){return p===null||p.tag!==4||p.stateNode.containerInfo!==_.containerInfo||p.stateNode.implementation!==_.implementation?(p=Zl(_,h.mode,N),p.return=h,p):(p=s(p,_.children||[]),p.return=h,p)}function d(h,p,_,N,b){return p===null||p.tag!==7?(p=_r(_,h.mode,N,b),p.return=h,p):(p=s(p,_),p.return=h,p)}function c(h,p,_){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Jl(""+p,h.mode,_),p.return=h,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case uo:return _=Ho(p.type,p.key,p.props,null,h.mode,_),_.ref=Ks(h,null,p),_.return=h,_;case Fr:return p=Zl(p,h.mode,_),p.return=h,p;case Sn:var N=p._init;return c(h,N(p._payload),_)}if(Qs(p)||Us(p))return p=_r(p,h.mode,_,null),p.return=h,p;Co(h,p)}return null}function f(h,p,_,N){var b=p!==null?p.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return b!==null?null:a(h,p,""+_,N);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case uo:return _.key===b?l(h,p,_,N):null;case Fr:return _.key===b?u(h,p,_,N):null;case Sn:return b=_._init,f(h,p,b(_._payload),N)}if(Qs(_)||Us(_))return b!==null?null:d(h,p,_,N,null);Co(h,_)}return null}function y(h,p,_,N,b){if(typeof N=="string"&&N!==""||typeof N=="number")return h=h.get(_)||null,a(p,h,""+N,b);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case uo:return h=h.get(N.key===null?_:N.key)||null,l(p,h,N,b);case Fr:return h=h.get(N.key===null?_:N.key)||null,u(p,h,N,b);case Sn:var M=N._init;return y(h,p,_,M(N._payload),b)}if(Qs(N)||Us(N))return h=h.get(_)||null,d(p,h,N,b,null);Co(p,N)}return null}function v(h,p,_,N){for(var b=null,M=null,O=p,k=p=0,j=null;O!==null&&k<_.length;k++){O.index>k?(j=O,O=null):j=O.sibling;var W=f(h,O,_[k],N);if(W===null){O===null&&(O=j);break}t&&O&&W.alternate===null&&e(h,O),p=i(W,p,k),M===null?b=W:M.sibling=W,M=W,O=j}if(k===_.length)return n(h,O),Ee&&ar(h,k),b;if(O===null){for(;k<_.length;k++)O=c(h,_[k],N),O!==null&&(p=i(O,p,k),M===null?b=O:M.sibling=O,M=O);return Ee&&ar(h,k),b}for(O=r(h,O);k<_.length;k++)j=y(O,h,k,_[k],N),j!==null&&(t&&j.alternate!==null&&O.delete(j.key===null?k:j.key),p=i(j,p,k),M===null?b=j:M.sibling=j,M=j);return t&&O.forEach(function(z){return e(h,z)}),Ee&&ar(h,k),b}function w(h,p,_,N){var b=Us(_);if(typeof b!="function")throw Error(U(150));if(_=b.call(_),_==null)throw Error(U(151));for(var M=b=null,O=p,k=p=0,j=null,W=_.next();O!==null&&!W.done;k++,W=_.next()){O.index>k?(j=O,O=null):j=O.sibling;var z=f(h,O,W.value,N);if(z===null){O===null&&(O=j);break}t&&O&&z.alternate===null&&e(h,O),p=i(z,p,k),M===null?b=z:M.sibling=z,M=z,O=j}if(W.done)return n(h,O),Ee&&ar(h,k),b;if(O===null){for(;!W.done;k++,W=_.next())W=c(h,W.value,N),W!==null&&(p=i(W,p,k),M===null?b=W:M.sibling=W,M=W);return Ee&&ar(h,k),b}for(O=r(h,O);!W.done;k++,W=_.next())W=y(O,h,k,W.value,N),W!==null&&(t&&W.alternate!==null&&O.delete(W.key===null?k:W.key),p=i(W,p,k),M===null?b=W:M.sibling=W,M=W);return t&&O.forEach(function(Ae){return e(h,Ae)}),Ee&&ar(h,k),b}function C(h,p,_,N){if(typeof _=="object"&&_!==null&&_.type===Wr&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case uo:e:{for(var b=_.key,M=p;M!==null;){if(M.key===b){if(b=_.type,b===Wr){if(M.tag===7){n(h,M.sibling),p=s(M,_.props.children),p.return=h,h=p;break e}}else if(M.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Sn&&Ch(b)===M.type){n(h,M.sibling),p=s(M,_.props),p.ref=Ks(h,M,_),p.return=h,h=p;break e}n(h,M);break}else e(h,M);M=M.sibling}_.type===Wr?(p=_r(_.props.children,h.mode,N,_.key),p.return=h,h=p):(N=Ho(_.type,_.key,_.props,null,h.mode,N),N.ref=Ks(h,p,_),N.return=h,h=N)}return o(h);case Fr:e:{for(M=_.key;p!==null;){if(p.key===M)if(p.tag===4&&p.stateNode.containerInfo===_.containerInfo&&p.stateNode.implementation===_.implementation){n(h,p.sibling),p=s(p,_.children||[]),p.return=h,h=p;break e}else{n(h,p);break}else e(h,p);p=p.sibling}p=Zl(_,h.mode,N),p.return=h,h=p}return o(h);case Sn:return M=_._init,C(h,p,M(_._payload),N)}if(Qs(_))return v(h,p,_,N);if(Us(_))return w(h,p,_,N);Co(h,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,p!==null&&p.tag===6?(n(h,p.sibling),p=s(p,_),p.return=h,h=p):(n(h,p),p=Jl(_,h.mode,N),p.return=h,h=p),o(h)):n(h,p)}return C}var hs=Iy(!0),Ay=Iy(!1),Vi={},Yt=rr(Vi),Ii=rr(Vi),Ai=rr(Vi);function hr(t){if(t===Vi)throw Error(U(174));return t}function cd(t,e){switch(pe(Ai,e),pe(Ii,t),pe(Yt,Vi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Tu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Tu(e,t)}ge(Yt),pe(Yt,e)}function ps(){ge(Yt),ge(Ii),ge(Ai)}function Ty(t){hr(Ai.current);var e=hr(Yt.current),n=Tu(e,t.type);e!==n&&(pe(Ii,t),pe(Yt,n))}function dd(t){Ii.current===t&&(ge(Yt),ge(Ii))}var Ce=rr(0);function ca(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zl=[];function fd(){for(var t=0;t<zl.length;t++)zl[t]._workInProgressVersionPrimary=null;zl.length=0}var jo=gn.ReactCurrentDispatcher,Vl=gn.ReactCurrentBatchConfig,wr=0,we=null,Pe=null,je=null,da=!1,ii=!1,Ti=0,yC=0;function $e(){throw Error(U(321))}function hd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Gt(t[n],e[n]))return!1;return!0}function pd(t,e,n,r,s,i){if(wr=i,we=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,jo.current=t===null||t.memoizedState===null?EC:CC,t=n(r,s),ii){i=0;do{if(ii=!1,Ti=0,25<=i)throw Error(U(301));i+=1,je=Pe=null,e.updateQueue=null,jo.current=wC,t=n(r,s)}while(ii)}if(jo.current=fa,e=Pe!==null&&Pe.next!==null,wr=0,je=Pe=we=null,da=!1,e)throw Error(U(300));return t}function md(){var t=Ti!==0;return Ti=0,t}function $t(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return je===null?we.memoizedState=je=t:je=je.next=t,je}function Tt(){if(Pe===null){var t=we.alternate;t=t!==null?t.memoizedState:null}else t=Pe.next;var e=je===null?we.memoizedState:je.next;if(e!==null)je=e,Pe=t;else{if(t===null)throw Error(U(310));Pe=t,t={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},je===null?we.memoizedState=je=t:je=je.next=t}return je}function Ni(t,e){return typeof e=="function"?e(t):e}function Yl(t){var e=Tt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Pe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var d=u.lane;if((wr&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var c={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=c,o=r):l=l.next=c,we.lanes|=d,Rr|=d}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,Gt(r,e.memoizedState)||(lt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,we.lanes|=i,Rr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ql(t){var e=Tt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Gt(i,e.memoizedState)||(lt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Ny(){}function ky(t,e){var n=we,r=Tt(),s=e(),i=!Gt(r.memoizedState,s);if(i&&(r.memoizedState=s,lt=!0),r=r.queue,yd(Py.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||je!==null&&je.memoizedState.tag&1){if(n.flags|=2048,ki(9,Ly.bind(null,n,r,s,e),void 0,null),Ge===null)throw Error(U(349));wr&30||xy(n,e,s)}return s}function xy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=we.updateQueue,e===null?(e={lastEffect:null,stores:null},we.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ly(t,e,n,r){e.value=n,e.getSnapshot=r,Oy(e)&&Dy(t)}function Py(t,e,n){return n(function(){Oy(e)&&Dy(t)})}function Oy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Gt(t,n)}catch{return!0}}function Dy(t){var e=hn(t,1);e!==null&&jt(e,t,1,-1)}function wh(t){var e=$t();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ni,lastRenderedState:t},e.queue=t,t=t.dispatch=vC.bind(null,we,t),[e.memoizedState,t]}function ki(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=we.updateQueue,e===null?(e={lastEffect:null,stores:null},we.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function by(){return Tt().memoizedState}function Fo(t,e,n,r){var s=$t();we.flags|=t,s.memoizedState=ki(1|e,n,void 0,r===void 0?null:r)}function Ja(t,e,n,r){var s=Tt();r=r===void 0?null:r;var i=void 0;if(Pe!==null){var o=Pe.memoizedState;if(i=o.destroy,r!==null&&hd(r,o.deps)){s.memoizedState=ki(e,n,i,r);return}}we.flags|=t,s.memoizedState=ki(1|e,n,i,r)}function Rh(t,e){return Fo(8390656,8,t,e)}function yd(t,e){return Ja(2048,8,t,e)}function My(t,e){return Ja(4,2,t,e)}function Uy(t,e){return Ja(4,4,t,e)}function jy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Fy(t,e,n){return n=n!=null?n.concat([t]):null,Ja(4,4,jy.bind(null,e,t),n)}function _d(){}function Wy(t,e){var n=Tt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&hd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Gy(t,e){var n=Tt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&hd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ky(t,e,n){return wr&21?(Gt(n,e)||(n=$m(),we.lanes|=n,Rr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,lt=!0),t.memoizedState=n)}function _C(t,e){var n=ue;ue=n!==0&&4>n?n:4,t(!0);var r=Vl.transition;Vl.transition={};try{t(!1),e()}finally{ue=n,Vl.transition=r}}function Hy(){return Tt().memoizedState}function gC(t,e,n){var r=Kn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},By(t))$y(e,n);else if(n=Cy(t,e,n,r),n!==null){var s=et();jt(n,t,r,s),zy(n,e,r)}}function vC(t,e,n){var r=Kn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(By(t))$y(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Gt(a,o)){var l=e.interleaved;l===null?(s.next=s,ld(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=Cy(t,e,s,r),n!==null&&(s=et(),jt(n,t,r,s),zy(n,e,r))}}function By(t){var e=t.alternate;return t===we||e!==null&&e===we}function $y(t,e){ii=da=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function zy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yc(t,n)}}var fa={readContext:At,useCallback:$e,useContext:$e,useEffect:$e,useImperativeHandle:$e,useInsertionEffect:$e,useLayoutEffect:$e,useMemo:$e,useReducer:$e,useRef:$e,useState:$e,useDebugValue:$e,useDeferredValue:$e,useTransition:$e,useMutableSource:$e,useSyncExternalStore:$e,useId:$e,unstable_isNewReconciler:!1},EC={readContext:At,useCallback:function(t,e){return $t().memoizedState=[t,e===void 0?null:e],t},useContext:At,useEffect:Rh,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Fo(4194308,4,jy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Fo(4194308,4,t,e)},useInsertionEffect:function(t,e){return Fo(4,2,t,e)},useMemo:function(t,e){var n=$t();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=$t();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=gC.bind(null,we,t),[r.memoizedState,t]},useRef:function(t){var e=$t();return t={current:t},e.memoizedState=t},useState:wh,useDebugValue:_d,useDeferredValue:function(t){return $t().memoizedState=t},useTransition:function(){var t=wh(!1),e=t[0];return t=_C.bind(null,t[1]),$t().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=we,s=$t();if(Ee){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Ge===null)throw Error(U(349));wr&30||xy(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Rh(Py.bind(null,r,i,t),[t]),r.flags|=2048,ki(9,Ly.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=$t(),e=Ge.identifierPrefix;if(Ee){var n=sn,r=rn;n=(r&~(1<<32-Ut(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ti++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=yC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},CC={readContext:At,useCallback:Wy,useContext:At,useEffect:yd,useImperativeHandle:Fy,useInsertionEffect:My,useLayoutEffect:Uy,useMemo:Gy,useReducer:Yl,useRef:by,useState:function(){return Yl(Ni)},useDebugValue:_d,useDeferredValue:function(t){var e=Tt();return Ky(e,Pe.memoizedState,t)},useTransition:function(){var t=Yl(Ni)[0],e=Tt().memoizedState;return[t,e]},useMutableSource:Ny,useSyncExternalStore:ky,useId:Hy,unstable_isNewReconciler:!1},wC={readContext:At,useCallback:Wy,useContext:At,useEffect:yd,useImperativeHandle:Fy,useInsertionEffect:My,useLayoutEffect:Uy,useMemo:Gy,useReducer:ql,useRef:by,useState:function(){return ql(Ni)},useDebugValue:_d,useDeferredValue:function(t){var e=Tt();return Pe===null?e.memoizedState=t:Ky(e,Pe.memoizedState,t)},useTransition:function(){var t=ql(Ni)[0],e=Tt().memoizedState;return[t,e]},useMutableSource:Ny,useSyncExternalStore:ky,useId:Hy,unstable_isNewReconciler:!1};function ms(t,e){try{var n="",r=e;do n+=QE(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Ql(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Qu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var RC=typeof WeakMap=="function"?WeakMap:Map;function Vy(t,e,n){n=un(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){pa||(pa=!0,oc=r),Qu(t,e)},n}function Yy(t,e,n){n=un(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Qu(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Qu(t,e),typeof r!="function"&&(Gn===null?Gn=new Set([this]):Gn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Sh(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new RC;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=UC.bind(null,t,e,n),e.then(t,t))}function Ih(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ah(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=un(-1,1),e.tag=2,Wn(n,e,1))),n.lanes|=1),t)}var SC=gn.ReactCurrentOwner,lt=!1;function Je(t,e,n,r){e.child=t===null?Ay(e,null,n,r):hs(e,t.child,n,r)}function Th(t,e,n,r,s){n=n.render;var i=e.ref;return rs(e,s),r=pd(t,e,n,r,i,s),n=md(),t!==null&&!lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,pn(t,e,s)):(Ee&&n&&nd(e),e.flags|=1,Je(t,e,r,s),e.child)}function Nh(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Id(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,qy(t,e,i,r,s)):(t=Ho(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ci,n(o,r)&&t.ref===e.ref)return pn(t,e,s)}return e.flags|=1,t=Hn(i,r),t.ref=e.ref,t.return=e,e.child=t}function qy(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ci(i,r)&&t.ref===e.ref)if(lt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(lt=!0);else return e.lanes=t.lanes,pn(t,e,s)}return Xu(t,e,n,r,s)}function Qy(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pe(Qr,yt),yt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,pe(Qr,yt),yt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,pe(Qr,yt),yt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,pe(Qr,yt),yt|=r;return Je(t,e,s,n),e.child}function Xy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Xu(t,e,n,r,s){var i=dt(n)?Er:Qe.current;return i=ds(e,i),rs(e,s),n=pd(t,e,n,r,i,s),r=md(),t!==null&&!lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,pn(t,e,s)):(Ee&&r&&nd(e),e.flags|=1,Je(t,e,n,s),e.child)}function kh(t,e,n,r,s){if(dt(n)){var i=!0;sa(e)}else i=!1;if(rs(e,s),e.stateNode===null)Wo(t,e),Sy(e,n,r),qu(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=At(u):(u=dt(n)?Er:Qe.current,u=ds(e,u));var d=n.getDerivedStateFromProps,c=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";c||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Eh(e,o,r,u),In=!1;var f=e.memoizedState;o.state=f,ua(e,r,o,s),l=e.memoizedState,a!==r||f!==l||ct.current||In?(typeof d=="function"&&(Yu(e,n,d,r),l=e.memoizedState),(a=In||vh(e,n,a,r,f,l,u))?(c||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,wy(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:xt(e.type,a),o.props=u,c=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=At(l):(l=dt(n)?Er:Qe.current,l=ds(e,l));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==c||f!==l)&&Eh(e,o,r,l),In=!1,f=e.memoizedState,o.state=f,ua(e,r,o,s);var v=e.memoizedState;a!==c||f!==v||ct.current||In?(typeof y=="function"&&(Yu(e,n,y,r),v=e.memoizedState),(u=In||vh(e,n,u,r,f,v,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Ju(t,e,n,r,i,s)}function Ju(t,e,n,r,s,i){Xy(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&ph(e,n,!1),pn(t,e,i);r=e.stateNode,SC.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=hs(e,t.child,null,i),e.child=hs(e,null,a,i)):Je(t,e,a,i),e.memoizedState=r.state,s&&ph(e,n,!0),e.child}function Jy(t){var e=t.stateNode;e.pendingContext?hh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&hh(t,e.context,!1),cd(t,e.containerInfo)}function xh(t,e,n,r,s){return fs(),sd(s),e.flags|=256,Je(t,e,n,r),e.child}var Zu={dehydrated:null,treeContext:null,retryLane:0};function ec(t){return{baseLanes:t,cachePool:null,transitions:null}}function Zy(t,e,n){var r=e.pendingProps,s=Ce.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),pe(Ce,s&1),t===null)return zu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=tl(o,r,0,null),t=_r(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=ec(n),e.memoizedState=Zu,t):gd(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return IC(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Hn(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Hn(a,i):(i=_r(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?ec(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Zu,r}return i=t.child,t=i.sibling,r=Hn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function gd(t,e){return e=tl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function wo(t,e,n,r){return r!==null&&sd(r),hs(e,t.child,null,n),t=gd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function IC(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Ql(Error(U(422))),wo(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=tl({mode:"visible",children:r.children},s,0,null),i=_r(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&hs(e,t.child,null,o),e.child.memoizedState=ec(o),e.memoizedState=Zu,i);if(!(e.mode&1))return wo(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(U(419)),r=Ql(i,r,void 0),wo(t,e,o,r)}if(a=(o&t.childLanes)!==0,lt||a){if(r=Ge,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,hn(t,s),jt(r,t,s,-1))}return Sd(),r=Ql(Error(U(421))),wo(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=jC.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,_t=Fn(s.nextSibling),gt=e,Ee=!0,Pt=null,t!==null&&(wt[Rt++]=rn,wt[Rt++]=sn,wt[Rt++]=Cr,rn=t.id,sn=t.overflow,Cr=e),e=gd(e,r.children),e.flags|=4096,e)}function Lh(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Vu(t.return,e,n)}function Xl(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function e_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Je(t,e,r.children,n),r=Ce.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Lh(t,n,e);else if(t.tag===19)Lh(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(pe(Ce,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ca(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Xl(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ca(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Xl(e,!0,n,null,i);break;case"together":Xl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wo(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function pn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Rr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Hn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Hn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function AC(t,e,n){switch(e.tag){case 3:Jy(e),fs();break;case 5:Ty(e);break;case 1:dt(e.type)&&sa(e);break;case 4:cd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;pe(aa,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(pe(Ce,Ce.current&1),e.flags|=128,null):n&e.child.childLanes?Zy(t,e,n):(pe(Ce,Ce.current&1),t=pn(t,e,n),t!==null?t.sibling:null);pe(Ce,Ce.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return e_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),pe(Ce,Ce.current),r)break;return null;case 22:case 23:return e.lanes=0,Qy(t,e,n)}return pn(t,e,n)}var t_,tc,n_,r_;t_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};tc=function(){};n_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,hr(Yt.current);var i=null;switch(n){case"input":s=Ru(t,s),r=Ru(t,r),i=[];break;case"select":s=Re({},s,{value:void 0}),r=Re({},r,{value:void 0}),i=[];break;case"textarea":s=Au(t,s),r=Au(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=na)}Nu(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(pi.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(pi.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&me("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};r_=function(t,e,n,r){n!==r&&(e.flags|=4)};function Hs(t,e){if(!Ee)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ze(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function TC(t,e,n){var r=e.pendingProps;switch(rd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ze(e),null;case 1:return dt(e.type)&&ra(),ze(e),null;case 3:return r=e.stateNode,ps(),ge(ct),ge(Qe),fd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Eo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Pt!==null&&(uc(Pt),Pt=null))),tc(t,e),ze(e),null;case 5:dd(e);var s=hr(Ai.current);if(n=e.type,t!==null&&e.stateNode!=null)n_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return ze(e),null}if(t=hr(Yt.current),Eo(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[zt]=e,r[Si]=i,t=(e.mode&1)!==0,n){case"dialog":me("cancel",r),me("close",r);break;case"iframe":case"object":case"embed":me("load",r);break;case"video":case"audio":for(s=0;s<Js.length;s++)me(Js[s],r);break;case"source":me("error",r);break;case"img":case"image":case"link":me("error",r),me("load",r);break;case"details":me("toggle",r);break;case"input":Wf(r,i),me("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},me("invalid",r);break;case"textarea":Kf(r,i),me("invalid",r)}Nu(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&vo(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&vo(r.textContent,a,t),s=["children",""+a]):pi.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&me("scroll",r)}switch(n){case"input":co(r),Gf(r,i,!0);break;case"textarea":co(r),Hf(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=na)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=xm(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[zt]=e,t[Si]=r,t_(t,e,!1,!1),e.stateNode=t;e:{switch(o=ku(n,r),n){case"dialog":me("cancel",t),me("close",t),s=r;break;case"iframe":case"object":case"embed":me("load",t),s=r;break;case"video":case"audio":for(s=0;s<Js.length;s++)me(Js[s],t);s=r;break;case"source":me("error",t),s=r;break;case"img":case"image":case"link":me("error",t),me("load",t),s=r;break;case"details":me("toggle",t),s=r;break;case"input":Wf(t,r),s=Ru(t,r),me("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Re({},r,{value:void 0}),me("invalid",t);break;case"textarea":Kf(t,r),s=Au(t,r),me("invalid",t);break;default:s=r}Nu(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Om(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Lm(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&mi(t,l):typeof l=="number"&&mi(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(pi.hasOwnProperty(i)?l!=null&&i==="onScroll"&&me("scroll",t):l!=null&&Kc(t,i,l,o))}switch(n){case"input":co(t),Gf(t,r,!1);break;case"textarea":co(t),Hf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Qn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Zr(t,!!r.multiple,i,!1):r.defaultValue!=null&&Zr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=na)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ze(e),null;case 6:if(t&&e.stateNode!=null)r_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=hr(Ai.current),hr(Yt.current),Eo(e)){if(r=e.stateNode,n=e.memoizedProps,r[zt]=e,(i=r.nodeValue!==n)&&(t=gt,t!==null))switch(t.tag){case 3:vo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&vo(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[zt]=e,e.stateNode=r}return ze(e),null;case 13:if(ge(Ce),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ee&&_t!==null&&e.mode&1&&!(e.flags&128))Ey(),fs(),e.flags|=98560,i=!1;else if(i=Eo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[zt]=e}else fs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ze(e),i=!1}else Pt!==null&&(uc(Pt),Pt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ce.current&1?be===0&&(be=3):Sd())),e.updateQueue!==null&&(e.flags|=4),ze(e),null);case 4:return ps(),tc(t,e),t===null&&wi(e.stateNode.containerInfo),ze(e),null;case 10:return ad(e.type._context),ze(e),null;case 17:return dt(e.type)&&ra(),ze(e),null;case 19:if(ge(Ce),i=e.memoizedState,i===null)return ze(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Hs(i,!1);else{if(be!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ca(t),o!==null){for(e.flags|=128,Hs(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return pe(Ce,Ce.current&1|2),e.child}t=t.sibling}i.tail!==null&&Te()>ys&&(e.flags|=128,r=!0,Hs(i,!1),e.lanes=4194304)}else{if(!r)if(t=ca(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Hs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ee)return ze(e),null}else 2*Te()-i.renderingStartTime>ys&&n!==1073741824&&(e.flags|=128,r=!0,Hs(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Te(),e.sibling=null,n=Ce.current,pe(Ce,r?n&1|2:n&1),e):(ze(e),null);case 22:case 23:return Rd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?yt&1073741824&&(ze(e),e.subtreeFlags&6&&(e.flags|=8192)):ze(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function NC(t,e){switch(rd(e),e.tag){case 1:return dt(e.type)&&ra(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ps(),ge(ct),ge(Qe),fd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return dd(e),null;case 13:if(ge(Ce),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));fs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ge(Ce),null;case 4:return ps(),null;case 10:return ad(e.type._context),null;case 22:case 23:return Rd(),null;case 24:return null;default:return null}}var Ro=!1,Ye=!1,kC=typeof WeakSet=="function"?WeakSet:Set,H=null;function qr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Se(t,e,r)}else n.current=null}function nc(t,e,n){try{n()}catch(r){Se(t,e,r)}}var Ph=!1;function xC(t,e){if(Fu=Zo,t=ay(),td(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,c=t,f=null;t:for(;;){for(var y;c!==n||s!==0&&c.nodeType!==3||(a=o+s),c!==i||r!==0&&c.nodeType!==3||(l=o+r),c.nodeType===3&&(o+=c.nodeValue.length),(y=c.firstChild)!==null;)f=c,c=y;for(;;){if(c===t)break t;if(f===n&&++u===s&&(a=o),f===i&&++d===r&&(l=o),(y=c.nextSibling)!==null)break;c=f,f=c.parentNode}c=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wu={focusedElem:t,selectionRange:n},Zo=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,C=v.memoizedState,h=e.stateNode,p=h.getSnapshotBeforeUpdate(e.elementType===e.type?w:xt(e.type,w),C);h.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(N){Se(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return v=Ph,Ph=!1,v}function oi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&nc(e,n,i)}s=s.next}while(s!==r)}}function Za(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function rc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function s_(t){var e=t.alternate;e!==null&&(t.alternate=null,s_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[zt],delete e[Si],delete e[Hu],delete e[fC],delete e[hC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function i_(t){return t.tag===5||t.tag===3||t.tag===4}function Oh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||i_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function sc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=na));else if(r!==4&&(t=t.child,t!==null))for(sc(t,e,n),t=t.sibling;t!==null;)sc(t,e,n),t=t.sibling}function ic(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ic(t,e,n),t=t.sibling;t!==null;)ic(t,e,n),t=t.sibling}var Ke=null,Lt=!1;function wn(t,e,n){for(n=n.child;n!==null;)o_(t,e,n),n=n.sibling}function o_(t,e,n){if(Vt&&typeof Vt.onCommitFiberUnmount=="function")try{Vt.onCommitFiberUnmount($a,n)}catch{}switch(n.tag){case 5:Ye||qr(n,e);case 6:var r=Ke,s=Lt;Ke=null,wn(t,e,n),Ke=r,Lt=s,Ke!==null&&(Lt?(t=Ke,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ke.removeChild(n.stateNode));break;case 18:Ke!==null&&(Lt?(t=Ke,n=n.stateNode,t.nodeType===8?Bl(t.parentNode,n):t.nodeType===1&&Bl(t,n),vi(t)):Bl(Ke,n.stateNode));break;case 4:r=Ke,s=Lt,Ke=n.stateNode.containerInfo,Lt=!0,wn(t,e,n),Ke=r,Lt=s;break;case 0:case 11:case 14:case 15:if(!Ye&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&nc(n,e,o),s=s.next}while(s!==r)}wn(t,e,n);break;case 1:if(!Ye&&(qr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Se(n,e,a)}wn(t,e,n);break;case 21:wn(t,e,n);break;case 22:n.mode&1?(Ye=(r=Ye)||n.memoizedState!==null,wn(t,e,n),Ye=r):wn(t,e,n);break;default:wn(t,e,n)}}function Dh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new kC),e.forEach(function(r){var s=FC.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function kt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ke=a.stateNode,Lt=!1;break e;case 3:Ke=a.stateNode.containerInfo,Lt=!0;break e;case 4:Ke=a.stateNode.containerInfo,Lt=!0;break e}a=a.return}if(Ke===null)throw Error(U(160));o_(i,o,s),Ke=null,Lt=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){Se(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)a_(e,t),e=e.sibling}function a_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(kt(e,t),Ht(t),r&4){try{oi(3,t,t.return),Za(3,t)}catch(w){Se(t,t.return,w)}try{oi(5,t,t.return)}catch(w){Se(t,t.return,w)}}break;case 1:kt(e,t),Ht(t),r&512&&n!==null&&qr(n,n.return);break;case 5:if(kt(e,t),Ht(t),r&512&&n!==null&&qr(n,n.return),t.flags&32){var s=t.stateNode;try{mi(s,"")}catch(w){Se(t,t.return,w)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Nm(s,i),ku(a,o);var u=ku(a,i);for(o=0;o<l.length;o+=2){var d=l[o],c=l[o+1];d==="style"?Om(s,c):d==="dangerouslySetInnerHTML"?Lm(s,c):d==="children"?mi(s,c):Kc(s,d,c,u)}switch(a){case"input":Su(s,i);break;case"textarea":km(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Zr(s,!!i.multiple,y,!1):f!==!!i.multiple&&(i.defaultValue!=null?Zr(s,!!i.multiple,i.defaultValue,!0):Zr(s,!!i.multiple,i.multiple?[]:"",!1))}s[Si]=i}catch(w){Se(t,t.return,w)}}break;case 6:if(kt(e,t),Ht(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){Se(t,t.return,w)}}break;case 3:if(kt(e,t),Ht(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{vi(e.containerInfo)}catch(w){Se(t,t.return,w)}break;case 4:kt(e,t),Ht(t);break;case 13:kt(e,t),Ht(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Cd=Te())),r&4&&Dh(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ye=(u=Ye)||d,kt(e,t),Ye=u):kt(e,t),Ht(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(H=t,d=t.child;d!==null;){for(c=H=d;H!==null;){switch(f=H,y=f.child,f.tag){case 0:case 11:case 14:case 15:oi(4,f,f.return);break;case 1:qr(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(w){Se(r,n,w)}}break;case 5:qr(f,f.return);break;case 22:if(f.memoizedState!==null){Mh(c);continue}}y!==null?(y.return=f,H=y):Mh(c)}d=d.sibling}e:for(d=null,c=t;;){if(c.tag===5){if(d===null){d=c;try{s=c.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=c.stateNode,l=c.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Pm("display",o))}catch(w){Se(t,t.return,w)}}}else if(c.tag===6){if(d===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(w){Se(t,t.return,w)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===t)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;d===c&&(d=null),c=c.return}d===c&&(d=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:kt(e,t),Ht(t),r&4&&Dh(t);break;case 21:break;default:kt(e,t),Ht(t)}}function Ht(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(i_(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(mi(s,""),r.flags&=-33);var i=Oh(t);ic(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Oh(t);sc(t,a,o);break;default:throw Error(U(161))}}catch(l){Se(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function LC(t,e,n){H=t,l_(t)}function l_(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ro;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Ye;a=Ro;var u=Ye;if(Ro=o,(Ye=l)&&!u)for(H=s;H!==null;)o=H,l=o.child,o.tag===22&&o.memoizedState!==null?Uh(s):l!==null?(l.return=o,H=l):Uh(s);for(;i!==null;)H=i,l_(i),i=i.sibling;H=s,Ro=a,Ye=u}bh(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):bh(t)}}function bh(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ye||Za(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ye)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:xt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&gh(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}gh(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var c=d.dehydrated;c!==null&&vi(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}Ye||e.flags&512&&rc(e)}catch(f){Se(e,e.return,f)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function Mh(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function Uh(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Za(4,e)}catch(l){Se(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Se(e,s,l)}}var i=e.return;try{rc(e)}catch(l){Se(e,i,l)}break;case 5:var o=e.return;try{rc(e)}catch(l){Se(e,o,l)}}}catch(l){Se(e,e.return,l)}if(e===t){H=null;break}var a=e.sibling;if(a!==null){a.return=e.return,H=a;break}H=e.return}}var PC=Math.ceil,ha=gn.ReactCurrentDispatcher,vd=gn.ReactCurrentOwner,It=gn.ReactCurrentBatchConfig,ie=0,Ge=null,ke=null,He=0,yt=0,Qr=rr(0),be=0,xi=null,Rr=0,el=0,Ed=0,ai=null,at=null,Cd=0,ys=1/0,tn=null,pa=!1,oc=null,Gn=null,So=!1,Dn=null,ma=0,li=0,ac=null,Go=-1,Ko=0;function et(){return ie&6?Te():Go!==-1?Go:Go=Te()}function Kn(t){return t.mode&1?ie&2&&He!==0?He&-He:mC.transition!==null?(Ko===0&&(Ko=$m()),Ko):(t=ue,t!==0||(t=window.event,t=t===void 0?16:Jm(t.type)),t):1}function jt(t,e,n,r){if(50<li)throw li=0,ac=null,Error(U(185));Bi(t,n,r),(!(ie&2)||t!==Ge)&&(t===Ge&&(!(ie&2)&&(el|=n),be===4&&Tn(t,He)),ft(t,r),n===1&&ie===0&&!(e.mode&1)&&(ys=Te()+500,Qa&&sr()))}function ft(t,e){var n=t.callbackNode;m0(t,e);var r=Jo(t,t===Ge?He:0);if(r===0)n!==null&&zf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&zf(n),e===1)t.tag===0?pC(jh.bind(null,t)):_y(jh.bind(null,t)),cC(function(){!(ie&6)&&sr()}),n=null;else{switch(zm(r)){case 1:n=Vc;break;case 4:n=Hm;break;case 16:n=Xo;break;case 536870912:n=Bm;break;default:n=Xo}n=y_(n,u_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function u_(t,e){if(Go=-1,Ko=0,ie&6)throw Error(U(327));var n=t.callbackNode;if(ss()&&t.callbackNode!==n)return null;var r=Jo(t,t===Ge?He:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ya(t,r);else{e=r;var s=ie;ie|=2;var i=d_();(Ge!==t||He!==e)&&(tn=null,ys=Te()+500,yr(t,e));do try{bC();break}catch(a){c_(t,a)}while(1);od(),ha.current=i,ie=s,ke!==null?e=0:(Ge=null,He=0,e=be)}if(e!==0){if(e===2&&(s=Du(t),s!==0&&(r=s,e=lc(t,s))),e===1)throw n=xi,yr(t,0),Tn(t,r),ft(t,Te()),n;if(e===6)Tn(t,r);else{if(s=t.current.alternate,!(r&30)&&!OC(s)&&(e=ya(t,r),e===2&&(i=Du(t),i!==0&&(r=i,e=lc(t,i))),e===1))throw n=xi,yr(t,0),Tn(t,r),ft(t,Te()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:lr(t,at,tn);break;case 3:if(Tn(t,r),(r&130023424)===r&&(e=Cd+500-Te(),10<e)){if(Jo(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){et(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ku(lr.bind(null,t,at,tn),e);break}lr(t,at,tn);break;case 4:if(Tn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ut(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Te()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*PC(r/1960))-r,10<r){t.timeoutHandle=Ku(lr.bind(null,t,at,tn),r);break}lr(t,at,tn);break;case 5:lr(t,at,tn);break;default:throw Error(U(329))}}}return ft(t,Te()),t.callbackNode===n?u_.bind(null,t):null}function lc(t,e){var n=ai;return t.current.memoizedState.isDehydrated&&(yr(t,e).flags|=256),t=ya(t,e),t!==2&&(e=at,at=n,e!==null&&uc(e)),t}function uc(t){at===null?at=t:at.push.apply(at,t)}function OC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Gt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Tn(t,e){for(e&=~Ed,e&=~el,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ut(e),r=1<<n;t[n]=-1,e&=~r}}function jh(t){if(ie&6)throw Error(U(327));ss();var e=Jo(t,0);if(!(e&1))return ft(t,Te()),null;var n=ya(t,e);if(t.tag!==0&&n===2){var r=Du(t);r!==0&&(e=r,n=lc(t,r))}if(n===1)throw n=xi,yr(t,0),Tn(t,e),ft(t,Te()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,lr(t,at,tn),ft(t,Te()),null}function wd(t,e){var n=ie;ie|=1;try{return t(e)}finally{ie=n,ie===0&&(ys=Te()+500,Qa&&sr())}}function Sr(t){Dn!==null&&Dn.tag===0&&!(ie&6)&&ss();var e=ie;ie|=1;var n=It.transition,r=ue;try{if(It.transition=null,ue=1,t)return t()}finally{ue=r,It.transition=n,ie=e,!(ie&6)&&sr()}}function Rd(){yt=Qr.current,ge(Qr)}function yr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,uC(n)),ke!==null)for(n=ke.return;n!==null;){var r=n;switch(rd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ra();break;case 3:ps(),ge(ct),ge(Qe),fd();break;case 5:dd(r);break;case 4:ps();break;case 13:ge(Ce);break;case 19:ge(Ce);break;case 10:ad(r.type._context);break;case 22:case 23:Rd()}n=n.return}if(Ge=t,ke=t=Hn(t.current,null),He=yt=e,be=0,xi=null,Ed=el=Rr=0,at=ai=null,fr!==null){for(e=0;e<fr.length;e++)if(n=fr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}fr=null}return t}function c_(t,e){do{var n=ke;try{if(od(),jo.current=fa,da){for(var r=we.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}da=!1}if(wr=0,je=Pe=we=null,ii=!1,Ti=0,vd.current=null,n===null||n.return===null){be=1,xi=e,ke=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=He,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,c=d.tag;if(!(d.mode&1)&&(c===0||c===11||c===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=Ih(o);if(y!==null){y.flags&=-257,Ah(y,o,a,i,e),y.mode&1&&Sh(i,u,e),e=y,l=u;var v=e.updateQueue;if(v===null){var w=new Set;w.add(l),e.updateQueue=w}else v.add(l);break e}else{if(!(e&1)){Sh(i,u,e),Sd();break e}l=Error(U(426))}}else if(Ee&&a.mode&1){var C=Ih(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Ah(C,o,a,i,e),sd(ms(l,a));break e}}i=l=ms(l,a),be!==4&&(be=2),ai===null?ai=[i]:ai.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var h=Vy(i,l,e);_h(i,h);break e;case 1:a=l;var p=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Gn===null||!Gn.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var N=Yy(i,a,e);_h(i,N);break e}}i=i.return}while(i!==null)}h_(n)}catch(b){e=b,ke===n&&n!==null&&(ke=n=n.return);continue}break}while(1)}function d_(){var t=ha.current;return ha.current=fa,t===null?fa:t}function Sd(){(be===0||be===3||be===2)&&(be=4),Ge===null||!(Rr&268435455)&&!(el&268435455)||Tn(Ge,He)}function ya(t,e){var n=ie;ie|=2;var r=d_();(Ge!==t||He!==e)&&(tn=null,yr(t,e));do try{DC();break}catch(s){c_(t,s)}while(1);if(od(),ie=n,ha.current=r,ke!==null)throw Error(U(261));return Ge=null,He=0,be}function DC(){for(;ke!==null;)f_(ke)}function bC(){for(;ke!==null&&!o0();)f_(ke)}function f_(t){var e=m_(t.alternate,t,yt);t.memoizedProps=t.pendingProps,e===null?h_(t):ke=e,vd.current=null}function h_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=NC(n,e),n!==null){n.flags&=32767,ke=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{be=6,ke=null;return}}else if(n=TC(n,e,yt),n!==null){ke=n;return}if(e=e.sibling,e!==null){ke=e;return}ke=e=t}while(e!==null);be===0&&(be=5)}function lr(t,e,n){var r=ue,s=It.transition;try{It.transition=null,ue=1,MC(t,e,n,r)}finally{It.transition=s,ue=r}return null}function MC(t,e,n,r){do ss();while(Dn!==null);if(ie&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(y0(t,i),t===Ge&&(ke=Ge=null,He=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||So||(So=!0,y_(Xo,function(){return ss(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=It.transition,It.transition=null;var o=ue;ue=1;var a=ie;ie|=4,vd.current=null,xC(t,n),a_(n,t),nC(Wu),Zo=!!Fu,Wu=Fu=null,t.current=n,LC(n),a0(),ie=a,ue=o,It.transition=i}else t.current=n;if(So&&(So=!1,Dn=t,ma=s),i=t.pendingLanes,i===0&&(Gn=null),c0(n.stateNode),ft(t,Te()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(pa)throw pa=!1,t=oc,oc=null,t;return ma&1&&t.tag!==0&&ss(),i=t.pendingLanes,i&1?t===ac?li++:(li=0,ac=t):li=0,sr(),null}function ss(){if(Dn!==null){var t=zm(ma),e=It.transition,n=ue;try{if(It.transition=null,ue=16>t?16:t,Dn===null)var r=!1;else{if(t=Dn,Dn=null,ma=0,ie&6)throw Error(U(331));var s=ie;for(ie|=4,H=t.current;H!==null;){var i=H,o=i.child;if(H.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(H=u;H!==null;){var d=H;switch(d.tag){case 0:case 11:case 15:oi(8,d,i)}var c=d.child;if(c!==null)c.return=d,H=c;else for(;H!==null;){d=H;var f=d.sibling,y=d.return;if(s_(d),d===u){H=null;break}if(f!==null){f.return=y,H=f;break}H=y}}}var v=i.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var C=w.sibling;w.sibling=null,w=C}while(w!==null)}}H=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,H=o;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:oi(9,i,i.return)}var h=i.sibling;if(h!==null){h.return=i.return,H=h;break e}H=i.return}}var p=t.current;for(H=p;H!==null;){o=H;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,H=_;else e:for(o=p;H!==null;){if(a=H,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Za(9,a)}}catch(b){Se(a,a.return,b)}if(a===o){H=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,H=N;break e}H=a.return}}if(ie=s,sr(),Vt&&typeof Vt.onPostCommitFiberRoot=="function")try{Vt.onPostCommitFiberRoot($a,t)}catch{}r=!0}return r}finally{ue=n,It.transition=e}}return!1}function Fh(t,e,n){e=ms(n,e),e=Vy(t,e,1),t=Wn(t,e,1),e=et(),t!==null&&(Bi(t,1,e),ft(t,e))}function Se(t,e,n){if(t.tag===3)Fh(t,t,n);else for(;e!==null;){if(e.tag===3){Fh(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Gn===null||!Gn.has(r))){t=ms(n,t),t=Yy(e,t,1),e=Wn(e,t,1),t=et(),e!==null&&(Bi(e,1,t),ft(e,t));break}}e=e.return}}function UC(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=et(),t.pingedLanes|=t.suspendedLanes&n,Ge===t&&(He&n)===n&&(be===4||be===3&&(He&130023424)===He&&500>Te()-Cd?yr(t,0):Ed|=n),ft(t,e)}function p_(t,e){e===0&&(t.mode&1?(e=po,po<<=1,!(po&130023424)&&(po=4194304)):e=1);var n=et();t=hn(t,e),t!==null&&(Bi(t,e,n),ft(t,n))}function jC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),p_(t,n)}function FC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),p_(t,n)}var m_;m_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ct.current)lt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return lt=!1,AC(t,e,n);lt=!!(t.flags&131072)}else lt=!1,Ee&&e.flags&1048576&&gy(e,oa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Wo(t,e),t=e.pendingProps;var s=ds(e,Qe.current);rs(e,n),s=pd(null,e,r,t,s,n);var i=md();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,dt(r)?(i=!0,sa(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ud(e),s.updater=Xa,e.stateNode=s,s._reactInternals=e,qu(e,r,t,n),e=Ju(null,e,r,!0,i,n)):(e.tag=0,Ee&&i&&nd(e),Je(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Wo(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=GC(r),t=xt(r,t),s){case 0:e=Xu(null,e,r,t,n);break e;case 1:e=kh(null,e,r,t,n);break e;case 11:e=Th(null,e,r,t,n);break e;case 14:e=Nh(null,e,r,xt(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:xt(r,s),Xu(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:xt(r,s),kh(t,e,r,s,n);case 3:e:{if(Jy(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,wy(t,e),ua(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ms(Error(U(423)),e),e=xh(t,e,r,n,s);break e}else if(r!==s){s=ms(Error(U(424)),e),e=xh(t,e,r,n,s);break e}else for(_t=Fn(e.stateNode.containerInfo.firstChild),gt=e,Ee=!0,Pt=null,n=Ay(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(fs(),r===s){e=pn(t,e,n);break e}Je(t,e,r,n)}e=e.child}return e;case 5:return Ty(e),t===null&&zu(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Gu(r,s)?o=null:i!==null&&Gu(r,i)&&(e.flags|=32),Xy(t,e),Je(t,e,o,n),e.child;case 6:return t===null&&zu(e),null;case 13:return Zy(t,e,n);case 4:return cd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=hs(e,null,r,n):Je(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:xt(r,s),Th(t,e,r,s,n);case 7:return Je(t,e,e.pendingProps,n),e.child;case 8:return Je(t,e,e.pendingProps.children,n),e.child;case 12:return Je(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,pe(aa,r._currentValue),r._currentValue=o,i!==null)if(Gt(i.value,o)){if(i.children===s.children&&!ct.current){e=pn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=un(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Vu(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Vu(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Je(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,rs(e,n),s=At(s),r=r(s),e.flags|=1,Je(t,e,r,n),e.child;case 14:return r=e.type,s=xt(r,e.pendingProps),s=xt(r.type,s),Nh(t,e,r,s,n);case 15:return qy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:xt(r,s),Wo(t,e),e.tag=1,dt(r)?(t=!0,sa(e)):t=!1,rs(e,n),Sy(e,r,s),qu(e,r,s,n),Ju(null,e,r,!0,t,n);case 19:return e_(t,e,n);case 22:return Qy(t,e,n)}throw Error(U(156,e.tag))};function y_(t,e){return Km(t,e)}function WC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function St(t,e,n,r){return new WC(t,e,n,r)}function Id(t){return t=t.prototype,!(!t||!t.isReactComponent)}function GC(t){if(typeof t=="function")return Id(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Bc)return 11;if(t===$c)return 14}return 2}function Hn(t,e){var n=t.alternate;return n===null?(n=St(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ho(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Id(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Wr:return _r(n.children,s,i,e);case Hc:o=8,s|=8;break;case vu:return t=St(12,n,e,s|2),t.elementType=vu,t.lanes=i,t;case Eu:return t=St(13,n,e,s),t.elementType=Eu,t.lanes=i,t;case Cu:return t=St(19,n,e,s),t.elementType=Cu,t.lanes=i,t;case Im:return tl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Rm:o=10;break e;case Sm:o=9;break e;case Bc:o=11;break e;case $c:o=14;break e;case Sn:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=St(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function _r(t,e,n,r){return t=St(7,t,r,e),t.lanes=n,t}function tl(t,e,n,r){return t=St(22,t,r,e),t.elementType=Im,t.lanes=n,t.stateNode={isHidden:!1},t}function Jl(t,e,n){return t=St(6,t,null,e),t.lanes=n,t}function Zl(t,e,n){return e=St(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function KC(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ol(0),this.expirationTimes=Ol(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ol(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ad(t,e,n,r,s,i,o,a,l){return t=new KC(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=St(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ud(i),t}function HC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function __(t){if(!t)return Xn;t=t._reactInternals;e:{if(Or(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(dt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(dt(n))return yy(t,n,e)}return e}function g_(t,e,n,r,s,i,o,a,l){return t=Ad(n,r,!0,t,s,i,o,a,l),t.context=__(null),n=t.current,r=et(),s=Kn(n),i=un(r,s),i.callback=e??null,Wn(n,i,s),t.current.lanes=s,Bi(t,s,r),ft(t,r),t}function nl(t,e,n,r){var s=e.current,i=et(),o=Kn(s);return n=__(n),e.context===null?e.context=n:e.pendingContext=n,e=un(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Wn(s,e,o),t!==null&&(jt(t,s,o,i),Uo(t,s,o)),o}function _a(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Wh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Td(t,e){Wh(t,e),(t=t.alternate)&&Wh(t,e)}function BC(){return null}var v_=typeof reportError=="function"?reportError:function(t){console.error(t)};function Nd(t){this._internalRoot=t}rl.prototype.render=Nd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));nl(t,e,null,null)};rl.prototype.unmount=Nd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Sr(function(){nl(null,t,null,null)}),e[fn]=null}};function rl(t){this._internalRoot=t}rl.prototype.unstable_scheduleHydration=function(t){if(t){var e=qm();t={blockedOn:null,target:t,priority:e};for(var n=0;n<An.length&&e!==0&&e<An[n].priority;n++);An.splice(n,0,t),n===0&&Xm(t)}};function kd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function sl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Gh(){}function $C(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=_a(o);i.call(u)}}var o=g_(e,r,t,0,null,!1,!1,"",Gh);return t._reactRootContainer=o,t[fn]=o.current,wi(t.nodeType===8?t.parentNode:t),Sr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=_a(l);a.call(u)}}var l=Ad(t,0,!1,null,null,!1,!1,"",Gh);return t._reactRootContainer=l,t[fn]=l.current,wi(t.nodeType===8?t.parentNode:t),Sr(function(){nl(e,l,n,r)}),l}function il(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=_a(o);a.call(l)}}nl(e,o,t,s)}else o=$C(n,e,t,s,r);return _a(o)}Vm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Xs(e.pendingLanes);n!==0&&(Yc(e,n|1),ft(e,Te()),!(ie&6)&&(ys=Te()+500,sr()))}break;case 13:Sr(function(){var r=hn(t,1);if(r!==null){var s=et();jt(r,t,1,s)}}),Td(t,1)}};qc=function(t){if(t.tag===13){var e=hn(t,134217728);if(e!==null){var n=et();jt(e,t,134217728,n)}Td(t,134217728)}};Ym=function(t){if(t.tag===13){var e=Kn(t),n=hn(t,e);if(n!==null){var r=et();jt(n,t,e,r)}Td(t,e)}};qm=function(){return ue};Qm=function(t,e){var n=ue;try{return ue=t,e()}finally{ue=n}};Lu=function(t,e,n){switch(e){case"input":if(Su(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=qa(r);if(!s)throw Error(U(90));Tm(r),Su(r,s)}}}break;case"textarea":km(t,n);break;case"select":e=n.value,e!=null&&Zr(t,!!n.multiple,e,!1)}};Mm=wd;Um=Sr;var zC={usingClientEntryPoint:!1,Events:[zi,Br,qa,Dm,bm,wd]},Bs={findFiberByHostInstance:dr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},VC={bundleType:Bs.bundleType,version:Bs.version,rendererPackageName:Bs.rendererPackageName,rendererConfig:Bs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Wm(t),t===null?null:t.stateNode},findFiberByHostInstance:Bs.findFiberByHostInstance||BC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Io=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Io.isDisabled&&Io.supportsFiber)try{$a=Io.inject(VC),Vt=Io}catch{}}Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zC;Et.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kd(e))throw Error(U(200));return HC(t,e,null,n)};Et.createRoot=function(t,e){if(!kd(t))throw Error(U(299));var n=!1,r="",s=v_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Ad(t,1,!1,null,null,n,!1,r,s),t[fn]=e.current,wi(t.nodeType===8?t.parentNode:t),new Nd(e)};Et.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=Wm(e),t=t===null?null:t.stateNode,t};Et.flushSync=function(t){return Sr(t)};Et.hydrate=function(t,e,n){if(!sl(e))throw Error(U(200));return il(null,t,e,!0,n)};Et.hydrateRoot=function(t,e,n){if(!kd(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=v_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=g_(e,null,t,1,n??null,s,!1,i,o),t[fn]=e.current,wi(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new rl(e)};Et.render=function(t,e,n){if(!sl(e))throw Error(U(200));return il(null,t,e,!1,n)};Et.unmountComponentAtNode=function(t){if(!sl(t))throw Error(U(40));return t._reactRootContainer?(Sr(function(){il(null,null,t,!1,function(){t._reactRootContainer=null,t[fn]=null})}),!0):!1};Et.unstable_batchedUpdates=wd;Et.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!sl(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return il(t,e,n,!1,r)};Et.version="18.2.0-next-9e3b772b8-20220608";function E_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(E_)}catch(t){console.error(t)}}E_(),gm.exports=Et;var YC=gm.exports,Kh=YC;_u.createRoot=Kh.createRoot,_u.hydrateRoot=Kh.hydrateRoot;/**
 * @remix-run/router v1.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Li(){return Li=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Li.apply(this,arguments)}var bn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(bn||(bn={}));const Hh="popstate";function qC(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return cc("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:ga(s)}return XC(e,n,null,t)}function xe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function xd(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function QC(){return Math.random().toString(36).substr(2,8)}function Bh(t,e){return{usr:t.state,key:t.key,idx:e}}function cc(t,e,n,r){return n===void 0&&(n=null),Li({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?As(e):e,{state:n,key:e&&e.key||r||QC()})}function ga(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function As(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function XC(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=bn.Pop,l=null,u=d();u==null&&(u=0,o.replaceState(Li({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function c(){a=bn.Pop;let C=d(),h=C==null?null:C-u;u=C,l&&l({action:a,location:w.location,delta:h})}function f(C,h){a=bn.Push;let p=cc(w.location,C,h);n&&n(p,C),u=d()+1;let _=Bh(p,u),N=w.createHref(p);try{o.pushState(_,"",N)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;s.location.assign(N)}i&&l&&l({action:a,location:w.location,delta:1})}function y(C,h){a=bn.Replace;let p=cc(w.location,C,h);n&&n(p,C),u=d();let _=Bh(p,u),N=w.createHref(p);o.replaceState(_,"",N),i&&l&&l({action:a,location:w.location,delta:0})}function v(C){let h=s.location.origin!=="null"?s.location.origin:s.location.href,p=typeof C=="string"?C:ga(C);return xe(h,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,h)}let w={get action(){return a},get location(){return t(s,o)},listen(C){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Hh,c),l=C,()=>{s.removeEventListener(Hh,c),l=null}},createHref(C){return e(s,C)},createURL:v,encodeLocation(C){let h=v(C);return{pathname:h.pathname,search:h.search,hash:h.hash}},push:f,replace:y,go(C){return o.go(C)}};return w}var $h;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})($h||($h={}));function JC(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?As(e):e,s=Ld(r.pathname||"/",n);if(s==null)return null;let i=C_(t);ZC(i);let o=null;for(let a=0;o==null&&a<i.length;++a)o=lw(i[a],dw(s));return o}function C_(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(xe(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Bn([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(xe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),C_(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:ow(u,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of w_(i.path))s(i,o,l)}),e}function w_(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=w_(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function ZC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:aw(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ew=/^:\w+$/,tw=3,nw=2,rw=1,sw=10,iw=-2,zh=t=>t==="*";function ow(t,e){let n=t.split("/"),r=n.length;return n.some(zh)&&(r+=iw),e&&(r+=nw),n.filter(s=>!zh(s)).reduce((s,i)=>s+(ew.test(i)?tw:i===""?rw:sw),r)}function aw(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function lw(t,e){let{routesMeta:n}=t,r={},s="/",i=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,u=s==="/"?e:e.slice(s.length)||"/",d=uw({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!d)return null;Object.assign(r,d.params);let c=a.route;i.push({params:r,pathname:Bn([s,d.pathname]),pathnameBase:mw(Bn([s,d.pathnameBase])),route:c}),d.pathnameBase!=="/"&&(s=Bn([s,d.pathnameBase]))}return i}function uw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=cw(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,d,c)=>{if(d==="*"){let f=a[c]||"";o=i.slice(0,i.length-f.length).replace(/(.)\/+$/,"$1")}return u[d]=fw(a[c]||"",d),u},{}),pathname:i,pathnameBase:o,pattern:t}}function cw(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),xd(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function dw(t){try{return decodeURI(t)}catch(e){return xd(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function fw(t,e){try{return decodeURIComponent(t)}catch(n){return xd(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Ld(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function hw(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?As(t):t;return{pathname:n?n.startsWith("/")?n:pw(n,e):e,search:yw(r),hash:_w(s)}}function pw(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function eu(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function R_(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function S_(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=As(t):(s=Li({},t),xe(!s.pathname||!s.pathname.includes("?"),eu("?","pathname","search",s)),xe(!s.pathname||!s.pathname.includes("#"),eu("#","pathname","hash",s)),xe(!s.search||!s.search.includes("#"),eu("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(r||o==null)a=n;else{let c=e.length-1;if(o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),c-=1;s.pathname=f.join("/")}a=c>=0?e[c]:"/"}let l=hw(s,a),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const Bn=t=>t.join("/").replace(/\/\/+/g,"/"),mw=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),yw=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,_w=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function gw(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const I_=["post","put","patch","delete"];new Set(I_);const vw=["get",...I_];new Set(vw);/**
 * React Router v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function va(){return va=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},va.apply(this,arguments)}const Pd=P.createContext(null),Ew=P.createContext(null),Ts=P.createContext(null),ol=P.createContext(null),Dr=P.createContext({outlet:null,matches:[],isDataRoute:!1}),A_=P.createContext(null);function Cw(t,e){let{relative:n}=e===void 0?{}:e;Yi()||xe(!1);let{basename:r,navigator:s}=P.useContext(Ts),{hash:i,pathname:o,search:a}=N_(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Bn([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Yi(){return P.useContext(ol)!=null}function al(){return Yi()||xe(!1),P.useContext(ol).location}function T_(t){P.useContext(Ts).static||P.useLayoutEffect(t)}function Jt(){let{isDataRoute:t}=P.useContext(Dr);return t?Dw():ww()}function ww(){Yi()||xe(!1);let t=P.useContext(Pd),{basename:e,navigator:n}=P.useContext(Ts),{matches:r}=P.useContext(Dr),{pathname:s}=al(),i=JSON.stringify(R_(r).map(l=>l.pathnameBase)),o=P.useRef(!1);return T_(()=>{o.current=!0}),P.useCallback(function(l,u){if(u===void 0&&(u={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let d=S_(l,JSON.parse(i),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Bn([e,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[e,n,i,s,t])}function N_(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=P.useContext(Dr),{pathname:s}=al(),i=JSON.stringify(R_(r).map(o=>o.pathnameBase));return P.useMemo(()=>S_(t,JSON.parse(i),s,n==="path"),[t,i,s,n])}function Rw(t,e){return Sw(t,e)}function Sw(t,e,n){Yi()||xe(!1);let{navigator:r}=P.useContext(Ts),{matches:s}=P.useContext(Dr),i=s[s.length-1],o=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let l=al(),u;if(e){var d;let w=typeof e=="string"?As(e):e;a==="/"||(d=w.pathname)!=null&&d.startsWith(a)||xe(!1),u=w}else u=l;let c=u.pathname||"/",f=a==="/"?c:c.slice(a.length)||"/",y=JC(t,{pathname:f}),v=kw(y&&y.map(w=>Object.assign({},w,{params:Object.assign({},o,w.params),pathname:Bn([a,r.encodeLocation?r.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?a:Bn([a,r.encodeLocation?r.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,n);return e&&v?P.createElement(ol.Provider,{value:{location:va({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:bn.Pop}},v):v}function Iw(){let t=Ow(),e=gw(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:s},n):null,i)}const Aw=P.createElement(Iw,null);class Tw extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?P.createElement(Dr.Provider,{value:this.props.routeContext},P.createElement(A_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Nw(t){let{routeContext:e,match:n,children:r}=t,s=P.useContext(Pd);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),P.createElement(Dr.Provider,{value:e},r)}function kw(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let i=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let a=i.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id]));a>=0||xe(!1),i=i.slice(0,Math.min(i.length,a+1))}return i.reduceRight((a,l,u)=>{let d=l.route.id?o==null?void 0:o[l.route.id]:null,c=null;n&&(c=l.route.errorElement||Aw);let f=e.concat(i.slice(0,u+1)),y=()=>{let v;return d?v=c:l.route.Component?v=P.createElement(l.route.Component,null):l.route.element?v=l.route.element:v=a,P.createElement(Nw,{match:l,routeContext:{outlet:a,matches:f,isDataRoute:n!=null},children:v})};return n&&(l.route.ErrorBoundary||l.route.errorElement||u===0)?P.createElement(Tw,{location:n.location,revalidation:n.revalidation,component:c,error:d,children:y(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):y()},null)}var k_=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(k_||{}),Ea=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Ea||{});function xw(t){let e=P.useContext(Pd);return e||xe(!1),e}function Lw(t){let e=P.useContext(Ew);return e||xe(!1),e}function Pw(t){let e=P.useContext(Dr);return e||xe(!1),e}function x_(t){let e=Pw(),n=e.matches[e.matches.length-1];return n.route.id||xe(!1),n.route.id}function Ow(){var t;let e=P.useContext(A_),n=Lw(Ea.UseRouteError),r=x_(Ea.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function Dw(){let{router:t}=xw(k_.UseNavigateStable),e=x_(Ea.UseNavigateStable),n=P.useRef(!1);return T_(()=>{n.current=!0}),P.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,va({fromRouteId:e},i)))},[t,e])}function en(t){xe(!1)}function bw(t){let{basename:e="/",children:n=null,location:r,navigationType:s=bn.Pop,navigator:i,static:o=!1}=t;Yi()&&xe(!1);let a=e.replace(/^\/*/,"/"),l=P.useMemo(()=>({basename:a,navigator:i,static:o}),[a,i,o]);typeof r=="string"&&(r=As(r));let{pathname:u="/",search:d="",hash:c="",state:f=null,key:y="default"}=r,v=P.useMemo(()=>{let w=Ld(u,a);return w==null?null:{location:{pathname:w,search:d,hash:c,state:f,key:y},navigationType:s}},[a,u,d,c,f,y,s]);return v==null?null:P.createElement(Ts.Provider,{value:l},P.createElement(ol.Provider,{children:n,value:v}))}function Mw(t){let{children:e,location:n}=t;return Rw(dc(e),n)}new Promise(()=>{});function dc(t,e){e===void 0&&(e=[]);let n=[];return P.Children.forEach(t,(r,s)=>{if(!P.isValidElement(r))return;let i=[...e,s];if(r.type===P.Fragment){n.push.apply(n,dc(r.props.children,i));return}r.type!==en&&xe(!1),!r.props.index||!r.props.children||xe(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=dc(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fc(){return fc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fc.apply(this,arguments)}function Uw(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function jw(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Fw(t,e){return t.button===0&&(!e||e==="_self")&&!jw(t)}const Ww=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],Gw="startTransition",Vh=jE[Gw];function Kw(t){let{basename:e,children:n,future:r,window:s}=t,i=P.useRef();i.current==null&&(i.current=qC({window:s,v5Compat:!0}));let o=i.current,[a,l]=P.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=P.useCallback(c=>{u&&Vh?Vh(()=>l(c)):l(c)},[l,u]);return P.useLayoutEffect(()=>o.listen(d),[o,d]),P.createElement(bw,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o})}const Hw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Bw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$w=P.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:u,preventScrollReset:d}=e,c=Uw(e,Ww),{basename:f}=P.useContext(Ts),y,v=!1;if(typeof u=="string"&&Bw.test(u)&&(y=u,Hw))try{let p=new URL(window.location.href),_=u.startsWith("//")?new URL(p.protocol+u):new URL(u),N=Ld(_.pathname,f);_.origin===p.origin&&N!=null?u=N+_.search+_.hash:v=!0}catch{}let w=Cw(u,{relative:s}),C=zw(u,{replace:o,state:a,target:l,preventScrollReset:d,relative:s});function h(p){r&&r(p),p.defaultPrevented||C(p)}return P.createElement("a",fc({},c,{href:y||w,onClick:v||i?r:h,ref:n,target:l}))});var Yh;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(Yh||(Yh={}));var qh;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(qh||(qh={}));function zw(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o}=e===void 0?{}:e,a=Jt(),l=al(),u=N_(t,{relative:o});return P.useCallback(d=>{if(Fw(d,n)){d.preventDefault();let c=r!==void 0?r:ga(l)===ga(u);a(t,{replace:c,state:s,preventScrollReset:i,relative:o})}},[l,a,u,r,s,n,t,i,o])}function Vw(t,e){let{capture:n}=e||{};P.useEffect(()=>{let r=n!=null?{capture:n}:void 0;return window.addEventListener("beforeunload",t,r),()=>{window.removeEventListener("beforeunload",t,r)}},[t,n])}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G=function(t,e){if(!t)throw Ns(e)},Ns=function(t){return new Error("Firebase Database ("+L_.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Yw=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Od={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,d=i>>2,c=(i&3)<<4|a>>4;let f=(a&15)<<2|u>>6,y=u&63;l||(y=64,o||(f=64)),r.push(n[d],n[c],n[f],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(P_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Yw(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const c=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||c==null)throw new qw;const f=i<<2|a>>4;if(r.push(f),u!==64){const y=a<<4&240|u>>2;if(r.push(y),c!==64){const v=u<<6&192|c;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class qw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const O_=function(t){const e=P_(t);return Od.encodeByteArray(e,!0)},Ca=function(t){return O_(t).replace(/\./g,"")},wa=function(t){try{return Od.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(t){return D_(void 0,t)}function D_(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Xw(n)||(t[n]=D_(t[n],e[n]));return t}function Xw(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw=()=>Jw().__FIREBASE_DEFAULTS__,eR=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},tR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&wa(t[1]);return e&&JSON.parse(e)},Dd=()=>{try{return Zw()||eR()||tR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},b_=t=>{var e,n;return(n=(e=Dd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},nR=t=>{const e=b_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},M_=()=>{var t;return(t=Dd())===null||t===void 0?void 0:t.config},U_=t=>{var e;return(e=Dd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Ca(JSON.stringify(n)),Ca(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bd(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function sR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function j_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iR(){const t=Xe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function F_(){return L_.NODE_ADMIN===!0}function oR(){try{return typeof indexedDB=="object"}catch{return!1}}function aR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR="FirebaseError";class ir extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=lR,Object.setPrototypeOf(this,ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qi.prototype.create)}}class qi{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?uR(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new ir(s,a,r)}}function uR(t,e){return t.replace(cR,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const cR=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(t){return JSON.parse(t)}function Oe(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=Pi(wa(i[0])||""),n=Pi(wa(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},dR=function(t){const e=W_(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},fR=function(t){const e=W_(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function _s(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function hc(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ra(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function Sa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Qh(i)&&Qh(o)){if(!Sa(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Qh(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let c=0;c<16;c++)r[c]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let c=0;c<16;c++)r[c]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let c=16;c<80;c++){const f=r[c-3]^r[c-8]^r[c-14]^r[c-16];r[c]=(f<<1|f>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],u,d;for(let c=0;c<80;c++){c<40?c<20?(u=a^i&(o^a),d=1518500249):(u=i^o^a,d=1859775393):c<60?(u=i&o|a&(i|o),d=2400959708):(u=i^o^a,d=3395469782);const f=(s<<5|s>>>27)+u+l+d+r[c]&4294967295;l=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=f}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function pR(t,e){const n=new mR(t,e);return n.subscribe.bind(n)}class mR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");yR(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=tu),s.error===void 0&&(s.error=tu),s.complete===void 0&&(s.complete=tu);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function tu(){}function Md(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,G(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},ul=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(t){return t&&t._delegate?t._delegate:t}class Ir{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ll;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ER(e))try{this.getOrInitializeService({instanceIdentifier:ur})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ur){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ur){return this.instances.has(e)}getOptions(e=ur){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:vR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ur){return this.component?this.component.multipleInstances?e:ur:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function vR(t){return t===ur?void 0:t}function ER(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new gR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ce||(ce={}));const wR={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},RR=ce.INFO,SR={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},IR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=SR[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ud{constructor(e){this.name=e,this._logLevel=RR,this._logHandler=IR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}}const AR=(t,e)=>e.some(n=>t instanceof n);let Xh,Jh;function TR(){return Xh||(Xh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NR(){return Jh||(Jh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const G_=new WeakMap,pc=new WeakMap,K_=new WeakMap,nu=new WeakMap,jd=new WeakMap;function kR(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n($n(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&G_.set(n,t)}).catch(()=>{}),jd.set(e,t),e}function xR(t){if(pc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});pc.set(t,e)}let mc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return pc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||K_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $n(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function LR(t){mc=t(mc)}function PR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ru(this),e,...n);return K_.set(r,e.sort?e.sort():[e]),$n(r)}:NR().includes(t)?function(...e){return t.apply(ru(this),e),$n(G_.get(this))}:function(...e){return $n(t.apply(ru(this),e))}}function OR(t){return typeof t=="function"?PR(t):(t instanceof IDBTransaction&&xR(t),AR(t,TR())?new Proxy(t,mc):t)}function $n(t){if(t instanceof IDBRequest)return kR(t);if(nu.has(t))return nu.get(t);const e=OR(t);return e!==t&&(nu.set(t,e),jd.set(e,t)),e}const ru=t=>jd.get(t);function DR(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=$n(o);return r&&o.addEventListener("upgradeneeded",l=>{r($n(o.result),l.oldVersion,l.newVersion,$n(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const bR=["get","getKey","getAll","getAllKeys","count"],MR=["put","add","delete","clear"],su=new Map;function Zh(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(su.get(e))return su.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=MR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||bR.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return su.set(e,i),i}LR(t=>({...t,get:(e,n,r)=>Zh(e,n)||t.get(e,n,r),has:(e,n)=>!!Zh(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(jR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function jR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const yc="@firebase/app",ep="0.9.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar=new Ud("@firebase/app"),FR="@firebase/app-compat",WR="@firebase/analytics-compat",GR="@firebase/analytics",KR="@firebase/app-check-compat",HR="@firebase/app-check",BR="@firebase/auth",$R="@firebase/auth-compat",zR="@firebase/database",VR="@firebase/database-compat",YR="@firebase/functions",qR="@firebase/functions-compat",QR="@firebase/installations",XR="@firebase/installations-compat",JR="@firebase/messaging",ZR="@firebase/messaging-compat",eS="@firebase/performance",tS="@firebase/performance-compat",nS="@firebase/remote-config",rS="@firebase/remote-config-compat",sS="@firebase/storage",iS="@firebase/storage-compat",oS="@firebase/firestore",aS="@firebase/firestore-compat",lS="firebase",uS="10.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c="[DEFAULT]",cS={[yc]:"fire-core",[FR]:"fire-core-compat",[GR]:"fire-analytics",[WR]:"fire-analytics-compat",[HR]:"fire-app-check",[KR]:"fire-app-check-compat",[BR]:"fire-auth",[$R]:"fire-auth-compat",[zR]:"fire-rtdb",[VR]:"fire-rtdb-compat",[YR]:"fire-fn",[qR]:"fire-fn-compat",[QR]:"fire-iid",[XR]:"fire-iid-compat",[JR]:"fire-fcm",[ZR]:"fire-fcm-compat",[eS]:"fire-perf",[tS]:"fire-perf-compat",[nS]:"fire-rc",[rS]:"fire-rc-compat",[sS]:"fire-gcs",[iS]:"fire-gcs-compat",[oS]:"fire-fst",[aS]:"fire-fst-compat","fire-js":"fire-js",[lS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia=new Map,gc=new Map;function dS(t,e){try{t.container.addComponent(e)}catch(n){Ar.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function gs(t){const e=t.name;if(gc.has(e))return Ar.debug(`There were multiple attempts to register component ${e}.`),!1;gc.set(e,t);for(const n of Ia.values())dS(n,t);return!0}function Fd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},zn=new qi("app","Firebase",fS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ir("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=uS;function H_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:_c,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw zn.create("bad-app-name",{appName:String(s)});if(n||(n=M_()),!n)throw zn.create("no-options");const i=Ia.get(s);if(i){if(Sa(n,i.options)&&Sa(r,i.config))return i;throw zn.create("duplicate-app",{appName:s})}const o=new CR(s);for(const l of gc.values())o.addComponent(l);const a=new hS(n,r,o);return Ia.set(s,a),a}function B_(t=_c){const e=Ia.get(t);if(!e&&t===_c&&M_())return H_();if(!e)throw zn.create("no-app",{appName:t});return e}function Vn(t,e,n){var r;let s=(r=cS[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ar.warn(a.join(" "));return}gs(new Ir(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS="firebase-heartbeat-database",mS=1,Oi="firebase-heartbeat-store";let iu=null;function $_(){return iu||(iu=DR(pS,mS,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Oi)}}}).catch(t=>{throw zn.create("idb-open",{originalErrorMessage:t.message})})),iu}async function yS(t){try{return await(await $_()).transaction(Oi).objectStore(Oi).get(z_(t))}catch(e){if(e instanceof ir)Ar.warn(e.message);else{const n=zn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ar.warn(n.message)}}}async function tp(t,e){try{const r=(await $_()).transaction(Oi,"readwrite");await r.objectStore(Oi).put(e,z_(t)),await r.done}catch(n){if(n instanceof ir)Ar.warn(n.message);else{const r=zn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ar.warn(r.message)}}}function z_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S=1024,gS=30*24*60*60*1e3;class vS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new CS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=np();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=gS}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=np(),{heartbeatsToSend:n,unsentEntries:r}=ES(this._heartbeatsCache.heartbeats),s=Ca(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function np(){return new Date().toISOString().substring(0,10)}function ES(t,e=_S){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),rp(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),rp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class CS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oR()?aR().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await yS(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return tp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return tp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function rp(t){return Ca(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(t){gs(new Ir("platform-logger",e=>new UR(e),"PRIVATE")),gs(new Ir("heartbeat",e=>new vS(e),"PRIVATE")),Vn(yc,ep,t),Vn(yc,ep,"esm2017"),Vn("fire-js","")}wS("");var RS="firebase",SS="10.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vn(RS,SS,"app");const sp="@firebase/database",ip="1.0.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let V_="";function IS(t){V_=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Oe(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Pi(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return vn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new AS(e)}}catch{}return new TS},pr=Y_("localStorage"),vc=Y_("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is=new Ud("@firebase/database"),NS=function(){let t=1;return function(){return t++}}(),q_=function(t){const e=_R(t),n=new hR;n.update(e);const r=n.digest();return Od.encodeByteArray(r)},Qi=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Qi.apply(null,r):typeof r=="object"?e+=Oe(r):e+=r,e+=" "}return e};let gr=null,op=!0;const kS=function(t,e){G(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(is.logLevel=ce.VERBOSE,gr=is.log.bind(is),e&&vc.set("logging_enabled",!0)):typeof t=="function"?gr=t:(gr=null,vc.remove("logging_enabled"))},qe=function(...t){if(op===!0&&(op=!1,gr===null&&vc.get("logging_enabled")===!0&&kS(!0)),gr){const e=Qi.apply(null,t);gr(e)}},Xi=function(t){return function(...e){qe(t,...e)}},Ec=function(...t){const e="FIREBASE INTERNAL ERROR: "+Qi(...t);is.error(e)},mn=function(...t){const e=`FIREBASE FATAL ERROR: ${Qi(...t)}`;throw is.error(e),new Error(e)},ht=function(...t){const e="FIREBASE WARNING: "+Qi(...t);is.warn(e)},xS=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ht("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Q_=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},LS=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},vs="[MIN_NAME]",Tr="[MAX_NAME]",Ls=function(t,e){if(t===e)return 0;if(t===vs||e===Tr)return-1;if(e===vs||t===Tr)return 1;{const n=ap(t),r=ap(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},PS=function(t,e){return t===e?0:t<e?-1:1},$s=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Oe(e))},Wd=function(t){if(typeof t!="object"||t===null)return Oe(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Oe(e[r]),n+=":",n+=Wd(t[e[r]]);return n+="}",n},X_=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function pt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const J_=function(t){G(!Q_(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,l;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(l=n;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(s?1:0),u.reverse();const d=u.join("");let c="";for(l=0;l<64;l+=8){let f=parseInt(d.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),c=c+f}return c.toLowerCase()},OS=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},DS=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function bS(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const MS=new RegExp("^-?(0*)\\d{1,10}$"),US=-2147483648,jS=2147483647,ap=function(t){if(MS.test(t)){const e=Number(t);if(e>=US&&e<=jS)return e}return null},Ps=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw ht("Exception was thrown by user callback.",n),e},Math.floor(0))}},FS=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ui=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ht(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(qe("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ht(e)}}class os{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}os.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="5",Z_="v",eg="s",tg="r",ng="f",rg=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,sg="ls",ig="p",Cc="ac",og="websocket",ag="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,n,r,s,i=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=pr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&pr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function KS(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function ug(t,e,n){G(typeof e=="string","typeof type must == string"),G(typeof n=="object","typeof params must == object");let r;if(e===og)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===ag)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);KS(t)&&(n.ns=t.namespace);const s=[];return pt(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(){this.counters_={}}incrementCounter(e,n=1){vn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Qw(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou={},au={};function Kd(t){const e=t.toString();return ou[e]||(ou[e]=new HS),ou[e]}function BS(t,e){const n=t.toString();return au[n]||(au[n]=e()),au[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&Ps(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="start",zS="close",VS="pLPCommand",YS="pRTLPCB",cg="id",dg="pw",fg="ser",qS="cb",QS="seg",XS="ts",JS="d",ZS="dframe",hg=1870,pg=30,eI=hg-pg,tI=25e3,nI=3e4;class Xr{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Xi(e),this.stats_=Kd(n),this.urlFn=l=>(this.appCheckToken&&(l[Cc]=this.appCheckToken),ug(n,ag,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new $S(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(nI)),LS(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Hd((...i)=>{const[o,a,l,u,d]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===lp)this.id=a,this.password=l;else if(o===zS)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[lp]="t",r[fg]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[qS]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Z_]=Gd,this.transportSessionId&&(r[eg]=this.transportSessionId),this.lastSessionId&&(r[sg]=this.lastSessionId),this.applicationId&&(r[ig]=this.applicationId),this.appCheckToken&&(r[Cc]=this.appCheckToken),typeof location<"u"&&location.hostname&&rg.test(location.hostname)&&(r[tg]=ng);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Xr.forceAllow_=!0}static forceDisallow(){Xr.forceDisallow_=!0}static isAvailable(){return Xr.forceAllow_?!0:!Xr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!OS()&&!DS()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Oe(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=O_(n),s=X_(r,eI);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[ZS]="t",r[cg]=e,r[dg]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Oe(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Hd{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=NS(),window[VS+this.uniqueCallbackIdentifier]=e,window[YS+this.uniqueCallbackIdentifier]=n,this.myIFrame=Hd.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){qe("frame writing exception"),a.stack&&qe(a.stack),qe(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||qe("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[cg]=this.myID,e[dg]=this.myPW,e[fg]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+pg+r.length<=hg;){const o=this.pendingSegs.shift();r=r+"&"+QS+s+"="+o.seg+"&"+XS+s+"="+o.ts+"&"+JS+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(tI)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{qe("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=16384,sI=45e3;let Aa=null;typeof MozWebSocket<"u"?Aa=MozWebSocket:typeof WebSocket<"u"&&(Aa=WebSocket);class Ot{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Xi(this.connId),this.stats_=Kd(n),this.connURL=Ot.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[Z_]=Gd,typeof location<"u"&&location.hostname&&rg.test(location.hostname)&&(o[tg]=ng),n&&(o[eg]=n),r&&(o[sg]=r),s&&(o[Cc]=s),i&&(o[ig]=i),ug(e,og,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,pr.set("previous_websocket_failure",!0);try{let r;F_(),this.mySock=new Aa(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Ot.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Aa!==null&&!Ot.forceDisallow_}static previouslyFailed(){return pr.isInMemoryStorage||pr.get("previous_websocket_failure")===!0}markConnectionHealthy(){pr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Pi(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(G(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Oe(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=X_(n,rI);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(sI))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ot.responsesRequiredToBeHealthy=2;Ot.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Xr,Ot]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Ot&&Ot.isAvailable();let r=n&&!Ot.previouslyFailed();if(e.webSocketOnly&&(n||ht("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Ot];else{const s=this.transports_=[];for(const i of Di.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);Di.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Di.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=6e4,oI=5e3,aI=10*1024,lI=100*1024,lu="t",up="d",uI="s",cp="r",cI="e",dp="o",fp="a",hp="n",pp="p",dI="h";class fI{constructor(e,n,r,s,i,o,a,l,u,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Xi("c:"+this.id+":"),this.transportManager_=new Di(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=ui(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>lI?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>aI?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(lu in e){const n=e[lu];n===fp?this.upgradeIfSecondaryHealthy_():n===cp?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===dp&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=$s("t",e),r=$s("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:pp,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:fp,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:hp,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=$s("t",e),r=$s("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=$s(lu,e);if(up in e){const r=e[up];if(n===dI){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===hp){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===uI?this.onConnectionShutdown_(r):n===cp?this.onReset_(r):n===cI?Ec("Server Error: "+r):n===dp?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ec("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Gd!==r&&ht("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ui(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(iI))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ui(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(oI))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:pp,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(pr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e){this.allowedEvents_=e,this.listeners_={},G(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){G(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta extends yg{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!bd()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ta}getInitialEvent(e){return G(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp=32,yp=768;class de{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ae(){return new de("")}function te(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Jn(t){return t.pieces_.length-t.pieceNum_}function he(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new de(t.pieces_,e)}function _g(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function hI(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function gg(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function vg(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new de(e,0)}function De(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof de)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new de(n,0)}function re(t){return t.pieceNum_>=t.pieces_.length}function Ze(t,e){const n=te(t),r=te(e);if(n===null)return e;if(n===r)return Ze(he(t),he(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Bd(t,e){if(Jn(t)!==Jn(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function bt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Jn(t)>Jn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class pI{constructor(e,n){this.errorPrefix_=n,this.parts_=gg(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=ul(this.parts_[r]);Eg(this)}}function mI(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=ul(e),Eg(t)}function yI(t){const e=t.parts_.pop();t.byteLength_-=ul(e),t.parts_.length>0&&(t.byteLength_-=1)}function Eg(t){if(t.byteLength_>yp)throw new Error(t.errorPrefix_+"has a key path longer than "+yp+" bytes ("+t.byteLength_+").");if(t.parts_.length>mp)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+mp+") or object contains a cycle "+cr(t))}function cr(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d extends yg{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new $d}getInitialEvent(e){return G(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs=1e3,_I=60*5*1e3,_p=30*1e3,gI=1.3,vI=3e4,EI="server_kill",gp=3;class cn extends mg{constructor(e,n,r,s,i,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=cn.nextPersistentConnectionId_++,this.log_=Xi("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=zs,this.maxReconnectDelay_=_I,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!F_())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");$d.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Ta.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(Oe(i)),G(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new ll,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),G(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),G(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const l=a.d,u=a.s;cn.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(u,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&vn(e,"w")){const r=_s(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();ht(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||fR(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=_p)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=dR(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),G(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Oe(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Ec("Unrecognized action received from server: "+Oe(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){G(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=zs,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=zs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>vI&&(this.reconnectDelay_=zs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*gI)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+cn.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},u=function(c){G(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(c)};this.realtime_={close:l,sendRequest:u};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[c,f]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?qe("getToken() completed but was canceled"):(qe("getToken() completed. Creating connection."),this.authToken_=c&&c.accessToken,this.appCheckToken_=f&&f.token,a=new fI(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,y=>{ht(y+" ("+this.repoInfo_.toString()+")"),this.interrupt(EI)},i))}catch(c){this.log_("Failed to get token: "+c),o||(this.repoInfo_.nodeAdmin&&ht(c),l())}}}interrupt(e){qe("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){qe("Resuming connection for reason: "+e),delete this.interruptReasons_[e],hc(this.interruptReasons_)&&(this.reconnectDelay_=zs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>Wd(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new de(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){qe("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=gp&&(this.reconnectDelay_=_p,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){qe("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=gp&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+V_.replace(/\./g,"-")]=1,bd()?e["framework.cordova"]=1:j_()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ta.getInstance().currentlyOnline();return hc(this.interruptReasons_)&&e}}cn.nextPersistentConnectionId_=0;cn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ne(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new ne(vs,e),s=new ne(vs,n);return this.compare(r,s)!==0}minPost(){return ne.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ao;class Cg extends cl{static get __EMPTY_NODE(){return Ao}static set __EMPTY_NODE(e){Ao=e}compare(e,n){return Ls(e.name,n.name)}isDefinedOn(e){throw Ns("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ne.MIN}maxPost(){return new ne(Tr,Ao)}makePost(e,n){return G(typeof e=="string","KeyIndex indexValue must always be a string."),new ne(e,Ao)}toString(){return".key"}}const as=new Cg;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Fe{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Fe.RED,this.left=s??ut.EMPTY_NODE,this.right=i??ut.EMPTY_NODE}copy(e,n,r,s,i){return new Fe(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ut.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return ut.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Fe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Fe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Fe.RED=!0;Fe.BLACK=!1;class CI{copy(e,n,r,s,i){return this}insert(e,n,r){return new Fe(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ut{constructor(e,n=ut.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new ut(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Fe.BLACK,null,null))}remove(e){return new ut(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Fe.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new To(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new To(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new To(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new To(this.root_,null,this.comparator_,!0,e)}}ut.EMPTY_NODE=new CI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(t,e){return Ls(t.name,e.name)}function zd(t,e){return Ls(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wc;function RI(t){wc=t}const wg=function(t){return typeof t=="number"?"number:"+J_(t):"string:"+t},Rg=function(t){if(t.isLeafNode()){const e=t.val();G(typeof e=="string"||typeof e=="number"||typeof e=="object"&&vn(e,".sv"),"Priority must be a string or number.")}else G(t===wc||t.isEmpty(),"priority of unexpected type.");G(t===wc||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vp;class Ue{constructor(e,n=Ue.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,G(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Rg(this.priorityNode_)}static set __childrenNodeConstructor(e){vp=e}static get __childrenNodeConstructor(){return vp}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Ue(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Ue.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return re(e)?this:te(e)===".priority"?this.priorityNode_:Ue.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Ue.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=te(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(G(r!==".priority"||Jn(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Ue.__childrenNodeConstructor.EMPTY_NODE.updateChild(he(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+wg(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=J_(this.value_):e+=this.value_,this.lazyHash_=q_(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Ue.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ue.__childrenNodeConstructor?-1:(G(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=Ue.VALUE_TYPE_ORDER.indexOf(n),i=Ue.VALUE_TYPE_ORDER.indexOf(r);return G(s>=0,"Unknown leaf type: "+n),G(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Ue.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sg,Ig;function SI(t){Sg=t}function II(t){Ig=t}class AI extends cl{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?Ls(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ne.MIN}maxPost(){return new ne(Tr,new Ue("[PRIORITY-POST]",Ig))}makePost(e,n){const r=Sg(e);return new ne(n,new Ue("[PRIORITY-POST]",r))}toString(){return".priority"}}const Ie=new AI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI=Math.log(2);class NI{constructor(e){const n=i=>parseInt(Math.log(i)/TI,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Na=function(t,e,n,r){t.sort(e);const s=function(l,u){const d=u-l;let c,f;if(d===0)return null;if(d===1)return c=t[l],f=n?n(c):c,new Fe(f,c.node,Fe.BLACK,null,null);{const y=parseInt(d/2,10)+l,v=s(l,y),w=s(y+1,u);return c=t[y],f=n?n(c):c,new Fe(f,c.node,Fe.BLACK,v,w)}},i=function(l){let u=null,d=null,c=t.length;const f=function(v,w){const C=c-v,h=c;c-=v;const p=s(C+1,h),_=t[C],N=n?n(_):_;y(new Fe(N,_.node,w,null,p))},y=function(v){u?(u.left=v,u=v):(d=v,u=v)};for(let v=0;v<l.count;++v){const w=l.nextBitIsOne(),C=Math.pow(2,l.count-(v+1));w?f(C,Fe.BLACK):(f(C,Fe.BLACK),f(C,Fe.RED))}return d},o=new NI(t.length),a=i(o);return new ut(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uu;const jr={};class on{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return G(jr&&Ie,"ChildrenNode.ts has not been loaded"),uu=uu||new on({".priority":jr},{".priority":Ie}),uu}get(e){const n=_s(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof ut?n:null}hasIndex(e){return vn(this.indexSet_,e.toString())}addIndex(e,n){G(e!==as,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(ne.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=Na(r,e.getCompare()):a=jr;const l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;const d=Object.assign({},this.indexes_);return d[l]=a,new on(d,u)}addToIndexes(e,n){const r=Ra(this.indexes_,(s,i)=>{const o=_s(this.indexSet_,i);if(G(o,"Missing index implementation for "+i),s===jr)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(ne.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),Na(a,o.getCompare())}else return jr;else{const a=n.get(e.name);let l=s;return a&&(l=l.remove(new ne(e.name,a))),l.insert(e,e.node)}});return new on(r,this.indexSet_)}removeFromIndexes(e,n){const r=Ra(this.indexes_,s=>{if(s===jr)return s;{const i=n.get(e.name);return i?s.remove(new ne(e.name,i)):s}});return new on(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vs;class V{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Rg(this.priorityNode_),this.children_.isEmpty()&&G(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Vs||(Vs=new V(new ut(zd),null,on.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Vs}updatePriority(e){return this.children_.isEmpty()?this:new V(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Vs:n}}getChild(e){const n=te(e);return n===null?this:this.getImmediateChild(n).getChild(he(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(G(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new ne(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Vs:this.priorityNode_;return new V(s,o,i)}}updateChild(e,n){const r=te(e);if(r===null)return n;{G(te(e)!==".priority"||Jn(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(he(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(Ie,(o,a)=>{n[o]=a.val(e),r++,i&&V.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+wg(this.getPriority().val())+":"),this.forEachChild(Ie,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":q_(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new ne(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ne(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ne(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,ne.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,ne.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ji?-1:0}withIndex(e){if(e===as||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new V(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===as||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Ie),s=n.getIterator(Ie);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===as?null:this.indexMap_.get(e.toString())}}V.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class kI extends V{constructor(){super(new ut(zd),V.EMPTY_NODE,on.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return V.EMPTY_NODE}isEmpty(){return!1}}const Ji=new kI;Object.defineProperties(ne,{MIN:{value:new ne(vs,V.EMPTY_NODE)},MAX:{value:new ne(Tr,Ji)}});Cg.__EMPTY_NODE=V.EMPTY_NODE;Ue.__childrenNodeConstructor=V;RI(Ji);II(Ji);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI=!0;function We(t,e=null){if(t===null)return V.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),G(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Ue(n,We(e))}if(!(t instanceof Array)&&xI){const n=[];let r=!1;if(pt(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=We(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new ne(o,l)))}}),n.length===0)return V.EMPTY_NODE;const i=Na(n,wI,o=>o.name,zd);if(r){const o=Na(n,Ie.getCompare());return new V(i,We(e),new on({".priority":o},{".priority":Ie}))}else return new V(i,We(e),on.Default)}else{let n=V.EMPTY_NODE;return pt(t,(r,s)=>{if(vn(t,r)&&r.substring(0,1)!=="."){const i=We(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(We(e))}}SI(We);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI extends cl{constructor(e){super(),this.indexPath_=e,G(!re(e)&&te(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?Ls(e.name,n.name):i}makePost(e,n){const r=We(e),s=V.EMPTY_NODE.updateChild(this.indexPath_,r);return new ne(n,s)}maxPost(){const e=V.EMPTY_NODE.updateChild(this.indexPath_,Ji);return new ne(Tr,e)}toString(){return gg(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI extends cl{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Ls(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ne.MIN}maxPost(){return ne.MAX}makePost(e,n){const r=We(e);return new ne(n,r)}toString(){return".value"}}const OI=new PI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(t){return{type:"value",snapshotNode:t}}function Es(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function bi(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Mi(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function DI(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){G(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(bi(n,a)):G(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Es(n,r)):o.trackChildChange(Mi(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Ie,(s,i)=>{n.hasChild(s)||r.trackChildChange(bi(s,i))}),n.isLeafNode()||n.forEachChild(Ie,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(Mi(s,i,o))}else r.trackChildChange(Es(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?V.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e){this.indexedFilter_=new Vd(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ui.getStartPost_(e),this.endPost_=Ui.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new ne(n,r))||(r=V.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=V.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(V.EMPTY_NODE);const i=this;return n.forEachChild(Ie,(o,a)=>{i.matches(new ne(o,a))||(s=s.updateImmediateChild(o,V.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Ui(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new ne(n,r))||(r=V.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=V.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=V.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(V.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,V.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const c=this.index_.getCompare();o=(f,y)=>c(y,f)}else o=this.index_.getCompare();const a=e;G(a.numChildren()===this.limit_,"");const l=new ne(n,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(l);if(a.hasChild(n)){const c=a.getImmediateChild(n);let f=s.getChildAfterChild(this.index_,u,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=s.getChildAfterChild(this.index_,f,this.reverse_);const y=f==null?1:o(f,l);if(d&&!r.isEmpty()&&y>=0)return i!=null&&i.trackChildChange(Mi(n,r,c)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(bi(n,c));const w=a.updateImmediateChild(n,V.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(i!=null&&i.trackChildChange(Es(f.name,f.node)),w.updateImmediateChild(f.name,f.node)):w}}else return r.isEmpty()?e:d&&o(u,l)>=0?(i!=null&&(i.trackChildChange(bi(u.name,u.node)),i.trackChildChange(Es(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(u.name,V.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ie}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return G(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return G(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:vs}hasEnd(){return this.endSet_}getIndexEndValue(){return G(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return G(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Tr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return G(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ie}copy(){const e=new Yd;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function MI(t){return t.loadsAllData()?new Vd(t.getIndex()):t.hasLimit()?new bI(t):new Ui(t)}function Ep(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Ie?n="$priority":t.index_===OI?n="$value":t.index_===as?n="$key":(G(t.index_ instanceof LI,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Oe(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Oe(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Oe(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Oe(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Oe(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Cp(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Ie&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka extends mg{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=Xi("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(G(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=ka.getListenId_(e,r),a={};this.listens_[o]=a;const l=Ep(e._queryParams);this.restRequest_(i+".json",l,(u,d)=>{let c=d;if(u===404&&(c=null,u=null),u===null&&this.onDataUpdate_(i,c,!1,r),_s(this.listens_,o)===a){let f;u?u===401?f="permission_denied":f="rest_error:"+u:f="ok",s(f,null)}})}unlisten(e,n){const r=ka.getListenId_(e,n);delete this.listens_[r]}get(e){const n=Ep(e._queryParams),r=e._path.toString(),s=new ll;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ks(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Pi(a.responseText)}catch{ht("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&ht("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(){this.rootNode_=V.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(){return{value:null,children:new Map}}function Tg(t,e,n){if(re(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=te(e);t.children.has(r)||t.children.set(r,xa());const s=t.children.get(r);e=he(e),Tg(s,e,n)}}function Rc(t,e,n){t.value!==null?n(e,t.value):jI(t,(r,s)=>{const i=new de(e.toString()+"/"+r);Rc(s,i,n)})}function jI(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&pt(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp=10*1e3,WI=30*1e3,GI=5*60*1e3;class KI{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new FI(e);const r=wp+(WI-wp)*Math.random();ui(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;pt(e,(s,i)=>{i>0&&vn(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),ui(this.reportStats_.bind(this),Math.floor(Math.random()*2*GI))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Mt||(Mt={}));function Ng(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function qd(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Qd(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Mt.ACK_USER_WRITE,this.source=Ng()}operationForChild(e){if(re(this.path)){if(this.affectedTree.value!=null)return G(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new de(e));return new La(ae(),n,this.revert)}}else return G(te(this.path)===e,"operationForChild called for unrelated child."),new La(he(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,n){this.source=e,this.path=n,this.type=Mt.LISTEN_COMPLETE}operationForChild(e){return re(this.path)?new ji(this.source,ae()):new ji(this.source,he(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Mt.OVERWRITE}operationForChild(e){return re(this.path)?new Nr(this.source,ae(),this.snap.getImmediateChild(e)):new Nr(this.source,he(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Mt.MERGE}operationForChild(e){if(re(this.path)){const n=this.children.subtree(new de(e));return n.isEmpty()?null:n.value?new Nr(this.source,ae(),n.value):new Fi(this.source,ae(),n)}else return G(te(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Fi(this.source,he(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(re(e))return this.isFullyInitialized()&&!this.filtered_;const n=te(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function BI(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(DI(o.childName,o.snapshotNode))}),Ys(t,s,"child_removed",e,r,n),Ys(t,s,"child_added",e,r,n),Ys(t,s,"child_moved",i,r,n),Ys(t,s,"child_changed",e,r,n),Ys(t,s,"value",e,r,n),s}function Ys(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,l)=>zI(t,a,l)),o.forEach(a=>{const l=$I(t,a,i);s.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function $I(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function zI(t,e,n){if(e.childName==null||n.childName==null)throw Ns("Should only compare child_ events.");const r=new ne(e.childName,e.snapshotNode),s=new ne(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dl(t,e){return{eventCache:t,serverCache:e}}function ci(t,e,n,r){return dl(new Zn(e,n,r),t.serverCache)}function kg(t,e,n,r){return dl(t.eventCache,new Zn(e,n,r))}function Pa(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function kr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cu;const VI=()=>(cu||(cu=new ut(PS)),cu);class _e{constructor(e,n=VI()){this.value=e,this.children=n}static fromObject(e){let n=new _e(null);return pt(e,(r,s)=>{n=n.set(new de(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ae(),value:this.value};if(re(e))return null;{const r=te(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(he(e),n);return i!=null?{path:De(new de(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(re(e))return this;{const n=te(e),r=this.children.get(n);return r!==null?r.subtree(he(e)):new _e(null)}}set(e,n){if(re(e))return new _e(n,this.children);{const r=te(e),i=(this.children.get(r)||new _e(null)).set(he(e),n),o=this.children.insert(r,i);return new _e(this.value,o)}}remove(e){if(re(e))return this.children.isEmpty()?new _e(null):new _e(null,this.children);{const n=te(e),r=this.children.get(n);if(r){const s=r.remove(he(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new _e(null):new _e(this.value,i)}else return this}}get(e){if(re(e))return this.value;{const n=te(e),r=this.children.get(n);return r?r.get(he(e)):null}}setTree(e,n){if(re(e))return n;{const r=te(e),i=(this.children.get(r)||new _e(null)).setTree(he(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new _e(this.value,o)}}fold(e){return this.fold_(ae(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(De(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,ae(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(re(e))return null;{const i=te(e),o=this.children.get(i);return o?o.findOnPath_(he(e),De(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ae(),n)}foreachOnPath_(e,n,r){if(re(e))return this;{this.value&&r(n,this.value);const s=te(e),i=this.children.get(s);return i?i.foreachOnPath_(he(e),De(n,s),r):new _e(null)}}foreach(e){this.foreach_(ae(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(De(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.writeTree_=e}static empty(){return new Ft(new _e(null))}}function di(t,e,n){if(re(e))return new Ft(new _e(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=Ze(s,e);return i=i.updateChild(o,n),new Ft(t.writeTree_.set(s,i))}else{const s=new _e(n),i=t.writeTree_.setTree(e,s);return new Ft(i)}}}function Rp(t,e,n){let r=t;return pt(n,(s,i)=>{r=di(r,De(e,s),i)}),r}function Sp(t,e){if(re(e))return Ft.empty();{const n=t.writeTree_.setTree(e,new _e(null));return new Ft(n)}}function Sc(t,e){return br(t,e)!=null}function br(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ze(n.path,e)):null}function Ip(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ie,(r,s)=>{e.push(new ne(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new ne(r,s.value))}),e}function Yn(t,e){if(re(e))return t;{const n=br(t,e);return n!=null?new Ft(new _e(n)):new Ft(t.writeTree_.subtree(e))}}function Ic(t){return t.writeTree_.isEmpty()}function Cs(t,e){return xg(ae(),t.writeTree_,e)}function xg(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(G(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=xg(De(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(De(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(t,e){return Dg(e,t)}function YI(t,e,n,r,s){G(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=di(t.visibleWrites,e,n)),t.lastWriteId=r}function qI(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function QI(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);G(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&XI(a,r.path)?s=!1:bt(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return JI(t),!0;if(r.snap)t.visibleWrites=Sp(t.visibleWrites,r.path);else{const a=r.children;pt(a,l=>{t.visibleWrites=Sp(t.visibleWrites,De(r.path,l))})}return!0}else return!1}function XI(t,e){if(t.snap)return bt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&bt(De(t.path,n),e))return!0;return!1}function JI(t){t.visibleWrites=Lg(t.allWrites,ZI,ae()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function ZI(t){return t.visible}function Lg(t,e,n){let r=Ft.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)bt(n,o)?(a=Ze(n,o),r=di(r,a,i.snap)):bt(o,n)&&(a=Ze(o,n),r=di(r,ae(),i.snap.getChild(a)));else if(i.children){if(bt(n,o))a=Ze(n,o),r=Rp(r,a,i.children);else if(bt(o,n))if(a=Ze(o,n),re(a))r=Rp(r,ae(),i.children);else{const l=_s(i.children,te(a));if(l){const u=l.getChild(he(a));r=di(r,ae(),u)}}}else throw Ns("WriteRecord should have .snap or .children")}}return r}function Pg(t,e,n,r,s){if(!r&&!s){const i=br(t.visibleWrites,e);if(i!=null)return i;{const o=Yn(t.visibleWrites,e);if(Ic(o))return n;if(n==null&&!Sc(o,ae()))return null;{const a=n||V.EMPTY_NODE;return Cs(o,a)}}}else{const i=Yn(t.visibleWrites,e);if(!s&&Ic(i))return n;if(!s&&n==null&&!Sc(i,ae()))return null;{const o=function(u){return(u.visible||s)&&(!r||!~r.indexOf(u.writeId))&&(bt(u.path,e)||bt(e,u.path))},a=Lg(t.allWrites,o,e),l=n||V.EMPTY_NODE;return Cs(a,l)}}}function eA(t,e,n){let r=V.EMPTY_NODE;const s=br(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Ie,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=Yn(t.visibleWrites,e);return n.forEachChild(Ie,(o,a)=>{const l=Cs(Yn(i,new de(o)),a);r=r.updateImmediateChild(o,l)}),Ip(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=Yn(t.visibleWrites,e);return Ip(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function tA(t,e,n,r,s){G(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=De(e,n);if(Sc(t.visibleWrites,i))return null;{const o=Yn(t.visibleWrites,i);return Ic(o)?s.getChild(n):Cs(o,s.getChild(n))}}function nA(t,e,n,r){const s=De(e,n),i=br(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=Yn(t.visibleWrites,s);return Cs(o,r.getNode().getImmediateChild(n))}else return null}function rA(t,e){return br(t.visibleWrites,e)}function sA(t,e,n,r,s,i,o){let a;const l=Yn(t.visibleWrites,e),u=br(l,ae());if(u!=null)a=u;else if(n!=null)a=Cs(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const d=[],c=o.getCompare(),f=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let y=f.getNext();for(;y&&d.length<s;)c(y,r)!==0&&d.push(y),y=f.getNext();return d}else return[]}function iA(){return{visibleWrites:Ft.empty(),allWrites:[],lastWriteId:-1}}function Oa(t,e,n,r){return Pg(t.writeTree,t.treePath,e,n,r)}function Xd(t,e){return eA(t.writeTree,t.treePath,e)}function Ap(t,e,n,r){return tA(t.writeTree,t.treePath,e,n,r)}function Da(t,e){return rA(t.writeTree,De(t.treePath,e))}function oA(t,e,n,r,s,i){return sA(t.writeTree,t.treePath,e,n,r,s,i)}function Jd(t,e,n){return nA(t.writeTree,t.treePath,e,n)}function Og(t,e){return Dg(De(t.treePath,e),t.writeTree)}function Dg(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;G(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),G(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,Mi(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,bi(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,Es(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,Mi(r,e.snapshotNode,s.oldSnap));else throw Ns("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const bg=new lA;class Zd{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Zn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Jd(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:kr(this.viewCache_),i=oA(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(t){return{filter:t}}function cA(t,e){G(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),G(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function dA(t,e,n,r,s){const i=new aA;let o,a;if(n.type===Mt.OVERWRITE){const u=n;u.source.fromUser?o=Ac(t,e,u.path,u.snap,r,s,i):(G(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!re(u.path),o=ba(t,e,u.path,u.snap,r,s,a,i))}else if(n.type===Mt.MERGE){const u=n;u.source.fromUser?o=hA(t,e,u.path,u.children,r,s,i):(G(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=Tc(t,e,u.path,u.children,r,s,a,i))}else if(n.type===Mt.ACK_USER_WRITE){const u=n;u.revert?o=yA(t,e,u.path,r,s,i):o=pA(t,e,u.path,u.affectedTree,r,s,i)}else if(n.type===Mt.LISTEN_COMPLETE)o=mA(t,e,n.path,r,i);else throw Ns("Unknown operation type: "+n.type);const l=i.getChanges();return fA(e,o,l),{viewCache:o,changes:l}}function fA(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=Pa(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(Ag(Pa(e)))}}function Mg(t,e,n,r,s,i){const o=e.eventCache;if(Da(r,n)!=null)return e;{let a,l;if(re(n))if(G(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=kr(e),d=u instanceof V?u:V.EMPTY_NODE,c=Xd(r,d);a=t.filter.updateFullNode(e.eventCache.getNode(),c,i)}else{const u=Oa(r,kr(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=te(n);if(u===".priority"){G(Jn(n)===1,"Can't have a priority with additional path components");const d=o.getNode();l=e.serverCache.getNode();const c=Ap(r,n,d,l);c!=null?a=t.filter.updatePriority(d,c):a=o.getNode()}else{const d=he(n);let c;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const f=Ap(r,n,o.getNode(),l);f!=null?c=o.getNode().getImmediateChild(u).updateChild(d,f):c=o.getNode().getImmediateChild(u)}else c=Jd(r,u,e.serverCache);c!=null?a=t.filter.updateChild(o.getNode(),u,c,d,s,i):a=o.getNode()}}return ci(e,a,o.isFullyInitialized()||re(n),t.filter.filtersNodes())}}function ba(t,e,n,r,s,i,o,a){const l=e.serverCache;let u;const d=o?t.filter:t.filter.getIndexedFilter();if(re(n))u=d.updateFullNode(l.getNode(),r,null);else if(d.filtersNodes()&&!l.isFiltered()){const y=l.getNode().updateChild(n,r);u=d.updateFullNode(l.getNode(),y,null)}else{const y=te(n);if(!l.isCompleteForPath(n)&&Jn(n)>1)return e;const v=he(n),C=l.getNode().getImmediateChild(y).updateChild(v,r);y===".priority"?u=d.updatePriority(l.getNode(),C):u=d.updateChild(l.getNode(),y,C,v,bg,null)}const c=kg(e,u,l.isFullyInitialized()||re(n),d.filtersNodes()),f=new Zd(s,c,i);return Mg(t,c,n,s,f,a)}function Ac(t,e,n,r,s,i,o){const a=e.eventCache;let l,u;const d=new Zd(s,e,i);if(re(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=ci(e,u,!0,t.filter.filtersNodes());else{const c=te(n);if(c===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),l=ci(e,u,a.isFullyInitialized(),a.isFiltered());else{const f=he(n),y=a.getNode().getImmediateChild(c);let v;if(re(f))v=r;else{const w=d.getCompleteChild(c);w!=null?_g(f)===".priority"&&w.getChild(vg(f)).isEmpty()?v=w:v=w.updateChild(f,r):v=V.EMPTY_NODE}if(y.equals(v))l=e;else{const w=t.filter.updateChild(a.getNode(),c,v,f,d,o);l=ci(e,w,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function Tp(t,e){return t.eventCache.isCompleteForChild(e)}function hA(t,e,n,r,s,i,o){let a=e;return r.foreach((l,u)=>{const d=De(n,l);Tp(e,te(d))&&(a=Ac(t,a,d,u,s,i,o))}),r.foreach((l,u)=>{const d=De(n,l);Tp(e,te(d))||(a=Ac(t,a,d,u,s,i,o))}),a}function Np(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function Tc(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;re(n)?u=r:u=new _e(null).setTree(n,r);const d=e.serverCache.getNode();return u.children.inorderTraversal((c,f)=>{if(d.hasChild(c)){const y=e.serverCache.getNode().getImmediateChild(c),v=Np(t,y,f);l=ba(t,l,new de(c),v,s,i,o,a)}}),u.children.inorderTraversal((c,f)=>{const y=!e.serverCache.isCompleteForChild(c)&&f.value===null;if(!d.hasChild(c)&&!y){const v=e.serverCache.getNode().getImmediateChild(c),w=Np(t,v,f);l=ba(t,l,new de(c),w,s,i,o,a)}}),l}function pA(t,e,n,r,s,i,o){if(Da(s,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(re(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return ba(t,e,n,l.getNode().getChild(n),s,i,a,o);if(re(n)){let u=new _e(null);return l.getNode().forEachChild(as,(d,c)=>{u=u.set(new de(d),c)}),Tc(t,e,n,u,s,i,a,o)}else return e}else{let u=new _e(null);return r.foreach((d,c)=>{const f=De(n,d);l.isCompleteForPath(f)&&(u=u.set(d,l.getNode().getChild(f)))}),Tc(t,e,n,u,s,i,a,o)}}function mA(t,e,n,r,s){const i=e.serverCache,o=kg(e,i.getNode(),i.isFullyInitialized()||re(n),i.isFiltered());return Mg(t,o,n,r,bg,s)}function yA(t,e,n,r,s,i){let o;if(Da(r,n)!=null)return e;{const a=new Zd(r,e,s),l=e.eventCache.getNode();let u;if(re(n)||te(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=Oa(r,kr(e));else{const c=e.serverCache.getNode();G(c instanceof V,"serverChildren would be complete if leaf node"),d=Xd(r,c)}d=d,u=t.filter.updateFullNode(l,d,i)}else{const d=te(n);let c=Jd(r,d,e.serverCache);c==null&&e.serverCache.isCompleteForChild(d)&&(c=l.getImmediateChild(d)),c!=null?u=t.filter.updateChild(l,d,c,he(n),a,i):e.eventCache.getNode().hasChild(d)?u=t.filter.updateChild(l,d,V.EMPTY_NODE,he(n),a,i):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Oa(r,kr(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,i)))}return o=e.serverCache.isFullyInitialized()||Da(r,ae())!=null,ci(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new Vd(r.getIndex()),i=MI(r);this.processor_=uA(i);const o=n.serverCache,a=n.eventCache,l=s.updateFullNode(V.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(V.EMPTY_NODE,a.getNode(),null),d=new Zn(l,o.isFullyInitialized(),s.filtersNodes()),c=new Zn(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=dl(c,d),this.eventGenerator_=new HI(this.query_)}get query(){return this.query_}}function gA(t){return t.viewCache_.serverCache.getNode()}function vA(t){return Pa(t.viewCache_)}function EA(t,e){const n=kr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!re(e)&&!n.getImmediateChild(te(e)).isEmpty())?n.getChild(e):null}function kp(t){return t.eventRegistrations_.length===0}function CA(t,e){t.eventRegistrations_.push(e)}function xp(t,e,n){const r=[];if(n){G(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Lp(t,e,n,r){e.type===Mt.MERGE&&e.source.queryId!==null&&(G(kr(t.viewCache_),"We should always have a full cache before handling merges"),G(Pa(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=dA(t.processor_,s,e,n,r);return cA(t.processor_,i.viewCache),G(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,Ug(t,i.changes,i.viewCache.eventCache.getNode(),null)}function wA(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ie,(i,o)=>{r.push(Es(i,o))}),n.isFullyInitialized()&&r.push(Ag(n.getNode())),Ug(t,r,n.getNode(),e)}function Ug(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return BI(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ma;class jg{constructor(){this.views=new Map}}function RA(t){G(!Ma,"__referenceConstructor has already been defined"),Ma=t}function SA(){return G(Ma,"Reference.ts has not been loaded"),Ma}function IA(t){return t.views.size===0}function ef(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return G(i!=null,"SyncTree gave us an op for an invalid query."),Lp(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(Lp(o,e,n,r));return i}}function Fg(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=Oa(n,s?r:null),l=!1;a?l=!0:r instanceof V?(a=Xd(n,r),l=!1):(a=V.EMPTY_NODE,l=!1);const u=dl(new Zn(a,l,!1),new Zn(r,s,!1));return new _A(e,u)}return o}function AA(t,e,n,r,s,i){const o=Fg(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),CA(o,n),wA(o,n)}function TA(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=er(t);if(s==="default")for(const[l,u]of t.views.entries())o=o.concat(xp(u,n,r)),kp(u)&&(t.views.delete(l),u.query._queryParams.loadsAllData()||i.push(u.query));else{const l=t.views.get(s);l&&(o=o.concat(xp(l,n,r)),kp(l)&&(t.views.delete(s),l.query._queryParams.loadsAllData()||i.push(l.query)))}return a&&!er(t)&&i.push(new(SA())(e._repo,e._path)),{removed:i,events:o}}function Wg(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function qn(t,e){let n=null;for(const r of t.views.values())n=n||EA(r,e);return n}function Gg(t,e){if(e._queryParams.loadsAllData())return hl(t);{const r=e._queryIdentifier;return t.views.get(r)}}function Kg(t,e){return Gg(t,e)!=null}function er(t){return hl(t)!=null}function hl(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ua;function NA(t){G(!Ua,"__referenceConstructor has already been defined"),Ua=t}function kA(){return G(Ua,"Reference.ts has not been loaded"),Ua}let xA=1;class Pp{constructor(e){this.listenProvider_=e,this.syncPointTree_=new _e(null),this.pendingWriteTree_=iA(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Hg(t,e,n,r,s){return YI(t.pendingWriteTree_,e,n,r,s),s?eo(t,new Nr(Ng(),e,n)):[]}function mr(t,e,n=!1){const r=qI(t.pendingWriteTree_,e);if(QI(t.pendingWriteTree_,e)){let i=new _e(null);return r.snap!=null?i=i.set(ae(),!0):pt(r.children,o=>{i=i.set(new de(o),!0)}),eo(t,new La(r.path,i,n))}else return[]}function Zi(t,e,n){return eo(t,new Nr(qd(),e,n))}function LA(t,e,n){const r=_e.fromObject(n);return eo(t,new Fi(qd(),e,r))}function PA(t,e){return eo(t,new ji(qd(),e))}function OA(t,e,n){const r=nf(t,n);if(r){const s=rf(r),i=s.path,o=s.queryId,a=Ze(i,e),l=new ji(Qd(o),a);return sf(t,i,l)}else return[]}function ja(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||Kg(o,e))){const l=TA(o,e,n,r);IA(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const u=l.removed;if(a=l.events,!s){const d=u.findIndex(f=>f._queryParams.loadsAllData())!==-1,c=t.syncPointTree_.findOnPath(i,(f,y)=>er(y));if(d&&!c){const f=t.syncPointTree_.subtree(i);if(!f.isEmpty()){const y=MA(f);for(let v=0;v<y.length;++v){const w=y[v],C=w.query,h=Vg(t,w);t.listenProvider_.startListening(fi(C),Wi(t,C),h.hashFn,h.onComplete)}}}!c&&u.length>0&&!r&&(d?t.listenProvider_.stopListening(fi(e),null):u.forEach(f=>{const y=t.queryToTagMap.get(pl(f));t.listenProvider_.stopListening(fi(f),y)}))}UA(t,u)}return a}function Bg(t,e,n,r){const s=nf(t,r);if(s!=null){const i=rf(s),o=i.path,a=i.queryId,l=Ze(o,e),u=new Nr(Qd(a),l,n);return sf(t,o,u)}else return[]}function DA(t,e,n,r){const s=nf(t,r);if(s){const i=rf(s),o=i.path,a=i.queryId,l=Ze(o,e),u=_e.fromObject(n),d=new Fi(Qd(a),l,u);return sf(t,o,d)}else return[]}function Nc(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(f,y)=>{const v=Ze(f,s);i=i||qn(y,v),o=o||er(y)});let a=t.syncPointTree_.get(s);a?(o=o||er(a),i=i||qn(a,ae())):(a=new jg,t.syncPointTree_=t.syncPointTree_.set(s,a));let l;i!=null?l=!0:(l=!1,i=V.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((y,v)=>{const w=qn(v,ae());w&&(i=i.updateImmediateChild(y,w))}));const u=Kg(a,e);if(!u&&!e._queryParams.loadsAllData()){const f=pl(e);G(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const y=jA();t.queryToTagMap.set(f,y),t.tagToQueryMap.set(y,f)}const d=fl(t.pendingWriteTree_,s);let c=AA(a,e,n,d,i,l);if(!u&&!o&&!r){const f=Gg(a,e);c=c.concat(FA(t,e,f))}return c}function tf(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=Ze(o,e),u=qn(a,l);if(u)return u});return Pg(s,e,i,n,!0)}function bA(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,d)=>{const c=Ze(u,n);r=r||qn(d,c)});let s=t.syncPointTree_.get(n);s?r=r||qn(s,ae()):(s=new jg,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new Zn(r,!0,!1):null,a=fl(t.pendingWriteTree_,e._path),l=Fg(s,e,a,i?o.getNode():V.EMPTY_NODE,i);return vA(l)}function eo(t,e){return $g(e,t.syncPointTree_,null,fl(t.pendingWriteTree_,ae()))}function $g(t,e,n,r){if(re(t.path))return zg(t,e,n,r);{const s=e.get(ae());n==null&&s!=null&&(n=qn(s,ae()));let i=[];const o=te(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const u=n?n.getImmediateChild(o):null,d=Og(r,o);i=i.concat($g(a,l,u,d))}return s&&(i=i.concat(ef(s,t,r,n))),i}}function zg(t,e,n,r){const s=e.get(ae());n==null&&s!=null&&(n=qn(s,ae()));let i=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,u=Og(r,o),d=t.operationForChild(o);d&&(i=i.concat(zg(d,a,l,u)))}),s&&(i=i.concat(ef(s,t,r,n))),i}function Vg(t,e){const n=e.query,r=Wi(t,n);return{hashFn:()=>(gA(e)||V.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?OA(t,n._path,r):PA(t,n._path);{const i=bS(s,n);return ja(t,n,null,i)}}}}function Wi(t,e){const n=pl(e);return t.queryToTagMap.get(n)}function pl(t){return t._path.toString()+"$"+t._queryIdentifier}function nf(t,e){return t.tagToQueryMap.get(e)}function rf(t){const e=t.indexOf("$");return G(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new de(t.substr(0,e))}}function sf(t,e,n){const r=t.syncPointTree_.get(e);G(r,"Missing sync point for query tag that we're tracking");const s=fl(t.pendingWriteTree_,e);return ef(r,n,s,null)}function MA(t){return t.fold((e,n,r)=>{if(n&&er(n))return[hl(n)];{let s=[];return n&&(s=Wg(n)),pt(r,(i,o)=>{s=s.concat(o)}),s}})}function fi(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(kA())(t._repo,t._path):t}function UA(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=pl(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function jA(){return xA++}function FA(t,e,n){const r=e._path,s=Wi(t,e),i=Vg(t,n),o=t.listenProvider_.startListening(fi(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)G(!er(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((u,d,c)=>{if(!re(u)&&d&&er(d))return[hl(d).query];{let f=[];return d&&(f=f.concat(Wg(d).map(y=>y.query))),pt(c,(y,v)=>{f=f.concat(v)}),f}});for(let u=0;u<l.length;++u){const d=l[u];t.listenProvider_.stopListening(fi(d),Wi(t,d))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new of(n)}node(){return this.node_}}class af{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=De(this.path_,e);return new af(this.syncTree_,n)}node(){return tf(this.syncTree_,this.path_)}}const WA=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Op=function(t,e,n){if(!t||typeof t!="object")return t;if(G(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return GA(t[".sv"],e,n);if(typeof t[".sv"]=="object")return KA(t[".sv"],e);G(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},GA=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:G(!1,"Unexpected server value: "+t)}},KA=function(t,e,n){t.hasOwnProperty("increment")||G(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&G(!1,"Unexpected increment value: "+r);const s=e.node();if(G(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},HA=function(t,e,n,r){return lf(e,new af(n,t),r)},Yg=function(t,e,n){return lf(t,new of(e),n)};function lf(t,e,n){const r=t.getPriority().val(),s=Op(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=Op(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new Ue(a,We(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new Ue(s))),o.forEachChild(Ie,(a,l)=>{const u=lf(l,e.getImmediateChild(a),n);u!==l&&(i=i.updateImmediateChild(a,u))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function cf(t,e){let n=e instanceof de?e:new de(e),r=t,s=te(n);for(;s!==null;){const i=_s(r.node.children,s)||{children:{},childCount:0};r=new uf(s,r,i),n=he(n),s=te(n)}return r}function Os(t){return t.node.value}function qg(t,e){t.node.value=e,kc(t)}function Qg(t){return t.node.childCount>0}function BA(t){return Os(t)===void 0&&!Qg(t)}function ml(t,e){pt(t.node.children,(n,r)=>{e(new uf(n,t,r))})}function Xg(t,e,n,r){n&&!r&&e(t),ml(t,s=>{Xg(s,e,!0,r)}),n&&r&&e(t)}function $A(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function to(t){return new de(t.parent===null?t.name:to(t.parent)+"/"+t.name)}function kc(t){t.parent!==null&&zA(t.parent,t.name,t)}function zA(t,e,n){const r=BA(n),s=vn(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,kc(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,kc(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=/[\[\].#$\/\u0000-\u001F\u007F]/,YA=/[\[\].#$\u0000-\u001F\u007F]/,du=10*1024*1024,Jg=function(t){return typeof t=="string"&&t.length!==0&&!VA.test(t)},Zg=function(t){return typeof t=="string"&&t.length!==0&&!YA.test(t)},qA=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Zg(t)},QA=function(t,e,n,r){r&&e===void 0||df(Md(t,"value"),e,n)},df=function(t,e,n){const r=n instanceof de?new pI(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+cr(r));if(typeof e=="function")throw new Error(t+"contains a function "+cr(r)+" with contents = "+e.toString());if(Q_(e))throw new Error(t+"contains "+e.toString()+" "+cr(r));if(typeof e=="string"&&e.length>du/3&&ul(e)>du)throw new Error(t+"contains a string greater than "+du+" utf8 bytes "+cr(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(pt(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!Jg(o)))throw new Error(t+" contains an invalid key ("+o+") "+cr(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);mI(r,o),df(t,a,r),yI(r)}),s&&i)throw new Error(t+' contains ".value" child '+cr(r)+" in addition to actual children.")}},ev=function(t,e,n,r){if(!(r&&n===void 0)&&!Zg(n))throw new Error(Md(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},XA=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ev(t,e,n,r)},tv=function(t,e){if(te(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},JA=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Jg(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!qA(n))throw new Error(Md(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ff(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!Bd(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function nv(t,e,n){ff(t,n),rv(t,r=>Bd(r,e))}function Xt(t,e,n){ff(t,n),rv(t,r=>bt(r,e)||bt(e,r))}function rv(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(eT(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function eT(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();gr&&qe("event: "+n.toString()),Ps(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT="repo_interrupt",nT=25;class rT{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ZA,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=xa(),this.transactionQueueTree_=new uf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function sT(t,e,n){if(t.stats_=Kd(t.repoInfo_),t.forceRestClient_||FS())t.server_=new ka(t.repoInfo_,(r,s,i,o)=>{Dp(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>bp(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Oe(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new cn(t.repoInfo_,e,(r,s,i,o)=>{Dp(t,r,s,i,o)},r=>{bp(t,r)},r=>{oT(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=BS(t.repoInfo_,()=>new KI(t.stats_,t.server_)),t.infoData_=new UI,t.infoSyncTree_=new Pp({startListening:(r,s,i,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=Zi(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),pf(t,"connected",!1),t.serverSyncTree_=new Pp({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,l)=>{const u=o(a,l);Xt(t.eventQueue_,r._path,u)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function iT(t){const n=t.infoData_.getNode(new de(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function hf(t){return WA({timestamp:iT(t)})}function Dp(t,e,n,r,s){t.dataUpdateCount++;const i=new de(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const l=Ra(n,u=>We(u));o=DA(t.serverSyncTree_,i,l,s)}else{const l=We(n);o=Bg(t.serverSyncTree_,i,l,s)}else if(r){const l=Ra(n,u=>We(u));o=LA(t.serverSyncTree_,i,l)}else{const l=We(n);o=Zi(t.serverSyncTree_,i,l)}let a=i;o.length>0&&(a=_l(t,i)),Xt(t.eventQueue_,a,o)}function bp(t,e){pf(t,"connected",e),e===!1&&uT(t)}function oT(t,e){pt(e,(n,r)=>{pf(t,n,r)})}function pf(t,e,n){const r=new de("/.info/"+e),s=We(n);t.infoData_.updateSnapshot(r,s);const i=Zi(t.infoSyncTree_,r,s);Xt(t.eventQueue_,r,i)}function sv(t){return t.nextWriteId_++}function aT(t,e,n){const r=bA(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=We(s).withIndex(e._queryParams.getIndex());Nc(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Zi(t.serverSyncTree_,e._path,i);else{const a=Wi(t.serverSyncTree_,e);o=Bg(t.serverSyncTree_,e._path,i,a)}return Xt(t.eventQueue_,e._path,o),ja(t.serverSyncTree_,e,n,null,!0),i},s=>(yl(t,"get for query "+Oe(e)+" failed: "+s),Promise.reject(new Error(s))))}function lT(t,e,n,r,s){yl(t,"set",{path:e.toString(),value:n,priority:r});const i=hf(t),o=We(n,r),a=tf(t.serverSyncTree_,e),l=Yg(o,a,i),u=sv(t),d=Hg(t.serverSyncTree_,e,l,u,!0);ff(t.eventQueue_,d),t.server_.put(e.toString(),o.val(!0),(f,y)=>{const v=f==="ok";v||ht("set at "+e+" failed: "+f);const w=mr(t.serverSyncTree_,u,!v);Xt(t.eventQueue_,e,w),fT(t,s,f,y)});const c=uv(t,e);_l(t,c),Xt(t.eventQueue_,c,[])}function uT(t){yl(t,"onDisconnectEvents");const e=hf(t),n=xa();Rc(t.onDisconnect_,ae(),(s,i)=>{const o=HA(s,i,t.serverSyncTree_,e);Tg(n,s,o)});let r=[];Rc(n,ae(),(s,i)=>{r=r.concat(Zi(t.serverSyncTree_,s,i));const o=uv(t,s);_l(t,o)}),t.onDisconnect_=xa(),Xt(t.eventQueue_,ae(),r)}function cT(t,e,n){let r;te(e._path)===".info"?r=Nc(t.infoSyncTree_,e,n):r=Nc(t.serverSyncTree_,e,n),nv(t.eventQueue_,e._path,r)}function Mp(t,e,n){let r;te(e._path)===".info"?r=ja(t.infoSyncTree_,e,n):r=ja(t.serverSyncTree_,e,n),nv(t.eventQueue_,e._path,r)}function dT(t){t.persistentConnection_&&t.persistentConnection_.interrupt(tT)}function yl(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),qe(n,...e)}function fT(t,e,n,r){e&&Ps(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function iv(t,e,n){return tf(t.serverSyncTree_,e,n)||V.EMPTY_NODE}function mf(t,e=t.transactionQueueTree_){if(e||gl(t,e),Os(e)){const n=av(t,e);G(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&hT(t,to(e),n)}else Qg(e)&&ml(e,n=>{mf(t,n)})}function hT(t,e,n){const r=n.map(u=>u.currentWriteId),s=iv(t,e,r);let i=s;const o=s.hash();for(let u=0;u<n.length;u++){const d=n[u];G(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const c=Ze(e,d.path);i=i.updateChild(c,d.currentOutputSnapshotRaw)}const a=i.val(!0),l=e;t.server_.put(l.toString(),a,u=>{yl(t,"transaction put response",{path:l.toString(),status:u});let d=[];if(u==="ok"){const c=[];for(let f=0;f<n.length;f++)n[f].status=2,d=d.concat(mr(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&c.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();gl(t,cf(t.transactionQueueTree_,e)),mf(t,t.transactionQueueTree_),Xt(t.eventQueue_,e,d);for(let f=0;f<c.length;f++)Ps(c[f])}else{if(u==="datastale")for(let c=0;c<n.length;c++)n[c].status===3?n[c].status=4:n[c].status=0;else{ht("transaction at "+l.toString()+" failed: "+u);for(let c=0;c<n.length;c++)n[c].status=4,n[c].abortReason=u}_l(t,e)}},o)}function _l(t,e){const n=ov(t,e),r=to(n),s=av(t,n);return pT(t,s,r),r}function pT(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],u=Ze(n,l.path);let d=!1,c;if(G(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)d=!0,c=l.abortReason,s=s.concat(mr(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=nT)d=!0,c="maxretry",s=s.concat(mr(t.serverSyncTree_,l.currentWriteId,!0));else{const f=iv(t,l.path,o);l.currentInputSnapshot=f;const y=e[a].update(f.val());if(y!==void 0){df("transaction failed: Data returned ",y,l.path);let v=We(y);typeof y=="object"&&y!=null&&vn(y,".priority")||(v=v.updatePriority(f.getPriority()));const C=l.currentWriteId,h=hf(t),p=Yg(v,f,h);l.currentOutputSnapshotRaw=v,l.currentOutputSnapshotResolved=p,l.currentWriteId=sv(t),o.splice(o.indexOf(C),1),s=s.concat(Hg(t.serverSyncTree_,l.path,p,l.currentWriteId,l.applyLocally)),s=s.concat(mr(t.serverSyncTree_,C,!0))}else d=!0,c="nodata",s=s.concat(mr(t.serverSyncTree_,l.currentWriteId,!0))}Xt(t.eventQueue_,n,s),s=[],d&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(c==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(c),!1,null))))}gl(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Ps(r[a]);mf(t,t.transactionQueueTree_)}function ov(t,e){let n,r=t.transactionQueueTree_;for(n=te(e);n!==null&&Os(r)===void 0;)r=cf(r,n),e=he(e),n=te(e);return r}function av(t,e){const n=[];return lv(t,e,n),n.sort((r,s)=>r.order-s.order),n}function lv(t,e,n){const r=Os(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);ml(e,s=>{lv(t,s,n)})}function gl(t,e){const n=Os(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,qg(e,n.length>0?n:void 0)}ml(e,r=>{gl(t,r)})}function uv(t,e){const n=to(ov(t,e)),r=cf(t.transactionQueueTree_,e);return $A(r,s=>{fu(t,s)}),fu(t,r),Xg(r,s=>{fu(t,s)}),n}function fu(t,e){const n=Os(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(G(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(G(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(mr(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?qg(e,void 0):n.length=i+1,Xt(t.eventQueue_,to(e),s);for(let o=0;o<r.length;o++)Ps(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function yT(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ht(`Invalid query segment '${n}' in query '${t}'`)}return e}const Up=function(t,e){const n=_T(t),r=n.namespace;n.domain==="firebase.com"&&mn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&mn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||xS();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new lg(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new de(n.pathString)}},_T=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",l=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let d=t.indexOf("/");d===-1&&(d=t.length);let c=t.indexOf("?");c===-1&&(c=t.length),e=t.substring(0,Math.min(d,c)),d<c&&(s=mT(t.substring(d,c)));const f=yT(t.substring(Math.min(t.length,c)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;const y=e.slice(0,u);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{const v=e.indexOf(".");r=e.substring(0,v).toLowerCase(),n=e.substring(v+1),i=r}"ns"in f&&(i=f.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Oe(this.snapshot.exportVal())}}class dv{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return G(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return re(this._path)?null:_g(this._path)}get ref(){return new Zt(this._repo,this._path)}get _queryIdentifier(){const e=Cp(this._queryParams),n=Wd(e);return n==="{}"?"default":n}get _queryObject(){return Cp(this._queryParams)}isEqual(e){if(e=mt(e),!(e instanceof yf))return!1;const n=this._repo===e._repo,r=Bd(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+hI(this._path)}}class Zt extends yf{constructor(e,n){super(e,n,new Yd,!1)}get parent(){const e=vg(this._path);return e===null?null:new Zt(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class ws{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new de(e),r=Me(this.ref,e);return new ws(this._node.getChild(n),r,Ie)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new ws(s,Me(this.ref,r),Ie)))}hasChild(e){const n=new de(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function oe(t,e){return t=mt(t),t._checkNotDeleted("ref"),e!==void 0?Me(t._root,e):t._root}function Me(t,e){return t=mt(t),te(t._path)===null?XA("child","path",e,!1):ev("child","path",e,!1),new Zt(t._repo,De(t._path,e))}function gT(t){return tv("remove",t._path),le(t,null)}function le(t,e){t=mt(t),tv("set",t._path),QA("set",e,t._path,!1);const n=new ll;return lT(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Nn(t){t=mt(t);const e=new fv(()=>{}),n=new vl(e);return aT(t._repo,t,n).then(r=>new ws(r,new Zt(t._repo,t._path),t._queryParams.getIndex()))}class vl{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new cv("value",this,new ws(e.snapshotNode,new Zt(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new dv(this,e,n):null}matches(e){return e instanceof vl?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class _f{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new dv(this,e,n):null}createEvent(e,n){G(e.childName!=null,"Child events should have a childName.");const r=Me(new Zt(n._repo,n._path),e.childName),s=n._queryParams.getIndex();return new cv(e.type,this,new ws(e.snapshotNode,r,s),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof _f?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function vT(t,e,n,r,s){let i;if(typeof r=="object"&&(i=void 0,s=r),typeof r=="function"&&(i=r),s&&s.onlyOnce){const l=n,u=(d,c)=>{Mp(t._repo,t,a),l(d,c)};u.userCallback=n.userCallback,u.context=n.context,n=u}const o=new fv(n,i||void 0),a=e==="value"?new vl(o):new _f(e,o);return cT(t._repo,t,a),()=>Mp(t._repo,t,a)}function hv(t,e,n,r){return vT(t,"value",e,n,r)}RA(Zt);NA(Zt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="FIREBASE_DATABASE_EMULATOR_HOST",xc={};let CT=!1;function wT(t,e,n,r){t.repoInfo_=new lg(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function RT(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||mn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),qe("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Up(i,s),a=o.repoInfo,l,u;typeof process<"u"&&process.env&&(u=process.env[ET]),u?(l=!0,i=`http://${u}?ns=${a.namespace}`,o=Up(i,s),a=o.repoInfo):l=!o.repoInfo.secure;const d=s&&l?new os(os.OWNER):new GS(t.name,t.options,e);JA("Invalid Firebase Database URL",o),re(o.path)||mn("Database URL must point to the root of a Firebase Database (not including a child path).");const c=IT(a,t,d,new WS(t.name,n));return new AT(c,t)}function ST(t,e){const n=xc[e];(!n||n[t.key]!==t)&&mn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),dT(t),delete n[t.key]}function IT(t,e,n,r){let s=xc[e.name];s||(s={},xc[e.name]=s);let i=s[t.toURLString()];return i&&mn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new rT(t,CT,n,r),s[t.toURLString()]=i,i}class AT{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(sT(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Zt(this._repo,ae())),this._rootInternal}_delete(){return this._rootInternal!==null&&(ST(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&mn("Cannot call "+e+" on a deleted database.")}}function TT(t=B_(),e){const n=Fd(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=nR("database");r&&NT(n,...r)}return n}function NT(t,e,n,r={}){t=mt(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&mn("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&mn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new os(os.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:rR(r.mockUserToken,t.app.options.projectId);i=new os(o)}wT(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(t){IS(xs),gs(new Ir("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return RT(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Vn(sp,ip,t),Vn(sp,ip,"esm2017")}cn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};cn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};kT();function gf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function pv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xT=pv,mv=new qi("auth","Firebase",pv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa=new Ud("@firebase/auth");function LT(t,...e){Fa.logLevel<=ce.WARN&&Fa.warn(`Auth (${xs}): ${t}`,...e)}function Bo(t,...e){Fa.logLevel<=ce.ERROR&&Fa.error(`Auth (${xs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(t,...e){throw vf(t,...e)}function qt(t,...e){return vf(t,...e)}function PT(t,e,n){const r=Object.assign(Object.assign({},xT()),{[e]:n});return new qi("auth","Firebase",r).create(e,{appName:t.name})}function vf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return mv.create(t,...e)}function Y(t,e,...n){if(!t)throw vf(e,...n)}function an(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Bo(e),new Error(e)}function _n(t,e){t||an(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lc(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function OT(){return jp()==="http:"||jp()==="https:"}function jp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(OT()||sR()||"connection"in navigator)?navigator.onLine:!0}function bT(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,n){this.shortDelay=e,this.longDelay=n,_n(n>e,"Short delay should be less than long delay!"),this.isMobile=bd()||j_()}get(){return DT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(t,e){_n(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;an("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;an("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;an("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=new no(3e4,6e4);function Cf(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ro(t,e,n,r,s={}){return _v(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=ks(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),yv.fetch()(vv(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function _v(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},MT),e);try{const s=new jT(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw No(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw No(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw No(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw No(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw PT(t,d,u);yn(t,d)}}catch(s){if(s instanceof ir)throw s;yn(t,"network-request-failed",{message:String(s)})}}async function gv(t,e,n,r,s={}){const i=await ro(t,e,n,r,s);return"mfaPendingCredential"in i&&yn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function vv(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Ef(t.config,s):`${t.config.apiScheme}://${s}`}class jT{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(qt(this.auth,"network-request-failed")),UT.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function No(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=qt(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FT(t,e){return ro(t,"POST","/v1/accounts:delete",e)}async function WT(t,e){return ro(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function GT(t,e=!1){const n=mt(t),r=await n.getIdToken(e),s=wf(r);Y(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:hi(hu(s.auth_time)),issuedAtTime:hi(hu(s.iat)),expirationTime:hi(hu(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function hu(t){return Number(t)*1e3}function wf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Bo("JWT malformed, contained fewer than 3 sections"),null;try{const s=wa(n);return s?JSON.parse(s):(Bo("Failed to decode base64 JWT payload"),null)}catch(s){return Bo("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function KT(t){const e=wf(t);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ir&&HT(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function HT({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=hi(this.lastLoginAt),this.creationTime=hi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wa(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Gi(t,WT(n,{idToken:r}));Y(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?VT(i.providerUserInfo):[],a=zT(t.providerData,o),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?u:!1,c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Ev(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,c)}async function $T(t){const e=mt(t);await Wa(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zT(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function VT(t){return t.map(e=>{var{providerId:n}=e,r=gf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YT(t,e){const n=await _v(t,{},async()=>{const r=ks({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=vv(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",yv.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):KT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return Y(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await YT(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ki;return r&&(Y(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Y(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Y(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ki,this.toJSON())}_performRefresh(){return an("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(t,e){Y(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class vr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=gf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new BT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ev(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Gi(this,this.stsTokenManager.getToken(this.auth,e));return Y(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return GT(this,e)}reload(){return $T(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new vr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Wa(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Gi(this,FT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,u,d;const c=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(s=n.email)!==null&&s!==void 0?s:void 0,y=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,C=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,h=(u=n.createdAt)!==null&&u!==void 0?u:void 0,p=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:_,emailVerified:N,isAnonymous:b,providerData:M,stsTokenManager:O}=n;Y(_&&O,e,"internal-error");const k=Ki.fromJSON(this.name,O);Y(typeof _=="string",e,"internal-error"),Rn(c,e.name),Rn(f,e.name),Y(typeof N=="boolean",e,"internal-error"),Y(typeof b=="boolean",e,"internal-error"),Rn(y,e.name),Rn(v,e.name),Rn(w,e.name),Rn(C,e.name),Rn(h,e.name),Rn(p,e.name);const j=new vr({uid:_,auth:e,email:f,emailVerified:N,displayName:c,isAnonymous:b,photoURL:v,phoneNumber:y,tenantId:w,stsTokenManager:k,createdAt:h,lastLoginAt:p});return M&&Array.isArray(M)&&(j.providerData=M.map(W=>Object.assign({},W))),C&&(j._redirectEventId=C),j}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ki;s.updateFromServerResponse(n);const i=new vr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Wa(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp=new Map;function ln(t){_n(t instanceof Function,"Expected a class definition");let e=Fp.get(t);return e?(_n(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Fp.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Cv.type="NONE";const Wp=Cv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(t,e,n){return`firebase:${t}:${e}:${n}`}class ls{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=$o(this.userKey,s.apiKey,i),this.fullPersistenceKey=$o("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?vr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ls(ln(Wp),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||ln(Wp);const o=$o(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){const c=vr._fromJSON(e,d);u!==i&&(a=c),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new ls(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new ls(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Sv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Av(e))return"Blackberry";if(Tv(e))return"Webos";if(Rf(e))return"Safari";if((e.includes("chrome/")||Rv(e))&&!e.includes("edge/"))return"Chrome";if(Iv(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function wv(t=Xe()){return/firefox\//i.test(t)}function Rf(t=Xe()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Rv(t=Xe()){return/crios\//i.test(t)}function Sv(t=Xe()){return/iemobile/i.test(t)}function Iv(t=Xe()){return/android/i.test(t)}function Av(t=Xe()){return/blackberry/i.test(t)}function Tv(t=Xe()){return/webos/i.test(t)}function El(t=Xe()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function qT(t=Xe()){var e;return El(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function QT(){return iR()&&document.documentMode===10}function Nv(t=Xe()){return El(t)||Iv(t)||Tv(t)||Av(t)||/windows phone/i.test(t)||Sv(t)}function XT(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(t,e=[]){let n;switch(t){case"Browser":n=Gp(Xe());break;case"Worker":n=`${Gp(Xe())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZT(t,e={}){return ro(t,"GET","/v2/passwordPolicy",Cf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN=6;class tN{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:eN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Kp(this),this.idTokenSubscription=new Kp(this),this.beforeStateQueue=new JT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ln(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await ls.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Wa(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?mt(e):null;return n&&Y(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(ln(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ZT(this),n=new tN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new qi("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ln(e)||this._popupRedirectResolver;Y(n,this,"argument-error"),this.redirectPersistenceManager=await ls.create(this,[ln(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&LT(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Cl(t){return mt(t)}class Kp{constructor(e){this.auth=e,this.observer=null,this.addObserver=pR(n=>this.observer=n)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function sN(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=qt("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",rN().appendChild(r)})}function iN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(t,e){const n=Fd(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Sa(i,e??{}))return s;yn(s,"already-initialized")}return n.initialize({options:e})}function aN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ln);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function lN(t,e,n){const r=Cl(t);Y(r._canInitEmulator,r,"emulator-config-failed"),Y(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=xv(e),{host:o,port:a}=uN(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||cN()}function xv(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function uN(t){const e=xv(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Hp(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Hp(o)}}}function Hp(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function cN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return an("not implemented")}_getIdTokenResponse(e){return an("not implemented")}_linkToIdToken(e,n){return an("not implemented")}_getReauthenticationResolver(e){return an("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function us(t,e){return gv(t,"POST","/v1/accounts:signInWithIdp",Cf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN="http://localhost";class xr extends Lv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new xr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):yn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=gf(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new xr(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return us(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,us(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,us(e,n)}buildRequest(){const e={requestUri:dN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ks(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so extends Pv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn extends so{constructor(){super("facebook.com")}static credential(e){return xr._fromParams({providerId:kn.PROVIDER_ID,signInMethod:kn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kn.credentialFromTaggedObject(e)}static credentialFromError(e){return kn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return kn.credential(e.oauthAccessToken)}catch{return null}}}kn.FACEBOOK_SIGN_IN_METHOD="facebook.com";kn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn extends so{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return xr._fromParams({providerId:xn.PROVIDER_ID,signInMethod:xn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return xn.credentialFromTaggedObject(e)}static credentialFromError(e){return xn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return xn.credential(n,r)}catch{return null}}}xn.GOOGLE_SIGN_IN_METHOD="google.com";xn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln extends so{constructor(){super("github.com")}static credential(e){return xr._fromParams({providerId:Ln.PROVIDER_ID,signInMethod:Ln.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ln.credentialFromTaggedObject(e)}static credentialFromError(e){return Ln.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ln.credential(e.oauthAccessToken)}catch{return null}}}Ln.GITHUB_SIGN_IN_METHOD="github.com";Ln.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn extends so{constructor(){super("twitter.com")}static credential(e,n){return xr._fromParams({providerId:Pn.PROVIDER_ID,signInMethod:Pn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Pn.credentialFromTaggedObject(e)}static credentialFromError(e){return Pn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Pn.credential(n,r)}catch{return null}}}Pn.TWITTER_SIGN_IN_METHOD="twitter.com";Pn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fN(t,e){return gv(t,"POST","/v1/accounts:signUp",Cf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await vr._fromIdTokenResponse(e,r,s),o=Bp(r);return new tr({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Bp(r);return new tr({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Bp(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hN(t){var e;const n=Cl(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new tr({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await fN(n,{returnSecureToken:!0}),s=await tr._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga extends ir{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ga.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ga(e,n,r,s)}}function Ov(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ga._fromErrorAndOperation(t,i,e,r):i})}async function pN(t,e,n=!1){const r=await Gi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return tr._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mN(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await Gi(t,Ov(r,s,e,t),n);Y(i.idToken,r,"internal-error");const o=wf(i.idToken);Y(o,r,"internal-error");const{sub:a}=o;return Y(t.uid===a,r,"user-mismatch"),tr._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&yn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yN(t,e,n=!1){const r="signIn",s=await Ov(t,r,e),i=await tr._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function _N(t,e,n,r){return mt(t).onIdTokenChanged(e,n,r)}function gN(t,e,n){return mt(t).beforeAuthStateChanged(e,n)}function vN(t,e,n,r){return mt(t).onAuthStateChanged(e,n,r)}function $p(t){return mt(t).signOut()}const Ka="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ka,"1"),this.storage.removeItem(Ka),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(){const t=Xe();return Rf(t)||El(t)}const CN=1e3,wN=10;class bv extends Dv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=EN()&&XT(),this.fallbackToPolling=Nv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);QT()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,wN):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},CN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}bv.type="LOCAL";const RN=bv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv extends Dv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Mv.type="SESSION";const Uv=Mv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new wl(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await SN(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wl.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=Sf("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(c){const f=c;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(){return window}function AN(t){Qt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(){return typeof Qt().WorkerGlobalScope<"u"&&typeof Qt().importScripts=="function"}async function TN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function NN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function kN(){return jv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="firebaseLocalStorageDb",xN=1,Ha="firebaseLocalStorage",Wv="fbase_key";class io{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Rl(t,e){return t.transaction([Ha],e?"readwrite":"readonly").objectStore(Ha)}function LN(){const t=indexedDB.deleteDatabase(Fv);return new io(t).toPromise()}function Pc(){const t=indexedDB.open(Fv,xN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ha,{keyPath:Wv})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ha)?e(r):(r.close(),await LN(),e(await Pc()))})})}async function zp(t,e,n){const r=Rl(t,!0).put({[Wv]:e,value:n});return new io(r).toPromise()}async function PN(t,e){const n=Rl(t,!1).get(e),r=await new io(n).toPromise();return r===void 0?null:r.value}function Vp(t,e){const n=Rl(t,!0).delete(e);return new io(n).toPromise()}const ON=800,DN=3;class Gv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pc(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>DN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wl._getInstance(kN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await TN(),!this.activeServiceWorker)return;this.sender=new IN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||NN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pc();return await zp(e,Ka,"1"),await Vp(e,Ka),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>zp(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>PN(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Vp(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Rl(s,!1).getAll();return new io(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ON)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Gv.type="LOCAL";const bN=Gv;new no(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(t,e){return e?ln(e):(Y(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If extends Lv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return us(e,this._buildIdpRequest())}_linkToIdToken(e,n){return us(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return us(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function UN(t){return yN(t.auth,new If(t),t.bypassAuthState)}function jN(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),mN(n,new If(t),t.bypassAuthState)}async function FN(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),pN(n,new If(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return UN;case"linkViaPopup":case"linkViaRedirect":return FN;case"reauthViaPopup":case"reauthViaRedirect":return jN;default:yn(this.auth,"internal-error")}}resolve(e){_n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=new no(2e3,1e4);class Jr extends Kv{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Jr.currentPopupAction&&Jr.currentPopupAction.cancel(),Jr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Y(e,this.auth,"internal-error"),e}async onExecution(){_n(this.filter.length===1,"Popup operations only handle one event");const e=Sf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(qt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(qt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Jr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,WN.get())};e()}}Jr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN="pendingRedirect",zo=new Map;class KN extends Kv{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=zo.get(this.auth._key());if(!e){try{const r=await HN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}zo.set(this.auth._key(),e)}return this.bypassAuthState||zo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HN(t,e){const n=zN(e),r=$N(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function BN(t,e){zo.set(t._key(),e)}function $N(t){return ln(t._redirectPersistence)}function zN(t){return $o(GN,t.config.apiKey,t.name)}async function VN(t,e,n=!1){const r=Cl(t),s=MN(r,e),o=await new KN(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN=10*60*1e3;class qN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!QN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Hv(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(qt(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=YN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yp(e))}saveEventToCache(e){this.cachedEventUids.add(Yp(e)),this.lastProcessedEventTime=Date.now()}}function Yp(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Hv({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function QN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Hv(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XN(t,e={}){return ro(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZN=/^https?/;async function ek(t){if(t.config.emulator)return;const{authorizedDomains:e}=await XN(t);for(const n of e)try{if(tk(n))return}catch{}yn(t,"unauthorized-domain")}function tk(t){const e=Lc(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!ZN.test(n))return!1;if(JN.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk=new no(3e4,6e4);function qp(){const t=Qt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function rk(t){return new Promise((e,n)=>{var r,s,i;function o(){qp(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{qp(),n(qt(t,"network-request-failed"))},timeout:nk.get()})}if(!((s=(r=Qt().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Qt().gapi)===null||i===void 0)&&i.load)o();else{const a=iN("iframefcb");return Qt()[a]=()=>{gapi.load?o():n(qt(t,"network-request-failed"))},sN(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Vo=null,e})}let Vo=null;function sk(t){return Vo=Vo||rk(t),Vo}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik=new no(5e3,15e3),ok="__/auth/iframe",ak="emulator/auth/iframe",lk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ck(t){const e=t.config;Y(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ef(e,ak):`https://${t.config.authDomain}/${ok}`,r={apiKey:e.apiKey,appName:t.name,v:xs},s=uk.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ks(r).slice(1)}`}async function dk(t){const e=await sk(t),n=Qt().gapi;return Y(n,t,"internal-error"),e.open({where:document.body,url:ck(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lk,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=qt(t,"network-request-failed"),a=Qt().setTimeout(()=>{i(o)},ik.get());function l(){Qt().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hk=500,pk=600,mk="_blank",yk="http://localhost";class Qp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _k(t,e,n,r=hk,s=pk){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},fk),{width:r.toString(),height:s.toString(),top:i,left:o}),u=Xe().toLowerCase();n&&(a=Rv(u)?mk:n),wv(u)&&(e=e||yk,l.scrollbars="yes");const d=Object.entries(l).reduce((f,[y,v])=>`${f}${y}=${v},`,"");if(qT(u)&&a!=="_self")return gk(e||"",a),new Qp(null);const c=window.open(e||"",a,d);Y(c,t,"popup-blocked");try{c.focus()}catch{}return new Qp(c)}function gk(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk="__/auth/handler",Ek="emulator/auth/handler",Ck=encodeURIComponent("fac");async function Xp(t,e,n,r,s,i){Y(t.config.authDomain,t,"auth-domain-config-required"),Y(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:xs,eventId:s};if(e instanceof Pv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",hc(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,c]of Object.entries(i||{}))o[d]=c}if(e instanceof so){const d=e.getScopes().filter(c=>c!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),u=l?`#${Ck}=${encodeURIComponent(l)}`:"";return`${wk(t)}?${ks(a).slice(1)}${u}`}function wk({config:t}){return t.emulator?Ef(t,Ek):`https://${t.authDomain}/${vk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu="webStorageSupport";class Rk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Uv,this._completeRedirectFn=VN,this._overrideRedirectResult=BN}async _openPopup(e,n,r,s){var i;_n((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Xp(e,n,r,Lc(),s);return _k(e,o,Sf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Xp(e,n,r,Lc(),s);return AN(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(_n(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await dk(e),r=new qN(e);return n.register("authEvent",s=>(Y(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(pu,{type:pu},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[pu];o!==void 0&&n(!!o),yn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ek(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Nv()||Rf()||El()}}const Sk=Rk;var Jp="@firebase/auth",Zp="1.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Tk(t){gs(new Ir("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Y(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kv(t)},u=new nN(r,s,i,l);return aN(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),gs(new Ir("auth-internal",e=>{const n=Cl(e.getProvider("auth").getImmediate());return(r=>new Ik(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vn(Jp,Zp,Ak(t)),Vn(Jp,Zp,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk=5*60,kk=U_("authIdTokenMaxAge")||Nk;let em=null;const xk=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>kk)return;const s=n==null?void 0:n.token;em!==s&&(em=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Lk(t=B_()){const e=Fd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=oN(t,{popupRedirectResolver:Sk,persistence:[bN,RN,Uv]}),r=U_("authTokenSyncURL");if(r){const i=xk(r);gN(n,i,()=>i(n.currentUser)),_N(n,o=>i(o))}const s=b_("auth");return s&&lN(n,`http://${s}`),n}Tk("Browser");const Pk={apiKey:"AIzaSyDe0ZfHtpKXrg0-UOjsBfVYx10YMBkT7pA",authDomain:"flux-bbbdc.firebaseapp.com",projectId:"flux-bbbdc",storageBucket:"flux-bbbdc.appspot.com",messagingSenderId:"322357398073",appId:"1:322357398073:web:ee4403314c949f43be1be8"},rt=P.createContext({}),Ok=[{name:"tsuki",pass:"kitsu"},{name:"werly",pass:"yew"},{name:"arin",pass:"levi"}],Dk="localhost:5173/runeflux",bk={users:Ok,domain:Dk},Oc=[{id:"KL01",type:"KEEPER",subtype:"LIVING",name:"Ernest",effects:[],text:""},{id:"KL02",type:"KEEPER",subtype:"LIVING",name:"Ghost",effects:["LOCATION_MORYTANIA__CHANGE_BROTHERS"],text:"Reveals its origins when in a specific location."},{id:"KL03",type:"KEEPER",subtype:"LIVING",name:"Duke Horacio",effects:[],text:""},{id:"KL04",type:"KEEPER",subtype:"LIVING",name:"Father Aereck",effects:[],text:""},{id:"KL05",type:"KEEPER",subtype:"LIVING",name:"Cook",effects:[],text:""},{id:"KL06",type:"KEEPER",subtype:"LIVING",name:"Drunken Dwarf",effects:["DISCARD_OR_DRAW_RANDOM_1_2"],text:"Once per turn, randomly draw or discard between 1 - 2 cards"},{id:"KL07",type:"KEEPER",subtype:"LIVING",name:"Archmage Sedridor",effects:["DESTROY_1"],text:"Once per turn, choose one rune keeper to destroy."},{id:"KL08",type:"KEEPER",subtype:"LIVING",name:"King Roald",effects:[],text:""},{id:"KL09",type:"KEEPER",subtype:"LIVING",name:"Ava",effects:[],text:""},{id:"KL10",type:"KEEPER",subtype:"LIVING",name:"Vampyre Juvinate",effects:["STEAL_RUNE_CROSSBOW"],text:"Once per turn, steal the rune crossbow from another player."},{id:"KL11",type:"KEEPER",subtype:"LIVING",name:"Goblin",effects:[],text:""},{id:"KL12",type:"KEEPER",subtype:"LIVING",name:"Imp",effects:["WARP"],text:"At the end of a players turn or when discarded teleport to another player."},{id:"KL13",type:"KEEPER",subtype:"LIVING",name:"Aris Maye",effects:[],text:"When using the Scry and Acquire card, don't discard it."},{id:"KL14",type:"KEEPER",subtype:"LIVING",name:"Reldo",effects:[],text:"When using the Historical Records card, don't discard it."},{id:"KR01",type:"KEEPER",subtype:"RUNE",name:"Mind Rune",effects:[],text:""},{id:"KR02",type:"KEEPER",subtype:"RUNE",name:"Chaos Rune",effects:["WORMHOLE"],text:"Once per turn, choose to draw 1 and play it."},{id:"KR03",type:"KEEPER",subtype:"RUNE",name:"Air Rune",effects:[],text:""},{id:"KR04",type:"KEEPER",subtype:"RUNE",name:"Water Rune",effects:[],text:""},{id:"KR05",type:"KEEPER",subtype:"RUNE",name:"Earth Rune",effects:[],text:""},{id:"KR06",type:"KEEPER",subtype:"RUNE",name:"Fire Rune",effects:[],text:""},{id:"KR07",type:"KEEPER",subtype:"RUNE",name:"Nature Rune",effects:["DESTROY_1"],text:"Once per turn, choose one equipment keeper to destroy"},{id:"KR08",type:"KEEPER",subtype:"RUNE",name:"Law Rune",effects:["TELEPORT"],text:"Once per turn, teleport to a random location."},{id:"KR09",type:"KEEPER",subtype:"RUNE",name:"Cosmic Rune",effects:[],text:""},{id:"KE01",type:"KEEPER",subtype:"EQUIPMENT",name:"Ghostspeak Amulet",effects:["SUMMON_GHOST"],text:"Once per turn, choose to summon a ghost."},{id:"KE02",type:"KEEPER",subtype:"EQUIPMENT",name:"Anti Dragonfire Shield",effects:["DESTROY_1"],text:"Once per turn, can destroy elvarg creeper."},{id:"KE03",type:"KEEPER",subtype:"EQUIPMENT",name:"Air Staff",effects:[],text:""},{id:"KE04",type:"KEEPER",subtype:"EQUIPMENT",name:"Rune Crossbow",effects:["DESTROY_1"],text:"Once per turn, choose one living keeper to destroy"},{id:"KE05",type:"KEEPER",subtype:"EQUIPMENT",name:"Avas Attractor",effects:["STEAL_1_FROM_HAND"],text:"Once per turn, attract a card to your hand from an opposing player of your choice."},{id:"KE06",type:"KEEPER",subtype:"EQUIPMENT",name:"Draman Staff",effects:[],text:""},{id:"KE07",type:"KEEPER",subtype:"EQUIPMENT",name:"Rune Scimitar",effects:[],text:""},{id:"K01",type:"KEEPER",subtype:"",name:"Cake",effects:["DRAW_1"],text:"Once per turn, choose to draw 1 card."},{id:"K02",type:"KEEPER",subtype:"",name:"Anti Poison",effects:["DESTROY_1"],text:"Once per turn, can destroy the poison creeper."},{id:"CR01",type:"CREEPER",subtype:"EQUIPMENT_CREEPER",name:"Elvarg",effects:["LOCATION_CRANDOR"],text:"A creeper that attaches to equipment disabling any use effects and preventing that player from winning."},{id:"CR02",type:"CREEPER",subtype:"LIVING_CREEPER",name:"Poison",effects:[],text:"A creeper that attaches to a living keeper disabling any use effects and preventing that player from winning."},{id:"CR03",type:"CREEPER",subtype:"LIVING_CREEPER",name:"Wizard Mind Bomb",effects:[],text:"Attaches to living keepers disabling, effects and prevents winning."},{id:"G01",type:"GOAL",subtype:"",name:"Your First Spell",effects:[],text:"To cast your first spell you must acquire the following reagents: |air rune| or |air staff|, |mind rune|."},{id:"G02",type:"GOAL",subtype:"",name:"Restless Ghost",effects:[],text:"In the cemetary of lumbridge you must put the |ghost| to rest. QUEST REQUIREMENTS: |ghost|, |ghostspeak amulet|, |father aereck|"},{id:"G03",type:"GOAL",subtype:"",name:"Ready To Slay A Dragon",effects:[],text:"Speak to |Duke Horacio| to get your |antifire shield|, then you can believe you can fight a dragon."},{id:"G04",type:"GOAL",subtype:"",name:"Dragon Slayer",effects:[],text:"Find your way to |crandor|, off the coast of misthalin and fight the dragon known as |Elvarg|. |antifire shield| is required."},{id:"G05",type:"GOAL",subtype:"",name:"Cook's Assistant",effects:[],text:"For most new adventurers, they end up helping |Cook| get ingredients for his |Cake| for the eternal duke's birthday."},{id:"G06",type:"GOAL",subtype:"",name:"Lumbridge Citizens",effects:[],text:"Collection type: lumbridge residents including the likes of |Duke Horacio|, |Cook| and |Father Aereck|"},{id:"G07",type:"GOAL",subtype:"",name:"Elemental Runes",effects:[],text:"Collection type: any 3 elemental |runes| from |Air|, |Water|, |Earth| or |Fire|"},{id:"G08",type:"GOAL",subtype:"",name:"Rune Mysteries",effects:[],text:"The path to unlocking runecraft requires the power of |Air|, QUEST REQUIREMENTS: |Air Rune|, |Archmage Sedridor|, |Duke Horacio|"},{id:"G09",type:"GOAL",subtype:"",name:"How to become a Chaos Dwarf",effects:[],text:"Under the curse of zamorak dwarves that use magic end up becoming corrupt and turning into chaos dwarves, requirements: |Drunken Dwarf|, |Wizard Mind Bomb|"},{id:"G10",type:"GOAL",subtype:"",name:"Drunken Wizard",effects:[],text:"A wizards favourite drinks got to be a |wizard mind bomb| right, so bring one to |Archmage Sedridor| for reasons."},{id:"G11",type:"GOAL",subtype:"",name:"Rock Cake",effects:[],text:"A secret cake baked only by dwarfs, requirements: |Drunken Dwarf|, |Cake|"},{id:"G12",type:"GOAL",subtype:"",name:"Alchemy",effects:[],text:"To cast alchemy spell you must have a |Nature rune| and |Fire Runes|"},{id:"G13",type:"GOAL",subtype:"",name:"Cursed",effects:[],text:"Not the spell, but someone who gains all 3 creepers must have bad luck right well now they can win, |Any 3 creepers|"},{id:"G14",type:"GOAL",subtype:"",name:"Regicide",effects:[],text:"Requirements: |King Roald|, |Poison|. Wait this isn't how regicide goes."},{id:"G15",type:"GOAL",subtype:"",name:"Animal Magnetism",effects:[],text:"The quest all aspiring newbie rangers rush to for some QoL ammo reservation, Requirements: |Ava|, |Ghostspeak Amulet|, |Ava's Attractor|"},{id:"G16",type:"GOAL",subtype:"",name:"Ranged Setup",effects:[],text:"The power houses of early game range. Requirements: |Rune Crossbow|, |Ava's Attractor|"},{id:"G17",type:"GOAL",subtype:"",name:"Draynor Manor",effects:[],text:"Collection type: residents of draynor manor |Ernest|, |Ava|, |Ghost|"},{id:"G18",type:"GOAL",subtype:"",name:"Swampmans Nightmares",effects:[],text:"|Rune Crossbow| and |Vampyre Juvinate|. You get the rest."},{id:"G19",type:"GOAL",subtype:"",name:"Entrana",effects:[],text:"Collection Type: |Law Rune|, |Draman Staff|"},{id:"G20",type:"GOAL",subtype:"",name:"Smuggler",effects:[],text:"Since equipment and runes aren't allowed on entrana, find a way to get them there. Requirements: |Entrana|, |Any 4 equipment or rune type keepers|."},{id:"G21",type:"GOAL",subtype:"",name:"Misthalins Nobility",effects:[],text:"Collection Type: |King Roald|, |Duke Horacio|"},{id:"G22",type:"GOAL",subtype:"",name:"Mind Goblin",effects:[],text:"They exist. |Mind Rune|, |Goblin|"},{id:"G23",type:"GOAL",subtype:"",name:"Zanaris",effects:[],text:"Collection Type: |Cosmic Rune|, |Dramen Staff|"},{id:"G24",type:"GOAL",subtype:"",name:"Catalytic Runes",effects:[],text:"Collection Type: |Mind Rune|, |Chaos Rune|"},{id:"G25",type:"GOAL",subtype:"",name:"Utility Runes",effects:[],text:"Collection Type: |Law Rune|, |Nature Rune|, |Cosmic Rune|"},{id:"G26",type:"GOAL",subtype:"",name:"Misthalins Altars",effects:[],text:"Collection Type: |Water Rune|, |Earth Rune|"},{id:"G27",type:"GOAL",subtype:"",name:"Zamorak",effects:[],text:"Collection Type: |Wilderness|, |Imp|, |Chaos Rune|"},{id:"G28",type:"GOAL",subtype:"",name:"Starter Monsters",effects:[],text:"Collection Type: |Imp|, |Goblin|, |Ernest(he's a chicken right)|"},{id:"G29",type:"GOAL",subtype:"",name:"Morytanias Low-Tier Undead",effects:[],text:"Collection Type: |Morytania|, |Ghost|, |Vampyre Juvinate|"},{id:"G30",type:"GOAL",subtype:"",name:"Port-Phasmatys",effects:[],text:"Collection Type: |4 ghosts| and location |Morytania|"},{id:"G31",type:"GOAL",subtype:"",name:"Chaos",effects:[],text:"Collection Type: |Abyss|, |Chaos Rune|"},{id:"G32",type:"GOAL",subtype:"",name:"Juvinile 'Rare Drop'",effects:[],text:"After defeating a |Vampyre juvinate|, you have been graced with the staff of utmost versatility the |Air Staff|."},{id:"G33",type:"GOAL",subtype:"",name:"Tribrid",effects:[],text:"Collection Type: |Rune Scimitar|, |Rune Crossbow|, |Air Staff|"},{id:"G34",type:"GOAL",subtype:"",name:"Melee Setup",effects:[],text:"Collection Type: |Rune Scimitar|, |Antidragon-fire shield|, |Cake|"},{id:"G35",type:"GOAL",subtype:"",name:"Chaos Dwarf",effects:[],text:"Collection Type: |Chaos Rune|, |Drunken Dwarf|"},{id:"G36",type:"GOAL",subtype:"",name:"Poison Removal",effects:[],text:"just gotta drink |Anti-Poison| to cure |Poison|."},{id:"G37",type:"GOAL",subtype:"",name:"Prevent Toxicity?",effects:[],text:"Does a |Anti Poison| protect from being told to sit in the |Wilderness|."},{id:"G38",type:"GOAL",subtype:"",name:"Varrock",effects:[],text:"Collection type: |Aris Maye|, |Reldo|, |King Roald|"},{id:"G39",type:"GOAL",subtype:"",name:"Recipe for Disaster",effects:[],text:"A long journey begins after speaking to the |Cook|. Freeing the members of the banquet will require help from |Aris Maye|."},{id:"RL01",type:"RULE",subtype:"LOCATION",name:"Misthalin",effects:["LOCATION","MISTHALIN"],text:"teleport all players to the location of misthalin, this location has no special effects."},{id:"RL02",type:"RULE",subtype:"LOCATION",name:"Abyss",effects:["LOCATION","ABYSS"],text:"Once per turn, choose whether to draw 1 and play it."},{id:"RL03",type:"RULE",subtype:"LOCATION",name:"Asgarnia",effects:["LOCATION","ASGARNIA"],text:"When this card is in play, there can be 2 different goals in play. Only 1 is required to win."},{id:"RL04",type:"RULE",subtype:"LOCATION",name:"Morytania",effects:["LOCATION","MORYTANIA"],text:"When this card is in play, Ghosts have a 10% chance to spawn at the end of turns."},{id:"RL05",type:"RULE",subtype:"LOCATION",name:"Wilderness",effects:["LOCATION","WILDERNESS"],text:"When this card is in play, once per turn, choose a keeper to challenge and steal."},{id:"RL06",type:"RULE",subtype:"LOCATION",name:"Entrana",effects:["LOCATION","ENTRANA"],text:"When this card is in play, on arrival everyone must discard all equipment/rune keepers in play."},{id:"RL07",type:"RULE",subtype:"LOCATION",name:"Crandor",effects:["LOCATION","CRANDOR"],text:"When this card is in play, at the end of every turn discard one card."},{id:"RB01",type:"RULE",subtype:"BASIC",name:"Draw 2",effects:["RULE_DRAW","2"],text:"When this card is in play, each player will draw 2 cards per turn."},{id:"RB02",type:"RULE",subtype:"BASIC",name:"Draw 3",effects:["RULE_DRAW","3"],text:"When this card is in play, each player will draw 3 cards per turn."},{id:"RB03",type:"RULE",subtype:"BASIC",name:"Draw 4",effects:["RULE_DRAW","4"],text:"When this card is in play, each player will draw 4 cards per turn."},{id:"RB04",type:"RULE",subtype:"BASIC",name:"Draw 5",effects:["RULE_DRAW","5"],text:"When this card is in play, each player will draw 5 cards per turn."},{id:"RB05",type:"RULE",subtype:"BASIC",name:"Play 2",effects:["RULE_PLAY","2"],text:"When this card is in play, each player will play 2 cards per turn."},{id:"RB06",type:"RULE",subtype:"BASIC",name:"Play 3",effects:["RULE_PLAY","3"],text:"When this card is in play, each player will play 3 cards per turn."},{id:"RB07",type:"RULE",subtype:"BASIC",name:"Play 4",effects:["RULE_PLAY","4"],text:"When this card is in play, each player will play 4 cards per turn."},{id:"RB08",type:"RULE",subtype:"BASIC",name:"Play All",effects:["RULE_PLAY","99"],text:"When this card is in play, each player will play all cards per turn."},{id:"RB09",type:"RULE",subtype:"BASIC",name:"Hand Limit 1",effects:["RULE_HAND_LIMIT","1"],text:"When this card is in play, each player has to discard down to 1 card to end their turn."},{id:"RB10",type:"RULE",subtype:"BASIC",name:"Hand Limit 2",effects:["RULE_HAND_LIMIT","2"],text:"When this card is in play, each player has to discard down to 2 card to end their turn."},{id:"RB11",type:"RULE",subtype:"BASIC",name:"Hand Limit 3",effects:["RULE_HAND_LIMIT","3"],text:"When this card is in play, each player has to discard down to 3 card to end their turn."},{id:"RB12",type:"RULE",subtype:"BASIC",name:"Keeper Limit 3",effects:["RULE_KEEPER_LIMIT","3"],text:"When this card is in play, each player can have 3 keepers in play."},{id:"RB13",type:"RULE",subtype:"BASIC",name:"Keeper Limit 4",effects:["RULE_KEEPER_LIMIT","4"],text:"When this card is in play, each player can have 4 keepers in play."},{id:"RB14",type:"RULE",subtype:"BASIC",name:"Keeper Limit 1",effects:["RULE_KEEPER_LIMIT","1"],text:"When this card is in play, each player can have 1 keepers in play."},{id:"RB15",type:"RULE",subtype:"BASIC",name:"Teleblock",effects:["TELEBLOCK"],text:"When this card is in play, location can not be changed."},{id:"A01",type:"ACTION",subtype:"",name:"Teleport",effects:["TELEPORT"],text:"teleport to a random location."},{id:"A02",type:"ACTION",subtype:"",name:"Rules Reset",effects:["RULES_RESET"],text:"When played, all rules will be returned to their base values from the start of the game."},{id:"A03",type:"ACTION",subtype:"",name:"Pick up all keepers",effects:["KEEPERS_TO_HAND"],text:"When played, all players must pick up all their keepers in play."},{id:"A04",type:"ACTION",subtype:"",name:"Trade Hands",effects:["TRADE_HANDS"],text:"When played, choose a player to trade hands with."},{id:"A05",type:"ACTION",subtype:"",name:"Reset One Rule",effects:["RULE_RESET_CHOOSE"],text:"When played, choose 1 rule to reset."},{id:"A06",type:"ACTION",subtype:"",name:"Reset half of rules(upto)",effects:["RULE_RESET_CHOOSE","HALF","OPTIONAL"],text:"When played, choose up to half the rules to reset."},{id:"A07",type:"ACTION",subtype:"",name:"Draw 3, Play 2",effects:["DRAW_3_PLAY_2"],text:"Draw 3 cards, out of those 3 cards you must choose 2 to play and finally discard the remaining card."},{id:"A08",type:"ACTION",subtype:"",name:"Draw 2, Use'em",effects:["DRAW_2_PLAY_2"],text:"Draw 2 cards and immediately use them."},{id:"A09",type:"ACTION",subtype:"",name:"Draw 5, discard 2",effects:["DRAW_5_PLAY_3"],text:"Draw 5 cards, out of those 5 cards you must choose 3 to play and finally discard the remaining cards."},{id:"A10",type:"ACTION",subtype:"",name:"Everyone draw 1",effects:["DRAW_1","ALL_PLAYERS"],text:"All players draw 1 card."},{id:"A11",type:"ACTION",subtype:"",name:"Steal A Keeper",effects:["KEEPER_STEAL_CHOOSE"],text:"Choose a keeper on field to take into your possession."},{id:"A12",type:"ACTION",subtype:"",name:"Exchange Keepers",effects:["KEEPER_EXCHANGE_CHOOSE"],text:"Choose 2 keepers on the field and swap their locations."},{id:"A13",type:"ACTION",subtype:"",name:"Everyone Discard 1",effects:["DISCARD_1","ALL_PLAYERS"],text:"Each player will immediately discard one card."},{id:"A14",type:"ACTION",subtype:"",name:"Summon Ghost",effects:["SUMMON_GHOST"],text:"Summon a ghost to add to your keepers."},{id:"A15",type:"ACTION",subtype:"",name:"Destroy Keeper",effects:["DESTROY_1"],text:"Choose a keeper/creeper to destroy."},{id:"A16",type:"ACTION",subtype:"",name:"Scry and Acquire",effects:["DRAW_SPECIFIC_PURE"],text:"See into the future and choose a card to acquire."},{id:"A17",type:"ACTION",subtype:"",name:"Historical Research",effects:["DRAW_SPECIFIC_DISCARD"],text:"Look through past records and find the location of a card to acquire."},{id:"CO01",type:"COUNTER",subtype:"",name:"Telestop",effects:["TELESTOP_OR_LOCATION_MISTHALIN"],text:"Out of turn - stop an opposing players teleport| During your turn teleport to misthalin."},{id:"CO02",type:"COUNTER",subtype:"",name:"Canceled Plans",effects:["GOALSTOP_OR_GOALS_NONE"],text:"Out of turn - stop another player while they are playing a goal card| During turn discard all goals in play."},{id:"CO03",type:"COUNTER",subtype:"",name:"Belay That!",effects:["ACTIONSTOP_OR_DISCARD_1_ALL"],text:"Out of turn - stop another player while they are playing an action card| During turn every discards one."},{id:"CO04",type:"COUNTER",subtype:"",name:"That's Mine!",effects:["KEEPER_STEALSTOP_OR_KEEPER_STEAL"],text:"Out of turn - when another player trys to steal a keeper you steal it instead| During turn - choose a keeper to steal."},{id:"CO05",type:"COUNTER",subtype:"",name:"Veto!",effects:["RULESTOP_OR_RULE_RESET_3"],text:"Out of turn - stop another player while they are playing a rule card| During turn - reset up to 3 rules."},{id:"CO06",type:"COUNTER",subtype:"",name:"It's a Trap!",effects:["KEEPER_DISCARD_REFLECT_OR_KEEPER_DISCARD"],text:"Out of turn - when another player trys to destroy one of your keepers destroy a random one of theirs instead| During turn, choose a keeper to discard."}],Bv={startDeck:Oc},oo=(()=>{const t=async y=>{const{auth:v,setUser:w,db:C}=y;await hN(v).then(h=>{console.log(h)}),await vN(v,async h=>{if(h){const p=h.uid,_=oe(C,`users/${p}`),N=await e(C,p);if(N){for(const b of Oc){let M=!1;for(const O in N.cardCatalog)O===b.id&&(M=!0);M||(N.cardCatalog[`${b.id}`]=0)}await le(_,N),w(b=>Object.assign({},b,N?{...N}:{}))}else{const b={username:"Anon",uid:p,icon:"",isReady:!1,stats:{wins:0,played:0,totalRounds:0},cardCatalog:{},goalWins:{}};for(const M of Oc)b.cardCatalog[`${M.id}`]=0;await le(_,b),w(M=>Object.assign({},M,b))}}else $p(v)})},e=async(y,v)=>{const w=oe(y,"/users/");let C=!1;return await Nn(Me(w,`/${v}/`)).then(async h=>{const p=await h.val();p&&(C=p)}),C},n=(y,v,w,C)=>{const{cardNum:h,cardKey:p,amount:_}=w;switch(y){case"CARD":return r(v,p??"",h??NaN,C);case"WINS":return s(v,_??NaN,C);case"ROUNDS":return i(v,_??NaN,C);case"PLAYED":return o(v,_??NaN,C);case"GOALWON":return a(v,p??"",h??NaN,C)}},r=async(y,v,w,C)=>{try{const h=oe(y,`/users/${C}/cardCatalog/${v}`);await le(h,w)}catch(h){return console.error(h)}},s=async(y,v,w)=>{try{const C=oe(y,`/users/${w}/stats/wins`);await le(C,v)}catch(C){return console.error(C)}},i=async(y,v,w)=>{try{const C=oe(y,`/users/${w}/stats/totalRounds`);await le(C,v)}catch(C){return console.error(C)}},o=async(y,v,w)=>{try{const C=oe(y,`/users/${w}/stats/played`);await le(C,v)}catch(C){return console.error(C)}},a=async(y,v,w,C)=>{try{const h=oe(y,`/users/${C}/goalWins/${v}`);await le(h,w)}catch(h){return console.error(h)}};return{createAccountAnon:t,uploadStats:n,changeName:async(y,v,w)=>{try{const C=oe(y,`users/${w}/username`);await le(C,v)}catch(C){return console.error(C)}},changeIcon:async(y,v,w)=>{try{const C=oe(y,`/users/${w}/icon`);await le(C,v)}catch(C){return console.error(C)}},signout:async y=>{try{await $p(y)}catch(v){return console.error(v)}},testUserSignIn:(y,v,w)=>{let C=!1;for(const h of bk.users)h.name.toLowerCase()===y&&h.pass.toLowerCase()===v&&(C=!0);return C&&w(h=>({...h,username:y,uid:y,isReady:!1,cardCatalog:{},goalWins:{},icon:"",stats:{wins:0,played:0,totalRounds:0}})),C},combineUsers:async(y,v,w)=>{try{const C=oe(y,`/users/${v}`),h=oe(y,"/users/");await Nn(Me(h,`${w}`)).then(async p=>{const _=await p.val();await le(C,_)})}catch(C){console.error(C)}}}})();function Mk(){const t=P.useContext(rt),e=Jt(),[n,r]=P.useState(!1);return m.jsx("div",{className:"main_menu",children:m.jsxs("div",{className:"menu",children:[!t.user&&m.jsx($w,{className:"menu_link",to:"/login",children:"Log in"}),t.user?m.jsx("button",{className:"menu_link",onClick:()=>e("/account"),children:"Continue to Game"}):m.jsx("button",{className:`menu_link ${n?"disabled":""}`,onClick:async()=>{await oo.createAccountAnon(t),r(()=>!0)},children:n?"Please Wait..":"Play as Guest"})]})})}function Lr({isSideBox:t,player:e,isTurn:n,selectedPlayerGroup:r,selectPlayerGroup:s}){const{user:i}=P.useContext(rt),o=()=>{if(!r)return!1;for(const l of r)if(l.user.uid===(e==null?void 0:e.user.uid))return!0;return!1},a=()=>{if(e!=null&&e.hand)return e==null?void 0:e.hand.map((l,u)=>m.jsx("span",{className:"mini_hand_card",style:{transform:`translate(calc(-50% * ${u}), 50px)`}},`${l.id}_small_hand__${u}`))};return t?m.jsx("div",{className:`user_bar ${n?"highlight":""} ${o()?"selected":""}`,onContextMenu:l=>{l.preventDefault(),s&&s(e??{})},children:m.jsxs("p",{children:[(e==null?void 0:e.user.username)??"Not Signed In!",m.jsx("span",{className:`${e==null?void 0:e.user.icon} ready_mark`}),a()]})}):m.jsxs("div",{className:"user_bar game_user__this_user",children:[m.jsx("p",{children:(i==null?void 0:i.username)??"Not Signed In!"}),m.jsx("p",{className:"user_bar__uid",children:(i==null?void 0:i.uid)??"000000000"})]})}const Uk=1,jk=1,Fk=5,Wk=2,Gk="MISTHALIN",Kk=!1,Zs={drawAmount:Uk,playAmount:jk,handLimit:Fk,keeperLimit:Wk,location:Gk,teleblock:Kk},Sl=(()=>{const t=C=>{Array.isArray(C.deck.discard)&&!C.deck.discard.length&&(C.deck.discard=!1),Array.isArray(C.goal)&&!C.goal.length&&(C.goal=!1);for(const h of C.players)Array.isArray(h.hand)&&!h.hand.length&&(h.hand=!1),Array.isArray(h.keepers)&&!h.keepers.length&&(h.keepers=!1);return C},e=C=>((!Array.isArray(C.hand)||!C.hand.length)&&(C.hand=!1),(!Array.isArray(C.keepers)||!C.keepers.length)&&(C.keepers=!1),C),n=(C,h=!1,p=!1)=>({user:C,hand:h,keepers:p}),r=(C,h,p)=>({uid:C,username:h,isReady:p,cardCatalog:{},goalWins:{},stats:{wins:0,played:0,totalRounds:0},icon:""}),s=(C,h)=>{for(let p=0;p<C.length;p++)if(h===C[p].user.uid)return{state:C[p],index:p,error:!1};return{state:C[0],index:0,error:!0}},i=(C,h)=>{for(let p=0;p<C.length;p++)if(h===C[p].uid)return{state:C[p],index:p,error:!1};return{state:C[0],index:0,error:!0}},o=(C,h,p,_,N)=>{const b=oe(C,`/games/${h==null?void 0:h.uid}`),M={deck:{pure:[],discard:!1},players:[{user:h??r("00001","hally",!1),hand:!1,keepers:!1}],goal:!1,turn:{player:!1,drawn:0,played:0,temporary:{hand:[],play:0},duel:{cooldown:!1,player1:{id:"",num:0},player2:{id:"",num:0}}},phases:{morytania:0,abyss:0,wilderness:0},pending:!1,isWon:!1,round:0};for(const k of Bv.startDeck)M.deck.pure.push(k);const O={game:Object.assign({},M,{rules:Zs}),id:(h==null?void 0:h.uid)??"",displayName:(h==null?void 0:h.username)??"",inProgress:!1,users:[h??{uid:"0"}]};le(b,O),p((h==null?void 0:h.uid)??""),f(C,(h==null?void 0:h.uid)??"",h??{},_,p,N)},a=async(C,h,p)=>{try{const _=oe(C,`/games/${h}`);await gT(_),p(()=>"")}catch(_){return console.error(_)}},l=async(C,h,p,_)=>{try{const N=oe(C),b=[];await Nn(Me(N,"/games")).then(async M=>{const O=await M.val();for(const k in O)b.push(O[k]),s(O[k].game.players,h).error||_(()=>O[k].id);p(b)})}catch{return"ERROR"}},u=(C,h,p,_,N,b)=>{const M=oe(C);Nn(Me(M,`/games/${h}/`)).then(async O=>{const k=await O.val();if(k.game.players.length>=4)return console.error("Full Room");for(const Ae of k.game.players)if(Ae.user.uid===p.uid)return;const j=n(p),W=[...k.game.players];W.push(j),await le(Me(M,`/games/${h}/game/players`),W);const z=[...k.users];z.push(p),await le(Me(M,`/games/${h}/users`),z),_(h),f(C,h,p,N,_,b)})},d=(C,h)=>{const p=C.slice(0,h),_=C.slice(h+1);return p.concat(_)},c=async(C,h,p,_)=>{const N=oe(C);await Nn(Me(N,`/games/${h}/`)).then(async b=>{const M=await b.val(),O=[...M.game.players],k=O.findIndex(Ne=>Ne.user.uid===p.uid),j=d(O,k);await le(Me(N,`/games/${h}/game/players`),j);const W=[...M.users],z=W.findIndex(Ne=>Ne.uid===p.uid),Ae=d(W,z);await le(Me(N,`/games/${h}/users`),Ae),_(()=>"")})},f=(C,h,p,_,N,b)=>{const M=oe(C);hv(Me(M,`/games/${h}/users`),async O=>{const k=await O.val();await l(C,p.uid,_,N),console.log(k);const j=[];for(const W of k)W.isReady&&j.push(!0);b(W=>j.length===k.length?!0:W)})};return{convertGameToRoomGame:t,convertToRoomPlayer:e,createRoom:o,destroyRoom:a,getRooms:l,joinRoom:u,leaveRoom:c,connectRoom:f,readyUp:async(C,h,p,_)=>{try{const N=oe(C);await Nn(Me(N,`/games/${h}/users`)).then(async b=>{const M=await b.val(),O=i(M,p.uid);console.log(M,O);const k=[...M];k[O.index].isReady=!0,await le(Me(N,`/games/${h}/users`),k),_(j=>{if(j)return{...j,isReady:!0}})})}catch(N){console.error(N)}},startGame:async(C,h)=>{const p=oe(C,`/games/${h}/inProgress`);await le(p,!0)},checkGameInProgress:async(C,h)=>{try{const p=oe(C);let _=!1;return await Nn(Me(p,`/games/${h}/inProgress`)).then(async N=>{await N.val()&&(_=!0)}),_}catch(p){console.error(p)}}}})();function Af({pageType:t}){const{setUser:e}=P.useContext(rt),n=Jt();return m.jsxs("div",{className:"lobby_header",children:[m.jsx("h1",{className:"header_title",children:"RuneFlux"}),m.jsxs("div",{children:[m.jsx("button",{className:`header_btn ${t==="ACCOUNT"?"selected":""}`,onClick:()=>{n("/account")},children:"Account"}),m.jsx("button",{className:`header_btn ${t==="CATALOG"?"selected":""}`,onClick:()=>{n("/catalog")},children:"Card Catalog"}),m.jsx("button",{className:`header_btn ${t==="LOBBY"?"selected":""}`,onClick:()=>{n("/lobby")},children:"Lobby"}),m.jsx("button",{className:"header_btn",onClick:async()=>{e(()=>{}),n("/")},children:"Log Out"})]})]})}function Hk(){var k;const{createRoom:t,getRooms:e,joinRoom:n,leaveRoom:r,destroyRoom:s,readyUp:i,connectRoom:o}=Sl,{db:a,user:l,joinedGameID:u,setJoinedGameID:d,setUser:c}=P.useContext(rt),f=Jt(),[y,v]=P.useState([]),[w,C]=P.useState(!1),[h,p]=P.useState(!1),[_,N]=P.useState(!1);P.useEffect(()=>{if(!l)return f("/");y.length||setTimeout(()=>{e(a,(l==null?void 0:l.uid)??"",v,d)},500),u&&l&&o(a,u,l,v,d,C),console.log(y)},[u,l]),P.useEffect(()=>{w&&f("/game")},[w]);const b=()=>{for(const j of y)if(j.id===u)return j;return null},M=()=>y.map((j,W)=>m.jsxs("div",{className:"room_link",onClick:()=>{n(a,j.id,l??{},d,v,C)},children:[m.jsx("p",{children:j.users[0].username}),m.jsxs("p",{children:[Array.isArray(j.game.players)&&j.game.players.length," / 4 Players"]})]},`room_${W}`)),O=()=>{let j;for(const W of y)W.id===u&&(j=W);if(j)return j.users.map((W,z)=>m.jsxs("div",{className:"lobby_player",children:[m.jsxs("p",{children:[z+1,"). ",W.username," ",W.isReady?m.jsx("span",{className:"check ready_mark"}):m.jsx("span",{className:"cross ready_mark"})]}),(l==null?void 0:l.uid)===W.uid&&m.jsx("button",{className:"lobby_link",onClick:()=>{l&&(l.uid===u?s(a,u,d):r(a,u,l,d))},children:"Leave"})]},`lobby_player__${z}`))};return u?m.jsxs("div",{className:"main_menu",children:[m.jsx(Lr,{}),m.jsxs("div",{className:"menu lobby",children:[m.jsxs("h2",{children:["Current Session: ",(k=b())==null?void 0:k.users[0].username]}),O(),m.jsx("button",{style:{marginTop:"1rem"},className:`lobby_link ${_?"disabled":""}`,onClick:()=>{N(()=>!0),i(a,u,l??{},c)},children:"Ready"})]})]}):m.jsxs("div",{className:"main_menu",children:[m.jsx(Af,{pageType:"LOBBY"}),m.jsx(Lr,{}),m.jsxs("div",{className:"menu lobby",children:[m.jsx("div",{className:"refresh_btn__container",children:m.jsx("button",{className:`refresh_btn ${h?"disabled":""}`,onClick:()=>{!l||h||(e(a,l==null?void 0:l.uid,v,d),p(()=>!0),setTimeout(()=>p(()=>!1),15e3))}})}),y.length?M():m.jsx("div",{children:m.jsx("h3",{style:{textAlign:"center"},children:"No Rooms"})}),m.jsx("button",{style:{width:"50%",alignSelf:"center"},className:"lobby_link",onClick:()=>t(a,l,d,v,C),children:"Create Game"})]})]})}const Dc=[{id:"KL01",type:"KEEPER",subtype:"LIVING",name:"Ernest",effects:[],text:""},{id:"KL02",type:"KEEPER",subtype:"LIVING",name:"Ghost",effects:["LOCATION_MORYTANIA__CHANGE_BROTHERS"],text:"Reveals its origins when in a specific location."},{id:"KL03",type:"KEEPER",subtype:"LIVING",name:"Duke Horacio",effects:[],text:""},{id:"KL04",type:"KEEPER",subtype:"LIVING",name:"Father Aereck",effects:[],text:""},{id:"KL05",type:"KEEPER",subtype:"LIVING",name:"Cook",effects:[],text:""},{id:"KL06",type:"KEEPER",subtype:"LIVING",name:"Drunken Dwarf",effects:["DISCARD_OR_DRAW_RANDOM_1_2"],text:"Once per turn, randomly draw or discard between 1 - 2 cards"},{id:"KL07",type:"KEEPER",subtype:"LIVING",name:"Archmage Sedridor",effects:["DESTROY_1"],text:"Once per turn, choose one rune keeper to destroy."},{id:"KL08",type:"KEEPER",subtype:"LIVING",name:"King Roald",effects:[],text:""},{id:"KL09",type:"KEEPER",subtype:"LIVING",name:"Ava",effects:[],text:""},{id:"KL10",type:"KEEPER",subtype:"LIVING",name:"Vampyre Juvinate",effects:["STEAL_RUNE_CROSSBOW"],text:"Once per turn, steal the rune crossbow from another player."},{id:"KL11",type:"KEEPER",subtype:"LIVING",name:"Goblin",effects:[],text:""},{id:"KL12",type:"KEEPER",subtype:"LIVING",name:"Imp",effects:["WARP"],text:"At the end of a players turn or when discarded teleport to another player."},{id:"KL13",type:"KEEPER",subtype:"LIVING",name:"Aris Maye",effects:[],text:"When using the Scry and Acquire card, don't discard it."},{id:"KL14",type:"KEEPER",subtype:"LIVING",name:"Reldo",effects:[],text:"When using the Historical Records card, don't discard it."},{id:"KLM01",type:"KEEPER",subtype:"LIVING",name:"Torag",effects:["STEAL_KEEPER"],text:"Once per turn, steal Dharok or Karil."},{id:"KLM02",type:"KEEPER",subtype:"LIVING",name:"Verac",effects:["STEAL_KEEPER"],text:"Once per turn, steal Guthan or Ahrim"},{id:"KLM03",type:"KEEPER",subtype:"LIVING",name:"Guthan",effects:["STEAL_KEEPER"],text:"Once per turn, steal Torag or Karil"},{id:"KLM04",type:"KEEPER",subtype:"LIVING",name:"Dharok",effects:["STEAL_KEEPER"],text:"Once per turn, steal Verac or Ahrim"},{id:"KLM05",type:"KEEPER",subtype:"LIVING",name:"Karil",effects:["STEAL_KEEPER"],text:"Once per turn, steal Verac or Dharok"},{id:"KLM06",type:"KEEPER",subtype:"LIVING",name:"Ahrim",effects:["STEAL_KEEPER"],text:"Once per turn, steal Torag or Guthan"},{id:"KR01",type:"KEEPER",subtype:"RUNE",name:"Mind Rune",effects:[],text:""},{id:"KR02",type:"KEEPER",subtype:"RUNE",name:"Chaos Rune",effects:["WORMHOLE"],text:"Once per turn, choose to draw 1 and play it."},{id:"KR03",type:"KEEPER",subtype:"RUNE",name:"Air Rune",effects:[],text:""},{id:"KR04",type:"KEEPER",subtype:"RUNE",name:"Water Rune",effects:[],text:""},{id:"KR05",type:"KEEPER",subtype:"RUNE",name:"Earth Rune",effects:[],text:""},{id:"KR06",type:"KEEPER",subtype:"RUNE",name:"Fire Rune",effects:[],text:""},{id:"KR07",type:"KEEPER",subtype:"RUNE",name:"Nature Rune",effects:["DESTROY_1"],text:"Once per turn, choose one equipment keeper to destroy"},{id:"KR08",type:"KEEPER",subtype:"RUNE",name:"Law Rune",effects:["TELEPORT"],text:"Once per turn, teleport to a random location."},{id:"KR09",type:"KEEPER",subtype:"RUNE",name:"Cosmic Rune",effects:[],text:""},{id:"KE01",type:"KEEPER",subtype:"EQUIPMENT",name:"Ghostspeak Amulet",effects:["SUMMON_GHOST"],text:"Once per turn, choose to summon a ghost."},{id:"KE02",type:"KEEPER",subtype:"EQUIPMENT",name:"Anti Dragonfire Shield",effects:["DESTROY_1"],text:"Once per turn, can destroy elvarg creeper."},{id:"KE03",type:"KEEPER",subtype:"EQUIPMENT",name:"Air Staff",effects:[],text:""},{id:"KE04",type:"KEEPER",subtype:"EQUIPMENT",name:"Rune Crossbow",effects:["DESTROY_1"],text:"Once per turn, choose one living keeper to destroy"},{id:"KE05",type:"KEEPER",subtype:"EQUIPMENT",name:"Avas Attractor",effects:["STEAL_1_FROM_HAND"],text:"Once per turn, attract a card to your hand from an opposing player of your choice."},{id:"KE06",type:"KEEPER",subtype:"EQUIPMENT",name:"Draman Staff",effects:[],text:""},{id:"KE07",type:"KEEPER",subtype:"EQUIPMENT",name:"Rune Scimitar",effects:[],text:""},{id:"K01",type:"KEEPER",subtype:"",name:"Cake",effects:["DRAW_1"],text:"Once per turn, choose to draw 1 card."},{id:"K02",type:"KEEPER",subtype:"",name:"Anti Poison",effects:["DESTROY_1"],text:"Once per turn, can destroy the poison creeper."},{id:"CR01",type:"CREEPER",subtype:"EQUIPMENT_CREEPER",name:"Elvarg",effects:["LOCATION_CRANDOR"],text:"A creeper that attaches to equipment disabling any use effects and preventing that player from winning."},{id:"CR02",type:"CREEPER",subtype:"LIVING_CREEPER",name:"Poison",effects:[],text:"A creeper that attaches to a living keeper disabling any use effects and preventing that player from winning."},{id:"CR03",type:"CREEPER",subtype:"LIVING_CREEPER",name:"Wizard Mind Bomb",effects:[],text:"Attaches to living keepers disabling, effects and prevents winning."},{id:"G01",type:"GOAL",subtype:"",name:"Your First Spell",effects:[],text:"To cast your first spell you must acquire the following reagents: |air rune| or |air staff|, |mind rune|."},{id:"G02",type:"GOAL",subtype:"",name:"Restless Ghost",effects:[],text:"In the cemetary of lumbridge you must put the |ghost| to rest. QUEST REQUIREMENTS: |ghost|, |ghostspeak amulet|, |father aereck|"},{id:"G03",type:"GOAL",subtype:"",name:"Ready To Slay A Dragon",effects:[],text:"Speak to |Duke Horacio| to get your |antifire shield|, then you can believe you can fight a dragon."},{id:"G04",type:"GOAL",subtype:"",name:"Dragon Slayer",effects:[],text:"Find your way to |crandor|, off the coast of misthalin and fight the dragon known as |Elvarg|. |antifire shield| is required."},{id:"G05",type:"GOAL",subtype:"",name:"Cook's Assistant",effects:[],text:"For most new adventurers, they end up helping |Cook| get ingredients for his |Cake| for the eternal duke's birthday."},{id:"G06",type:"GOAL",subtype:"",name:"Lumbridge Citizens",effects:[],text:"Collection type: lumbridge residents including the likes of |Duke Horacio|, |Cook| and |Father Aereck|"},{id:"G07",type:"GOAL",subtype:"",name:"Elemental Runes",effects:[],text:"Collection type: any 3 elemental |runes| from |Air|, |Water|, |Earth| or |Fire|"},{id:"G08",type:"GOAL",subtype:"",name:"Rune Mysteries",effects:[],text:"The path to unlocking runecraft requires the power of |Air|, QUEST REQUIREMENTS: |Air Rune|, |Archmage Sedridor|, |Duke Horacio|"},{id:"G09",type:"GOAL",subtype:"",name:"How to become a Chaos Dwarf",effects:[],text:"Under the curse of zamorak dwarves that use magic end up becoming corrupt and turning into chaos dwarves, requirements: |Drunken Dwarf|, |Wizard Mind Bomb|"},{id:"G10",type:"GOAL",subtype:"",name:"Drunken Wizard",effects:[],text:"A wizards favourite drinks got to be a |wizard mind bomb| right, so bring one to |Archmage Sedridor| for reasons."},{id:"G11",type:"GOAL",subtype:"",name:"Rock Cake",effects:[],text:"A secret cake baked only by dwarfs, requirements: |Drunken Dwarf|, |Cake|"},{id:"G12",type:"GOAL",subtype:"",name:"Alchemy",effects:[],text:"To cast alchemy spell you must have a |Nature rune| and |Fire Runes|"},{id:"G13",type:"GOAL",subtype:"",name:"Cursed",effects:[],text:"Not the spell, but someone who gains all 3 creepers must have bad luck right well now they can win, |Any 3 creepers|"},{id:"G14",type:"GOAL",subtype:"",name:"Regicide",effects:[],text:"Requirements: |King Roald|, |Poison|. Wait this isn't how regicide goes."},{id:"G15",type:"GOAL",subtype:"",name:"Animal Magnetism",effects:[],text:"The quest all aspiring newbie rangers rush to for some QoL ammo reservation, Requirements: |Ava|, |Ghostspeak Amulet|, |Ava's Attractor|"},{id:"G16",type:"GOAL",subtype:"",name:"Ranged Setup",effects:[],text:"The power houses of early game range. Requirements: |Rune Crossbow|, |Ava's Attractor|"},{id:"G17",type:"GOAL",subtype:"",name:"Draynor Manor",effects:[],text:"Collection type: residents of draynor manor |Ernest|, |Ava|, |Ghost|"},{id:"G18",type:"GOAL",subtype:"",name:"Swampmans Nightmares",effects:[],text:"|Rune Crossbow| and |Vampyre Juvinate|. You get the rest."},{id:"G19",type:"GOAL",subtype:"",name:"Entrana",effects:[],text:"Collection Type: |Law Rune|, |Draman Staff|"},{id:"G20",type:"GOAL",subtype:"",name:"Smuggler",effects:[],text:"Since equipment and runes aren't allowed on entrana, find a way to get them there. Requirements: |Entrana|, |Any 4 equipment or rune type keepers|."},{id:"G21",type:"GOAL",subtype:"",name:"Misthalins Nobility",effects:[],text:"Collection Type: |King Roald|, |Duke Horacio|"},{id:"G22",type:"GOAL",subtype:"",name:"Mind Goblin",effects:[],text:"They exist. |Mind Rune|, |Goblin|"},{id:"G23",type:"GOAL",subtype:"",name:"Zanaris",effects:[],text:"Collection Type: |Cosmic Rune|, |Dramen Staff|"},{id:"G24",type:"GOAL",subtype:"",name:"Catalytic Runes",effects:[],text:"Collection Type: |Mind Rune|, |Chaos Rune|"},{id:"G25",type:"GOAL",subtype:"",name:"Utility Runes",effects:[],text:"Collection Type: |Law Rune|, |Nature Rune|, |Cosmic Rune|"},{id:"G26",type:"GOAL",subtype:"",name:"Misthalins Altars",effects:[],text:"Collection Type: |Water Rune|, |Earth Rune|"},{id:"G27",type:"GOAL",subtype:"",name:"Zamorak",effects:[],text:"Collection Type: |Wilderness|, |Imp|, |Chaos Rune|"},{id:"G28",type:"GOAL",subtype:"",name:"Starter Monsters",effects:[],text:"Collection Type: |Imp|, |Goblin|, |Ernest(he's a chicken right)|"},{id:"G29",type:"GOAL",subtype:"",name:"Morytanias Low-Tier Undead",effects:[],text:"Collection Type: |Morytania|, |Ghost|, |Vampyre Juvinate|"},{id:"G30",type:"GOAL",subtype:"",name:"Port-Phasmatys",effects:[],text:"Collection Type: |4 ghosts| and location |Morytania|"},{id:"G31",type:"GOAL",subtype:"",name:"Chaos",effects:[],text:"Collection Type: |Abyss|, |Chaos Rune|"},{id:"G32",type:"GOAL",subtype:"",name:"Juvinile 'Rare Drop'",effects:[],text:"After defeating a |Vampyre juvinate|, you have been graced with the staff of utmost versatility the |Air Staff|."},{id:"G33",type:"GOAL",subtype:"",name:"Tribrid",effects:[],text:"Collection Type: |Rune Scimitar|, |Rune Crossbow|, |Air Staff|"},{id:"G34",type:"GOAL",subtype:"",name:"Melee Setup",effects:[],text:"Collection Type: |Rune Scimitar|, |Antidragon-fire shield|, |Cake|"},{id:"G35",type:"GOAL",subtype:"",name:"Chaos Dwarf",effects:[],text:"Collection Type: |Chaos Rune|, |Drunken Dwarf|"},{id:"G36",type:"GOAL",subtype:"",name:"Poison Removal",effects:[],text:"just gotta drink |Anti-Poison| to cure |Poison|."},{id:"G37",type:"GOAL",subtype:"",name:"Prevent Toxicity?",effects:[],text:"Does a |Anti Poison| protect from being told to sit in the |Wilderness|."},{id:"G38",type:"GOAL",subtype:"",name:"Varrock",effects:[],text:"Collection type: |Aris Maye|, |Reldo|, |King Roald|"},{id:"G39",type:"GOAL",subtype:"",name:"Recipe for Disaster",effects:[],text:"A long journey begins after speaking to the |Cook|. Freeing the members of the banquet will require help from |Aris Maye|."},{id:"GM01",type:"GOAL",subtype:"",name:"Spear and Shield",effects:[],text:"A spear that can pierce anything(|Verac|) and an impenetrable shield(|Torag|)."},{id:"GM02",type:"GOAL",subtype:"",name:"Risk and Safety",effects:[],text:"Stay close to 0 hitpoints(|Dharok|) and Heal up to full(|Guthan|)."},{id:"GM03",type:"GOAL",subtype:"",name:"Blighted mage and Tainted range",effects:[],text:"Collection type: |Ahrim| the blighted and |Karil| the tainted."},{id:"RL01",type:"RULE",subtype:"LOCATION",name:"Misthalin",effects:["LOCATION","MISTHALIN"],text:"teleport all players to the location of misthalin, this location has no special effects."},{id:"RL02",type:"RULE",subtype:"LOCATION",name:"Abyss",effects:["LOCATION","ABYSS"],text:"Once per turn, choose whether to draw 1 and play it."},{id:"RL03",type:"RULE",subtype:"LOCATION",name:"Asgarnia",effects:["LOCATION","ASGARNIA"],text:"When this card is in play, there can be 2 different goals in play. Only 1 is required to win."},{id:"RL04",type:"RULE",subtype:"LOCATION",name:"Morytania",effects:["LOCATION","MORYTANIA"],text:"When this card is in play, Ghosts have a 10% chance to spawn at the end of turns."},{id:"RL05",type:"RULE",subtype:"LOCATION",name:"Wilderness",effects:["LOCATION","WILDERNESS"],text:"When this card is in play, once per turn, choose a keeper to challenge and steal."},{id:"RL06",type:"RULE",subtype:"LOCATION",name:"Entrana",effects:["LOCATION","ENTRANA"],text:"When this card is in play, on arrival everyone must discard all equipment/rune keepers in play."},{id:"RL07",type:"RULE",subtype:"LOCATION",name:"Crandor",effects:["LOCATION","CRANDOR"],text:"When this card is in play, at the end of every turn discard one card."},{id:"RB01",type:"RULE",subtype:"BASIC",name:"Draw 2",effects:["RULE_DRAW","2"],text:"When this card is in play, each player will draw 2 cards per turn."},{id:"RB02",type:"RULE",subtype:"BASIC",name:"Draw 3",effects:["RULE_DRAW","3"],text:"When this card is in play, each player will draw 3 cards per turn."},{id:"RB03",type:"RULE",subtype:"BASIC",name:"Draw 4",effects:["RULE_DRAW","4"],text:"When this card is in play, each player will draw 4 cards per turn."},{id:"RB04",type:"RULE",subtype:"BASIC",name:"Draw 5",effects:["RULE_DRAW","5"],text:"When this card is in play, each player will draw 5 cards per turn."},{id:"RB05",type:"RULE",subtype:"BASIC",name:"Play 2",effects:["RULE_PLAY","2"],text:"When this card is in play, each player will play 2 cards per turn."},{id:"RB06",type:"RULE",subtype:"BASIC",name:"Play 3",effects:["RULE_PLAY","3"],text:"When this card is in play, each player will play 3 cards per turn."},{id:"RB07",type:"RULE",subtype:"BASIC",name:"Play 4",effects:["RULE_PLAY","4"],text:"When this card is in play, each player will play 4 cards per turn."},{id:"RB08",type:"RULE",subtype:"BASIC",name:"Play All",effects:["RULE_PLAY","99"],text:"When this card is in play, each player will play all cards per turn."},{id:"RB09",type:"RULE",subtype:"BASIC",name:"Hand Limit 1",effects:["RULE_HAND_LIMIT","1"],text:"When this card is in play, each player has to discard down to 1 card to end their turn."},{id:"RB10",type:"RULE",subtype:"BASIC",name:"Hand Limit 2",effects:["RULE_HAND_LIMIT","2"],text:"When this card is in play, each player has to discard down to 2 card to end their turn."},{id:"RB11",type:"RULE",subtype:"BASIC",name:"Hand Limit 3",effects:["RULE_HAND_LIMIT","3"],text:"When this card is in play, each player has to discard down to 3 card to end their turn."},{id:"RB12",type:"RULE",subtype:"BASIC",name:"Keeper Limit 3",effects:["RULE_KEEPER_LIMIT","3"],text:"When this card is in play, each player can have 3 keepers in play."},{id:"RB13",type:"RULE",subtype:"BASIC",name:"Keeper Limit 4",effects:["RULE_KEEPER_LIMIT","4"],text:"When this card is in play, each player can have 4 keepers in play."},{id:"RB14",type:"RULE",subtype:"BASIC",name:"Keeper Limit 1",effects:["RULE_KEEPER_LIMIT","1"],text:"When this card is in play, each player can have 1 keepers in play."},{id:"RB15",type:"RULE",subtype:"BASIC",name:"Teleblock",effects:["TELEBLOCK"],text:"When this card is in play, location can not be changed."},{id:"A01",type:"ACTION",subtype:"",name:"Teleport",effects:["TELEPORT"],text:"teleport to a random location."},{id:"A02",type:"ACTION",subtype:"",name:"Rules Reset",effects:["RULES_RESET"],text:"When played, all rules will be returned to their base values from the start of the game."},{id:"A03",type:"ACTION",subtype:"",name:"Pick up all keepers",effects:["KEEPERS_TO_HAND"],text:"When played, all players must pick up all their keepers in play."},{id:"A04",type:"ACTION",subtype:"",name:"Trade Hands",effects:["TRADE_HANDS"],text:"When played, choose a player to trade hands with."},{id:"A05",type:"ACTION",subtype:"",name:"Reset One Rule",effects:["RULE_RESET_CHOOSE"],text:"When played, choose 1 rule to reset."},{id:"A06",type:"ACTION",subtype:"",name:"Reset half of rules(upto)",effects:["RULE_RESET_CHOOSE","HALF","OPTIONAL"],text:"When played, choose up to half the rules to reset."},{id:"A07",type:"ACTION",subtype:"",name:"Draw 3, Play 2",effects:["DRAW_3_PLAY_2"],text:"Draw 3 cards, out of those 3 cards you must choose 2 to play and finally discard the remaining card."},{id:"A08",type:"ACTION",subtype:"",name:"Draw 2, Use'em",effects:["DRAW_2_PLAY_2"],text:"Draw 2 cards and immediately use them."},{id:"A09",type:"ACTION",subtype:"",name:"Draw 5, discard 2",effects:["DRAW_5_PLAY_3"],text:"Draw 5 cards, out of those 5 cards you must choose 3 to play and finally discard the remaining cards."},{id:"A10",type:"ACTION",subtype:"",name:"Everyone draw 1",effects:["DRAW_1","ALL_PLAYERS"],text:"All players draw 1 card."},{id:"A11",type:"ACTION",subtype:"",name:"Steal A Keeper",effects:["KEEPER_STEAL_CHOOSE"],text:"Choose a keeper on field to take into your possession."},{id:"A12",type:"ACTION",subtype:"",name:"Exchange Keepers",effects:["KEEPER_EXCHANGE_CHOOSE"],text:"Choose 2 keepers on the field and swap their locations."},{id:"A13",type:"ACTION",subtype:"",name:"Everyone Discard 1",effects:["DISCARD_1","ALL_PLAYERS"],text:"Each player will immediately discard one card."},{id:"A14",type:"ACTION",subtype:"",name:"Summon Ghost",effects:["SUMMON_GHOST"],text:"Summon a ghost to add to your keepers."},{id:"A15",type:"ACTION",subtype:"",name:"Destroy Keeper",effects:["DESTROY_1"],text:"Choose a keeper/creeper to destroy."},{id:"A16",type:"ACTION",subtype:"",name:"Scry and Acquire",effects:["DRAW_SPECIFIC_PURE"],text:"See into the future and choose a card to acquire."},{id:"A17",type:"ACTION",subtype:"",name:"Historical Research",effects:["DRAW_SPECIFIC_DISCARD"],text:"Look through past records and find the location of a card to acquire."},{id:"CO01",type:"COUNTER",subtype:"",name:"Telestop",effects:["TELESTOP_OR_LOCATION_MISTHALIN"],text:"Out of turn - stop an opposing players teleport| During your turn teleport to misthalin."},{id:"CO02",type:"COUNTER",subtype:"",name:"Canceled Plans",effects:["GOALSTOP_OR_GOALS_NONE"],text:"Out of turn - stop another player while they are playing a goal card| During turn discard all goals in play."},{id:"CO03",type:"COUNTER",subtype:"",name:"Belay That!",effects:["ACTIONSTOP_OR_DISCARD_1_ALL"],text:"Out of turn - stop another player while they are playing an action card| During turn every discards one."},{id:"CO04",type:"COUNTER",subtype:"",name:"That's Mine!",effects:["KEEPER_STEALSTOP_OR_KEEPER_STEAL"],text:"Out of turn - when another player trys to steal a keeper you steal it instead| During turn - choose a keeper to steal."},{id:"CO05",type:"COUNTER",subtype:"",name:"Veto!",effects:["RULESTOP_OR_RULE_RESET_3"],text:"Out of turn - stop another player while they are playing a rule card| During turn - reset up to 3 rules."},{id:"CO06",type:"COUNTER",subtype:"",name:"It's a Trap!",effects:["KEEPER_DISCARD_REFLECT_OR_KEEPER_DISCARD"],text:"Out of turn - when another player trys to destroy one of your keepers destroy a random one of theirs instead| During turn, choose a keeper to discard."}],tm={allCards:Dc},Bk=(()=>{const t=A=>{const g={airObj:!1,mindRune:!1};return A.forEach(R=>{R.id==="KR01"&&(g.mindRune=!0),(R.id==="KR03"||R.id==="KE03")&&(g.airObj=!0)}),g.airObj&&g.mindRune?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},e=A=>{const g={ghost:!1,ghostSpeak:!1,fatherAereck:!1};return A.forEach(R=>{R.id==="KL02"&&(g.ghost=!0),R.id==="KL04"&&(g.fatherAereck=!0),R.id==="KE01"&&(g.ghostSpeak=!0)}),g.ghost&&g.ghostSpeak&&g.fatherAereck?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},n=A=>{const g={dukeH:!1,antifireShield:!1};return A.forEach(R=>{R.id==="KL03"&&(g.dukeH=!0),R.id==="KE02"&&(g.antifireShield=!0)}),g.antifireShield&&g.dukeH?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},r=(A,g)=>{const R={crandor:!1,elvarg:!1,antifireShield:!1};return A.forEach(q=>{q.id==="CR01"&&(R.elvarg=!0),q.id==="KE02"&&(R.antifireShield=!0)}),g==="CRANDOR"&&(R.crandor=!0),R.crandor&&R.elvarg&&R.antifireShield?{hasWon:!0,bypassCreeper:!0}:{hasWon:!1,bypassCreeper:!1}},s=A=>{const g={cook:!1,cake:!1};return A.forEach(R=>{R.id==="K01"&&(g.cake=!0),R.id==="KL05"&&(g.cook=!0)}),g.cook&&g.cake?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},i=A=>{const g={dukeH:!1,cook:!1,fatherAereck:!1};A.forEach(q=>{q.id==="KL04"&&(g.fatherAereck=!0),q.id==="KL05"&&(g.cook=!0),q.id==="KL03"&&(g.dukeH=!0)});let R=0;return g.dukeH&&R++,g.cook&&R++,g.fatherAereck&&R++,R>=2?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},o=A=>{const g={airR:!1,fireR:!1,earthR:!1,waterR:!1};A.forEach(q=>{q.id==="KR03"&&(g.airR=!0),q.id==="KR06"&&(g.fireR=!0),q.id==="KR05"&&(g.earthR=!0),q.id==="KR04"&&(g.waterR=!0)});let R=0;return g.airR&&R++,g.earthR&&R++,g.fireR&&R++,g.waterR&&R++,R>=3?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},a=A=>{const g={airR:!1,archmage:!1,dukeH:!1};return A.forEach(R=>{R.id==="KR03"&&(g.airR=!0),R.id==="KL03"&&(g.dukeH=!0),R.id==="KL07"&&(g.archmage=!0)}),g.airR&&g.archmage&&g.dukeH?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},l=A=>{const g={drunkenDwarf:!1,wizardBeer:!1};return A.forEach(R=>{R.id==="KL06"&&(g.drunkenDwarf=!0),R.id==="CR03"&&(g.wizardBeer=!0)}),g.drunkenDwarf&&g.wizardBeer?{hasWon:!0,bypassCreeper:!0}:{hasWon:!1,bypassCreeper:!1}},u=A=>{const g={archmage:!1,wizardBeer:!1};return A.forEach(R=>{R.id==="KL07"&&(g.archmage=!0),R.id==="CR03"&&(g.wizardBeer=!0)}),g.archmage&&g.wizardBeer?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},d=A=>{const g={drunkenDwarf:!1,cake:!1};return A.forEach(R=>{R.id==="KL06"&&(g.drunkenDwarf=!0),R.id==="K01"&&(g.cake=!0)}),g.cake&&g.drunkenDwarf?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},c=A=>{const g={natureR:!1,fireR:!1};return A.forEach(R=>{R.id==="KR07"&&(g.natureR=!0),R.id==="KR06"&&(g.fireR=!0)}),g.fireR&&g.natureR?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},f=A=>{let g=0;return A.forEach(R=>{R.type==="CREEPER"&&g++}),g>=3?{hasWon:!0,bypassCreeper:!0}:{hasWon:!1,bypassCreeper:!1}},y=A=>{const g={kingRoald:!1,poison:!1};return A.forEach(R=>{R.id==="KL08"&&(g.kingRoald=!0),R.id==="CR02"&&(g.poison=!0)}),g.kingRoald&&g.poison?{hasWon:!0,bypassCreeper:!0}:{hasWon:!1,bypassCreeper:!1}},v=A=>{const g={ava:!1,ghostSpeak:!1,avaDevice:!1};return A.forEach(R=>{R.id==="KL09"&&(g.ava=!0),R.id==="KE05"&&(g.avaDevice=!0),R.id==="KE01"&&(g.ghostSpeak=!0)}),g.ava&&g.avaDevice&&g.ghostSpeak?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},w=A=>{const g={runeXbow:!1,avaDevice:!1};return A.forEach(R=>{R.id==="KE04"&&(g.runeXbow=!0),R.id==="KE05"&&(g.avaDevice=!0)}),g.avaDevice&&g.runeXbow?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},C=A=>{const g={ernest:!1,ava:!1,ghost:!1};return A.forEach(R=>{R.id==="KL01"&&(g.ernest=!0),R.id==="KL09"&&(g.ava=!0),R.id==="KL02"&&(g.ghost=!0)}),g.ava&&g.ernest&&g.ghost?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},h=A=>{const g={runeXbow:!1,vampyreJuvinate:!1};return A.forEach(R=>{R.id==="KE04"&&(g.runeXbow=!0),R.id==="KL10"&&(g.vampyreJuvinate=!0)}),g.runeXbow&&g.vampyreJuvinate?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},p=A=>{const g={lawR:!1,dramanStaff:!1};return A.forEach(R=>{R.id==="KE06"&&(g.dramanStaff=!0),R.id==="KR08"&&(g.lawR=!0)}),g.lawR&&g.dramanStaff?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},_=(A,g)=>{const R={entrana:!1,equipmentOrRune:0};return A.forEach(q=>{(q.subtype==="RUNE"||q.subtype==="EQUIPMENT")&&(R.equipmentOrRune+=1)}),g==="ENTRANA"&&(R.entrana=!0),R.entrana&&R.equipmentOrRune>=4?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},N=A=>{const g={kingRoald:!1,dukeH:!1};return A.forEach(R=>{R.id==="KL03"&&(g.dukeH=!0),R.id==="KL08"&&(g.kingRoald=!0)}),g.dukeH&&g.kingRoald?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},b=A=>{const g={mindR:!1,goblin:!1};return A.forEach(R=>{R.id==="KR01"&&(g.mindR=!0),R.id==="KL11"&&(g.goblin=!0)}),g.goblin&&g.mindR?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},M=A=>{const g={cosmicR:!1,dramanStaff:!1};return A.forEach(R=>{R.id==="KE06"&&(g.dramanStaff=!0),R.id==="KR09"&&(g.cosmicR=!0)}),g.cosmicR&&g.dramanStaff?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},O=A=>{const g={mindR:!1,chaosR:!1};return A.forEach(R=>{R.id==="KR01"&&(g.mindR=!0),R.id==="KR02"&&(g.chaosR=!0)}),g.chaosR&&g.mindR?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},k=A=>{const g={lawR:!1,natureR:!1,cosmicR:!1};return A.forEach(R=>{R.id==="KE07"&&(g.natureR=!0),R.id==="KR08"&&(g.lawR=!0),R.id==="KR09"&&(g.cosmicR=!0)}),g.cosmicR&&g.lawR&&g.natureR?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},j=A=>{const g={waterR:!1,earthR:!1};return A.forEach(R=>{R.id==="KR05"&&(g.earthR=!0),R.id==="KR04"&&(g.waterR=!0)}),g.earthR&&g.waterR?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},W=(A,g)=>{const R={wilderness:!1,imp:!1,chaosR:!1};return A.forEach(q=>{q.id==="KL12"&&(R.imp=!0),q.id==="KR02"&&(R.chaosR=!0)}),g==="WILDERNESS"&&(R.wilderness=!0),R.chaosR&&R.wilderness&&R.imp?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},z=A=>{const g={imp:!1,goblin:!1,ernest:!1};return A.forEach(R=>{R.id==="KL12"&&(g.imp=!0),R.id==="KL11"&&(g.goblin=!0),R.id==="KL01"&&(g.ernest=!0)}),g.ernest&&g.goblin&&g.imp?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},Ae=(A,g)=>{const R={morytania:!1,ghost:!1,vampyreJuvinate:!1};return A.forEach(q=>{q.id==="KL02"&&(R.ghost=!0),q.id==="KL10"&&(R.vampyreJuvinate=!0)}),g==="MORYTANIA"&&(R.morytania=!0),console.log(R),R.ghost&&R.morytania&&R.vampyreJuvinate?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},Ne=(A,g)=>{const R={morytania:!1,ghost:0};return A.forEach(q=>{q.id==="KL11"&&(R.ghost+=1)}),g==="MORYTANIA"&&(R.morytania=!0),R.ghost>=4&&R.morytania?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},Le=(A,g)=>{const R={abyss:!1,chaosR:!1};return A.forEach(q=>{q.id==="KR02"&&(R.chaosR=!0)}),g==="ABYSS"&&(R.abyss=!0),R.abyss&&R.chaosR?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},Nt=A=>{const g={vampyreJuvinate:!1,airStaff:!1};return A.forEach(R=>{R.id==="KL10"&&(g.vampyreJuvinate=!0),R.id==="KE03"&&(g.airStaff=!0)}),g.airStaff&&g.vampyreJuvinate?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},Kt=A=>{const g={runeScimitar:!1,runeXbow:!1,airStaff:!1};return A.forEach(R=>{R.id==="KE07"&&(g.runeScimitar=!0),R.id==="KE04"&&(g.runeXbow=!0),R.id==="KE03"&&(g.airStaff=!0)}),g.airStaff&&g.runeScimitar&&g.runeXbow?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},S=A=>{const g={runeScimitar:!1,antfireShield:!1,cake:!1};return A.forEach(R=>{R.id==="KE07"&&(g.runeScimitar=!0),R.id==="KE02"&&(g.antfireShield=!0),R.id==="K01"&&(g.cake=!0)}),g.antfireShield&&g.cake&&g.runeScimitar?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},I=A=>{const g={chaosR:!1,drunkenDwarf:!1};return A.forEach(R=>{R.id==="KR02"&&(g.chaosR=!0),R.id==="KL06"&&(g.drunkenDwarf=!0)}),g.chaosR&&g.drunkenDwarf?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},T=A=>{const g={antiPoison:!1,poison:!1};return A.forEach(R=>{R.id==="CR02"&&(g.poison=!0),R.id==="K02"&&(g.antiPoison=!0)}),g.antiPoison&&g.poison?{hasWon:!0,bypassCreeper:!0}:{hasWon:!1,bypassCreeper:!1}},L=(A,g)=>{const R={antiPoison:!1,wilderness:!1};return A.forEach(q=>{q.id==="K02"&&(R.antiPoison=!0)}),g==="WILDERNESS"&&(R.wilderness=!0),R.antiPoison&&R.wilderness?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},D=A=>{const g={arisMaye:!1,reldo:!1,kingRoald:!1};return A.forEach(R=>{R.id==="KL14"&&(g.reldo=!0),R.id==="KL13"&&(g.arisMaye=!0),R.id==="KL08"&&(g.kingRoald=!0)}),g.kingRoald&&g.arisMaye&&g.reldo?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},K=A=>{const g={arisMaye:!1,cook:!1};return A.forEach(R=>{R.id==="KL05"&&(g.cook=!0),R.id==="KL13"&&(g.arisMaye=!0)}),g.cook&&g.arisMaye?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},B=A=>{const g={verac:!1,torag:!1};return A.forEach(R=>{R.id==="KLM02"&&(g.verac=!0),R.id==="KLM01"&&(g.torag=!0)}),g.torag&&g.verac?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},X=A=>{const g={guthan:!1,dharok:!1};return A.forEach(R=>{R.id==="KLM03"&&(g.guthan=!0),R.id==="KLM04"&&(g.dharok=!0)}),g.guthan&&g.dharok?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}},Q=A=>{const g={karil:!1,ahrim:!1};return A.forEach(R=>{R.id==="KLM05"&&(g.karil=!0),R.id==="KLM06"&&(g.ahrim=!0)}),g.karil&&g.ahrim?{hasWon:!0,bypassCreeper:!1}:{hasWon:!1,bypassCreeper:!1}};return{compareKeepersToGoal:(A,g,R)=>{if(!g)return{hasWon:!1,bypassCreeper:!1};switch(g.id){case"G01":return t(A);case"G02":return e(A);case"G03":return n(A);case"G04":return r(A,R);case"G05":return s(A);case"G06":return i(A);case"G07":return o(A);case"G08":return a(A);case"G09":return l(A);case"G10":return u(A);case"G11":return d(A);case"G12":return c(A);case"G13":return f(A);case"G14":return y(A);case"G15":return v(A);case"G16":return w(A);case"G17":return C(A);case"G18":return h(A);case"G19":return p(A);case"G20":return _(A,R);case"G21":return N(A);case"G22":return b(A);case"G23":return M(A);case"G24":return O(A);case"G25":return k(A);case"G26":return j(A);case"G27":return W(A,R);case"G28":return z(A);case"G29":return Ae(A,R);case"G30":return Ne(A,R);case"G31":return Le(A,R);case"G32":return Nt(A);case"G33":return Kt(A);case"G34":return S(A);case"G35":return I(A);case"G36":return T(A);case"G37":return L(A,R);case"G38":return D(A);case"G39":return K(A);case"GM01":return B(A);case"GM02":return X(A);case"GM03":return Q(A)}return{hasWon:!1,bypassCreeper:!1}}}})();var fe=(t=>(t[t.INIT=0]="INIT",t[t.CHANGE_TURN=1]="CHANGE_TURN",t[t.DRAWN_ADD=2]="DRAWN_ADD",t[t.PLAYED_ADD=3]="PLAYED_ADD",t[t.TEMPORARY_HAND__BEGIN=4]="TEMPORARY_HAND__BEGIN",t[t.TEMPORARY_HAND__END=5]="TEMPORARY_HAND__END",t[t.TEMPORARY_HAND_CARD__ADD=6]="TEMPORARY_HAND_CARD__ADD",t[t.TEMPORARY_HAND_CARD__REMOVE=7]="TEMPORARY_HAND_CARD__REMOVE",t[t.TEMPORARY_PLAY_CHANGE=8]="TEMPORARY_PLAY_CHANGE",t[t.DUEL_BEGIN=9]="DUEL_BEGIN",t[t.DUEL_ROLL__PLAYER_1=10]="DUEL_ROLL__PLAYER_1",t[t.DUEL_ROLL__PLAYER_2=11]="DUEL_ROLL__PLAYER_2",t[t.DUEL_END=12]="DUEL_END",t[t.DUEL_COOLDOWN=13]="DUEL_COOLDOWN",t))(fe||{}),ye=(t=>(t[t.INIT=0]="INIT",t[t.DECK_REPLACE__PURE=1]="DECK_REPLACE__PURE",t[t.DECK_REPLACE__DISCARD_TO_PURE=2]="DECK_REPLACE__DISCARD_TO_PURE",t[t.DECK_REMOVE__PURE_TOP=3]="DECK_REMOVE__PURE_TOP",t[t.DECK_REMOVE__PURE_SPECIFIC=4]="DECK_REMOVE__PURE_SPECIFIC",t[t.DECK_REMOVE__DISCARD_SPECIFIC=5]="DECK_REMOVE__DISCARD_SPECIFIC",t[t.DECK_SHUFFLE__PURE=6]="DECK_SHUFFLE__PURE",t[t.DECK_ADD__DISCARD_BOT=7]="DECK_ADD__DISCARD_BOT",t))(ye||{}),ve=(t=>(t[t.INIT=0]="INIT",t[t.RULE_CHANGE__DRAW=1]="RULE_CHANGE__DRAW",t[t.RULE_CHANGE__PLAY=2]="RULE_CHANGE__PLAY",t[t.RULE_CHANGE__KEEPER_LIMIT=3]="RULE_CHANGE__KEEPER_LIMIT",t[t.RULE_CHANGE__HAND_LIMIT=4]="RULE_CHANGE__HAND_LIMIT",t[t.RULE_CHANGE__LOCATION=5]="RULE_CHANGE__LOCATION",t[t.RULE_CHANGE__LOCATION_RANDOM=6]="RULE_CHANGE__LOCATION_RANDOM",t[t.RULE_CHANGE__TELEBLOCK=7]="RULE_CHANGE__TELEBLOCK",t[t.RULE_RESET__CHOICE=8]="RULE_RESET__CHOICE",t[t.RULE_RESET__ALL=9]="RULE_RESET__ALL",t))(ve||{}),J=(t=>(t[t.INIT=0]="INIT",t[t.HAND_CARDS__ADD=1]="HAND_CARDS__ADD",t[t.HAND_CARDS__REMOVE=2]="HAND_CARDS__REMOVE",t[t.KEEPER_CARDS__ADD=3]="KEEPER_CARDS__ADD",t[t.KEEPER_CARDS__REMOVE=4]="KEEPER_CARDS__REMOVE",t[t.KEEPER_CARDS__EXCHANGE=5]="KEEPER_CARDS__EXCHANGE",t[t.KEEPER_COOLDOWN__SET=6]="KEEPER_COOLDOWN__SET",t[t.TRADE_HANDS=7]="TRADE_HANDS",t))(J||{}),Dt=(t=>(t[t.INIT=0]="INIT",t[t.GOAL_REPLACE__SINGLE=1]="GOAL_REPLACE__SINGLE",t[t.GOAL_ADD__MULTI=2]="GOAL_ADD__MULTI",t[t.GOAL_REPLACE__MULTI=3]="GOAL_REPLACE__MULTI",t[t.GOAL_RESET=4]="GOAL_RESET",t))(Dt||{});const{compareKeepersToGoal:$k}=Bk,{convertGameToRoomGame:zk,convertToRoomPlayer:Vk}=Sl,Tf=(()=>{const t=(S,I)=>{const{player:T,victim:L,amount:D,duelCard:K,cards:B,init:X}=I.payload,{db:Q,gameId:Z}=I.payload.upload,{temporary:A}=S,g=Math.ceil(Math.random()*100);switch(I.type){case fe.INIT:return Object.assign({},S,{...X});case fe.CHANGE_TURN:return a("TURN",Q,{turnState:Object.assign({},S,{player:T,drawn:0,played:0})},Z),Object.assign({},S,{player:T,drawn:0,played:0});case fe.DRAWN_ADD:return a("TURN",Q,{turnState:Object.assign({},S,{player:T,drawn:D})},Z),Object.assign({},S,{player:T,drawn:D});case fe.PLAYED_ADD:return a("TURN",Q,{turnState:Object.assign({},S,{played:D})},Z),Object.assign({},S,{played:D});case fe.TEMPORARY_HAND__BEGIN:return a("TURN",Q,{turnState:Object.assign({},S,{temporary:{...A,hand:B?[...B]:[],play:D??0}})},Z),Object.assign({},S,{temporary:{...A,hand:B?[...B]:[]},play:D??0});case fe.TEMPORARY_HAND_CARD__REMOVE:return a("TURN",Q,{turnState:Object.assign({},S,{temporary:{...A,hand:B?[...B]:[]}})},Z),Object.assign({},S,{temporary:{...A,hand:B?[...B]:[]}});case fe.TEMPORARY_HAND_CARD__ADD:return a("TURN",Q,{turnState:Object.assign({},S,{temporary:{...A,hand:A&&B?[...A.hand,...B]:[]}})},Z),Object.assign({},S,{temporary:{...A,hand:A&&B?[...A.hand,...B]:[]}});case fe.TEMPORARY_PLAY_CHANGE:return a("TURN",Q,{turnState:Object.assign({},S,{temporary:{...A,play:D}})},Z),Object.assign({},S,{temporary:{...A,play:D}});case fe.DUEL_BEGIN:return a("TURN",Q,{turnState:Object.assign({},S,{duel:{cooldown:!0,card:K,player1:{id:T,num:0},player2:{id:L,num:0}}})},Z),Object.assign({},S,{duel:{cooldown:!0,card:K,player1:{id:T,num:0},player2:{id:L,num:0}}});case fe.DUEL_ROLL__PLAYER_1:return a("TURN",Q,{turnState:Object.assign({},S,{duel:{...S.duel,player1:{...S.duel.player1,num:g}}})},Z),Object.assign({},S,{duel:{...S.duel,player1:{...S.duel.player1,num:g}}});case fe.DUEL_ROLL__PLAYER_2:return a("TURN",Q,{turnState:Object.assign({},S,{duel:{...S.duel,player2:{...S.duel.player2,num:g}}})},Z),Object.assign({},S,{duel:{...S.duel,player2:{...S.duel.player2,num:g}}});case fe.DUEL_END:return a("TURN",Q,{turnState:Object.assign({},S,{duel:{...S.duel,player1:{id:"",num:0},player2:{id:"",num:0}}})},Z),Object.assign({},S,{duel:{...S.duel,player1:{id:"",num:0},player2:{id:"",num:0}}});case fe.DUEL_COOLDOWN:return a("TURN",Q,{turnState:Object.assign({},S,{duel:{...S.duel,cooldown:!1}})},Z),Object.assign({},S,{duel:{...S.duel,cooldown:!1}});default:return S}},e=(S,I)=>{const{init:T,ruleKey:L,amount:D,location:K,teleblock:B}=I.payload,{db:X,gameId:Q}=I.payload.upload,Z=["MISTHALIN","ASGARNIA","MORYTANIA","ABYSS","ENTRANA","CRANDOR"],A=Math.floor(Math.random()*Z.length);switch(I.type){case ve.INIT:return Object.assign({},S,{...T});case ve.RULE_CHANGE__DRAW:return a("RULES",X,{ruleState:{...S,drawAmount:D??1}},Q),Object.assign({},S,{drawAmount:D??1});case ve.RULE_CHANGE__PLAY:return a("RULES",X,{ruleState:{...S,playAmount:D??1}},Q),Object.assign({},S,{playAmount:D??1});case ve.RULE_CHANGE__HAND_LIMIT:return a("RULES",X,{ruleState:{...S,handLimit:D??1}},Q),Object.assign({},S,{handLimit:D??1});case ve.RULE_CHANGE__KEEPER_LIMIT:return a("RULES",X,{ruleState:{...S,keeperLimit:D??1}},Q),Object.assign({},S,{keeperLimit:D??1});case ve.RULE_CHANGE__LOCATION:return a("RULES",X,{ruleState:{...S,location:K??"MISTHALIN"}},Q),Object.assign({},S,{location:K??"MISTHALIN"});case ve.RULE_CHANGE__LOCATION_RANDOM:return a("RULES",X,{ruleState:{...S,location:Z[A]}},Q),Object.assign({},S,{location:Z[A]});case ve.RULE_CHANGE__TELEBLOCK:return a("RULES",X,{ruleState:{...S,teleblock:B??!1}},Q),Object.assign({},S,{teleblock:B??!1});case ve.RULE_RESET__CHOICE:return a("RULES",X,{ruleState:{...S,[`${L}`]:O(L??"")}},Q),Object.assign({},S,{[`${L}`]:O(L??"")});case ve.RULE_RESET__ALL:return a("RULES",X,{ruleState:{...Zs}},Q),Object.assign({},S,{...Zs});default:return S}},n=(S,I)=>{const{pile:T,amount:L,cardIndex:D,init:K}=I.payload,{db:B,gameId:X}=I.payload.upload;switch(I.type){case ye.INIT:return Object.assign({},S,{...K});case ye.DECK_REPLACE__PURE:return a("DECK_PURE",B,{deckState:T},X),Object.assign({},S,{pure:[...T]});case ye.DECK_REPLACE__DISCARD_TO_PURE:return a("DECK_PURE",B,{deckState:[...T]},X),a("DECK_DISCARD",B,{deckState:[]},X),Object.assign({},S,{pure:[...T],discard:[]});case ye.DECK_REMOVE__PURE_TOP:return a("DECK_PURE",B,{deckState:[...S.pure.slice(0,S.pure.length-(L??0))]},X),Object.assign({},S,{pure:[...S.pure.slice(0,S.pure.length-(L??0))]});case ye.DECK_REMOVE__PURE_SPECIFIC:return a("DECK_PURE",B,{deckState:[...Le(S.pure,D??0)]},X),Object.assign({},S,{pure:[...Le(S.pure,D??0)]});case ye.DECK_REMOVE__DISCARD_SPECIFIC:return a("DECK_DISCARD",B,{deckState:[...Le(S.discard,D??0)]},X),Object.assign({},S,{discard:[...Le(S.discard,D??0)]});case ye.DECK_ADD__DISCARD_BOT:return a("DECK_DISCARD",B,{deckState:T?[...T].concat([...S.discard]):[]},X),Object.assign({},S,{discard:T?[...T].concat([...S.discard]):[]});case ye.DECK_SHUFFLE__PURE:return a("DECK_PURE",B,{deckState:[...Nt(S.pure)]},X),Object.assign({},S,{pure:[...Nt(S.pure)]});default:return S}},r=(S,I)=>{const{playerId:T,init:L,cards:D,targetPlayerId:K,keepersToExchange:B,cardIndex:X,cooldown:Q}=I.payload,{db:Z,gameId:A}=I.payload.upload,g=[...S],R=_(S,T),q=K?_(S,K):{state:{},index:0};switch(I.type){case J.INIT:return L?[...L]:[];case J.HAND_CARDS__ADD:return g[R.index]=Object.assign({},R.state,{hand:[...R.state.hand,...D??[]]}),a("PLAYER",Z,{playersState:g,playerId:T},A),[...g];case J.HAND_CARDS__REMOVE:return g[R.index].hand=D?[...D]:[],a("PLAYER",Z,{playersState:g,playerId:T},A),[...g];case J.KEEPER_CARDS__ADD:return g[R.index]=Object.assign({},R.state,{keepers:R.state.keepers?[...R.state.keepers,...D??[]]:[...D??[]]}),a("PLAYER",Z,{playersState:g,playerId:T},A),[...g];case J.KEEPER_CARDS__REMOVE:return g[R.index].keepers=D?[...D]:[],a("PLAYER",Z,{playersState:g,playerId:T},A),[...g];case J.KEEPER_CARDS__EXCHANGE:return B?(console.log(B),g[B[0].playerIndex]=Object.assign({},g[B[0].playerIndex],{keepers:[...Le([...g[B[0].playerIndex].keepers],B[0].index),D?D[1]:{}]}),g[B[1].playerIndex]=Object.assign({},g[B[1].playerIndex],{keepers:[...Le([...g[B[1].playerIndex].keepers],B[1].index),D?D[0]:{}]}),a("PLAYER",Z,{playersState:g,playerId:g[B[0].playerIndex].user.uid},A),a("PLAYER",Z,{playersState:g,playerId:g[B[1].playerIndex].user.uid},A),[...g]):[...g];case J.KEEPER_COOLDOWN__SET:return g[R.index].keepers[X??0].cooldown=Q,a("PLAYER",Z,{playersState:g,playerId:T},A),[...g];case J.TRADE_HANDS:return g[R.index]=Object.assign({},R.state,{hand:[...q.state.hand]}),g[(q==null?void 0:q.index)??0]=Object.assign({},q==null?void 0:q.state,{hand:[...R.state.hand]}),a("PLAYER",Z,{playersState:g,playerId:T},A),a("PLAYER",Z,{playersState:g,playerId:K},A),[...g];default:return S}},s=(S,I)=>{const{goals:T,replaceIndex:L}=I.payload,{db:D,gameId:K}=I.payload.upload;switch(I.type){case Dt.INIT:return T?[...T]:[];case Dt.GOAL_REPLACE__SINGLE:return a("GOAL",D,{goalState:T!=null&&T.length?[...T]:[]},K),[...T];case Dt.GOAL_ADD__MULTI:return a("GOAL",D,{goalState:T!=null&&T.length?[...S,...T]:[]},K),[...S,...T];case Dt.GOAL_REPLACE__MULTI:return a("GOAL",D,{goalState:L===0?[...T,S[1]]:[S[0],...T]},K),L===0?[...T,S[1]]:[S[0],...T];case Dt.GOAL_RESET:return a("GOAL",D,{goalState:[]},K),[];default:return S}},i=S=>{const I={deck:{pure:[],discard:[]},players:[{user:S??{username:"hal",uid:"000001",isReady:!0},hand:[],keepers:[],isReady:!1}],goal:[],round:0,pending:!1,counter:!1,isWon:!1,phases:{morytania:0,abyss:0,wilderness:0}};for(const L of Bv.startDeck)I.deck.pure.push(L);return Object.assign({},I,{rules:Zs,turn:{player:!1,drawn:0,played:0,temporary:{hand:[],play:0},duel:{cooldown:!1,card:null,player1:{id:"",num:0},player2:{id:"",num:0}}}})},o=async(S,I,T)=>{try{const L=oe(I,`/games/${S}/game`);await Nn(Me(L,"/")).then(async D=>{const K=await D.val();T(K.deck,K.goal,K.rules,K.players,K.turn,K.round,K.pending,K.counter,K.isWon,K.phases)}),await hv(L,async D=>{const K=await D.val();T(K.deck,K.goal,K.rules,K.players,K.turn,K.round,K.pending,K.counter,K.isWon,K.phases)})}catch(L){console.error(L)}},a=(S,I,T,L)=>{const{gameState:D,deckState:K,turnState:B,playersState:X,playerId:Q,roundState:Z,ruleState:A,cardState:g,goalState:R,phaseState:q}=T;switch(S){case"DECK_PURE":return u(I,K??[],L);case"DECK_DISCARD":return u(I,K??[],L,!0);case"RULES":return c(I,A??{},L);case"TURN":return d(I,B??{},L);case"PLAYER":return f(I,X??[],Q??"",L);case"ROUND":return y(I,Z??0,L);case"PENDING":return v(I,g??!1,L);case"COUNTER":return w(I,g??!1,L);case"GOAL":return C(I,R??[],L);case"WIN":return h(I,L);case"PHASE":return p(I,(q==null?void 0:q.location)??"",(q==null?void 0:q.amount)??0,L);default:return l(I,D??{},L)}},l=async(S,I,T)=>{try{const L=zk(I),D=oe(S,`/games/${T}/game`);await le(D,L)}catch(L){return console.error(L)}},u=async(S,I,T,L=!1)=>{try{const K=oe(S,`/games/${T}/game/deck/${L?"discard":"pure"}`);await le(K,I.length?I:!1)}catch(D){return console.error(D)}},d=async(S,I,T)=>{try{const L=oe(S,`/games/${T}/game/turn`);await le(L,Object.assign({},I,{temporary:{...I.temporary,hand:I.temporary.hand.length?I.temporary.hand:!1}}))}catch(L){return console.error(L)}},c=async(S,I,T)=>{try{const L=oe(S,`/games/${T}/game/rules`);await le(L,I)}catch(L){return console.error(L)}},f=async(S,I,T,L)=>{try{const{state:D,index:K}=_(I,T),B=Vk(D),X=oe(S,`/games/${L}/game/players/${K}`);await le(X,B)}catch(D){return console.error(D)}},y=async(S,I,T)=>{try{const L=oe(S,`/games/${T}/game/round`);await le(L,I)}catch(L){return console.error(L)}},v=async(S,I,T)=>{try{const L=oe(S,`/games/${T}/game/pending`);await le(L,I)}catch(L){return console.error(L)}},w=async(S,I,T)=>{try{const L=oe(S,`/games/${T}/game/counter`);await le(L,I)}catch(L){return console.error(L)}},C=async(S,I,T)=>{try{const L=oe(S,`/games/${T}/game/goal`);await le(L,I!=null&&I.length?I:!1)}catch(L){return console.error(L)}},h=async(S,I)=>{try{const T=oe(S,`/games/${I}/game/isWon`);await le(T,!0)}catch(T){return console.error(T)}},p=async(S,I,T,L)=>{try{const D=oe(S,`/games/${L}/game/phases/${I}`);await le(D,T??0)}catch(D){return console.error(D)}},_=(S,I)=>{for(let T=0;T<S.length;T++)if(I===S[T].user.uid)return{state:S[T],index:T};return{state:S[0],index:0}},N=(S,I)=>{if(!S.keepers)return!1;for(const T of S.keepers)if(T.id===I)return T;return!1},b=S=>{for(const I of tm.allCards)if(S===I.id)return I;return tm.allCards[0]},M=(S,I)=>{for(let T=0;T<I.length;T++)if(S===I[T].id)return{state:I[T],index:T};return{state:I[0],index:0}},O=S=>{const I=Zs;for(const T in I)if(S===T)return I[T];return 0},k=S=>{const I=Math.floor(Math.random()*S.length);return S[I].user.uid},j=S=>{switch(S){case"GOAL":case"KEEPER":case"CREEPER":return!1;case"ACTION":case"COUNTER":case"RULE":return!0;default:return!0}},W=S=>{const I=[];for(const T of S)T.type==="CREEPER"&&I.push(T);return I},z=(S,I)=>{const T={keeper:null,index:0,playerIndex:0};return S.forEach((L,D)=>{L.keepers&&L.keepers.forEach((K,B)=>{K.id===I&&(T.keeper=K,T.index=B,T.playerIndex=D)})}),T},Ae=(S,I,T)=>{const L={playerId:"",hasCreeper:!1,bypassCreeper:!1,hasWon:!1};return S.forEach(D=>{if(!D.keepers)return;const{hasWon:K,bypassCreeper:B}=$k(D.keepers,I,T);K&&(D.keepers.forEach(X=>{X.type==="CREEPER"&&(L.hasCreeper=!0)}),L.hasWon=K,L.bypassCreeper=B,L.playerId=D.user.uid)}),console.log(L),L.playerId!==""&&!L.hasCreeper||L.hasCreeper&&L.bypassCreeper?L.playerId:!1},Ne=S=>S.round===0?3:S.rules.drawAmount-S.turn.drawn,Le=(S,I)=>{const T=S.slice(0,I),L=S.slice(I+1);return T.concat(L)},Nt=S=>{const I=[],T=[...S],L=S.length;for(let D=L;D>0;D--){const K=Math.floor(Math.random()*D);I.push(T[K]),T.splice(K,1)}return I};return{loadGame:i,connectGame:o,upload:a,uploadTable:l,getPlayer:_,getPlayerKeeper:N,getCardById:b,getDeckCardById:M,getInitRule:O,chooseWhoGoesFirst:k,checkShouldDiscard:j,checkForCreepers:W,checkPlayersForKeeper:z,checkIfWon:Ae,drawPhase:Ne,removeCard:Le,shuffleDeck:Nt,endTurn:(S,I,T,L,D)=>{const K=_(I,T.player.toString()),B=K.index<I.length-1?K.index+1:0;return L({type:1,payload:{player:I[B].user.uid,upload:{db:S,gameId:D}}}),!B},turnReducer:t,goalReducer:s,rulesReducer:e,playerReducer:r,deckReducer:n}})();function Yk(){return m.jsx("div",{className:"deck_container",children:Array.from([0,1,2,3,4,5]).map(t=>m.jsx("div",{style:{transform:`rotateZ(-3deg) translate(calc(2px * ${t}), calc(-4px * ${t}))`},className:"card_back card deck_card"},`deck_card__${t}`))})}function qk({drawCards:t}){return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"underlay"}),m.jsxs("div",{className:"popup",children:[m.jsx(Yk,{}),m.jsx("button",{className:"menu_link",onClick:t,children:"Draw Cards"})]})]})}function Wt({cardState:t,position:e,numberInLine:n,inspectKeeper:r,selectCard:s,selectedGoalGroup:i,selectGoalGroup:o}){const{user:a}=P.useContext(rt),[l,u]=P.useState(!1),[d,c]=P.useState(e==="HAND");P.useEffect(()=>{setTimeout(()=>{c(()=>!1)},300)},[]);const f=`translate(calc(-50% * ${n}), -250px)`,y=`translate(calc(-50% * ${n}), ${l?"-50px":"0"})`,v=()=>{if(!i)return!1;for(const _ of i)if(_.state.id===t.state.id)return!0;return!1},w=()=>{if(a!=null&&a.cardCatalog&&(e==="HAND"||e==="SELECT"||e==="CATALOG")){const _=a==null?void 0:a.cardCatalog[`${t.state.id}`];if(!_)return"";if(_>999)return"gtrim twilight";if(_>499)return"gtrim";if(_>249)return"strim";if(_>49)return"btrim"}},C=_=>_.split(" ").join("_").toLowerCase(),h=()=>t.state.text.split("|").map((_,N)=>m.jsx("span",{style:{color:N%2===1?"pink":"white"},children:_},`card_text__${N}`)),p=()=>t.state.text.split("|").map((_,N)=>m.jsx("span",{className:"counter_p",children:_},`counter_text__${N}`));return t.state?m.jsxs("div",{className:`card ${w()} ${t.state.type.toLowerCase()} ${e==="PREVIOUS_PENDING"?"previous_pending":""} ${e==="PENDING"?"pending":""} ${e==="HAND"?"hand_card":""} ${v()?"goal_selected":""}`,style:e==="HAND"?{transform:d?f:y}:e==="CREEPER"?{transform:"scale(0.3) translate(-300px, -100px)"}:{},onMouseEnter:_=>{d||(_.stopPropagation(),u(!0))},onMouseLeave:_=>{_.stopPropagation(),u(!1)},onClick:r?()=>r({...t,playerIndex:0}):()=>s&&s(t),onContextMenu:_=>{_.preventDefault(),!(!o||t.state.type!=="GOAL")&&o(t)},children:[m.jsx("div",{className:"card_container__inner_left",children:m.jsx("div",{className:"card_header__background",children:m.jsx("h4",{className:"card_header__text",children:t.state.name.split(" ").join("_")})})}),m.jsxs("div",{className:"card_container__inner_right",children:[m.jsxs("h2",{children:[t.state.type,m.jsx("span",{className:`${t.state.subtype.toLowerCase()}_subtype icon card_subtype`})]}),m.jsx("h3",{children:t.state.name}),m.jsx("hr",{className:"card_hr__thick"}),m.jsx("p",{children:t.state.type==="GOAL"?h():t.state.type==="COUNTER"?p():t.state.text}),m.jsx("div",{className:`${C(t.state.name)} card_image`})]})]}):null}function bc({hand:t,selectCard:e}){const n=()=>t.map((r,s)=>m.jsx(Wt,{cardState:{state:r,index:s},position:"HAND",numberInLine:s+1,selectCard:e},`hand_card_${s}`));return m.jsx("div",{className:"hand_container",children:n()})}function Nf({message:t,clearErrors:e}){return m.jsx("div",{className:"errors_container",onAnimationEnd:e,children:m.jsx("p",{className:"errors_message",children:t})})}function Qk({cardState:t,table:e,localPlayer:n,playCard:r,discardCard:s,fromWormhole:i,selectedKeeperGroup:o,selectedPlayerGroup:a,selectedRuleGroup:l}){const[u,d]=P.useState([]),[c,f]=P.useState([]),{user:y}=P.useContext(rt),v=()=>{if(t.state.type==="COUNTER"&&e.turn.player!==(y==null?void 0:y.uid))return w();const{player:k,played:j,temporary:W}=e.turn;if(i){if(!W)return!1;const z=(W==null?void 0:W.play)<1,Ae=t.state.type==="ACTION"||t.state.type==="COUNTER"||t.state.subtype==="LOCATION"?h(t.state.id).error:!1;if(z||Ae)return[z,!0,Ae]}else{const z=j>=e.rules.playAmount,Ae=k===(y==null?void 0:y.uid),Ne=t.state.type==="ACTION"||t.state.type==="COUNTER"||t.state.subtype==="LOCATION"?h(t.state.id).error:!1;if(z||!Ae||Ne)return[z,Ae,Ne]}return!1},w=()=>{const{type:k,subtype:j}=e.pending&&e.pending!==!0?e.pending:{type:"",subtype:""},W=!e.pending,z=[];return t.state.id==="CO01"&&j==="LOCATION"&&C()&&z.push(!1),t.state.id==="CO02"&&k==="GOAL"&&z.push(!1),t.state.id==="CO03"&&k==="ACTION"&&z.push(!1),t.state.id==="CO04"&&C()&&z.push(!1),t.state.id==="CO05"&&j==="BASIC"&&z.push(!1),t.state.id==="CO06"&&C()&&z.push(!1),W||!z.length?[W,!!z.length]:!1},C=()=>{if(t.state.effects&&t.state.effects.length)return!!(t.state.id==="CO01"&&t.state.effects.includes("TELEPORT")||t.state.id==="CO04"&&(t.state.effects.includes("STEAL_RUNE_CROSSBOW")||t.state.effects.includes("KEEPER_STEAL_CHOOSE"))||t.state.id==="CO06"&&t.state.effects.includes("DESTROY_1"))},h=k=>k==="A04"&&!a.length?{error:!1,warning:!0}:k==="A04"&&a[0].user.uid===(y==null?void 0:y.uid)?{error:!0,warning:!1}:k==="A05"&&!l.length?{error:!1,warning:!0}:k==="A06"&&!l.length?{error:!1,warning:!0}:k==="A11"&&!o.length?{error:!1,warning:!0}:k==="A11"&&e.players[o[0].playerIndex].user.uid===(y==null?void 0:y.uid)?{error:!0,warning:!1}:k==="A12"&&o.length<2?{warning:!0,error:!1}:k==="CO04"&&!o.length?{warning:!0,error:!1}:k==="CO04"&&e.players[o[0].playerIndex].user.uid===(y==null?void 0:y.uid)?{error:!0,warning:!1}:k==="CO05"&&!l.length?{warning:!0,error:!1}:k==="CO06"&&!o.length?{warning:!0,error:!1}:k==="CO06"&&e.players[o[0].playerIndex].user.uid===(y==null?void 0:y.uid)&&o[0].state.type!=="CREEPER"?{error:!0,warning:!1}:t.state.subtype==="LOCATION"&&e.rules.teleblock?{warning:!0,error:!1}:{warning:!1,error:!1},p=k=>{const j=[];k[0]&&(!i&&(y==null?void 0:y.uid)===e.turn.player&&j.push("Play limit reached! End turn."),i&&j.push("Play limit reached! Discard down to 0."),(y==null?void 0:y.uid)!==e.turn.player&&t.state.type==="COUNTER"&&j.push("No card to counter.")),k[1]===!1&&(t.state.type==="COUNTER"?j.push("Doesn't counter that type of card."):j.push("Please wait for your turn.")),k[2]===!0&&j.push("Cannot select groups pertaining to yourself."),d(()=>[...j])},_=()=>d(()=>[]),N=()=>{if(i){const k=e.turn.temporary.play<1;if(!k)return[k]}else{const k=n.hand.length>e.rules.handLimit;if(!k)return[k]}return!1},b=k=>{const j=[];k[0]||(i?j.push(`Play ${e.turn.temporary.play} more.`):j.push("Hand limit has not been reached.")),f(()=>[...j])},M=()=>f(()=>[]),O=(k,j)=>k.map((W,z)=>m.jsx(Nf,{message:W,clearErrors:j},`endturn_error__${z}`));return m.jsxs("div",{className:"popup",children:[m.jsx(Wt,{cardState:t,position:"SELECT"}),m.jsxs("div",{className:"play_btn_group__card",children:[m.jsx("div",{className:"errors_container__play",children:u.length?O(u,_):null}),m.jsx("button",{className:`play_btn__card ${e.pending&&t.state.type!=="COUNTER"||v()?"disabled":""} ${h(t.state.id).warning?"warning":""}`,onClick:()=>{if(e.pending&&t.state.type!=="COUNTER")return;const k=v();if(k)return p(k);r(t.state,t.index)},children:"Play Card"}),m.jsx("div",{className:"errors_container__discard",children:c.length?O(c,M):null}),m.jsx("button",{className:`discard_btn__card ${e.pending||N()?"disabled":""}`,onClick:()=>{if(e.pending)return;const k=N();if(k)return b(k);s(t.index)},children:"Discard Card"})]})]})}function Xk({rules:t,turn:e,selectedRuleGroup:n,selectRuleGroup:r,isTurn:s,cooldown:i,setCooldown:o,wormhole:a}){const[l,u]=P.useState(!1),d=["No special effects here.","Double agenda(two goals) is in play here.","At the end of every turn discard 1 random card","Once per turn, Challenge an other players keeper for the chance to steal them","Upon arriving here discard all current equipment and rune keepers in play.","10% chance to summon a ghost at the end of your turn.","Once per turn, You have the option to draw 1 and play it."];return m.jsxs("div",{style:{zIndex:20},className:"rules_container box_border ",children:[m.jsx("h2",{children:"Rules"}),m.jsx("hr",{}),m.jsxs("ul",{children:[m.jsxs("li",{className:`rule ${n.includes("location")?"highlight":""} ${t.location==="ABYSS"?`location_btn ${i||!s?"disabled":""}`:""}`,onClick:()=>{t.location!=="ABYSS"||i||!s||(a(1,0),o(()=>!0))},onContextMenu:c=>{c.preventDefault(),r("location")},children:["Location: ",t.location,m.jsx("span",{className:"location_tooltip__btn",onMouseEnter:()=>u(()=>!0),onMouseLeave:()=>u(()=>!1),children:"i"}),l&&m.jsxs("span",{className:"location_tooltip__text",children:[t.location==="MISTHALIN"?d[0]:"",t.location==="ASGARNIA"?d[1]:"",t.location==="CRANDOR"?d[2]:"",t.location==="WILDERNESS"?d[3]:"",t.location==="ENTRANA"?d[4]:"",t.location==="MORYTANIA"?d[5]:"",t.location==="ABYSS"?d[6]:""]})]}),m.jsxs("li",{className:`rule ${n.includes("drawAmount")?"highlight":""}`,onContextMenu:c=>{c.preventDefault(),r("drawAmount")},children:["Draw: ",e.drawn," / ",t.drawAmount]}),m.jsxs("li",{className:`rule ${n.includes("playAmount")?"highlight":""}`,onContextMenu:c=>{c.preventDefault(),r("playAmount")},children:["Play: ",e.played," / ",t.playAmount]}),m.jsxs("li",{className:`rule ${n.includes("handLimit")?"highlight":""}`,onContextMenu:c=>{c.preventDefault(),r("handLimit")},children:["Hand Limit: ",t.handLimit]}),m.jsxs("li",{className:`rule ${n.includes("keeperLimit")?"highlight":""}`,onContextMenu:c=>{c.preventDefault(),r("keeperLimit")},children:["Keeper Limit: ",t.keeperLimit]}),m.jsx("li",{className:`rule ${n.includes("teleblock")?"highlight":""}`,onContextMenu:c=>{c.preventDefault(),r("teleblock")},children:t.teleblock?"Teleblocked":""})]})]})}function Jk({table:t,localPlayer:e,showCardPiles:n,endTurn:r}){const[s,i]=P.useState([]),o=()=>{const c=t.turn.drawn>=t.rules.drawAmount,f=t.turn.played>=t.rules.playAmount||!e.hand.length,y=e.hand.length>t.rules.handLimit,v=e.keepers.length>t.rules.keeperLimit&&!a(),w=t.turn.player===e.user.uid,C=t.turn.temporary.hand.length>0,h=n.discard||n.pure;return!c||!f||y||v||!w||C||h?[c,f,y,v,w,C,h]:!1},a=()=>{if(!e.keepers)return;let c=0;for(const f of e.keepers)f.type==="CREEPER"&&c++;return c===e.keepers.length},l=c=>{const f=[];c[0]||f.push("Draw limit not reached!"),c[1]||f.push("Play limit not reached!"),c[2]&&f.push("Hand limit reached! Discard down."),c[3]&&f.push("Keeper limit reached! Discard a keeper."),c[4]||f.push("Please wait your turn."),c[5]&&f.push("Finish using all the cards in hand."),c[6]&&f.push("Finish choosing a card to draw."),i(()=>[...f])},u=()=>{i(()=>[])},d=()=>s.map((c,f)=>m.jsx(Nf,{message:c,clearErrors:u},`endturn_error__${f}`));return m.jsxs("div",{className:"endturn_btn_container",children:[m.jsx("button",{style:{whiteSpace:"nowrap"},className:`endturn_btn ${o()||t.pending?"disabled":""}`,onClick:()=>{if(t.pending)return;const c=o();if(c)return l([...c]);r()},children:"End Turn"}),s.length?d():null]})}function $v({cardState:t,isSideWays:e,inspectKeeper:n,selectKeeperGroup:r,selectedKeeperGroup:s,playerNum:i,drawSpecificCard:o}){const a=()=>{if(!s||!i)return!1;for(const l of s)if(l.playerIndex===i-1&&l.index===t.index)return!0;return!1};return e?m.jsxs("div",{className:`card__mini ${t.state.type.toLowerCase()} ${a()?"selected":""}`,style:t.state.effects&&!t.state.cooldown?{background:"var(--black-shine)"}:{},onClick:t.state.attachment?l=>l.preventDefault():()=>{!i||!n||n({...t,playerIndex:i-1})},onContextMenu:l=>{l.preventDefault(),r&&r({state:t.state,index:t.index,playerIndex:i?i-1:0})},children:[m.jsx("div",{className:"card_container__inner_left",children:m.jsx("div",{className:"card_header__background",children:m.jsx("h4",{className:"card_header__text",style:t.state.name.length>10?{fontSize:"10px"}:{},children:t.state.name.split(" ").join("_")})})}),m.jsx("div",{className:"card_container__inner_right",children:m.jsx("div",{className:`${t.state.name.split(" ").join("_").toLowerCase()} mini_card_image`})}),t.state.attachment&&m.jsx(Wt,{position:"CREEPER",cardState:{state:t.state.attachment??{},index:0},inspectKeeper:n})]}):m.jsxs("div",{className:`side_card__mini card__mini  ${t.state.type.toLowerCase()} ${a()?"selected":""}`,style:t.state.effects&&!t.state.cooldown?{background:"var(--black-shine)"}:{},onClick:t.state.attachment?l=>l.preventDefault():()=>{if(o)return o(t.index);!i||!n||n({...t,playerIndex:i-1})},onContextMenu:l=>{l.preventDefault(),r&&r({state:t.state,index:t.index,playerIndex:i?i-1:0})},children:[m.jsx("div",{className:"side_card_container__inner_left",children:m.jsx("div",{className:"side_card_header__background",children:m.jsx("h4",{className:"side_card_header__text",children:t.state.name.split(" ").join("_")})})}),m.jsx("div",{className:"side_card_container__inner_right",children:m.jsx("div",{className:`${t.state.name.split(" ").join("_").toLowerCase()} mini_card_image sideways`})}),t.state.attachment&&m.jsx(Wt,{position:"CREEPER",cardState:{state:t.state.attachment??{},index:0},inspectKeeper:n})]})}function Zk({table:t,inspectKeeper:e,selectKeeperGroup:n,selectedKeeperGroup:r,selectGoalGroup:s,selectedGoalGroup:i}){var y,v,w;const{players:o,goal:a}=t,{user:l}=P.useContext(rt),u=()=>{if(o[0].user.uid===(l==null?void 0:l.uid))return"180deg";if(o[1].user.uid===(l==null?void 0:l.uid))return"0deg";if(o[2].user.uid===(l==null?void 0:l.uid))return"270deg";if(o[3].user.uid===(l==null?void 0:l.uid))return"90deg"},d=()=>{if(o[0].user.uid===(l==null?void 0:l.uid))return"180deg";if(o[1].user.uid===(l==null?void 0:l.uid))return"0deg";if(o[2].user.uid===(l==null?void 0:l.uid))return"90deg";if(o[3].user.uid===(l==null?void 0:l.uid))return"270deg"},c=(C,h,p)=>C.map((_,N)=>m.jsx($v,{isSideWays:h,cardState:{state:_,index:N},inspectKeeper:e,selectKeeperGroup:n,selectedKeeperGroup:r,playerNum:p},`table_keepers__p${p}_${N}`)),f=()=>a.map((C,h)=>m.jsx(Wt,{position:"TABLE",cardState:{state:C,index:h},selectGoalGroup:s,selectedGoalGroup:i},`table_goals__${h}`));return m.jsxs("div",{className:"table_container",style:{transform:`rotateZ(${u()})`},children:[m.jsx("div",{className:`player_1_keepers keeper_container ${o[0].keepers.length>1?"length_2plus":"length_1"}`,children:o[0].keepers.length?c(o[0].keepers,!0,1):m.jsx("div",{className:"mini_card_outline",children:m.jsx("p",{children:"No Keeper!"})})}),o.length>1&&m.jsx("div",{className:`player_2_keepers keeper_container ${((y=o[1])==null?void 0:y.keepers.length)>1?"length_2plus":"length_1"}`,children:(v=o[1])!=null&&v.keepers.length?c((w=o[1])==null?void 0:w.keepers,!0,2):m.jsx("div",{className:"mini_card_outline",children:m.jsx("p",{children:"No Keeper!"})})}),o.length>2&&m.jsx("div",{className:`player_3_keepers keeper_container ${o[2].keepers.length>1?"length_2plus":"length_1"}`,children:o[2].keepers.length?c(o[2].keepers,!1,3):m.jsx("div",{className:"mini_card_outline",children:m.jsx("p",{children:"No Keeper!"})})}),o.length>3&&m.jsx("div",{className:`player_4_keepers keeper_container ${o[3].keepers.length>1?"length_2plus":"length_1"}`,children:o[3].keepers.length?c(o[3].keepers,!1,4):m.jsx("div",{className:"mini_card_outline",children:m.jsx("p",{children:"No Keeper!"})})}),m.jsx("div",{className:"table_goals",style:{transform:`rotateZ(${d()})`},children:a.length?f():m.jsx("div",{className:"card_outline",children:m.jsx("h2",{style:{color:"var(--light-pink)"},children:"No Goal !"})})})]})}const{getPlayer:e1}=Tf;function t1({cardState:t,table:e,localPlayer:n,playEffect:r,startDuel:s,discardKeeper:i,inspectKeeper:o,selectedKeeperGroup:a,selectedPlayerGroup:l}){const{user:u}=P.useContext(rt),[d,c]=P.useState([]),[f,y]=P.useState([]),v=()=>c(()=>[]),w=()=>y(()=>[]),C=()=>{var k,j;const O=e1(e.players,(u==null?void 0:u.uid)??"");if(t.state.id==="KE04"){if(!a.length||a[0].state.subtype!=="LIVING"||a[0].playerIndex===O.index&&!a[0].state.attachment)return!1}else if(t.state.id==="KR07"){if(!a.length||a[0].state.subtype!=="EQUIPMENT"||a[0].playerIndex===O.index&&!a[0].state.attachment)return!1}else if(t.state.id==="KL07"){if(!a.length||a[0].state.subtype!=="RUNE"||a[0].playerIndex===O.index&&!a[0].state.attachment)return!1}else if(t.state.id==="KE05"){if(!l.length||l[0].user.uid===O.state.user.uid)return!1}else if(t.state.id==="K02"){if(!a.length||a[0].state.id!=="CR02"&&((k=a[0].state.attachment)==null?void 0:k.id)!=="CR02")return!1}else if(t.state.id==="KE02"){if(!a.length||a[0].state.id!=="CR01"&&((j=a[0].state.attachment)==null?void 0:j.id)!=="CR01")return!1}else if(t.state.id==="KLM01"){if(!a.length||a[0].state.id!=="KLM04"&&a[0].state.id!=="KLM05")return!1}else if(t.state.id==="KLM02"){if(!a.length||a[0].state.id!=="KLM03"&&a[0].state.id!=="KLM06")return!1}else if(t.state.id==="KLM03"){if(!a.length||a[0].state.id!=="KLM01"&&a[0].state.id!=="KLM05")return!1}else if(t.state.id==="KLM04"){if(!a.length||a[0].state.id!=="KLM02"&&a[0].state.id!=="KLM06")return!1}else if(t.state.id==="KLM05"){if(!a.length||a[0].state.id!=="KLM02"&&a[0].state.id!=="KLM04")return!1}else if(t.state.id==="KLM06"&&(!a.length||a[0].state.id!=="KLM01"&&a[0].state.id!=="KLM03"))return!1;return!0},h=()=>{const O=!!t.state.cooldown,k=!!t.state.effects,j=n.keepers.length>t.index?n.keepers[t.index].id===t.state.id:!1,W=e.turn.player===n.user.uid,z=C();return O||!k||!j||!W||!z?[O,k,j,W,z]:!1},p=O=>{const k=[];O[0]&&k.push("On Cooldown."),O[1]===!1&&k.push("This Keeper has no effects."),O[2]===!1&&k.push("That Keeper is not yours!"),O[3]===!1&&k.push("Please wait your turn.."),O[4]===!1&&k.push("Select the correct kind of target."),c(()=>[...k])},_=()=>{const O=n.keepers.length>e.rules.keeperLimit,k=e.turn.player===n.user.uid,j=t.state.type==="CREEPER",W=!!t.state.attachment,z=n.keepers.length>t.index?n.keepers[t.index].id===t.state.id:!1;return!O||!k||j||W||!z?[O,k,j,W,z]:!1},N=O=>{const k=[];O[0]===!1&&k.push("Keeper limit not reached. no point in discarding."),O[1]===!1&&k.push("Please wait your turn.."),O[2]&&k.push("Cannot discard creeper in a conventional manner."),O[3]&&k.push("Cannot discard a keeper with a creeper attached."),O[4]===!1&&k.push("That Keeper is not yours!"),y(()=>[...k])},b=()=>{const O=(u==null?void 0:u.uid)===e.turn.player,k=e.players[t.playerIndex].user.uid===(u==null?void 0:u.uid),j=e.turn.duel.cooldown,W=e.rules.location==="WILDERNESS";return console.log(O,k,j,W),!O||k||j||!W?[O,k,j,W]:!1},M=(O,k)=>O.map((j,W)=>m.jsx(Nf,{message:j,clearErrors:k},`inspect_keeper_error__${W}`));return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"underlay",onClick:()=>{o(null)}}),m.jsxs("div",{className:"popup",children:[m.jsx(Wt,{cardState:t,position:"SELECT"}),m.jsxs("div",{className:`play_btn_group__card length_${e.rules.location==="WILDERNESS"?"3":"2"}`,children:[m.jsx("div",{className:"errors_container__play",children:d.length?M(d,v):null}),m.jsx("button",{className:`play_btn__card ${e.pending||h()?"disabled":""}`,onClick:()=>{if(e.pending)return;const O=h();if(O)return p(O);r(t.state.id,t.index)},children:"Use Effect"}),e.rules.location==="WILDERNESS"&&m.jsx("button",{className:`challenge_btn__card ${e.pending||b()?"disabled":""}`,onClick:()=>{e.pending||b()||s(e.players[t.playerIndex].user.uid,t)},children:"Challenge"}),m.jsx("div",{className:"errors_container__discard",children:f.length?M(f,w):null}),m.jsx("button",{className:`discard_btn__card ${e.pending||_()?"disabled":""}`,onClick:()=>{if(e.pending)return;const O=_();if(O)return N(O);i(t.index)},children:"Discard Card"})]})]})]})}const{getPlayer:ko}=Tf;function n1({turn:t,players:e,rollForDuel:n,endDuel:r}){const{user:s}=P.useContext(rt),[i,o]=P.useState(ko(e,t.duel.player1.id)),[a,l]=P.useState(ko(e,t.duel.player2.id)),u=()=>(s==null?void 0:s.uid)===t.duel.player1.id&&t.duel.player1.num===0?1:(s==null?void 0:s.uid)===t.duel.player2.id&&t.duel.player2.num===0?2:0;P.useEffect(()=>{!t.duel.player1.id||!t.duel.player2.id||(o(()=>ko(e,t.duel.player1.id)),l(()=>ko(e,t.duel.player2.id)))},[t]);const d=()=>t.duel.player1.num>t.duel.player2.num&&t.duel.player1.num!==0&&t.duel.player2.num!==0?1:t.duel.player2.num>=t.duel.player1.num&&t.duel.player2.num!==0&&t.duel.player1.num!==0?2:0;return m.jsx("div",{className:"popup",children:m.jsxs("div",{className:"duel_group",children:[m.jsxs("div",{className:"duel_group__left",children:[m.jsx("h2",{children:i.state.user.username}),m.jsx("h2",{children:t.duel.player1.num}),m.jsx("button",{className:`play_btn__card ${u()!==1?"disabled":""}`,onClick:()=>{u()===1&&n()},children:"Roll Dice"})]}),m.jsxs("div",{className:"duel_group__middle",children:[m.jsx("h1",{children:d()===0?"V/S":d()===1?`${i.state.user.username}`:`${a.state.user.username} Wins!`}),d()>0&&m.jsxs("div",{className:"duel_group__left",children:[m.jsx("hr",{className:"card_hr__thick full_width"}),m.jsx("button",{className:"challenge_btn__card",onClick:()=>{const c=d()===1?t.duel.player1.id:t.duel.player2.id;r(c)},children:"Continue"})]})]}),m.jsxs("div",{className:"duel_group__right",children:[m.jsx("h2",{children:a.state.user.username}),m.jsx("h2",{children:t.duel.player2.num}),m.jsx("button",{className:`play_btn__card flipped ${u()!==2?"disabled":""}`,onClick:()=>{u()===2&&n()},children:"Roll Dice"})]})]})})}function nm({type:t,pile:e,drawSpecificCard:n}){const r=i=>{n(i,t==="DISCARD")},s=()=>e.map((i,o)=>{if(!(t==="DISCARD"&&i.id==="A17"||t==="PURE"&&i.id==="A16"))return m.jsx($v,{isSideWays:!1,cardState:{state:i,index:o},drawSpecificCard:r},`card_pile__${i.id}_${o}`)});return m.jsxs("div",{className:"popup",children:[m.jsx("h2",{children:"Select One To Draw"}),m.jsx("div",{className:"card_picker",children:s()})]})}const{loadGame:r1,getPlayer:Ve,getPlayerKeeper:rm,getCardById:Bt,connectGame:s1,chooseWhoGoesFirst:i1,checkShouldDiscard:mu,checkForCreepers:o1,checkPlayersForKeeper:sm,checkIfWon:xo,endTurn:a1,upload:it,uploadTable:yu,shuffleDeck:l1,drawPhase:u1,removeCard:ot,turnReducer:c1,deckReducer:d1,rulesReducer:f1,goalReducer:h1,playerReducer:p1}=Tf,{uploadStats:im}=oo;function m1({setWinGameStats:t}){const{startGame:e,checkGameInProgress:n}=Sl,r=Jt(),{db:s,user:i,joinedGameID:o,setUser:a}=P.useContext(rt),l={db:s,gameId:o},[u,d]=P.useState(r1(i)),[c,f]=P.useReducer(f1,u.rules),[y,v]=P.useReducer(d1,u.deck),[w,C]=P.useReducer(c1,u.turn),[h,p]=P.useReducer(p1,u.players),[_,N]=P.useReducer(h1,u.goal),[b,M]=P.useState(!0),[O,k]=P.useState(!1),[j,W]=P.useState({discard:!1,pure:!1}),[z,Ae]=P.useState(),[Ne,Le]=P.useState(null),[Nt,Kt]=P.useState(null),[S,I]=P.useState([]),[T,L]=P.useState([]),[D,K]=P.useState([]),[B,X]=P.useState([]),[Q,Z]=P.useState(Ve(u.players,(i==null?void 0:i.uid)??"").state),A=E=>{Le(x=>x===null||E===null?E:x.state.name===E.state.name?null:E),Nt&&Kt(()=>null)},g=E=>{Kt(x=>x===null||E===null?E:x.state.name===E.state.name?null:E),Ne&&Le(()=>null)},R=E=>{E!=="KEEPERS"&&K(()=>[]),E!=="PLAYERS"&&L(()=>[]),E!=="RULES"&&I(()=>[]),E!=="GOALS"&&X(()=>[])},q=E=>{I(x=>x.includes(E)?[]:[...x,E]),R("RULES")},zv=E=>{K(x=>{for(const F of x)if(F.index===E.index&&F.playerIndex===E.playerIndex)return[];return[...x,E]}),R("KEEPERS")},Vv=E=>{L(x=>{for(const F of x)if(F.user.uid===E.user.uid)return[];return[...x,E]}),R("PLAYERS")},Yv=E=>{X(x=>{for(const F of x)if(F.state.id===E.state.id)return[];return[...x,E]}),R("GOALS")};P.useEffect(()=>{d(E=>({...E,rules:c}))},[c]),P.useEffect(()=>{d(E=>({...E,deck:y}))},[y]),P.useEffect(()=>{if(u.isWon){let E={state:{},index:0},x=null;const F=xo(h,_[0],c.location),$=_.length>1?xo(h,_[1],c.location):null;F?E=Ve(h,F):$&&(E=Ve(h,$)),F?x=_[0]:$&&(x=_[1]),t(ee=>({...ee,winner:E.state??null,round:u.round,goal:x})),r("/gameover")}d(E=>(E.turn.player!==w.player&&Le(()=>null),{...E,turn:w}))},[w]),P.useEffect(()=>{if(d(x=>({...x,players:h})),Z(x=>({...x,...Ve(h,(i==null?void 0:i.uid)??"").state})),(i==null?void 0:i.uid)!==w.player)return;const E=Ve(h,(i==null?void 0:i.uid)??"");E.state.hand.length&&E.state.hand.forEach((x,F)=>{if(x.type==="CREEPER"&&!u.pending)return or(x,F)}),w.temporary.hand.forEach((x,F)=>{x.type==="CREEPER"&&!u.pending&&Pf(x,F)})},[h]),P.useEffect(()=>{d(E=>({...E,goal:_}))},[_]),P.useEffect(()=>{if(!i)return r("/");if(!b)return;Qv();const E=x=>{x.key==="Escape"&&(R(),A(null),g(null))};return window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[]);const qv=(E,x,F,$,ee,st,En,Ms,vE,EE)=>{E.discard||(E.discard=[]),E.pure||(E.pure=[]),x||(x=[]);for(const Cn of $)Cn.hand||(Cn.hand=[]),Cn.keepers||(Cn.keepers=[]);ee.temporary.hand||(ee.temporary.hand=[]),v({type:ye.INIT,payload:{init:{...E},pile:{...E.pure},upload:l}}),p({type:J.INIT,payload:{init:[...$],playerId:$[0].user.uid,upload:l}}),C({type:fe.INIT,payload:{init:{...ee},upload:l}}),f({type:ve.INIT,payload:{init:{...F},amount:0,upload:l}}),N({type:Dt.INIT,payload:{goals:[...x],upload:l}}),d(Cn=>({...Cn,round:st,pending:En,counter:Ms,isWon:vE,phases:EE})),Z(Cn=>({...Cn,...Ve($,(i==null?void 0:i.uid)??"").state}))},Qv=async()=>{if(!i)return r("/");if(await s1(o,s,qv),i.uid===o){if(await n(s,o))return;const E=i1(h);v({type:ye.DECK_SHUFFLE__PURE,payload:{pile:[],upload:{...l}}}),C({type:fe.CHANGE_TURN,payload:{player:E,upload:{...l}}}),await e(s,o)}M(()=>!1)},Xv=(E,x)=>{C({type:fe.DUEL_BEGIN,payload:{player:i==null?void 0:i.uid,victim:E,duelCard:x,upload:l}})},Jv=()=>{const E=(i==null?void 0:i.uid)===w.duel.player1.id;C({type:E?fe.DUEL_ROLL__PLAYER_1:fe.DUEL_ROLL__PLAYER_2,payload:{upload:l}})},Zv=E=>{if(E===w.duel.player1.id){if(!w.duel.card)return;p({type:J.KEEPER_CARDS__ADD,payload:{playerId:E,cards:[w.duel.card.state],upload:l}});const x=ot(h[w.duel.card.playerIndex].keepers,w.duel.card.index);p({type:J.KEEPER_CARDS__REMOVE,payload:{playerId:h[w.duel.card.playerIndex].user.uid,cards:[...x],upload:l}})}C({type:fe.DUEL_END,payload:{upload:l}})},eE=()=>{const E=u1(u);if(!y.pure||y.pure.length<c.drawAmount){const F=l1([...y.pure,...y.discard]);v({type:ye.DECK_REPLACE__DISCARD_TO_PURE,payload:{pile:[...F],upload:l}});return}const x=o1([...y.pure.slice(y.pure.length-E)]);v({type:ye.DECK_REMOVE__PURE_TOP,payload:{pile:[],amount:E,upload:l}}),p({type:J.HAND_CARDS__ADD,payload:{playerId:(i==null?void 0:i.uid)??"",cards:Array.from(y.pure.slice(y.pure.length-E)),upload:l}}),!x.length&&C({type:fe.DRAWN_ADD,payload:{player:u.turn.player&&u.turn.player!==!0?u.turn.player:"a",amount:w.drawn+E,upload:l}})},Il=(E,x,F)=>{const $=Ve(h,E);let ee=Array.from(y.pure.slice(y.pure.length-(x+F)));if(F>0){const st=ot(ee,ee.length-1);let En,Ms;F>1&&(En=ot(st,ee.length-2),F>2&&(Ms=ot(En,ee.length-3))),ee=Ms||En||st}v({type:ye.DECK_REMOVE__PURE_TOP,payload:{pile:[],amount:x,upload:l}}),p({type:J.HAND_CARDS__ADD,payload:{playerId:$.state.user.uid??"",cards:ee,upload:l}})},Ds=(E=1,x=0)=>{v({type:ye.DECK_REMOVE__PURE_TOP,payload:{pile:[],amount:E+x,upload:l}}),C({type:fe.TEMPORARY_HAND__BEGIN,payload:{cards:Array.from(y.pure.slice(y.pure.length-(E+x))),amount:E,upload:l}})},kf=(E,x=!1,F=(i==null?void 0:i.uid)??"")=>{const $=x?y.discard[E]:y.pure[E];v({type:x?ye.DECK_REMOVE__DISCARD_SPECIFIC:ye.DECK_REMOVE__PURE_SPECIFIC,payload:{pile:[],cardIndex:E,upload:l}}),p({type:J.HAND_CARDS__ADD,payload:{playerId:F,cards:[$],upload:l}}),x||v({type:ye.DECK_SHUFFLE__PURE,payload:{pile:[],upload:l}}),W(ee=>({...ee,pure:!1,discard:!1}))},bs=(E,x=!0)=>{const F=ot(Q.hand,E);x&&v({type:ye.DECK_ADD__DISCARD_BOT,payload:{pile:[Q.hand[E]],upload:l}}),p({type:J.HAND_CARDS__REMOVE,payload:{playerId:(i==null?void 0:i.uid)??"",cards:[...F],upload:l}}),Le(()=>null)},xf=(E,x=!0)=>{if(!w.temporary)return;const{hand:F}=w.temporary,$=ot(F,E);x&&v({type:ye.DECK_ADD__DISCARD_BOT,payload:{pile:[F[E]],upload:l}}),C({type:fe.TEMPORARY_HAND_CARD__REMOVE,payload:{cards:[...$],upload:l}}),Le(()=>null)},Lf=(E,x)=>{const F=Ve(h,x);v({type:ye.DECK_ADD__DISCARD_BOT,payload:{pile:[F.state.hand[E]],upload:l}});const $=ot(F.state.hand,E);p({type:J.HAND_CARDS__REMOVE,payload:{playerId:x,cards:[...$],upload:l}}),Le(()=>null)},tE=(E,x=!0)=>{const F=ot(Q.keepers,E);x&&v({type:ye.DECK_ADD__DISCARD_BOT,payload:{pile:[Q.keepers[E]],upload:l}}),p({type:J.KEEPER_CARDS__REMOVE,payload:{playerId:(i==null?void 0:i.uid)??"",cards:[...F],upload:l}}),Kt(()=>null)},Mr=(E,x,F=!0)=>{const $=Ve(h,x),ee=ot($.state.keepers,E);F&&v({type:ye.DECK_ADD__DISCARD_BOT,payload:{pile:[h[$.index].keepers[E]],upload:l}}),p({type:J.KEEPER_CARDS__REMOVE,payload:{playerId:x,cards:[...ee],upload:l}})},nE=()=>{it("PENDING",s,{cardState:!1},o)},rE=E=>!!(rm(Ve(h,(i==null?void 0:i.uid)??"").state,"KL13")&&E==="A16"),sE=E=>!!(rm(Ve(h,(i==null?void 0:i.uid)??"").state,"KL14")&&E==="A17"),or=(E,x)=>{if(!E)return;const F=u.pending??null;if(i){const $=i.cardCatalog[`${E.id}`]?i.cardCatalog[`${E.id}`]+1:1;a(ee=>{if(ee)return{...ee,cardCatalog:Object.assign({},ee==null?void 0:ee.cardCatalog,{[`${E.id}`]:$})}}),im("CARD",s,{cardKey:E.id,cardNum:$},i==null?void 0:i.uid)}if(w.player!==(i==null?void 0:i.uid))return it("COUNTER",s,{cardState:E},o),bs(x,mu(E.type)),Al(E,F);it("PENDING",s,{cardState:E},o),x>-1&&!rE(E.id)&&!sE(E.id)&&bs(x,mu(E.type)),w.player===(i==null?void 0:i.uid)&&E.type!=="CREEPER"&&x>-1&&C({type:fe.PLAYED_ADD,payload:{amount:w.played+1,upload:l}}),A(null),Al(E,F)},Pf=(E,x)=>{if(!E||!u.turn.temporary||(i==null?void 0:i.uid)!==w.player)return;const F=u.pending??null;it("PENDING",s,{cardState:E},o),xf(x,mu(E.type)),w.player===(i==null?void 0:i.uid)&&C({type:fe.TEMPORARY_PLAY_CHANGE,payload:{amount:u.turn.temporary.play-1,upload:l}}),Al(E,F)},Al=(E,x)=>{setTimeout(()=>{switch(nE(),Ae(F=>({...F,...E})),E.type){case"KEEPER":return ao(E);case"RULE":return lE(E);case"GOAL":return aE(E);case"ACTION":return cE(E);case"COUNTER":return oE(E,x);case"CREEPER":return iE(E)}},3e3)},Of=E=>{const x=Ve(h,(i==null?void 0:i.uid)??""),F=ot([...x.state.keepers],E.index);p({type:J.KEEPER_CARDS__REMOVE,payload:{playerId:(i==null?void 0:i.uid)??"",cards:[...F],upload:l}}),p({type:J.KEEPER_CARDS__ADD,payload:{playerId:(i==null?void 0:i.uid)??"",cards:[E.state],upload:l}})},iE=E=>{const x=Ve(h,(i==null?void 0:i.uid)??"");if(!x.state.keepers)return ao(E);if(E.subtype==="LIVING_CREEPER"){let F;if(x.state.keepers.forEach(($,ee)=>{$.subtype==="LIVING"&&!$.attachment&&(F={state:{...$},index:ee})}),!F)return ao(E);F.state.attachment=E,Of(F)}else if(E.subtype==="EQUIPMENT_CREEPER"){let F;if(x.state.keepers.forEach(($,ee)=>{$.subtype==="EQUIPMENT"&&!$.attachment&&(F={state:{...$},index:ee})}),!F)return ao(E);F.state.attachment=E,Of(F)}},oE=(E,x)=>{const F=(i==null?void 0:i.uid)===w.player;if(E.effects.includes("TELESTOP_OR_LOCATION_MISTHALIN"))if(F){if(c.teleblock)return;f({type:ve.RULE_CHANGE__LOCATION,payload:{location:"MISTHALIN",upload:l}})}else it("RULE",s,{ruleState:c},o);else if(E.effects.includes("GOALSTOP_OR_GOALS_NONE"))F?N({type:Dt.GOAL_RESET,payload:{goals:[],upload:l}}):it("GOAL",s,{goalState:_},o);else if(E.effects.includes("ACTIONSTOP_OR_DISCARD_1_ALL"))F?h.forEach($=>{const ee=Math.floor(Math.random()*$.hand.length);Lf(ee,$.user.uid)}):(yu(s,u,o),it("PENDING",s,{cardState:!1},o));else if(E.effects.includes("KEEPER_STEALSTOP_OR_KEEPER_STEAL"))if(F){p({type:J.KEEPER_CARDS__ADD,payload:{playerId:i.uid,cards:[D[0].state],upload:l}});const $=ot(h[D[0].playerIndex].keepers,D[0].index);p({type:J.KEEPER_CARDS__REMOVE,payload:{playerId:h[D[0].playerIndex].user.uid,cards:[...$],upload:l}})}else yu(s,u,o),it("PENDING",s,{cardState:!1},o),p({type:J.KEEPER_CARDS__ADD,payload:{playerId:(i==null?void 0:i.uid)??"",cards:x&&x!==!0?[x]:[],upload:l}});else if(E.effects.includes("RULESTOP_OR_RULE_RESET_3"))if(F)for(let $=0;$<=3;$++)f({type:ve.RULE_RESET__CHOICE,payload:{ruleKey:S[$],upload:l}});else it("RULE",s,{ruleState:c},o);else if(E.effects.includes("KEEPER_DISCARD_REFLECT_OR_KEEPER_DISCARD"))if(F)Mr(D[0].index,h[D[0].playerIndex].user.uid);else{yu(s,u,o),it("PENDING",s,{cardState:!1},o);const $=Ve(h,w.player!==!0&&w.player?w.player:""),ee=Math.floor(Math.random()*$.state.keepers.length);Mr(ee,$.state.user.uid)}it("COUNTER",s,{cardState:!1},o),R()},ao=E=>{p({type:J.KEEPER_CARDS__ADD,payload:{playerId:(i==null?void 0:i.uid)??"",cards:[E],upload:l}})},aE=E=>{var F,$;const x=[];x.push(E),(_.length&&c.location!=="ASGARNIA"||c.location==="ASGARNIA"&&_.length>1)&&v({type:ye.DECK_ADD__DISCARD_BOT,payload:{pile:[_[((F=B[0])==null?void 0:F.index)??0]],upload:l}}),c.location==="ASGARNIA"?N({type:_.length<2?Dt.GOAL_ADD__MULTI:Dt.GOAL_REPLACE__MULTI,payload:{replaceIndex:(($=B[0])==null?void 0:$.index)??0,goals:x,upload:l}}):N({type:Dt.GOAL_REPLACE__SINGLE,payload:{goals:x,upload:l}}),R()},lE=E=>{if(E.effects.includes("RULE_PLAY")){const x=E.effects[1];f({type:ve.RULE_CHANGE__PLAY,payload:{amount:Number(x),upload:l}})}else if(E.effects.includes("RULE_DRAW")){const x=E.effects[1];f({type:ve.RULE_CHANGE__DRAW,payload:{amount:Number(x),upload:l}})}else if(E.effects.includes("RULE_HAND_LIMIT")){const x=E.effects[1];f({type:ve.RULE_CHANGE__HAND_LIMIT,payload:{amount:Number(x),upload:l}})}else if(E.effects.includes("RULE_KEEPER_LIMIT")){const x=E.effects[1];f({type:ve.RULE_CHANGE__KEEPER_LIMIT,payload:{amount:Number(x),upload:l}})}else if(E.effects.includes("LOCATION")){if(c.teleblock)return;const x=E.effects[1];f({type:ve.RULE_CHANGE__LOCATION,payload:{location:x,upload:l}}),x==="ENTRANA"&&uE()}else E.effects.includes("TELEBLOCK")&&f({type:ve.RULE_CHANGE__TELEBLOCK,payload:{teleblock:!0,upload:l}});R()},uE=()=>{h.forEach(E=>{E.keepers.forEach((x,F)=>{(x.subtype==="RUNE"||x.subtype==="EQUIPMENT")&&Mr(F,E.user.uid)})})},cE=E=>{if(E.effects.includes("RULES_RESET"))f({type:ve.RULE_RESET__ALL,payload:{upload:l}});else if(E.effects.includes("TELEPORT"))dE();else if(E.effects.includes("RULE_RESET_CHOOSE"))for(let x=0;x<=(E.effects.length>1?2:0);x++)f({type:ve.RULE_RESET__CHOICE,payload:{ruleKey:S[x],upload:l}});else if(E.effects.includes("TRADE_HANDS"))p({type:J.TRADE_HANDS,payload:{playerId:(i==null?void 0:i.uid)??"",targetPlayerId:T[0].user.uid,upload:l}});else if(E.effects.includes("KEEPERS_TO_HAND"))h.forEach(x=>{p({type:J.HAND_CARDS__ADD,payload:{playerId:x.user.uid,cards:[...x.keepers.slice(0)],upload:l}}),p({type:J.KEEPER_CARDS__REMOVE,payload:{playerId:x.user.uid,cards:[],upload:l}})});else if(E.effects.includes("KEEPER_EXCHANGE_CHOOSE"))p({type:J.KEEPER_CARDS__EXCHANGE,payload:{playerId:"",keepersToExchange:[...D.slice(0,2)],cards:[D[0].state,D[1].state],upload:l}});else if(E.effects.includes("KEEPER_STEAL_CHOOSE"))Mr(D[0].index,h[D[0].playerIndex].user.uid,!1),p({type:J.KEEPER_CARDS__ADD,payload:{playerId:(i==null?void 0:i.uid)??"",cards:[D[0].state],upload:l}});else if(E.effects.includes("DRAW_2_PLAY_2"))Ds(2);else if(E.effects.includes("DRAW_5_PLAY_3"))Ds(3,2);else if(E.effects.includes("DRAW_3_PLAY_2"))Ds(2,1);else if(E.effects.includes("DISCARD_1"))h.forEach(x=>{const F=Math.floor(Math.random()*x.hand.length);Lf(F,x.user.uid)});else if(E.effects.includes("DRAW_1"))h.forEach((x,F)=>{Il(x.user.uid,1,F)});else if(E.effects.includes("DESTROY_1"))Mr(D[0].index,h[D[0].playerIndex].user.uid);else if(E.effects.includes("STEAL_RUNE_CROSSBOW")){const x=sm(h,"KE04");if(!x.keeper)return;const F=ot(h[x.playerIndex].keepers,x.index);p({type:J.KEEPER_CARDS__REMOVE,payload:{playerId:h[x.playerIndex].user.uid,cards:F,upload:l}}),p({type:J.KEEPER_CARDS__ADD,payload:{playerId:(i==null?void 0:i.uid)??"",cards:[x.keeper],upload:l}})}else E.effects.includes("SUMMON_GHOST")?p({type:J.KEEPER_CARDS__ADD,payload:{playerId:(i==null?void 0:i.uid)??"",cards:[Bt("KL02")],upload:l}}):E.effects.includes("DRAW_SPECIFIC_PURE")?W(x=>({...x,pure:!0})):E.effects.includes("DRAW_SPECIFIC_DISCARD")&&W(x=>({...x,discard:!0}));R()},dE=()=>{c.teleblock||f({type:ve.RULE_CHANGE__LOCATION_RANDOM,payload:{upload:l}})},fE=(E,x)=>{const F=Ve(h,(i==null?void 0:i.uid)??"");if(E==="KL06"){const $=Math.ceil(Math.random()*2),ee=Math.ceil(Math.random()*2);if($===1)Il(F.state.user.uid,ee,0);else for(let st=0;st<ee;st++)bs(Math.floor(Math.random()*F.state.hand.length))}else if(E==="K01")Il(F.state.user.uid,1,0);else if(E==="CR01")f({type:ve.RULE_CHANGE__LOCATION,payload:{location:"CRANDOR",upload:l}});else if(E==="KR08")or(Bt("A01"),-1);else if(E==="KR02")Ds(1,0);else if(E==="KE05"){const $=Math.floor(Math.random()*T[0].hand.length);if(!T[0].hand)return;const ee=T[0].hand[$];p({type:J.HAND_CARDS__ADD,payload:{playerId:(i==null?void 0:i.uid)??"",cards:[ee],upload:l}});const st=ot(T[0].hand,$);p({type:J.HAND_CARDS__REMOVE,payload:{playerId:T[0].user.uid,cards:[...st],upload:l}})}else E==="KL07"||E==="KR07"||E==="KE04"||E==="K02"||E==="KE02"?or(Bt("A15"),-1):E==="KL10"?or({id:"AF02",type:"ACTION",subtype:"",name:"STEAL RCB",effects:["STEAL_RUNE_CROSSBOW"],text:"STEAL!, STEAL!, STEAL!"},-1):E==="KLM01"||E==="KLM02"||E==="KLM03"||E==="KLM04"||E==="KLM05"||E==="KLM06"?or(Bt("A11"),-1):E==="KE01"&&or(Bt("A14"),-1);p({type:J.KEEPER_COOLDOWN__SET,payload:{playerId:(i==null?void 0:i.uid)??"",cooldown:!0,cardIndex:x,upload:l}}),R(),g(null)},hE=()=>{const E=sm(h,"KL12");if(!E.keeper)return;const x=Math.floor(Math.random()*h.length);if(x===E.playerIndex)return;p({type:J.KEEPER_CARDS__ADD,payload:{playerId:h[x].user.uid,cards:[E.keeper],upload:l}});const F=ot(h[E.playerIndex].keepers,E.index);p({type:J.KEEPER_CARDS__REMOVE,payload:{playerId:h[E.playerIndex].user.uid,cards:[...F],upload:l}})},Tl=()=>(i==null?void 0:i.uid)===w.player,pE=()=>{Math.floor(Math.random()*101)<=20&&p({type:J.KEEPER_CARDS__ADD,payload:{playerId:(i==null?void 0:i.uid)??"",cards:[Bt("KL02")],upload:l}})},mE=()=>{h.forEach(E=>{E.keepers&&E.keepers.forEach((x,F)=>{var ee;if(x.id!=="KL02")return;if(Math.floor(Math.random()*101)<=110){const st=Math.ceil(Math.random()*6);Mr(F,E.user.uid,!1),p({type:J.KEEPER_CARDS__ADD,payload:{playerId:E.user.uid,cards:[Bt(`KLM0${st}`)],upload:l}});const En=E.user.cardCatalog[`KLM0${st}`]?E.user.cardCatalog[`KLM0${st}`]+1:1;if(im("CARD",s,{cardKey:`KLM0${st}`,cardNum:En},(ee=E.user)==null?void 0:ee.uid),it("PHASE",s,{phaseState:{location:"morytania",amount:u.phases.morytania+1}},o),u.phases.morytania>0)return;v({type:ye.DECK_ADD__DISCARD_BOT,payload:{pile:[Bt("GM01"),Bt("GM02"),Bt("GM03")],upload:l}})}})})},yE=()=>{_.length&&_E(),hE(),k(()=>!1);const E=Ve(h,(i==null?void 0:i.uid)??"");if(c.location==="CRANDOR"){const F=Math.floor(Math.random()*E.state.hand.length);bs(F,!0)}c.location==="MORYTANIA"&&(pE(),mE()),w.duel.cooldown&&C({type:fe.DUEL_COOLDOWN,payload:{upload:l}}),E.state.keepers.forEach((F,$)=>{F.cooldown&&p({type:J.KEEPER_COOLDOWN__SET,payload:{playerId:(i==null?void 0:i.uid)??"",cooldown:!1,cardIndex:$,upload:l}})}),a1(s,u.players,u.turn,C,o)&&(d(F=>({...F,round:F.round++})),it("ROUND",s,{roundState:u.round+1},o))},_E=()=>{const E=xo(h,_[0],c.location);let x;c.location==="ASGARNIA"&&(x=xo(h,_[1],c.location)),(E||x)&&it("WIN",s,{},o)},gE=()=>u.players.map((E,x)=>m.jsx(Lr,{isSideBox:!0,player:E,isTurn:u.turn.player===E.user.uid,selectedPlayerGroup:T,selectPlayerGroup:Vv},`player_bar__${x}`));return m.jsxs("div",{className:"game_container",children:[m.jsx(Zk,{table:u,inspectKeeper:g,selectKeeperGroup:zv,selectedKeeperGroup:D,selectGoalGroup:Yv,selectedGoalGroup:B}),m.jsx(Lr,{}),m.jsx("div",{className:"user_bars__container",children:gE()}),m.jsx(Xk,{rules:u.rules,turn:w,selectRuleGroup:q,selectedRuleGroup:S,wormhole:Ds,isTurn:Tl(),cooldown:O,setCooldown:k}),w.duel.player1.id&&w.duel.player2.id&&m.jsx(n1,{turn:w,players:h,rollForDuel:Jv,endDuel:Zv}),(i==null?void 0:i.uid)===u.turn.player&&u.turn.drawn<u.rules.drawAmount&&m.jsx(qk,{drawCards:eE}),Ne&&m.jsx(Qk,{cardState:Ne,table:u,localPlayer:Q,playCard:w.temporary.hand.length?Pf:or,discardCard:w.temporary.hand.length?xf:bs,fromWormhole:!!w.temporary.hand.length,selectedKeeperGroup:D,selectedPlayerGroup:T,selectedRuleGroup:S}),Nt&&m.jsx(t1,{cardState:Nt,table:u,localPlayer:Q,playEffect:fE,startDuel:Xv,discardKeeper:tE,inspectKeeper:g,selectedKeeperGroup:D,selectedPlayerGroup:T}),Q.hand.length&&!w.temporary.hand.length||!Tl()?m.jsx(bc,{selectCard:A,hand:Q.hand}):null,w.temporary.hand.length>0&&Tl()&&m.jsx(bc,{selectCard:A,hand:w.temporary.hand}),m.jsx(Jk,{table:u,localPlayer:Q,showCardPiles:j,endTurn:yE}),u.pending!==!1&&u.pending!==!0&&m.jsx(Wt,{position:"PENDING",cardState:{state:u.pending,index:0}}),u.counter!==!1&&u.counter!==!0&&m.jsx(Wt,{position:"PENDING",cardState:{state:u.counter,index:0}}),z&&m.jsx(Wt,{position:"PREVIOUS_PENDING",cardState:{state:z,index:0}}),j.pure&&m.jsx(nm,{type:"PURE",pile:y.pure,drawSpecificCard:kf}),j.discard&&m.jsx(nm,{type:"DISCARD",pile:y.discard,drawSpecificCard:kf})]})}function y1(){const{setUser:t}=P.useContext(rt),e=Jt(),n=P.useRef(null),r=P.useRef(null);return m.jsx("div",{className:"main_menu",children:m.jsxs("form",{className:"menu",method:"",children:[m.jsxs("div",{className:"form_container__inner",children:[m.jsx("label",{htmlFor:"username",children:"Username"}),m.jsx("input",{id:"username",ref:n,className:"form_input",type:"text",name:"username",placeholder:"Enter Username.."})]}),m.jsxs("div",{className:"form_container__inner",children:[m.jsx("label",{htmlFor:"password",children:"Password"}),m.jsx("input",{id:"password",ref:r,className:"form_input",type:"password",name:"password",placeholder:"Enter Password.."})]}),m.jsx("hr",{}),m.jsxs("div",{className:"form_container__inner",children:[m.jsx("button",{className:"menu_link",type:"button",onClick:()=>{var a;const s=n.current,i=r.current;if(!s||!i)return;oo.testUserSignIn(n==null?void 0:n.current.value,(a=r.current)==null?void 0:a.value,t)&&e("/lobby")},children:"Sign In"}),m.jsx("p",{style:{alignSelf:"center"},children:"Or"}),m.jsx("button",{className:"menu_link",type:"button",children:"Create Account"})]})]})})}const{destroyRoom:om,leaveRoom:_1}=Sl,{uploadStats:Lo}=oo;function g1({winGameStats:t}){const{winner:e,round:n,goal:r}=t,{joinedGameID:s,setJoinedGameID:i,db:o,user:a,setUser:l}=P.useContext(rt),u=Jt(),[d,c]=P.useState(!1);Vw(()=>{y(),(a==null?void 0:a.uid)===s&&om(o,s,i)}),P.useEffect(()=>{if(!a||!e||!n||!r)return u("/account");f()},[]);const f=async()=>{a&&(y(),(a==null?void 0:a.uid)===s?await om(o,s,i):_1(o,s,a,i),c(()=>!0))},y=()=>{if(!a||!r)return;if((e==null?void 0:e.user.uid)===a.uid){const C=a!=null&&a.goalWins[`${r.id}`]?(a==null?void 0:a.goalWins[`${r==null?void 0:r.id}`])+1:1,h=a.stats.wins+1;Lo("GOALWON",o,{cardKey:r==null?void 0:r.id,cardNum:C},a.uid),Lo("WINS",o,{amount:h},a.uid),l(p=>{if(p)return{...p,cardCatalog:Object.assign({},p.cardCatalog,{[`${r.id}`]:C}),goalWins:Object.assign({},p.goalWins,{[`${r.id}`]:C}),stats:Object.assign({},p.stats,{wins:h})}})}const v=a.stats.totalRounds+n,w=a.stats.played+1;Lo("ROUNDS",o,{amount:v},a.uid),Lo("PLAYED",o,{amount:w},a.uid),l(C=>{if(C)return{...C,stats:Object.assign({},C.stats,{played:w,totalRounds:v})}})};return m.jsxs(m.Fragment,{children:[m.jsx(Lr,{}),m.jsx("div",{className:"popup",children:m.jsxs("div",{className:"duel_group",children:[m.jsx(Wt,{cardState:{state:r??{},index:0},position:"SELECT"}),m.jsxs("div",{className:"duel_group__middle flex_j",children:[m.jsxs("div",{children:[m.jsxs("h1",{children:[e==null?void 0:e.user.username," Wins!"]}),m.jsxs("h2",{children:["in ",n," rounds"]})]}),m.jsx("button",{className:`play_btn__card flipped ${d?"":"disabled"}`,onClick:()=>{d&&u("/account")},children:"Continue"})]})]})}),m.jsx(bc,{hand:(e==null?void 0:e.keepers)??[],selectCard:()=>null})]})}const v1=["living_subtype","rune_subtype","equipment_subtype","ghost"],{changeName:E1,changeIcon:C1}=oo;function w1(){const{user:t,db:e,setUser:n}=P.useContext(rt),r=Jt(),s=P.useRef(null),[i,o]=P.useState(!1);P.useEffect(()=>{if(!t)return r("/")},[]);const a=(f,y)=>{if(!t)return;const v=f/y;return isNaN(v)?0:v.toFixed(2)},l=()=>{if(!t)return;const f=t.stats.wins/t.stats.played;return isNaN(f)?0:f.toFixed(2)},u=()=>{if(!t)return;const f=[];for(const y in t.cardCatalog)f.push(t.cardCatalog[y]);return f.reduce((y,v)=>y+v,0)},d=()=>{if(!t)return;let f=0;for(const y in t==null?void 0:t.cardCatalog)(t==null?void 0:t.cardCatalog[y])>0&&f++;return f},c=()=>v1.map((f,y)=>{let v=!1;return f==="ghost"&&!(t!=null&&t.goalWins.G30)&&(v=!0),m.jsx("button",{className:`icon_pick ${v?"locked":""}`,onClick:async()=>{!t||v||(await C1(e,f,t==null?void 0:t.uid),n(w=>{if(w)return{...w,icon:f}}))},children:m.jsx("div",{className:`${f} ready_mark icon`})},`icon__${y}`)});return m.jsxs("div",{className:"main_menu",style:{flexDirection:"row",gap:"5rem"},children:[m.jsx(Af,{pageType:"ACCOUNT"}),m.jsx(Lr,{}),m.jsx("div",{className:"menu",children:m.jsxs("div",{children:[m.jsxs("h2",{style:{textAlign:"center"},children:[t==null?void 0:t.username,m.jsx("span",{className:`icon ${t==null?void 0:t.icon} ready_mark`})]}),m.jsx("hr",{className:"card_hr__thick"}),m.jsxs("ul",{className:"stat_list",children:[m.jsxs("div",{className:"stat_list",children:[m.jsxs("div",{className:"li_header stat_list",children:[m.jsx("li",{children:"Games"}),m.jsx("hr",{className:"card_hr__thin"})]}),m.jsxs("li",{children:["Won: ",m.jsx("span",{children:t==null?void 0:t.stats.wins})]}),m.jsxs("li",{children:["Played: ",m.jsx("span",{children:t==null?void 0:t.stats.played})]}),m.jsxs("li",{children:["Win Ratio: ",m.jsx("span",{children:l()})]})]}),m.jsxs("div",{className:"stat_list",children:[m.jsxs("div",{className:"stat_list li_header",children:[m.jsx("li",{children:"Rounds"}),m.jsx("hr",{className:"card_hr__thin"})]}),m.jsxs("li",{children:["Average: ",m.jsx("span",{children:a((t==null?void 0:t.stats.totalRounds)??0,(t==null?void 0:t.stats.played)??0)})]}),m.jsxs("li",{children:["Total: ",m.jsx("span",{children:t==null?void 0:t.stats.totalRounds})]})]}),m.jsxs("div",{className:"stat_list",children:[m.jsxs("div",{className:"stat_list li_header",children:[m.jsx("li",{children:"Cards Played"}),m.jsx("hr",{className:"card_hr__thin"})]}),m.jsxs("li",{children:["Unique: ",m.jsx("span",{children:d()})]}),m.jsxs("li",{children:["Average: ",m.jsx("span",{children:a(u()??0,(t==null?void 0:t.stats.played)??0)})]}),m.jsxs("li",{children:["Total: ",m.jsx("span",{children:u()})]})]})]})]})}),m.jsxs("div",{className:"menu account_options",children:[m.jsxs("div",{children:[m.jsx("h2",{style:{textAlign:"center",marginBottom:"1rem"},children:"Choose Icon"}),m.jsx("div",{className:"icon_picker",children:c()})]}),m.jsxs("div",{className:"username_form",children:[i&&m.jsx("input",{ref:s,style:{padding:"0.25rem"},className:"form_input",type:"text",maxLength:16,placeholder:"Username.."}),m.jsx("button",{className:"menu_link",onClick:()=>{var f;if(!i)return o(()=>!0);!s.current||!t||s.current.value.length<3||(E1(e,(f=s.current)==null?void 0:f.value,t==null?void 0:t.uid),o(()=>!1),n(y=>{var v;if(y)return{...y,username:((v=s.current)==null?void 0:v.value)??"Anon"}}))},children:"Change Name"})]})]})]})}function R1({filterByType:t,filterByWin:e,filter:n,playOrWon:r,completionPercentage:s}){return m.jsx("div",{className:"sidebar_container",children:m.jsxs("ul",{children:[m.jsxs("li",{className:`maintype_li ${n?"":"selected"}`,onClick:()=>t(""),children:[s,"% Completion"]}),m.jsxs("section",{className:"keeper_section",children:[m.jsx("li",{className:`maintype_li ${n==="KEEPER"?"selected":""}`,onClick:()=>t("KEEPER"),children:"Keepers"}),m.jsx("li",{className:`subtype_li ${n==="LIVING"?"selected":""}`,onClick:()=>t("LIVING"),children:"- Living"}),m.jsx("li",{className:`subtype_li ${n==="RUNE"?"selected":""}`,onClick:()=>t("RUNE"),children:"- Rune"}),m.jsx("li",{className:`subtype_li ${n==="EQUIPMENT"?"selected":""}`,onClick:()=>t("EQUIPMENT"),children:"- Equipment"})]}),m.jsxs("section",{className:"goal_section",children:[m.jsx("li",{className:`maintype_li ${n==="GOAL"?"selected":""}`,onClick:()=>t("GOAL"),children:"Goals"}),m.jsx("li",{className:`subtype_li ${n==="GOAL"&&r==="PLAY"?"selected":""}`,onClick:()=>e(!1),children:"- Played"}),m.jsx("li",{className:`subtype_li ${n==="GOAL"&&r==="WON"?"selected":""}`,onClick:()=>e(!0),children:"- Won"})]}),m.jsxs("section",{className:"rule_section",children:[m.jsx("li",{className:`maintype_li ${n==="RULE"?"selected":""}`,onClick:()=>t("RULE"),children:"Rules"}),m.jsx("li",{className:`subtype_li ${n==="LOCATION"?"selected":""}`,onClick:()=>t("LOCATION"),children:"- Location"}),m.jsx("li",{className:`subtype_li ${n==="BASIC"?"selected":""}`,onClick:()=>t("BASIC"),children:"- Basic"})]}),m.jsx("section",{className:"action_section",children:m.jsx("li",{className:`maintype_li ${n==="ACTION"?"selected":""}`,onClick:()=>t("ACTION"),children:"Actions"})}),m.jsx("section",{className:"counter_section",children:m.jsx("li",{className:`maintype_li ${n==="COUNTER"?"selected":""}`,onClick:()=>t("COUNTER"),children:"Counters"})}),m.jsx("section",{className:"creeper_section",children:m.jsx("li",{className:`maintype_li ${n==="CREEPER"?"selected":""}`,onClick:()=>t("CREEPER"),children:"Creepers"})})]})})}function S1({isLocked:t}){return m.jsx("div",{className:`card_back card ${t?"card_fade":""}`,children:m.jsx("p",{className:"card_back__title",children:"Runeflux"})})}function I1(){const{user:t}=P.useContext(rt),e=Jt(),[n,r]=P.useState(""),[s,i]=P.useState("PLAY");P.useEffect(()=>{if(!t)return e("/")},[]);const o=c=>{i(()=>"PLAY"),r(()=>c)},a=(c=!1)=>{c&&r(()=>"GOAL"),i(()=>c?"WON":"PLAY")},l=()=>{if(!t)return 0;let c=0;for(const f in t==null?void 0:t.cardCatalog)(t==null?void 0:t.cardCatalog[f])>0&&c++;return c?Math.round(c/Dc.length*100):0},u=c=>t?s==="PLAY"?(t==null?void 0:t.cardCatalog[`${c.id}`])>0:t.goalWins[`${c.id}`]?(t==null?void 0:t.goalWins[`${c.id}`])>0:!1:0,d=()=>{if(t)return Dc.map((c,f)=>{if(!(n&&c.type!==n&&c.subtype!==n))return u(c)?m.jsx(Wt,{position:"CATALOG",cardState:{state:c,index:f}},`catalog_card__${f}`):m.jsx(S1,{isLocked:!0},`catalog_card__locked_${f}`)})};return m.jsxs("div",{className:"main_menu",children:[m.jsx(Lr,{}),m.jsx(Af,{pageType:"CATALOG"}),m.jsx(R1,{filter:n,playOrWon:s,filterByType:o,filterByWin:a,completionPercentage:l()}),m.jsx("div",{className:"catalog",children:d()})]})}function A1(){const t=Jt();return P.useEffect(()=>{t("/")},[]),m.jsx("div",{children:"Error 404"})}const T1=H_(Pk);function N1(){const[t,e]=P.useState(),[n,r]=P.useState(""),[s,i]=P.useState({winner:null,round:0,goal:null}),o=TT(T1,"https://flux-bbbdc-default-rtdb.europe-west1.firebasedatabase.app/"),a=Lk();return m.jsx(Kw,{basename:"runeflux",children:m.jsx(rt.Provider,{value:{user:t,setUser:e,db:o,auth:a,joinedGameID:n,setJoinedGameID:r},children:m.jsxs(Mw,{children:[m.jsx(en,{path:"/",element:m.jsx(Mk,{})}),m.jsx(en,{path:"/lobby",element:m.jsx(Hk,{})}),m.jsx(en,{path:"/game",element:m.jsx(m1,{setWinGameStats:i})}),m.jsx(en,{path:"/login",element:m.jsx(y1,{})}),m.jsx(en,{path:"/gameover",element:m.jsx(g1,{winGameStats:s})}),m.jsx(en,{path:"/account",element:m.jsx(w1,{})}),m.jsx(en,{path:"/catalog",element:m.jsx(I1,{})}),m.jsx(en,{path:"*",element:m.jsx(A1,{})})]})})})}_u.createRoot(document.getElementById("root")).render(m.jsx(ym.StrictMode,{children:m.jsx(N1,{})}));
